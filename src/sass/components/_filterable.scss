// -----------------------------------
// Filterable
// -----------------------------------

// - - - - - - - - - - - - - - - - - -
// .list-item common
// - - - - - - - - - - - - - - - - - -
.list {
	position: relative;
	.list-item, .list-group {
		// position: static;
		position: absolute;
		display: block;
		top: 0; left: 0;
		transform: translate3d(0,0,0);
		transform-style: preserve-3d;
	}
}
// #bundle-list (FilterableListView)
// - - - - - - - - - - - - - - - - - -
#bundle-list {
	.list-item {
		visibility: visible;
		opacity: 1;
		// max-height: 1.5em;
	}
	&.collapsed {
		.list-item {
			max-height: 0;// watch out!!!
		}
		.list-item:not(.selected) {
			visibility: hidden;
			opacity: 0;
			// max-height: 0;
		}
		// .list-item.selected {
		// 	visibility: visible;
		// 	opacity: 1;
		// 	max-height: 1.5em;
		// }
	}
}
// #keyword-list (GroupingListView)
// - - - - - - - - - - - - - - - - - -
#keyword-list {
	.list-item, .list-group {
		visibility: visible;
		opacity: 1;
		height: auto;
	}
	&.collapsed {
		.list-item.excluded, .list-group.excluded {
			visibility: hidden;
			opacity: 0;
			height: 0;
		}
	}
}

// -----------------------------------
// Transitions
// -----------------------------------
%wait-move-fadein {
	// wait, expand, fadein (3 steps)
	transition:
		tx(visibility, 3, 0, step-start),
		tx(opacity, 1, 2),
		tx(transform, 1, 1);
	// background-color: transparentize(blue, 0.95);
}
%fadeout-move-wait {
	// fadeout, collapse, wait (3 steps)
	transition:
		tx(visibility, 3, 0, step-end),
		tx(opacity, 1, 0),
		tx(transform, 1, 1, step-end);
	// background-color: transparentize(red, 0.95);
}
%move-fadein {
	// expand, fadein (2 steps)
	transition:
		tx(visibility, 2, 0, step-start),
		tx(opacity, 1, 1),
		tx(transform, 1, 0);
	// background-color: transparentize(blue, 0.75);
}
%fadeout-move {
	// fadeout, collapse (2 steps)
	transition:
		tx(visibility, 2, 0, step-end),
		tx(opacity, 1, 0),
		tx(transform, 1, 1);
	// background-color: transparentize(red, 0.75);
}

#bundle-list {
	.list-item {
		@extend %wait-move-fadein;
	}
	&.collapsed {
		.list-item:not(.selected) {
			@extend %fadeout-move-wait;
		}
	}
	&.collapsed-changed {
		// &:not(.collapsed) {
		// 	.list-item {
		// 		// &, &.excluded {
		// 			@extend %move-fadein;
		// 		// }
		// 	}
		// }
		&.collapsed {
			.list-item {
				// &, &.excluded {
					@extend %fadeout-move;
				// }
			}
		}
	}
	&.skip-transitions {
		.list-item {
			&, * {
				@include skip_transitions;
			}
		}
	}
}

// - - - - - - - - - - - - - - - - - -
// GroupingListView
// - - - - - - - - - - - - - - - - - -

#keyword-list  {
	.list-group, .list-item {
		@extend %wait-move-fadein;
	}
	&.collapsed {
		.list-group, .list-item {
			&.excluded {
				@extend %fadeout-move-wait;
			}
		}
	}
	&.collapsed-changed {
		// &:not(.collapsed) {
		// 	.list-group, .list-item {
		// 		// &, &.excluded {
		// 			@extend %move-fadein;
		// 		// }
		// 	}
		// }
		&.collapsed {
			.list-group, .list-item {
				// &, &.excluded {
					@extend %fadeout-move;
				// }
			}
		}
	}
	&.skip-transitions {
		.list-group, .list-item {
			&, * {
				@include skip_transitions;
			}
		}
	}
}
