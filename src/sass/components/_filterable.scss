$collapse-ease: $ease;
//$collapse-ease: ease-out;

//
// Filterable
//
.list.filterable {
	position: relative;
	.list-item {
		display: block;
//		-webkit-transition: translate3d(0,0,0);
	}
}

//#bundle-list, #keyword-list {
//	height: auto;
//	transition-property: min-height, height;
//	transition-duration: ($delay * 2 + $duration);
//	transition-timing-function: step-end;
//	&.collapsed {
//		transition-timing-function: step-start;
//	}
//}

#bundle-list {
	.list-item {
		max-height: 1.5em;
		visibility: visible;
		opacity: 1;
	}
	&.collapsed {
		.list-item {
			max-height: 0;// watch out!!!
		}
		.list-item:not(.selected) {
			// max-height: 0;
			visibility: hidden;
			opacity: 0;
		}
		// .list-item.selected {
		// 	max-height: 1.5em;
		// 	visibility: visible;
		// 	opacity: 1;
		// }
	}
}
#bundle-list {
	.list-item {
		// wait, expand, fadein
		transition-property: visibility, opacity, transform;//max-height;
		transition-timing-function: step-start, $collapse-ease, $collapse-ease;
		transition-duration: $delay * 2 + $duration - 0.001s, $duration - 0.001s, $duration - 0.001s;
		transition-delay: 0s + 0.001s, $delay * 2 + 0.001s, $delay * 1 + 0.001s;
	}
	&.collapsed {
		.list-item:not(.selected) {
			// fadeout, collapse, wait
			transition-timing-function: step-end, $collapse-ease, $collapse-ease;
			transition-delay: 0s + 0.001s, 0s + 0.001s, $delay * 1 + 0.001s;
		}
	}
}

//
// Grouped
//
.list.grouped {
	.list-group {
		display: block;
//		-webkit-transition: translate3d(0,0,0);
	}
}
#keyword-list {
	.list-item, .list-group {
		visibility: visible;
		opacity: 1;
//		max-height: none;
	}
//	.list-item {
//		max-height: 1.5em;
//	}
//	.list-group {
//		height: 2em;
//	}
	&.collapsed {
		.list-item.excluded, .list-group.excluded {
			visibility: hidden;
			opacity: 0;
//			max-height: 0;
		}
//		.list-item.excluded {
//			max-height: 0;
//		}
//		.list-group.excluded {
//			height: 0;
//		}
	}
}

#keyword-list  {
	.list-group, .list-item {
		// wait, expand, fadein
		transition-property: visibility, opacity, transform;
		transition-timing-function: step-start, $collapse-ease, $collapse-ease;
		transition-duration: $delay * 2 + $duration - 0.001s, $duration - 0.001s, $duration - 0.001s;
		transition-delay: 0s + 0.001s, $delay * 2 + 0.001s, $delay * 1 + 0.001s;
//		transition:
//			visibility ($delay*2 + $duration) ($delay*0) step-start,
//			opacity $duration ($delay*2) $collapse-ease,
//			transform $duration ($delay*1) $collapse-ease;
	}
	&.collapsed {
		.list-group.excluded, .list-item.excluded {
			// fadeout, collapse, wait
			transition-timing-function: step-end, $collapse-ease, $collapse-ease;
			transition-delay: 0s + 0.001s, 0s + 0.001s, $delay * 1 + 0.001s;
//			transition:
//				visibility ($delay*2 + $duration) ($delay*0) step-end,
//				opacity $duration ($delay*0) $collapse-ease,
//				transform $duration ($delay*1) $collapse-ease;
		}
	}
}

#keyword-list.skip-transitions {
	.list-group, .list-item {
		@extend %skip-transitions;
	}
}
#bundle-list.skip-transitions {
	.list-item {
		@extend %skip-transitions;
	}
}
