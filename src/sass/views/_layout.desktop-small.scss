// ///////////////////////////////////
// media query : $desktop-small
// ///////////////////////////////////

@include media(desktop-small) {
	
	// -----------------------------------
	// navigation
	// -----------------------------------
	#navigation {
		top: 0;//$header_height_landscape;
		padding-top: $header_height_landscape;
		max-width: $page_width_large;
	}

	// nav_list
	// -----------------------------------
	%nav_list {
		transform: move(0, #{$nav_height_landscape - 1.5rem});
	}
	.with-bundle %nav_list {
		transform: move(0, 0);
	}

	// bundle-list
	// - - - - - - - - - - - - - - - - - -
	#bundle-list {
		width: $main_width_large - $aside_width_large;
	}
	.with-bundle #bundle-list {
		width: $aside_width_large;
	}

	// keyword-list
	// - - - - - - - - - - - - - - - - - -
	#keyword-list {
		width: $aside_width_large;
	}
	.with-bundle.default-layout #keyword-list {
		transform: move(0, #{$nav_height_landscape - 0.5rem});
	}
	.with-bundle.default-layout .container-expanded #keyword-list {
		transform: move(0, 0);
	}

	// keyword-list list-group
	// - - - - - - - - - - - - - - - - - -
	.default-layout #keyword-list .list-group {
		width: calc(100% - #{$gutter});
	}
	.with-bundle .navigation:not(.container-expanded) #keyword-list .list-group {
		height: 1.5rem;
		span {
			transform: move(0, 0);
		}
	}

	// NOTE: .container-expanded with empty-item alignment
	$select_state: with-bundle;

	// site-name
	// - - - - - - - - - - - - - - - - - -
	.#{$select_state} .container-expanded #site-name {
		transform: move(-1px, 0);
	}

	// transform-wrappers
	// -----------------------------------
	.transform-wrapper {
		transform-style: preserve-3d;
		transform: move(0, 0);
	}

	// site-name-wrapper
	// - - - - - - - - - - - - - - - - - -
	// #site-name-wrapper {
	// 	height: $nav_height_landscape;
	// }
	
	// bundle-list-wrapper
	// - - - - - - - - - - - - - - - - - -
	.#{$select_state} .container-expanded #bundle-list-wrapper {
		transform: move($aside_width_large, 0);
	}
	
	// FIXME
	$_fixme_kw_left: $main_width_large;
	$_fixme_empty_width: $page_width_large - ($hu*2 + 7px);
	$_fixme_empty_padding: $aside_width_large - ($hu*2 + 7px);
	
	// keyword-list-wrapper
	// - - - - - - - - - - - - - - - - - -
	#keyword-list-wrapper {
		left: $_fixme_kw_left; // FIXME
	}
	.with-media #keyword-list-wrapper {
		transform: move(-$_fixme_kw_left, 0); // FIXME
	}
	.#{$select_state} .container-expanded #keyword-list-wrapper {
		transform: move(0, 0);
	}
	
	// -----------------------------------
	// content
	// -----------------------------------
	#content {
	// 	padding-top: $nav_height_landscape + $header_height_landscape;
	}
	
	// image-carousel
	// - - - - - - - - - - - - - - - - - -
	.media-carousel {
		min-width: $page_width_large;
		.carousel-item {
			left: calc(50% - #{$page_width_large/2});
			width: $page_width_large;
		}
		.carousel-item.empty-item {
			width: $_fixme_empty_width; // FIXME
			padding-right: $_fixme_empty_padding; // FIXME
			padding-left: 0;
		}
	}
	.default-layout .media-carousel {
		top: $nav_height_landscape + $header_height_landscape - 3rem;
		.carousel-item.media-item {
			// padding-left: 0;//$aside_width_large;
			// padding-right: 0;
			margin-left: $aside_width_large;
			// margin-right: 0;
			// width: auto;
			// max-width: $main_width_large;
			width: $main_width_large;
		}
	}
	
	.default-layout .media-carousel .playable-renderer {
		// Closest to 680px at 16:9 -> 672x378
		// padding-right: 8px; // 680 - 672
		padding-right: $hu*2;
		// .content { max-width: 672px; }
	}
	.sequence-renderer .progress-meter {
		// top: 0; left: 100%; margin-left: $hu/2;
		// top: 0; left: -$hu * 2.5;
		top: 0; right: -$hu*2;
	}
	
	
	// .default-layout .media-carousel {
	// 	// .carousel-item.empty-item .content {}
	// 	.carousel-item.empty-item.selected .content {
	// 		// transition-property: 		transform, 					opacity;
	// 		// transition-timing-function:	step-start, 				cubic-bezier(0.2, 1.75, 0.2, 1.75);
	// 		// transition-delay: 			#{$delay*1 - 0.001s},		#{$delay*0 + 0.001s};
	// 		// transition-duration:		#{$duration*0 + 0.001s},	#{$duration*3 - 0.001s};
	// 		// transition: tx(transform, 1, 1), tx(opacity, 3, 0);
	// 	}
	// 	// FIXME: .container-expanded animation
	// 	// 0.500, -0.600, 0.500, 1.60
	// 	&:not(.scrolling) .carousel-item.empty-item.selected .content {
	// 		// transition-timing-function:	step-start, cubic-bezier(0.25, -0.75, 0.25, -0.75);
	// 		transform: move(0, 0);
	// 		opacity: 1;
	// 		transition: 
	// 			tx(transform, 1, 0, step-end),
	// 			tx(opacity, 2, 0, cubic-bezier(0.2, -0.75, 0.2, -0.75));
	// 			// tx(opacity, 3, 0, cubic-bezier(0.2, -0.75, 0.3, -0.75));
	// 	}
	// 	&.disabled .carousel-item.empty-item.selected .content {
	// 		// transition-timing-function:	step-start, cubic-bezier(0.25, 1.75, 0.25, 1.75);
	// 		transform: move($aside_width_large, 0);
	// 		opacity: 0.5;
	// 		transition: 
	// 			tx(transform, 1, 0, step-end),
	// 			tx(opacity, 2, 0, cubic-bezier(0.2, 1.75, 0.2, 1.75));
	// 			// tx(opacity, 3, 0, cubic-bezier(0.2, 1.75, 0.3, 1.75));
	// 	}
	// }
	.disabled .carousel-item.empty-item .content {
		// transition: tx(transform, 1, 1), tx(opacity, 3, 0);
		transition: tx(transform, 1, 0, step-end), tx(opacity, 0.5, 0) !important;
	}
	:not(.scrolling) .carousel-item.empty-item.selected .content {
		transform: move(0, 0); //opacity: 1;
	}
	.disabled .carousel-item.empty-item.selected .content {
		transform: move($aside_width_large, 0); //opacity: 0.5;
	}
	.container-changed .carousel-item.empty-item.selected .content {
		opacity: 0 !important;
		// transition: tx(transform, 1, 0, step-end), tx(opacity, 1, 0) !important;
	}
	// .container-expanded.container-changed .carousel-item.empty-item.selected .content {
	// 	// transform: move($aside_width_large, 0);
	// 	transition: tx(transform, 1, 0, step-end), tx(opacity, 1, 0) !important;
	// }
	// .container-collapsed.container-changed .carousel-item.empty-item.selected .content {
	// 	// transform: move(0, 0);
	// 	transition: tx(transform, 1, 0, step-end), tx(opacity, 1, 0) !important;
	// }
	// .container-expanded.container-changing .carousel-item.empty-item .content {
	// 	background-color: rgb(255, 127, 127);
	// }
	// .container-collapsed.container-changing .carousel-item.empty-item .content {
	// 	background-color: rgb(127, 127, 255);
	// }
	// .container-expanded.container-changed .carousel-item.empty-item .content {
	// 	background-color: rgb(0, 0, 255);
	// }
	// .container-collapsed.container-changed .carousel-item.empty-item .content {
	// 	background-color: rgb(255, 0, 0);
	// }
	
	// media-caption-stack
	// - - - - - - - - - - - - - - - - - -
	.media-caption-stack {
		width: $page_width_large;
		// & > .current, & > .not-current {
		// 	bottom: auto;
		// 	top: 0;
		// }
		.content {
			margin-left: $aside_width_large;
			width: $main_width_large;
		}
	}
	.default-layout .media-caption-stack {
		top: $header_height_landscape;
		margin-top: 0;
		transform: move(0, 0);
	}
	.default-layout .container-expanded .media-caption-stack {
		transform: move(0, $nav_collapse_extra);
	}
	
	// media-dotnav
	// - - - - - - - - - - - - - - - - - -
	.media-dotnav {
		// bottom: 0.75rem;
		width: $page_width_large;
		// padding-left: $aside_width_large + $hu;
	}
}
