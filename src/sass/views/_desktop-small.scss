// ///////////////////////////////////
// media query : $desktop-small
// ///////////////////////////////////

// layout variables
// - - - - - - - - - - - - - - - - - -
$nav_top_land: 2rem;
$nav_top_without_bundle: 0;//4.5rem;
$nav_height_land: 11rem;

@include media(desktop-small) {

	// #content:after {
	// 	top: $nav_top_land + $nav_height_land;
	// 	max-width: $page_width_large;
	// }
	#container {
		min-width: $page_width_large;
	}

	#navigation {
		max-width: $page_width_large;
		min-height: $nav_height_land;
		margin-top: $nav_top_land;
	}

	#content {
		margin-top: $nav_top_land;
	}

	// ///////////////////////////////////
	// navigation children
	// ///////////////////////////////////

	// nav_list
	// -----------------------------------
	%nav_list {
		transform: move();
		// transform: move(0, 0.1px);
	}
	// .with-bundle %nav_list {
	// 	transform: move();
	// }
	.transform-wrapper {
		transform: move();
		// transform-style: preserve-3d;
	}

	// bundle-list
	// ===================================
	#bundle-list {
		width: $aside_width_large;
		// padding-top: $nav_height_land;
	}
	// &.with-bundle #bundle-list {
	// 	padding-top: 1.5rem;
	// }
	// &.without-bundle #bundle-list {
	// 	padding-top: $nav_top_without_bundle;
	// }

	// bundle-list-wrapper
	// - - - - - - - - - - - - - - - - - -
	#bundle-list-wrapper {
		transform: moveX($aside_width_large);
	}
	&.with-bundle #bundle-list-wrapper {
		transform: moveX();
	}
	&.with-bundle .container-expanded #bundle-list-wrapper {
		transform: moveX($aside_width_large);
	}

	// keyword-list
	// ===================================
	#keyword-list {
		//NOTE: clearance for .playable-renderer children mouse events
		width: $aside_width_large;// - $gutter;
		// padding-top: $nav_height_land;// - 0.25rem;
		// transform: moveY(-0.25rem);
		// margin-top: -0.5rem;
	}
	&.with-bundle .container-collapsed #keyword-list {
		padding-top: $nav_height_land - 1rem;
	}
	// &.with-bundle .container-expanded #keyword-list {
	// 	padding-top: 1.5rem;
	// }
	// &.without-bundle #keyword-list {
	// 	padding-top: $nav_top_without_bundle;// - 0.25rem;
	// }

	// keyword-list-wrapper
	// - - - - - - - - - - - - - - - - - -
	#keyword-list-wrapper {
		left: $main_width_large;
	}
	&.with-media #keyword-list-wrapper {
		transform: moveX(-$main_width_large);
	}
	&.with-bundle .container-expanded #keyword-list-wrapper {
		transform: moveX();
	}

	// keyword-list list-group
	// - - - - - - - - - - - - - - - - - -
	#keyword-list .list-group {
		//NOTE: compensate for #keyword-list clearance (c.f note above)
		width: 100%;
		height: 0;
	}
	/* NOTE: .list-group .label moves horizontally */
	&.with-bundle .navigation:not(.container-expanded) #keyword-list .list-group {
		height: 1.5rem;
		.label {
			transform: moveX();
		}
	}

	// site-name
	// ===================================
	&.with-bundle .container-expanded #site-name {
		transform: moveX();
	}

	// site-name-wrapper
	// - - - - - - - - - - - - - - - - - -
	#site-name-wrapper {
		width: $aside_width_large;
		transform: moveY();
	}

	// article-button
	// ===================================
	&.with-bundle .container-expanded .article-button {
		transform: moveX();
		a {
			visibility: visible;
			opacity: 1;
			transition: tx(visibility, 3, 0, step-start), tx(opacity, 1, 0), tx(color, 1, 1);
		}
	}

	// article-list-wrapper
	// - - - - - - - - - - - - - - - - - -
	#article-list-wrapper {
		// display: inline-block;
		width: $aside_width_large;
	}
	// &.route-bundle-list,
	// &.route-root {
	// 	#article-list-wrapper {
	// 		transform: moveY(5rem);
	// 	}
	// }

	// Common
	// ===================================
	&.without-article.without-bundle {
		#bundle-list, #keyword-list {
			padding-top: 4.5rem;//$nav_top_without_bundle;
		}
		#site-name-wrapper, #article-list-wrapper {
			transform: moveY(3.0rem);//$nav_top_without_bundle);
		}
	}

	// nav-graph
	// ===================================
	#nav-graph {
		left: $aside_width_large;
		width: $main_width_large;
	}

	// ///////////////////////////////////
	// content
	// //////////////////////////////////

	// media-carousel
	// ===================================

	.media-carousel {
		min-width: $page_width_large;
		top: $nav_height_land;

		.carousel-item {
			left: calc(50% - #{$page_width_large/2 + $hu});
			width: $page_width_large;
		}
		// FIXME
		$_fixme_empty_adj: 12px;//7px;
		$_fixme_empty_val: $hu*2 + $_fixme_empty_adj;
		.empty-item {
			// width: $main_width_large;
			width: $page_width_large - ($hu*2 + $_fixme_empty_adj);
			padding-right: $aside_width_large - ($hu*2 + $_fixme_empty_adj);
			padding-left: 0;
		}
		.media-item {
			width: $main_width_large;
			margin-left: $aside_width_large + $hu;
		}
		// .empty-item .content {
			// font-size: 28px;
			// line-height: 30px;
			// @include heading_font(300, 28px, 36px);
		// }
		// .empty-item .content *:first-child {
		// 	margin-top: -4px;
		// }
	}
	// .media-carousel {
	// 	.carousel-item.media-item {
	// 		margin-left: $aside_width_large + $hu;
	// 	}
	// }
	// .carousel-item.empty-item p {
	// 	padding-right: $hu*2;
	// }
	// .disabled .empty-item transitions
	.disabled .carousel-item.empty-item .content {
		// transition: tx(transform, 1, 1), tx(opacity, 3, 0);
		transition: tx(transform, 1, 0, step-end), tx(opacity, 0.5, 0) !important;
	}
	:not(.scrolling) .carousel-item.empty-item.selected .content {
		transform: moveX(); //opacity: 1;
	}
	.disabled .carousel-item.empty-item.selected .content {
		transform: moveX($aside_width_large); //opacity: 0.5;
	}
	.container-changed .carousel-item.empty-item.selected .content {
		opacity: 0 !important;
		// transition: tx(transform, 1, 0, step-end), tx(opacity, 1, 0) !important;
	}

	// overrides carousel.playable.scss
	.playable-renderer {
		&[data-fit-dir] .controls {
		// & > .fullscreen-toggle
			& > .progress-meter {
				top: 0;
				bottom: auto;
				left: auto;
				right: 100%;
				margin: 0 1.5rem 0 0;
			}
		}
		.top-bar {
			-webkit-flex-direction: column;
			-ms-flex-direction: column;
			flex-direction: column;
			// top: -9.5rem; right: -$hu;
			direction: ltr;
			top: 0;
			right: 100%;
			width: auto;
			height: calc(100% + 1rem);
			margin: -0.5rem 1.25rem;
			& > * {
				padding: 0.5rem 0;
				// &:first-child { padding-inline-start: 0; }
				// &:last-child { padding-inline-end: 0; }
			}
		}
	}

	// media-caption-stack
	// ===================================
	.media-caption-stack {
		top: 0; //$nav_top_land;
		margin-top: 0;
		width: $page_width_large;
		@include heading_font(300, 1.999999999rem, 2rem);
		& > .stack-item {
			top: 0;
			bottom: auto;
		}
		.content {
			margin-left: $aside_width_large;
			width: $main_width_large;
		}
		.content p {
			// @include heading_font(300, 1.999999999rem, 1.166666666);
			// @include heading_font(300, 1.999999999rem, 1.25);
		}
	}

	// media-dotnav
	// ===================================
	.media-dotnav {
		width: $page_width_large;
	}

	// article-view
	// ===================================
	.article-view {
		// top: $nav_top_land;
		width: $page_width_large;
		padding-right: $aside_width_large;
	}
}
// end media-query
