// ----------------------
// Vertical flow
// ----------------------
// from: folio.scss @import "compass/layout";
// @include sticky-footer( 6em, "#container", "#container-footer", "#footer" );
// compass-core-1.0.1/stylesheets/compass/layout/_sticky-footer.scss

$footer-height: 6rem;
%page-region {
	margin: 0 auto;
	box-sizing: border-box;
	padding-left: $page-margin-left;
	padding-right: $page-margin-right;
	width: $page-width;
	@include media($desktop-small) {
		width: $page-width-large;
	}
}

// ----------------------
// Container, Header, Footer
// ----------------------

html, body {
	height: 100%;
}
#container {
	width: 100%;
	display: block;
	overflow: hidden;
	min-width: $page-width;
	@include media($desktop-small) {
		min-width: $page-width-large;
	}
}
#header {
	@extend %page-region;
	height: 3rem;
	padding-top: 1.25rem;
	padding-bottom: 0.25rem;
	h3 {
		display: none;
	}
}
#container {
	clear: both;
	min-height: 100%;
	height: auto !important;
	height: 100%;
	margin-bottom: -$footer-height;
}
#footer {
	clear: both;
	position: relative;
	overflow: hidden;
}
#container #container-footer, #footer {
	@extend %page-region;
	height: $footer-height;
}

// ----------------------
// Navigation
// ----------------------

$nav_height: 10rem;
$nav_ease: $ease;
$nav_txZ: 0.1px;
$sitename_height: 4.5rem;

@mixin transform-transition($delay: $delay) {
//	transform-style: preserve-3d;
	transition-property: transform;
	transition-timing-function: $nav_ease;
	transition-duration: $duration - 0.001s;
	transition-delay: $delay + 0.001s;
//	transition: transform $duration $delay $ease;
}
%nav-heading-block {
	min-height: 2rem;
	line-height: 2rem;
	padding-top: 2px;
}

#navigation {
	@extend %page-region;
	position: relative;
	padding-top: 0.75rem;
	min-height: $nav_height + 1.5rem;
//	min-height: $nav_height + 3rem;
	@include media($desktop-small) {
		min-height: $nav_height;
	}
	@include media($ipad-landscape) {
		min-height: $nav_height - 1.5rem;
	}
}

#site-name-wrapper {
	position: relative;
	height: $sitename_height;
}

#site-name {
	position: relative;
	display: inline-block;
	transform: translate3d(-1px, 0, $nav_txZ);
//	transform: translate3d(-$page-margin-left, 0, 0);
	@include transform-transition($delay: $delay * 2);
	@at-root .with-bundle #site-name {
		transform: translate3d(calc(-100% - #{$page-margin-left}), 0, $nav_txZ);
		@include transform-transition($delay: $delay * 0);
	}
	@include heading-font($weight: 600);
	@extend %nav-heading-block;
	color: $link-color;
	padding-right: $hu;
}

#bundle-list-wrapper {
	position: absolute;
	display: inline-block;
//	transform: translate3d(-$page-margin-left, 0, 0);
//	@include transform-transition($delay: $delay * 2);
//	@at-root .with-bundle #bundle-list-wrapper {
//		transform: translate3d(0, 0, 0);
//		@include transform-transition($delay: $delay * 0);
//	}
}

#keyword-list-wrapper {
	position: absolute;
	display: inline-block;
	@include media($ipad-landscape) {
		transform: translate3d(0, 0, 0);
		@include transform-transition($delay: $delay * 0);
		@at-root .with-image #keyword-list-wrapper {
			transform: translate3d(#{-$main-width-large}, 0, 0);
//			@include transform-transition($delay: $delay * 0);
		}
	}
}

#bundle-list {
	position: absolute;
//	left: $page-margin-left;
	width: $main-inner-width - $aside-inner-width;
	transform: translate3d(-1px, 0, $nav_txZ);
	@include transform-transition($delay: $delay * 1);
	@at-root .with-bundle #bundle-list {
		transform: translate3d(-1px, #{-$sitename_height}, $nav_txZ);
	}
	@include media($desktop-small) {
		width: $main-inner-width-large - $aside-inner-width-large;
	}
	@include media($ipad-landscape) {
		width: $main-inner-width-large - $aside-inner-width-large;
		@at-root .with-bundle #bundle-list {
			width: $aside-inner-width-large;
//			width: $aside-width-large - $page-margin-left - $gutter/2;
		}
	}
	@include heading-font();
	@extend %nav-heading-block;
	.list-item {
		width: 100%;
		white-space: nowrap;
		.completed {
			display: none;
		}
//		.name {
//			margin-left: -1px;
//			transform: translateX(-1px);
//		}
		a > em {
			font-style: normal;
			font-weight: 400;
		}
	}
}

#keyword-list {
	position: absolute;
	width: $aside-inner-width;
	transform: translate3d($main-width, 0, $nav_txZ);
	@include transform-transition($delay: $delay * 1);
	@at-root .with-bundle #keyword-list {
		transform: translate3d($main-width, #{-$sitename_height}, $nav_txZ);
	}
	@include media($desktop-small) {
		width: $aside-inner-width-large;
		@at-root #keyword-list {
			transform: translate3d($main-width-large, 0, $nav_txZ);
		}
		@at-root .with-bundle #keyword-list {
			transform: translate3d($main-width-large, #{-$sitename_height}, $nav_txZ);
		}
	}
	@include media($ipad-landscape) {
		width: $aside-inner-width-large;
		@at-root #keyword-list {
			transform: translate3d($main-width-large, 0, $nav_txZ);
		}
		@at-root .with-bundle #keyword-list {
			transform: translate3d($main-width-large, #{$nav_height - $sitename_height - 1.5rem}, $nav_txZ);
		}
	}
	@include paragraph-font($size: 13px);
	.list-item {
		white-space: nowrap;
		max-height: 1.5rem;
//		a {
//			font-size: 13px;
//			line-height: 1.5rem;
//		}
//		width: 100%;
		width: $aside-inner-width;
		@include media($desktop-small) {
			width: $aside-inner-width-large;
		}
	}
	.list-group {
		@include small-caps();
		height: 0;
//		width: calc(100% - #{$gutter});
//		transform-origin: 0.5rem 0;
		width: $aside-inner-width - $gutter;
		@include media($desktop-small) {
			width: $aside-inner-width-large - $gutter;
		}
		span {
			display: block;
			margin-top: 0.5rem;
//			height: 1.5rem;
//			width: 100%;
			transform: translate3d(-100%, -0.5rem, $nav_txZ);
			@include transform-transition($delay: $delay * 1);
		}
	}
	@include media($ipad-landscape) {
		@at-root {
			.with-bundle #keyword-list .list-group {
				height: 2rem !important;
			}
//			#keyword-list .list-group span {
//				transform: translate3d(-100%, 0.5rem, $nav_txZ);
//				@include transform-transition($delay: $delay * 1);
//			}
			.with-bundle #keyword-list .list-group span {
				transform: translate3d(-0.1px, 0, $nav_txZ);
				@include transform-transition($delay: $delay * 1);
			}
			.with-image #keyword-list .list-group span {
				@include transform-transition($delay: $delay * 0);
			}
		}
	}
	@at-root .skip-transitions #keyword-list .list-group span {
		@extend %skip-transitions;
	}
}

#bundle-pager {
	position: absolute;
    display: inline-block;
//	width: 100%;
    top: -1.5rem;
	.button {
		position: absolute;
		margin-left: 0 !important;
		min-width: $aside-inner-width;
	}
	.following-button {
		left: $main-width;
		@include media($desktop-small) {
			left: $main-width-large;
		}
		@include media($ipad-landscape) {
			left: $aside-width-large - $gutter/2;
		}
	}
}

// ----------------------
// Content
// ----------------------

#content {
	position: relative;
	width: 100%;
}

#content .image-carousel {
	position: relative;
	overflow: hidden;
	top: 0;	width: 100%;
	box-sizing: content-box;

	min-width: $page-width;
	@include media($desktop-small) {
		min-width: $page-width-large;
	}
}

#content .label-carousel {
	position: absolute;
	top: -1.5rem;
	width: 100%;
	min-width: $page-width;
}

#content-wrapper {
	@extend %page-region;
	position: absolute;
	left: 0; right: 0;
//	top: 0; bottom: 0;
	top: 1.5rem; bottom: 1.5rem;
}

// ----------------------
// Other content views
// ----------------------

#content-detail {
	position: absolute;
	left: 0; right: 0;
	top: 1.5rem; bottom: 1.5rem;
}
//
//.image-desc-stack {
//	position: absolute;
//	display: block;
//	transform: translate3d(-1px, -1px, 0);
//	top: calc(2rem - #{$nav_height});
////	top: 6rem;
//	width: $main-inner-width - $aside-inner-width + $gutter;
//	p { @include heading-font($size: 22px, $weight: 300, $lead: 2rem); }
//	@include media($desktop-small) {
//		top: 0;
////		top: 13rem;
//		width: $aside-inner-width-large;
//		left: auto;
//		right: $page-margin-right;
//		p { font-size: 20px; }
////		p { @include heading-font($size: 20px, $weight: 300, $lead: 2rem); }
//	}
//	@include media($ipad-landscape) {
//		top: calc(2.5rem - #{$nav_height});
////		top: calc(4rem - 1px);
//		width: $main-inner-width-large;
//		left: $aside-width-large;
//		right: auto;
//		p { font-size: 24px; }
////		p { @include heading-font($size: 24px, $weight: 300, $lead: 2rem); }
//	}
//}
.image-desc-stack {
	position: absolute;
	display: block;
	transform: translate3d(-1px, 0, 0);
    top: -3rem;// height: 1.5rem;
	width: $main-inner-width;
	p {
		@include heading-font($size: 20px, $weight: 300, $lead: 24px);
		margin-bottom: 0.75rem;
		margin-top: 0;
	}
	@include media($desktop-small) {
		top: 0;
		width: $aside-inner-width-large;
		left: auto; right: $page-margin-right;
		p { font-size: 20px; }
	}
	@include media($ipad-landscape) {
		top: calc(11px - #{$nav_height});
		width: $main-inner-width-large;
		left: $aside-width-large; right: auto;
		p { font-size: 24px; }
	}
}

.images-pager {
	position: absolute;
//	top: -1.5rem; height: 1.5rem;
    top: -3rem; height: 1.5rem;
}

// ----------------------
// Carousel
// ----------------------

.label-carousel,
.image-carousel {
	.pan-area {
		position: absolute;
//		left: calc(50% - #{$page-width/2});
//		width: $page-width;
		width: 100%;
		top: 0; bottom: 0;
	}
	.carousel-item {
		box-sizing: border-box;
		padding-left: $page-margin-left;
		padding-right: $page-margin-right;
		width: $page-width;
		left: calc(50% - #{$page-width/2});
	}
	.empty-item {
		box-sizing: border-box;
		padding-left: $page-margin-left;
		padding-right: $gutter/2;
		width: $main-width - 5px;
	}
}
@include media($desktop-small) {
	.carousel {
//		.pan-area {
//			left: calc(50% - #{$page-width-large/2});
//			width: $page-width-large;
//		}
		.carousel-item {
			left: calc(50% - #{$page-width-large/2});
			padding-left: $page-margin-left;
			padding-right: $aside-width-large + $gutter/2;
			width: $page-width-large;
		}
		.empty-item {
			padding-right: $gutter/2;
			width: $main-width-large - 5px;
		}
	}
}
@include media($ipad-landscape) {
	.carousel {
		.carousel-item {
			padding-left: $aside-width-large;
			padding-right: $page-margin-left;
		}
		.empty-item {
			width: $page-width-large;
//			padding-right: $page-margin-left;
			padding-left: $page-margin-left;
			padding-right: $aside-width-large;
			p {
				margin-right: $page-margin-right;
			}
		}
	}
}


