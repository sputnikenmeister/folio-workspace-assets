// ----------------------
// Layout
// ----------------------

@import "../includes/_media-queries";

// ----------------------
// Container, Header, Footer
// ----------------------

%page_region_static,
%page_region_abs {
	width: $page_width;
	@include media($desktop_small) {
		width: $page_width_large;
	}
}
%page_region_abs {
	position: absolute;
	left: calc(50% - #{$page_width/2});
	@include media($desktop_small) {
		left: calc(50% - #{$page_width_large/2});
	}
}
%page_region_static {
	margin: 0 auto;
}

// Footer rules from: folio.scss @import "compass/layout";
// @include sticky_footer( 6em, "#container", "#container-footer", "#footer" );
// compass-core-1.0.1/stylesheets/compass/layout/_sticky-footer.scss
$header_height: 2.25rem;
$footer_height: 4rem;
$nav_height_landscape: 9rem;
$nav_height_portrait: 12rem;

html, body {
	height: 100%;
}
#container {
	width: 100%;
	height: 100%;
	display: block;
	overflow: hidden;
	min-width: $page_width;
	@include media($desktop_small) {
		min-width: $page_width_large;
	}
}
//#header {
//	@extend %page_region_static;
//	height: 2.25rem;
//	h3 {
//		display: none;
//	}
//}
//#container {
//	clear: both;
//	min-height: 100%;
//	height: auto !important;
//	height: 100%;
//	margin-bottom: -$footer_height;
//}
//#footer {
//	clear: both;
//	position: relative;
//	overflow: hidden;
//	.copyright {
//		display: none;
//	}
//}
//#container #container-footer, #footer {
//	@extend %page_region_static;
//	height: $footer_height;
//}

#navigation {
	@extend %page_region_static;
	position: relative;
	top: $header_height;
//	position: absolute;
}

#content {
	box-sizing: border-box;
	position: absolute;
//	position: relative;
//	overflow: hidden;
	width: 100%;
	top: 0;
//	height: 100%;
	height: calc(100% - #{$footer_height});
//	padding-bottom: $footer_height;
	padding-top: $nav_height_portrait + $header_height;
//	height: calc(100% - #{$nav_height_portrait + $header_height + $footer_height});
	@include media($desktop_small) {
		padding-top: $nav_height_landscape + $header_height;
//		height: calc(100% - #{$nav_height_landscape + $header_height + $footer_height});
	}
}

//#container {
//	position: relative;
//	height: calc(100% - #{$footer_height});
//}
//#content {
//	position: absolute;
//	top: 11.25rem;
//	bottom: 0rem;
//}
.image-carousel {
	height: calc(100% - 3rem);
//	height: 100%;
}
.image-item {
	height: calc(100% - 3rem);
}

// ----------------------
// Navigation
// ----------------------

// nav list vertical movement
// - - - - - - - - - - - - - - - - - -

@mixin nav_transition($delay: $delay) {
	transition: transform #{$duration - 0.001s} #{$delay + 0.001s} $ease;
}
@mixin nav_translate($x, $y) {
	transform: translate3d($x, $y, 0);
}

%nav_list {
	position: absolute;
	display: inline-block;
	@include nav_transition($delay: $delay * 1);
	@include nav_translate(0, #{$nav_height_portrait - 4.5rem});
	@at-root .with-bundle %nav_list {
		@include nav_translate(0, 0);
	}
	@include media($desktop_small) {
		@include nav_translate(0, #{$nav_height_landscape - 1.5rem});
		@at-root .with-bundle %nav_list {
			@include nav_translate(0, 0);
		}
	}
}

.transform-wrapper {
	transform-style: preserve-3d;
//	transform: translate3d(0,0,0) scale3d(1,1,1);
}

// site-name + wrapper
// - - - - - - - - - - - - - - - - - -

#site-name-wrapper {
	position: relative;
	top: 0;
	height: $nav_height_portrait;
	@include media($desktop_small) {
		height: $nav_height_landscape;
	}
}

#site-name {
	position: relative;
	display: inline-block;
	min-height: 2rem;
	top: 1.5rem;
	@include nav_translate(-1px, 0);
	@include nav_transition($delay: $delay * 1);
	@at-root .with-bundle #site-name {
		@include nav_translate(-100%, 0);
		@include nav_transition($delay: $delay * 0);
	}
	@include heading_font();
	color: $link_color;
}

// bundle-list + wrapper
// - - - - - - - - - - - - - - - - - -

#bundle-list-wrapper {
	position: absolute;
	display: inline-block;
	top: 0; left: 0;
}

#bundle-list {
	@extend %nav_list;
	min-height: 2rem;
	top: 1.5rem;
	width: $main_width - $aside_width;
	@include media($desktop_small) {
		width: $main_width_large - $aside_width_large;
		@at-root .with-bundle #bundle-list {
			width: $aside_width_large;
		}
	}
	@include heading_font();
	.list-item {
		height: 2rem;
		width: 100%;
		white-space: nowrap;
		a {
			display: inline-block;
			margin-left: -1px;
		}
		.completed {
			display: none;
		}
		em {
			font-style: normal;
			font-weight: 400;
		}
	}
}

// keyword-list + wrapper
// - - - - - - - - - - - - - - - - - -

#keyword-list-wrapper {
	position: absolute;
	display: inline-block;
	top: 0;
	@include nav_translate($main_width,0);
	@include media($desktop_small) {
		@include nav_translate($main_width_large,0);
		@include nav_transition($delay: $delay * 0);
		@at-root {
			.with-bundle.with-image #keyword-list-wrapper {
				@include nav_translate(0,0);
			}
		}
	}
}

#keyword-list {
	@extend %nav_list;
	top: 1.25rem;
	width: $aside_width;
	.list-item {
		white-space: nowrap;
		width: 100%;
		height: 1.5rem;
		a {
			font-size: 13px;
			display: inline-block;
			margin-left: -1px;
		}
	}
	.list-group {
		height: 0;
		width: calc(100% - #{$gutter});
		span {
			display: inline-block;
			width: 100%;
			@include small_caps($lead: 1.5rem);
			@include nav_translate(-100%, 0.0rem);
			@include nav_transition($delay: $delay * 1);
		}
	}
	@include media($desktop_small) {
		width: $aside_width_large;
		.list-group {
			width: 100%;
		}
		@at-root {
			.with-bundle #keyword-list {
				/* override %nav_list */
				@include nav_translate(0, #{$nav_height_landscape - 0.5rem});
			}
			.with-bundle #keyword-list .list-group {
				height: 2rem;
			}
			.with-bundle #keyword-list .list-group span {
				@include nav_translate(-0.1px, 0.5rem);
				@include nav_transition($delay: $delay * 1);
			}
			.with-bundle.with-image #keyword-list .list-group span {
				@include nav_transition($delay: $delay * 0);
			}
		}
	}
	@at-root .skip-transitions #keyword-list .list-group span {
		@extend %skip_transitions;
	}
}

// bundle-pager
// - - - - - - - - - - - - - - - - - -

#bundle-pager {
	position: absolute;
    display: inline-block;
    top: -1rem;
	.button {
		position: absolute;
		margin-left: 0 !important;
		min-width: $aside_width;
	}
	.following-button {
		left: $main_width;
		@include media($desktop_small) {
			left: $aside_width_large;
		}
	}
}

// ----------------------
// Content
// ----------------------
%content-padding {
	box-sizing: border-box;
	padding-left: $hu;
	padding-right: $hu;
}
.stack .content,
#bundle-pager .button,
#site-name,
.list-item,
.list-group {
	@extend %content-padding;
}
//.carousel-item .sizing,
//.carousel-item .content {
//	//see below
//}


#content .image-carousel {
	position: relative;
	overflow: hidden;
	top: 0;	width: 100%;
	bottom: 0;//height: 100%;
	box-sizing: content-box;
	min-width: $page_width;
	@include media($desktop_small) {
		min-width: $page_width_large;
	}
}

#content .label-carousel {
	position: absolute;
//	top: -1.5rem;
	width: 100%;
	min-width: $page_width;
	top: $nav_height_portrait;
	@include media($desktop_small) {
		min-width: $page_width_large;
		top: $nav_height_landscape;
	}
}

// ----------------------
// Other content views
// ----------------------

.image-caption-stack {
	@extend %page_region_abs;
	top: 2.25rem;
//	left: 0; right: 0;
	@include nav_translate(-1px, #{$nav_height_landscape - 0.75rem});
	.content {
		top: 1.5rem;
		position: absolute;
		display: block;
		width: $page_width;
		p {
			@include heading_font($size: 20px, $weight: 300, $lead: 26px);
//			@include heading_font($size: 1.666rem, $weight: 300, $lead: 2rem);
//			@include heading_font($size: 1.67rem, $weight: 300, $lead: 2rem);
		}
	}
	@include media($desktop_small) {
		@include nav_translate(-1px, 0);
		.content {
			left: $aside_width_large;
			width: $main_width_large;
			p {
				@include heading_font($weight: 300);//, $lead: 0.990);
			}
		}
	}
}

.images-pager {
	position: absolute;
//	top: -1.5rem; height: 1.5rem;
    top: -3rem; height: 1.5rem;
}

// ----------------------
// Carousel
// ----------------------

.carousel-item.empty-item .content p {
	@extend %content-padding;
}
//.carousel-item .sizing {
//	@extend %content-padding;
//	box-sizing: border-box;
//	padding-left: $hu;
//	padding-left: $hu;
//}
.carousel-item.image-item {
	.sizing {
//		box-sizing: border-box;
		margin-left: $hu;
		margin-right: $hu;
	}
}

.label-carousel,
.image-carousel {
	.pan-area {
		position: absolute;
		width: 100%;
		top: 0; bottom: 0;
	}
	.carousel-item {
		box-sizing: border-box;
		left: calc(50% - #{$page_width/2});
		width: $page_width;
	}
	.empty-item {
		box-sizing: content-box;
		width: auto;
//		width: $main_width;
//		width: $main_width - 6px;
		.content {
			width: $main_width;
		}
	}
	@include media($desktop_small) {
		.carousel-item {
			left: calc(50% - #{$page_width_large/2});
			padding-left: $aside_width_large;
			padding-right: 0;//$page_margin_left;
			width: $page_width_large;
		}
		.empty-item {
//			padding-right: $page_margin_left;
			padding-left: 0;//$page_margin_left;
			padding-right: $aside_width_large;
//			width: $page_width_large;
			.content {
				width: $main_width_large;
			}
		}
	}
}

.image-carousel {
	padding-top: 1.5rem;
	padding-bottom: 1.5rem;
	.empty-item {
//		padding-top: 1.5rem;
//		padding-bottom: 1.5rem;
		max-height: calc(100% - 3rem);
		box-sizing: border-box;
		.content {
			@extend %large_text;
			overflow: hidden;
			box-sizing: border-box;
			height: 100%;
			p {
				transform: translateX(-2px);
//				margin-left: -2px;
//				margin-right: 2px;
			}
		}
	}
}
.label-carousel {
	padding-top: 0;
	padding-bottom: 0;
	.carousel-item {
		.content {
			@include heading_font($size: 20px, $weight: 300, $lead: 24px);
//			margin-left: -1px;
//			margin-right: -1px;
			transform: translateX(-1px);
		}
	}
	.empty-item {
		height: 100%;
	}
}


#container {
	z-index: 1;
}
#site-name-wrapper,
#bundle-list-wrapper,
#keyword-list-wrapper,
#bundle-pager {
	z-index: 1;
}
.image-carousel {
	z-index: 0;
	.carousel-item.selected {
		z-index: 1;
	}
}
.image-carousel.scrolling,
.image-carousel.panning {
	z-index: 2;
}
