// -----------------------------------
// Layout
// -----------------------------------

// - - - - - - - - - - - - - - - - - -
// Abstract rules
// - - - - - - - - - - - - - - - - - -

@import "../includes/_media-queries";

$header_height: 2.25rem;
$footer_height: 3rem;
$nav_height_landscape: 9rem;
$nav_height_portrait: 14.25rem;

// - - - - - - - - - - - - - - - - - -
// container elements
// - - - - - - - - - - - - - - - - - -

%page_region_static,
%page_region_abs {
	max-width: $page_width;
	@include media($desktop_small) {
		max-width: $page_width_large;
	}
}
%page_region_abs {
	position: absolute;
	left: calc(50% - #{$page_width/2});
	@include media($desktop_small) {
		left: calc(50% - #{$page_width_large/2});
	}
}
%page_region_static {
	margin: 0 auto;
}

// - - - - - - - - - - - - - - - - - -
// leaf elements
// - - - - - - - - - - - - - - - - - -

%leaf-content {
	box-sizing: border-box;
	padding-left: $hu;
	padding-right: $hu;
}

// - - - - - - - - - - - - - - - - - -
// container vertical movement
// - - - - - - - - - - - - - - - - - -

@mixin nav_transition($delay: $delay) {
	transition: transform #{$duration - 0.001s} #{$delay + 0.001s} $ease;
}
@mixin nav_translate($x, $y) {
	transform: translate3d($x, $y, 0);
}
%nav_list {
	position: absolute;
	display: inline-block;
	@include nav_transition($delay: $delay * 1);
	@include nav_translate(0, #{$nav_height_portrait - 4.5rem});
	@at-root .with-bundle %nav_list {
		@include nav_translate(0, 0);
	}
	@include media($desktop_small) {
		@include nav_translate(0, #{$nav_height_landscape - 1.5rem});
		@at-root .with-bundle %nav_list {
			@include nav_translate(0, 0);
		}
	}
}
.transform-wrapper {
	transform-style: preserve-3d;
//	transform: translate3d(0,0,0) scale3d(1,1,1);
}

// -----------------------------------
// Container, Header, Footer
// -----------------------------------

html, body {
	height: 100%;
}
#container {
	width: 100%;
	height: 100%;
	display: block;
	overflow: hidden;
	min-width: $page_width;
	@include media($desktop_small) {
		min-width: $page_width_large;
	}
}

//#header {
//	@extend %page_region_static;
//	height: 2.25rem;
//	h3 {
//		display: none;
//	}
//}
//
//// Footer rules from: folio.scss @import "compass/layout";
//// @include sticky_footer( 6em, "#container", "#container-footer", "#footer" );
//// compass-core-1.0.1/stylesheets/compass/layout/_sticky-footer.scss
//
//#container {
//	clear: both;
//	min-height: 100%;
//	height: auto !important;
//	height: 100%;
//	margin-bottom: -$footer_height;
//}
//#footer {
//	clear: both;
//	position: relative;
//	overflow: hidden;
//	.copyright {
//		display: none;
//	}
//}
//#container #container-footer, #footer {
//	@extend %page_region_static;
//	height: $footer_height;
//}

//#container {
//	position: relative;
//	height: calc(100% - #{$footer_height});
//}
//#content {
//	position: absolute;
//	top: 11.25rem;
//	bottom: 0rem;
//}

// - - - - - - - - - - - - - - - - - -
// navigation
// - - - - - - - - - - - - - - - - - -

#navigation {
	@extend %page_region_static;
	position: relative;
	top: $header_height;
}
@import "_navigation";

// - - - - - - - - - - - - - - - - - -
// content
// - - - - - - - - - - - - - - - - - -

#content {
	box-sizing: border-box;
	position: absolute;
//	position: relative;
//	overflow: hidden;
	width: 100%;
	top: 0;
//	height: 100%;
	padding-top: $nav_height_portrait + $header_height;
//	padding-bottom: $footer_height;
	height: calc(100% - #{$footer_height});
//	height: calc(100% - #{$nav_height_portrait + $header_height + $footer_height});
	@include media($desktop_small) {
		padding-top: $nav_height_landscape + $header_height;
//		height: calc(100% - #{$nav_height_landscape + $header_height + $footer_height});
	}
}
@import "_content";

// -----------------------------------
// Layer ordering
// -----------------------------------

#container {
	z-index: 1;
}
#site-name-wrapper,
#bundle-list-wrapper,
#keyword-list-wrapper,
#bundle-pager {
	z-index: 1;
}

.image-carousel {
	z-index: 0;
	.carousel-item.selected {
		z-index: 1;
	}
	&.scrolling {
		z-index: 2;
	}
}

//.bundle-carousel {
//	z-index: 0;
//	.nested-carousel-item {
////		z-index: 0;
//		.carousel-item.selected {
//			z-index: 1;
//		}
//		&.panning, &.scrolling {
//			z-index: 2;
//		}
//	}
//}
