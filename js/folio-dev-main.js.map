{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "src/js/app/App.js",
    "src/js/app/control/Controller.js",
    "src/js/app/control/Globals.js",
    "src/js/app/debug/DebugToolbar.js",
    "src/js/app/debug/template/DebugToolbar.SVGGrid.hbs",
    "src/js/app/debug/template/DebugToolbar.hbs",
    "src/js/app/model/AppState.js",
    "src/js/app/model/BaseItem.js",
    "src/js/app/model/BaseModel.js",
    "src/js/app/model/SelectableCollection.js",
    "src/js/app/model/collection/ArticleCollection.js",
    "src/js/app/model/collection/BundleCollection.js",
    "src/js/app/model/collection/KeywordCollection.js",
    "src/js/app/model/collection/TypeCollection.js",
    "src/js/app/model/helper/bootstrap.js",
    "src/js/app/model/item/ArticleItem.js",
    "src/js/app/model/item/BundleItem.js",
    "src/js/app/model/item/KeywordItem.js",
    "src/js/app/model/item/MediaItem.js",
    "src/js/app/model/item/SourceItem.js",
    "src/js/app/model/item/TypeItem.js",
    "src/js/app/view/AppView.js",
    "src/js/app/view/ContentView.js",
    "src/js/app/view/NavigationView.js",
    "src/js/app/view/base/CallbackQueue.js",
    "src/js/app/view/base/CanvasView.js",
    "src/js/app/view/base/Interpolator.js",
    "src/js/app/view/base/PrefixedEvents.js",
    "src/js/app/view/base/TouchManager.js",
    "src/js/app/view/base/View.js",
    "src/js/app/view/base/ViewError.js",
    "src/js/app/view/component/ArticleButton.hbs",
    "src/js/app/view/component/ArticleButton.js",
    "src/js/app/view/component/ArticleView.js",
    "src/js/app/view/component/CanvasProgressMeter.js",
    "src/js/app/view/component/Carousel.js",
    "src/js/app/view/component/CollectionStack.hbs",
    "src/js/app/view/component/CollectionStack.js",
    "src/js/app/view/component/FilterableListView.js",
    "src/js/app/view/component/GraphView.js",
    "src/js/app/view/component/GroupingListView.js",
    "src/js/app/view/component/PlayToggleSymbol.js",
    "src/js/app/view/component/SelectableListView.js",
    "src/js/app/view/helper/createColorStyleSheet.js",
    "src/js/app/view/promise/_loadImageAsObjectURL.js",
    "src/js/app/view/promise/_whenImageLoads.js",
    "src/js/app/view/promise/whenDefaultImageLoads.js",
    "src/js/app/view/promise/whenScrollingEnds.js",
    "src/js/app/view/promise/whenSelectionDistanceIs.js",
    "src/js/app/view/promise/whenSelectionIsContiguous.js",
    "src/js/app/view/promise/whenViewIsAttached.js",
    "src/js/app/view/promise/whenViewIsRendered.js",
    "src/js/app/view/render/CarouselRenderer.js",
    "src/js/app/view/render/ClickableRenderer.js",
    "src/js/app/view/render/DefaultSelectableRenderer.hbs",
    "src/js/app/view/render/DefaultSelectableRenderer.js",
    "src/js/app/view/render/DotNavigationRenderer.hbs",
    "src/js/app/view/render/DotNavigationRenderer.js",
    "src/js/app/view/render/ImageRenderer.hbs",
    "src/js/app/view/render/ImageRenderer.js",
    "src/js/app/view/render/LabelRenderer.js",
    "src/js/app/view/render/MediaRenderer.js",
    "src/js/app/view/render/PlayableRenderer.js",
    "src/js/app/view/render/SequenceRenderer.hbs",
    "src/js/app/view/render/SequenceRenderer.js",
    "src/js/app/view/render/VideoRenderer.hbs",
    "src/js/app/view/render/VideoRenderer.js",
    "src/js/app/view/template/Carousel.EmptyRenderer.Bundle.hbs",
    "src/js/app/view/template/CollectionStack.Media.hbs",
    "src/js/app/view/template/ErrorBlock.hbs",
    "src/js/app/view/template/_helpers.js",
    "src/js/app/view/template/svg/CogSymbol.hbs",
    "src/js/app/view/template/svg/FullscreenSymbol.hbs",
    "src/js/utils/Timer.js",
    "src/js/utils/TransformHelper.js",
    "src/js/utils/TransformItem.js",
    "src/js/utils/array/difference.js",
    "src/js/utils/canvas/CanvasHelper.js",
    "src/js/utils/canvas/bitmap/BlurStack.js",
    "src/js/utils/canvas/bitmap/desaturate.js",
    "src/js/utils/canvas/bitmap/getAverageRGB.js",
    "src/js/utils/canvas/bitmap/mul_table.js",
    "src/js/utils/canvas/bitmap/multiply.js",
    "src/js/utils/canvas/bitmap/shg_table.js",
    "src/js/utils/canvas/bitmap/stackBlurRGB.js",
    "src/js/utils/canvas/calcArcHConnector.js",
    "src/js/utils/css/getBoxEdgeStyles.js",
    "src/js/utils/ease/fn/easeInQuad.js",
    "src/js/utils/ease/fn/easeOutQuad.js",
    "src/js/utils/ease/fn/linear.js",
    "src/js/utils/event/mediaEventsEnum.js",
    "src/js/utils/geom/inflateRect.js",
    "src/js/utils/prefixedEvent.js",
    "src/js/utils/prefixedProperty.js",
    "src/js/utils/prefixedStyleName.js",
    "src/js/utils/prefixes.js",
    "src/js/utils/promise/rejectAll.js",
    "src/js/utils/promise/resolveAll.js",
    "src/js/utils/strings/camelToDashed.js",
    "src/js/utils/strings/stripTags.js",
    "src/js/utils/touch/SmoothPanRecognizer.js",
    "src/sass/variables.json"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "../",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "/**\n * @module app/App\n */\n\"use strict\";\n\nconsole.info(`Portfolio App started GIT:${GIT_REV}`);\n\n// if (!DEBUG) {\n// \twindow.addEventListener(\"error\", function(ev) {\n// \t\tconsole.error(\"Uncaught Error\", ev);\n// \t});\n// }\n\n/*\nvar features = [\n\t'default-3.4',\n\t// 'Date.now',\n\t// 'Element.prototype.classList',\n\t// 'Element.prototype.matches',\n\t// 'Event.hashchange',\n\t// 'Function.prototype.bind',\n\t'IntersectionObserver',\n\t'IntersectionObserverEntry',\n\t'Math.sign',\n\t'MutationObserver',\n\t// 'Object.create',\n\t// 'Object.defineProperties',\n\t// 'Object.defineProperty',\n\t// 'Object.keys',\n\t'Promise',\n\t'Promise.prototype.finally',\n\t'devicePixelRatio',\n\t'document.head',\n\t// 'document.querySelector',\n\t// 'document.visibilityState',\n\t'getComputedStyle',\n\t'matchMedia',\n\t// 'requestAnimationFrame',\n\t'setImmediate',\n];\n\nif (features.length) {\n  var s = document.createElement('script');\n  s.src = 'https://cdn.polyfill.io/v2/polyfill.min.js?features='+features.join(',')+'&callback=main';\n  s.async = true;\n  document.head.appendChild(s);\n} else {\n\tmain();\n}\nfunction main() {\n\tconsole.log('Now to do the cool stuff...');\n}\n\nif (DEBUG) {\n\trequire(\"Modernizr\");\n}\nrequire(\"setimmediate\");\nrequire(\"es6-promise/auto\");\nrequire(\"classlist-polyfill\");\nrequire(\"raf-polyfill\");\nrequire(\"matches-polyfill\");\nrequire(\"fullscreen-polyfill\");\nrequire(\"math-sign-polyfill\");\nrequire(\"mutation-observer\");\n// require(\"path2d-polyfill\");\n*/\n\nrequire(\"backbone\").$ = require(\"backbone.native\");\nrequire(\"backbone.babysitter\");\nrequire(\"Backbone.Mutators\");\nrequire(\"hammerjs\");\n\n// document.addEventListener('DOMContentLoaded', function(ev) {\n// \tconsole.log(\"%s:[event %s]\", ev.target, ev.type);\n// });\n\nwindow.addEventListener(\"load\", function(ev) {\n\tconsole.log(\"%s:[event %s]\", ev.target, ev.type);\n\n\t// process bootstrap data, let errors go up the stack\n\ttry {\n\t\trequire(\"app/model/helper/bootstrap\")(window.bootstrap);\n\t} catch (err) {\n\t\tvar el = document.querySelector(\".app\");\n\t\tel.classList.remove(\"app-initial\");\n\t\tel.classList.add(\"app-error\");\n\t\tthrow new Error(\"bootstrap data error (\" + err.message + \")\", err.fileName, err.lineNumber);\n\t} finally { // detele global var\n\t\tdelete window.bootstrap;\n\t}\n\n\trequire(\"app/view/template/_helpers\");\n\n\t/** @type {module:app/view/helper/createColorStyleSheet} */\n\trequire(\"app/view/helper/createColorStyleSheet\").call(); /** @type {module:app/view/AppView} */\n\tvar AppView = require(\"app/view/AppView\");\n\t// var startApp = AppView.getInstance.bind(AppView);\n\n\t/** @type {module:webfontloader} */\n\tvar WebFont = require(\"webfontloader\");\n\tvar loadOpts = {\n\t\tasync: false,\n\t\tgroupName: \"\",\n\t\tclasses: false,\n\t\tloading: function() {\n\t\t\tconsole.log(\"WebFont:%s:loading\", this.groupName);\n\t\t},\n\t\tactive: function() {\n\t\t\tconsole.info(\"WebFont:%s:active\", this.groupName);\n\t\t},\n\t\tinactive: function() {\n\t\t\tconsole.warn(\"WebFont:%s:inactive\", this.groupName);\n\t\t},\n\t\tfontactive: function(familyName, variantFvd) {\n\t\t\tconsole.info(\"WebFont:%s:fontactive '%s' (%s)\", this.groupName, familyName, variantFvd);\n\t\t},\n\t\tfontinactive: function(familyName, variantFvd) {\n\t\t\tconsole.warn(\"WebFont:%s:fontinactive '%s' (%s)\", this.groupName, familyName, variantFvd);\n\t\t},\n\t\t// fontloading: function(familyName, variantDesc) {\n\t\t// \tconsole.log(\"WebFont::fontloading\", familyName, JSON.stringify(variantDesc, null, \" \"));\n\t\t// },\n\t};\n\n\tWebFont.load(_.defaults({\n\t\tasync: false,\n\t\tgroupName: \"required\",\n\t\tcustom: {\n\t\t\tfamilies: [\n\t\t\t\t\"FranklinGothicFS:n4,n6\",\n\t\t\t\t// \"FranklinGothicFS:i4,i6\"\n\t\t\t\t\"FolioFigures:n4\",\n\t\t\t],\n\t\t\ttestStrings: {\n\t\t\t\t\"FolioFigures\": \"hms\"\n\t\t\t},\n\t\t},\n\t\tactive: () => AppView.getInstance(),\n\t\tinactive: () => AppView.getInstance(),\n\t}, loadOpts));\n\n\tWebFont.load(_.defaults({}, loadOpts));\n\n\t// requestAnimationFrame(function(tstamp) {\n\t// \tAppView.getInstance();\n\t// });\n});\n\n\n// if (DEBUG) {\n// /** @type {module:underscore} */\n// var _ = require(\"underscore\");\n\n// var isFF = /Firefox/.test(window.navigator.userAgent);\n// var isIOS = /iPad|iPhone/.test(window.navigator.userAgent);\n/*\nif (/Firefox/.test(window.navigator.userAgent)) {\n\tconsole.prefix = \"# \";\n\tvar shift = [].shift;\n\tvar logWrapFn = function() {\n\t\tif (typeof arguments[1] == \"string\") arguments[1] = console.prefix + arguments[1];\n\t\treturn shift.apply(arguments).apply(console, arguments);\n\t};\n\tconsole.group = _.wrap(console.group, logWrapFn);\n\tconsole.log = _.wrap(console.log, logWrapFn);\n\tconsole.info = _.wrap(console.info, logWrapFn);\n\tconsole.warn = _.wrap(console.warn, logWrapFn);\n\tconsole.error = _.wrap(console.error, logWrapFn);\n}\n*/\n/*\nvar saveLogs = function() {\n\tvar logWrapFn = function(name, fn, msg) {\n\t\tdocument.documentElement.appendChild(\n\t\t\tdocument.createComment(\"[\" + name + \"] \" + msg));\n\t};\n\tconsole.group = _.wrap(console.group, _.partial(logWrapFn, \"group\"));\n\tconsole.log = _.wrap(console.log, _.partial(logWrapFn, \"log\"));\n\tconsole.info = _.wrap(console.info, _.partial(logWrapFn, \"info\"));\n\tconsole.warn = _.wrap(console.warn, _.partial(logWrapFn, \"warn\"));\n\tconsole.error = _.wrap(console.error, _.partial(logWrapFn, \"error\"));\n};\n*/\n\n// handle error events on some platforms and production\n/*\nif (isIOS) {\n\t// saveLogs();\n\twindow.addEventListener(\"error\", function() {\n\t\tvar args = Array.prototype.slice.apply(arguments),\n\t\t\tel = document.createElement(\"div\"),\n\t\t\thtml = \"\";\n\t\t_.extend(el.style, {\n\t\t\tfontfamily: \"monospace\",\n\t\t\tdisplay: \"block\",\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: \"999\",\n\t\t\tbackgroundColor: \"white\",\n\t\t\tcolor: \"black\",\n\t\t\twidth: \"calc(100% - 3em)\",\n\t\t\tbottom: \"0\",\n\t\t\tmargin: \"1em 1.5em\",\n\t\t\tpadding: \"1em 1.5em\",\n\t\t\toutline: \"0.5em solid red\",\n\t\t\toutlineOffset: \"0.5em\",\n\t\t\tboxSizing: \"border-box\",\n\t\t\toverflow: \"hidden\",\n\t\t});\n\t\thtml += \"<pre><b>location:<b> \" + window.location + \"</pre>\";\n\t\thtml += \"<pre><b>event:<b> \" + JSON.stringify(args.shift(), null, \" \") + \"</pre>\";\n\t\tif (args.length) html += \"<pre><b>rest:<b> \" + JSON.stringify(args, null, \" \") + \"</pre>\";\n\t\tel.innerHTML = html;\n\t\tdocument.body.appendChild(el);\n\t});\n}*/\n// }\n",
    "/**\n * @module app/control/Controller\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n// /** @type {module:app/model/collection/TypeCollection} */\n// var types = require(\"app/model/collection/TypeCollection\");\n// /** @type {module:app/model/collection/KeywordCollection} */\n// var keywords = require(\"app/model/collection/KeywordCollection\");\n/** @type {module:app/model/collection/ArticleCollection} */\nconst articles = require(\"app/model/collection/ArticleCollection\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n\n/* --------------------------- *\n/* Static private\n/* --------------------------- */\n\n/**\n/* @constructor\n/* @type {module:app/control/Controller}\n/*/\nvar Controller = Backbone.Router.extend({\n\n\t// /** @override */\n\t// routes: {},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tif (DEBUG) {\n\t\t\tthis._routeNames = [];\n\t\t\tthis.route = function(route, name, callback) {\n\t\t\t\tthis._routeNames.push(_.isString(name) ? name : '');\n\t\t\t\treturn Backbone.Router.prototype.route.apply(this, arguments);\n\t\t\t};\n\t\t\tthis.on(\"route\", function(routeName, args) {\n\t\t\t\tconsole.log(\"controller:[route] %s [%s]\", routeName, args.join());\n\t\t\t});\n\t\t}\n\n\t\t/*\n\t\t * Prefixed article regexp: /^article(?:\\/([^\\/]+))\\/?$/\n\t\t * Single bundle regexp: /^bundles(?:\\/([^\\/]+)(?:\\/(\\d+))?)?\\/?$/\n\t\t */\n\t\tthis.route(/(.*)/,\n\t\t\t\"notfound\", this.toNotFound);\n\t\tthis.route(/^([a-z][a-z0-9\\-]*)\\/?$/,\n\t\t\t\"article-item\", this.toArticleItem);\n\t\tthis.route(/^(?:bundles)?\\/?$/,\n\t\t\t\"root\", this.toRoot);\n\t\t// this.route(/^bundles\\/?$/,\n\t\t// \t\"bundle-list\", this.toBundleList);\n\n\t\t// this.route(/^bundles\\/([^\\/]+)\\/?$/,\n\t\t// \t\"bundle-item\", this.toBundleItem);\n\t\t// this.route(/^bundles\\/([^\\/]+)\\/(\\d+)\\/?$/,\n\t\t// \t\"media-item\", this.toMediaItem);\n\n\t\t// this.route(/^bundles(?:\\/([^\\/]+)(?:\\/(\\d+))?)?\\/?$/,\n\t\t// \t\"media-item\", this.toMediaItem);\n\n\t\tthis.route(/^bundles\\/([^\\/]+)(?:\\/(\\d+)?)?\\/?$/,\n\t\t\t\"media-item\", this.toMediaItem);\n\n\t\tif (DEBUG) {\n\t\t\tconsole.log(\"%s::initialize routes: %o\", \"controller\", this._routeNames);\n\t\t}\n\t},\n\n\n\n\t/* ---------------------------\n\t/* JS to URL: public command methods\n\t/* --------------------------- */\n\n\tselectMedia: function(media) {\n\t\tthis._goToLocation(media.get(\"bundle\"), media);\n\t},\n\n\tselectBundle: function(bundle) {\n\t\tif (bundle.attr(\"@no-desc\")) {\n\t\t\tthis._goToLocation(bundle,\n\t\t\t\tbundle.get(\"media\").at(0), {\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttrigger: true\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tthis._goToLocation(bundle);\n\t\t}\n\t},\n\n\tdeselectMedia: function() {\n\t\tthis._goToLocation(bundles.selected);\n\t},\n\n\tdeselectBundle: function() {\n\t\tthis._goToLocation();\n\t},\n\n\tselectArticle: function(article) {\n\t\tthis.navigate(article.get(\"handle\"), { trigger: true });\n\t},\n\n\tdeselectArticle: function() {\n\t\tthis.navigate(\"\", { trigger: true });\n\t},\n\n\t/* ---------------------------\n\t/* JS to URL: private helpers\n\t/* --------------------------- */\n\n\t/** Update location when navigation happens internally */\n\t/*_updateLocation: function() {\n\t\tvar bundle, media;\n\t\tbundle = bundles.selected;\n\t\tif (bundle) {\n\t\t\tmedia = bundle.get(\"media\").selected;\n\t\t}\n\t\tthis.navigate(this._getLocation(bundle, media), {\n\t\t\ttrigger: false\n\t\t});\n\t},*/\n\n\t_getLocation: function(bundle, media) {\n\t\tvar mediaIndex, location = [];\n\t\tif (bundle) {\n\t\t\tlocation.push(\"bundles\");\n\t\t\tlocation.push(bundle.get(\"handle\"));\n\t\t\tif (media) {\n\t\t\t\tmediaIndex = bundle.get(\"media\").indexOf(media);\n\t\t\t\tif (mediaIndex >= 0) {\n\t\t\t\t\tlocation.push(mediaIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// location.push(\"\");\n\t\treturn location.join(\"/\");\n\t},\n\n\t_goToLocation: function(bundle, media, opts) {\n\t\tthis.navigate(\n\t\t\tthis._getLocation(bundle, media),\n\t\t\t_.defaults(opts || {}, {\n\t\t\t\ttrigger: true\n\t\t\t})\n\t\t);\n\t},\n\n\t/* --------------------------- *\n\t * URL to JS: router handlers\n\t * --------------------------- */\n\n\ttoRoot: function() {\n\t\tthis.trigger(\"change:before\");\n\t\tif (bundles.selected) {\n\t\t\t// bundles.selected.get(\"media\").deselect();\n\t\t\tbundles.deselect();\n\t\t}\n\t\t// keywords.deselect();\n\t\tarticles.deselect();\n\t\tthis.trigger(\"change:after\");\n\t},\n\n\ttoNotFound: function(slug) {\n\t\tconsole.info(\"route:[*:%s]\", slug);\n\t},\n\n\t// toBundleList: function() {\n\t// \tthis.navigate(\"\", {\n\t// \t\ttrigger: true,\n\t// \t\treplace: true\n\t// \t});\n\t// },\n\n\ttoBundleItem: function(bundleHandle) {\n\t\tlet bundle = bundles.findWhere({ handle: bundleHandle });\n\t\tif (!bundle) {\n\t\t\tthrow new Error(`No bundle found with handle '${bundleHandle}'`);\n\t\t\t// } else if (bundle.attr(\"@no-desc\")) {\n\t\t\t// this._changeSelection(bundle, bundle.get(\"media\").at(0));\n\t\t\t// this.navigate(this._getLocation(bundle, bundle.get(\"media\").at(0)), { trigger: true, replace: false });\n\t\t}\n\t\tthis._changeSelection(bundle);\n\t},\n\n\ttoMediaItem: function(bundleHandle, mediaIndex) {\n\t\tlet bundle = bundles.findWhere({ handle: bundleHandle });\n\t\tif (!bundle) {\n\t\t\tthrow new Error(`No bundle found with handle '${bundleHandle}'`);\n\t\t}\n\t\tlet media = bundle.get(\"media\").at(mediaIndex ? mediaIndex : 0);\n\t\tif (!media) {\n\t\t\tthrow new Error(`No media found at index ${mediaIndex} in bundle '${bundleHandle}'`);\n\t\t}\n\t\tthis._changeSelection(bundle, media);\n\t},\n\n\ttoArticleItem: function(articleHandle) {\n\t\tlet article = articles.findWhere({ handle: articleHandle });\n\t\tif (!article) {\n\t\t\tthrow new Error(`No article found with handle '${articleHandle}'`);\n\t\t}\n\t\tthis.trigger(\"change:before\", article);\n\t\tbundles.deselect();\n\t\tarticles.select(article);\n\t\tthis.trigger(\"change:after\", article);\n\t},\n\n\t/* -------------------------------\n\t/* URL to JS: private helpers\n\t/* ------------------------------- */\n\n\t/*\n\t/* NOTE: Selection order\n\t/* - Apply media selection to *incoming bundle*, as not to trigger\n\t/*\tunneccesary events on an outgoing bundle. Outgoing bundle media selection\n\t/*\tremains untouched.\n\t/* - Apply media selection *before* selecting the incoming bundle. Views\n\t/*\tnormally listen to the selected bundle only, so if the bundle is changing,\n\t/*\tthey will not be listening to media selection changes yet.\n\t/*/\n\t_changeSelection: function(bundle, media) {\n\t\tvar lastBundle, lastMedia;\n\t\tif (bundle === void 0) bundle = null;\n\t\tif (media === void 0) media = null;\n\n\t\t// if (bundle !== null && media === null && bundle.attr(\"@no-desc\")) {\n\t\t// \tmedia = bundle.get(\"media\").at(0);\n\t\t// \tthis._goToLocation(bundle, media);\n\t\t// \treturn;\n\t\t// }\n\n\t\tlastBundle = bundles.selected;\n\t\tlastMedia = lastBundle ? lastBundle.get(\"media\").selected : null;\n\t\tconsole.log(\"controller::_changeSelection bundle:[%s -> %s] media:[%s -> %s]\",\n\t\t\t(lastBundle ? lastBundle.cid : lastBundle),\n\t\t\t(bundle ? bundle.cid : bundle),\n\t\t\t(lastMedia ? lastMedia.cid : lastMedia),\n\t\t\t(media ? media.cid : media)\n\t\t);\n\n\t\tif (!articles.selected\n\t\t\t&& (lastBundle === bundle)\n\t\t\t&& (lastMedia === media)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.trigger(\"change:before\", bundle, media);\n\t\tbundle && bundle.get(\"media\").select(media);\n\t\tbundles.select(bundle);\n\t\tarticles.deselect();\n\t\tthis.trigger(\"change:after\", bundle, media);\n\t},\n});\n\n\nmodule.exports = new Controller();\n",
    "/**\n * @module app/control/Globals\n */\n\nmodule.exports = (function() {\n\t// reusable vars\n\tvar o, s, so;\n\t// global hash\n\tvar g = {};\n\t// SASS <--> JS shared hash\n\tvar sass = require(\"../../../sass/variables.json\");\n\n\t// JUNK FIRST: Some app-wide defaults\n\t// - - - - - - - - - - - - - - - - -\n\tg.VPAN_DRAG = 0.95; // as factor of pointer delta\n\tg.HPAN_OUT_DRAG = 0.4; // factor\n\tg.VPAN_OUT_DRAG = 0.1; // factor\n\tg.PAN_THRESHOLD = 15; // px\n\tg.COLLAPSE_THRESHOLD = 75; // px\n\tg.COLLAPSE_OFFSET = parseInt(sass.temp[\"collapse_offset\"]);\n\t// g.CLICK_EVENT = \"click\"; //window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\";\n\tg.VIDEO_CROP_PX = parseInt(sass[\"video_crop_px\"]);\n\n\t// breakpoints\n\t// - - - - - - - - - - - - - - - - -\n\tg.BREAKPOINTS = {};\n\tfor (s in sass.breakpoints) {\n\t\to = sass.breakpoints[s];\n\t\t/*if (Array.isArray(o)) {\n\t\t\tg.BREAKPOINTS[s] = Object.defineProperties({}, {\n\t\t\t\t\"matches\": {\n\t\t\t\t\tget: _.partial(_.some, o.map(window.matchMedia), _.property(\"matches\"))\n\t\t\t\t},\n\t\t\t\t\"media\": {\n\t\t\t\t\tvalue: o.join(\", \")\n\t\t\t\t},\n\t\t\t\t\"queries\": {\n\t\t\t\t\tvalue: o.map(window.matchMedia)\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tg.BREAKPOINTS[s] = window.matchMedia(o);\n\t\t}*/\n\t\to = Array.isArray(o) ? o.join(\", \") : o;\n\t\to = o.replace(/[\\'\\\"]/g, \"\");\n\t\to = window.matchMedia(o);\n\t\to.className = s;\n\t\tg.BREAKPOINTS[s] = o;\n\t}\n\tif (DEBUG) {\n\t\tconsole.groupCollapsed(\"Breakpoints\");\n\t\tfor (s in g.BREAKPOINTS) {\n\t\t\tconsole.log(\"%s: %o\", s, g.BREAKPOINTS[s].media);\n\t\t}\n\t\tconsole.groupEnd();\n\t}\n\n\t// base colors, dimensions\n\t// - - - - - - - - - - - - - - - - -\n\tg.DEFAULT_COLORS = _.clone(sass.default_colors);\n\t// g.HORIZONTAL_STEP = parseFloat(sass.units[\"hu_px\"]);\n\t// g.VERTICAL_STEP = parseFloat(sass.units[\"vu_px\"]);\n\n\n\t// paths, networking\n\t// - - - - - - - - - - - - - - - - -\n\t// var toAbsoluteURL = (function() {\n\t// \tvar a = null;\n\t// \treturn function(url) {\n\t// \t\ta = a || document.createElement('a');\n\t// \t\ta.href = url;\n\t// \t\treturn a.href;\n\t// \t};\n\t// })();\n\t// g.APP_ROOT = toAbsoluteURL(window.approot);\n\t// g.MEDIA_DIR = toAbsoluteURL(window.mediadir);\n\n\tg.APP_ROOT = window.approot;\n\tg.MEDIA_DIR = window.mediadir;\n\n\tdelete window.approot;\n\tdelete window.mediadir;\n\n\t// hardcoded font data\n\t// - - - - - - - - - - - - - - - - -\n\tg.FONT_METRICS = {\n\t\t\"FranklinGothicFS\": {\n\t\t\t\"unitsPerEm\": 1000,\n\t\t\t\"ascent\": 827,\n\t\t\t\"descent\": -173\n\t\t},\n\t\t\"ITCFranklinGothicStd\": {\n\t\t\t\"unitsPerEm\": 1000,\n\t\t\t\"ascent\": 686,\n\t\t\t\"descent\": -314\n\t\t},\n\t\t\"FolioFigures\": {\n\t\t\t\"unitsPerEm\": 1024,\n\t\t\t\"ascent\": 939,\n\t\t\t\"descent\": -256\n\t\t},\n\t};\n\n\tg.PAUSE_CHAR = String.fromCharCode(0x23F8);\n\tg.PLAY_CHAR = String.fromCharCode(0x23F5);\n\tg.STOP_CHAR = String.fromCharCode(0x23F9);\n\n\t// translate common template\n\tif (sass.transform_type == \"3d\") {\n\t\tg.TRANSLATE_TEMPLATE = function(x, y) {\n\t\t\treturn \"translate3d(\" + x + \"px, \" + y + \"px, 0px)\";\n\t\t};\n\t} else {\n\t\tg.TRANSLATE_TEMPLATE = function(x, y) {\n\t\t\treturn \"translate(\" + x + \"px, \" + y + \"px)\";\n\t\t};\n\t}\n\n\tg.TRANSLATE_TEMPLATE = function(x, y) {\n\t\treturn \"translate(\" + x + \"px, \" + y + \"px)\";\n\t\t// return \"translate3d(\" + x + \"px, \" + y + \"px ,0px)\";\n\t};\n\t// timing, easing\n\t// - - - - - - - - - - - - - - - - -\n\tvar ease = g.TRANSITION_EASE = sass.transitions[\"ease\"];\n\tvar duration = g.TRANSITION_DURATION = parseFloat(sass.transitions[\"duration_ms\"]);\n\tvar delayInterval = g.TRANSITION_DELAY_INTERVAL = parseFloat(sass.transitions[\"delay_interval_ms\"]);\n\tvar minDelay = g.TRANSITION_MIN_DELAY = parseFloat(sass.transitions[\"min_delay_ms\"]);\n\tvar delay = g.TRANSITION_DELAY = g.TRANSITION_DURATION + g.TRANSITION_DELAY_INTERVAL;\n\n\t// css transitions\n\t// - - - - - - - - - - - - - - - - -\n\to = {};\n\n\t// match tx() in _transitions.scss\n\t// - - - - - - - - - - - - - - - - -\n\to.tx = function tx(durationCount, delayCount, easeVal) {\n\t\t_.isNumber(durationCount) || (durationCount = 1);\n\t\t_.isNumber(delayCount) || (delayCount = -1);\n\t\t_.isString(easeVal) || (easeVal = ease);\n\n\t\tvar o = {};\n\t\tif (delayCount < 0) {\n\t\t\to.duration = (duration * durationCount) +\n\t\t\t\t(delayInterval * (durationCount - 1));\n\t\t\to.delay = 0;\n\t\t} else {\n\t\t\to.duration = (duration * durationCount) +\n\t\t\t\t(delayInterval * (durationCount - 1)) - minDelay;\n\t\t\to.delay = (delay * delayCount) - minDelay;\n\t\t}\n\t\to.easeing = easeVal;\n\t\treturn 0;\n\t}\n\n\t// transition presets\n\t// TODO: get rid of this\n\t// - - - - - - - - - - - - - - - - -\n\n\to.NONE = {\n\t\tdelay: 0,\n\t\tduration: 0,\n\t\teasing: \"step-start\"\n\t};\n\to.NOW = {\n\t\tdelay: 0,\n\t\tduration: duration,\n\t\teasing: ease\n\t};\n\to.UNSET = _.defaults({\n\t\tcssText: \"\"\n\t}, o.NONE);\n\n\tvar txAligned = _.defaults({\n\t\tduration: duration - minDelay\n\t}, o.NOW);\n\to.FIRST = _.defaults({\n\t\tdelay: delay * 0.0 + minDelay\n\t}, txAligned);\n\to.BETWEEN = _.defaults({\n\t\tdelay: delay * 1.0 + minDelay\n\t}, txAligned);\n\to.LAST = _.defaults({\n\t\tdelay: delay * 2.0 + minDelay\n\t}, txAligned);\n\to.AFTER = _.defaults({\n\t\tdelay: delay * 2.0 + minDelay\n\t}, txAligned);\n\n\to.BETWEEN_EARLY = _.defaults({\n\t\tdelay: delay * 1.0 + minDelay - 60\n\t}, txAligned);\n\to.BETWEEN_LATE = _.defaults({\n\t\tdelay: delay * 1.0 + minDelay + 60\n\t}, txAligned);\n\n\to.FIRST_LATE = _.defaults({\n\t\tdelay: delay * 0.5 + minDelay\n\t}, txAligned);\n\to.LAST_EARLY = _.defaults({\n\t\tdelay: delay * 1.5 + minDelay\n\t}, txAligned);\n\t// o.FIRST_LATE = \t\t_.defaults({delay: txDelay*0.0 + txMinDelay*2}, txAligned);\n\t// o.LAST_EARLY = \t\t_.defaults({delay: txDelay*2.0 + txMinDelay*0}, txAligned);\n\t// o.AFTER = \t\t\t_.defaults({delay: txDelay*2.0 + txMinDelay}, txAligned);\n\n\tconsole.groupCollapsed(\"Transitions\");\n\tfor (s in o) {\n\t\tif (!_.isFunction(o[s])) {\n\t\t\tso = o[s];\n\t\t\tso.name = s;\n\t\t\tso.className = \"tx-\" + s.replace(\"_\", \"-\").toLowerCase();\n\t\t\tif (!so.hasOwnProperty(\"cssText\")) {\n\t\t\t\tso.cssText = so.duration / 1000 + \"s \" + so.easing + \" \" + so.delay / 1000 + \"s\";\n\t\t\t}\n\t\t\tconsole.log(\"%s: %s\", so.name, so.cssText);\n\t\t}\n\t}\n\tconsole.groupEnd();\n\tg.transitions = o;\n\n\treturn g;\n}());\n",
    "/**\n * @module app/view/DebugToolbar\n */\n\n/** @type {module:cookies-js} */\nconst Cookies = require(\"cookies-js\");\n\n/** @type {module:modernizr} */\nconst Modernizr = require(\"Modernizr\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n// /** @type {module:app/control/Controller} */\n// var controller = require(\"app/control/Controller\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/** @type {Function} */\nconst viewTemplate = require(\"./template/DebugToolbar.hbs\");\n\n/** @type {Function} */\nconst gridTemplate = require(\"./template/DebugToolbar.SVGGrid.hbs\");\n\n/** @type {Function} */\nconst sizeTemplate = _.template(\"<%= w %> \\u00D7 <%= h %>\");\n\n// var appStateSymbols = { withBundle: \"b\", withMedia: \"m\", collapsed: \"c\"};\n// var appStateKeys = Object.keys(appStateSymbols);\n\nmodule.exports = View.extend({\n\n\t/** @override */\n\tcidPrefix: \"debugToolbar\",\n\t/** @override */\n\ttagName: \"div\",\n\t/** @override */\n\tclassName: \"toolbar\",\n\t/** @override */\n\ttemplate: viewTemplate,\n\n\t/** @override */\n\tproperties: {\n\t\tgrid: {\n\t\t\tget: function() {\n\t\t\t\treturn this._grid || (this._grid = this.createGridElement());\n\t\t\t}\n\t\t}\n\t},\n\n\tinitialize: function(options) {\n\t\tCookies.defaults = {\n\t\t\texpires: new Date(0x7fffffff * 1e3),\n\t\t\tdomain: String(window.location)\n\t\t\t\t.match(/^https?\\:\\/\\/([^\\/:?#]+)(?:[\\/:?#]|$)/i)[1]\n\t\t};\n\n\t\tthis.el.innerHTML = this.template({\n\t\t\ttests: Modernizr,\n\t\t\tnavigator: window.navigator\n\t\t});\n\n\t\t/* toggle's target: container\n\t\t/* - - - - - - - - - - - - - - - - */\n\t\tvar container = document.getElementById(\"container\"); //.querySelector(\"#container\");\n\n\t\t/* create/attach svg grid element\n\t\t/* - - - - - - - - - - - - - - - - */\n\t\tcontainer.insertBefore(this.createGridElement(), container.firstElementChild);\n\n\t\t/* info elements\n\t\t/* - - - - - - - - - - - - - - - - */\n\t\tthis.backendEl = this.el.querySelector(\"#edit-backend a\");\n\t\tthis.mediaInfoEl = this.el.querySelector(\"#media-info span\");\n\t\tthis.appStateEl = this.el.querySelector(\"#app-state\");\n\n\t\t/* toggle visibility\n\t\t/* - - - - - - - - - - - - - - - - */\n\t\tthis.initializeClassToggle(\"show-links\", this.el.querySelector(\"#links-toggle\"), this.el,\n\t\t\tfunction(key, value) {\n\t\t\t\tthis.el.classList.toggle(\"not-\" + key, !value);\n\t\t\t}\n\t\t);\n\t\tthis.initializeClassToggle(\"show-tests\", this.el.querySelector(\"#toggle-tests a\"), this.el);\n\t\tthis.initializeClassToggle(\"hide-passed\", this.el.querySelector(\"#toggle-passed\"), this.el);\n\n\t\t/* toggle container classes\n\t\t/* - - - - - - - - - - - - - - - - */\n\t\tthis.initializeClassToggle(\"debug-state\",\n\t\t\tthis.el.querySelector(\"#toggle-state a\"), container);\n\t\tthis.initializeClassToggle(\"debug-blocks-nav\",\n\t\t\tthis.el.querySelector(\"#toggle-blocks-nav a\"), container);\n\t\tthis.initializeClassToggle(\"debug-blocks-content\",\n\t\t\tthis.el.querySelector(\"#toggle-blocks-content a\"), container);\n\t\tthis.initializeClassToggle(\"debug-mdown\",\n\t\t\tthis.el.querySelector(\"#toggle-mdown a\"), container);\n\t\tthis.initializeClassToggle(\"debug-tx\",\n\t\t\tthis.el.querySelector(\"#toggle-tx a\"), container,\n\t\t\tfunction(key, value) {\n\t\t\t\tthis.el.classList.toggle(\"show-tx\", value);\n\t\t\t\tthis.el.classList.toggle(\"not-show-tx\", !value);\n\t\t\t}\n\t\t);\n\t\tthis.initializeClassToggle(\"debug-graph\",\n\t\t\tthis.el.querySelector(\"#toggle-graph a\"), container);\n\t\tthis.initializeClassToggle(\"debug-logs\",\n\t\t\tthis.el.querySelector(\"#toggle-logs a\"), container);\n\t\tthis.initializeClassToggle(\"debug-grid-bg\",\n\t\t\tthis.el.querySelector(\"#toggle-grid-bg a\"), document.body);\n\n\t\tthis.initializeViewportInfo();\n\n\t\t// this.initializeLayoutSelect();\n\n\t\tthis.listenTo(this.model, \"change\", this._onModelChange);\n\t\tthis._onModelChange();\n\t},\n\n\tinitializeViewportInfo: function() {\n\t\tvar viewportInfoEl = this.el.querySelector(\"#viewport-info span\");\n\t\tvar callback = function() {\n\t\t\tviewportInfoEl.textContent = sizeTemplate({ w: window.innerWidth, h: window.innerHeight });\n\t\t};\n\t\tcallback.call();\n\t\twindow.addEventListener(\"resize\", _.debounce(callback, 100, false, false));\n\t},\n\n\tinitializeToggle: function(key, toggleEl, callback) {\n\t\tif (!toggleEl) return;\n\n\t\tvar ctx = this;\n\t\tvar toggleValue = Cookies.get(key) === \"true\";\n\t\tcallback.call(ctx, key, toggleValue);\n\n\t\ttoggleEl.addEventListener(\"click\", function(ev) {\n\t\t\tif (ev.defaultPrevented) return;\n\t\t\telse ev.preventDefault();\n\t\t\ttoggleValue = !toggleValue;\n\t\t\tCookies.set(key, toggleValue ? \"true\" : \"\");\n\t\t\tcallback.call(ctx, key, toggleValue);\n\t\t}, false);\n\t},\n\n\tinitializeClassToggle: function(key, toggleEl, targetEl, callback) {\n\t\tvar hasCallback = _.isFunction(callback);\n\n\t\tthis.initializeToggle(key, toggleEl, function(key, toggleValue) {\n\t\t\ttargetEl.classList.toggle(key, toggleValue);\n\t\t\ttoggleEl.classList.toggle(\"toggle-enabled\", toggleValue);\n\t\t\ttoggleEl.classList.toggle(\"color-reverse\", toggleValue);\n\t\t\thasCallback && callback.apply(this, arguments);\n\t\t});\n\t},\n\n\t_onModelChange: function() {\n\t\t// console.log(\"%s::_onModelChange changedAttributes: %o\", this.cid, this.model.changedAttributes());\n\t\tvar i, ii, prop, el, els = this.appStateEl.children;\n\t\tfor (i = 0, ii = els.length; i < ii; i++) {\n\t\t\tel = els[i];\n\t\t\tprop = el.getAttribute(\"data-prop\");\n\t\t\tel.classList.toggle(\"has-value\", this.model.get(prop));\n\t\t\tel.classList.toggle(\"has-changed\", this.model.hasChanged(prop));\n\t\t\tel.classList.toggle(\"color-reverse\", this.model.hasChanged(prop));\n\t\t}\n\n\t\t// NOTE: Always but rewrite CMS href.\n\t\t// Only collapsed may have changed, but not worth all the logic\n\t\tvar attrVal = Globals.APP_ROOT + \"symphony/\";\n\t\tswitch (this.model.get(\"routeName\")) {\n\t\t\tcase \"article-item\":\n\t\t\t\tattrVal += \"publish/articles/edit/\" + this.model.get(\"article\").id;\n\t\t\t\tbreak;\n\t\t\tcase \"bundle-item\":\n\t\t\t\tattrVal += \"publish/bundles/edit/\" + this.model.get(\"bundle\").id;\n\t\t\t\tbreak;\n\t\t\tcase \"media-item\":\n\t\t\t\tattrVal += \"publish/media/edit/\" + this.model.get(\"media\").id;\n\t\t\t\tbreak;\n\t\t\tcase \"root\":\n\t\t\t\tattrVal += \"publish/bundles\";\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.backendEl.setAttribute(\"href\", attrVal);\n\n\t\tif (this.model.hasChanged(\"routeName\")) {\n\t\t\tdocument.body.setAttribute(\"last-route\", this.model.previous(\"routeName\"));\n\t\t\tdocument.body.setAttribute(\"current-route\", this.model.get(\"routeName\"));\n\t\t}\n\n\t\tif (this.model.hasChanged(\"media\")) {\n\t\t\tif (this.model.has(\"media\")) {\n\t\t\t\tthis.mediaInfoEl.textContent = sizeTemplate(this.model.get(\"media\").get(\"source\").toJSON());\n\t\t\t\tthis.mediaInfoEl.style.display = \"\";\n\t\t\t} else {\n\t\t\t\tthis.mediaInfoEl.textContent = \"\";\n\t\t\t\tthis.mediaInfoEl.style.display = \"none\";\n\t\t\t}\n\t\t}\n\t},\n\n\tcreateGridElement: function() {\n\t\tvar el = document.createElement(\"div\");\n\t\tel.id = \"grid-wrapper\";\n\t\tel.innerHTML = gridTemplate();\n\t\treturn el;\n\t},\n});\n\nmodule.exports.prototype._logFlags = \"\";\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg id=\\\"debug-grid\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" preserveAspectRatio=\\\"xMaxYMid slice\\\" viewport-fill=\\\"hsl(0,0%,100%)\\\" viewport-fill-opacity=\\\"1\\\" style=\\\"fill:none;stroke:none;stroke-width:1px;fill:none;fill-rule:evenodd;\\\">\\n<defs>\\n\t<pattern id=\\\"pat-baseline-12px\\\" class=\\\"baseline base12\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"20\\\" height=\\\"12\\\" patternUnits=\\\"userSpaceOnUse\\\">\\n\t\t<line x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"0\\\" stroke-opacity=\\\"1.0\\\"/>\\n\t\t<line x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"3\\\" y2=\\\"3\\\" stroke-opacity=\\\"0.125\\\"/>\\n\t\t<line x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"6\\\" y2=\\\"6\\\" stroke-opacity=\\\"0.375\\\"/>\\n\t\t<line x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"9\\\" y2=\\\"9\\\" stroke-opacity=\\\"0.125\\\"/>\\n\t</pattern>\\n\\n\t<pattern id=\\\"pat-baseline-24px\\\" class=\\\"baseline base12\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"20\\\" height=\\\"24\\\" patternUnits=\\\"userSpaceOnUse\\\">\\n\t\t<line x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"0\\\" stroke-opacity=\\\"1.0\\\"/>\\n\t</pattern>\\n\\n\t<pattern id=\\\"pat-baseline-10px\\\" class=\\\"baseline base10\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"20\\\" height=\\\"10\\\" patternUnits=\\\"userSpaceOnUse\\\">\\n\t\t<line x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"0\\\" stroke-opacity=\\\"1.00\\\"/>\\n\t\t<line x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"5\\\" y2=\\\"5\\\" stroke-opacity=\\\"0.75\\\"/>\\n\t</pattern>\\n\t<pattern id=\\\"pat-baseline-20px\\\" class=\\\"baseline base10\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"20\\\" height=\\\"20\\\" patternUnits=\\\"userSpaceOnUse\\\">\\n\t\t<line x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"0\\\" stroke-opacity=\\\"1.0\\\"/>\\n\t</pattern>\\n\t<pattern id=\\\"pat-cols-220px\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"220\\\" height=\\\"36\\\" patternUnits=\\\"userSpaceOnUse\\\">\\n\t\t<rect transform=\\\"translate(0,0)\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"20\\\" height=\\\"100%\\\" fill=\\\"hsl(336,50%,40%)\\\" fill-opacity=\\\"0.1\\\"/>\\n\t\t<rect transform=\\\"translate(200,0)\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"20\\\" height=\\\"100%\\\" fill=\\\"hsl(336,50%,40%)\\\" fill-opacity=\\\"0.1\\\"/>\\n\t\t<line transform=\\\"translate(20 0)\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\" stroke=\\\"hsl(336,50%,60%)\\\" stroke-opacity=\\\"0.2\\\"/>\\n\t\t<line transform=\\\"translate(200 0)\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\" stroke=\\\"hsl(336,50%,40%)\\\" stroke-opacity=\\\"0.2\\\"/>\\n\\n\t\t<line transform=\\\"translate(140 0)\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\" stroke=\\\"hsl(336,50%,40%)\\\" stroke-opacity=\\\"0.3\\\"/>\\n\t\t<line transform=\\\"translate(80 0)\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\" stroke=\\\"hsl(336,50%,40%)\\\" stroke-opacity=\\\"0.3\\\"/>\\n\\n\t\t<line transform=\\\"translate(0 0)\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\" stroke=\\\"hsl(236,50%,40%)\\\" stroke-opacity=\\\"0.4\\\" stroke-width=\\\"1\\\"/>\\n\t\t<line transform=\\\"translate(220 0)\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\" stroke=\\\"hsl(236,50%,40%)\\\" stroke-opacity=\\\"0.4\\\" stroke-width=\\\"1\\\"/>\\n\t</pattern>\\n</defs>\\n<g id=\\\"debug-grid-body\\\" transform=\\\"translate(0 0.5)\\\">\\n\t<rect id=\\\"baseline\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"100%\\\" height=\\\"100%\\\"/>\\n\t<g id=\\\"debug-grid-container\\\">\\n\t\t<g id=\\\"debug-grid-content\\\">\\n\t\t\t<rect id=\\\"baseline-content\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"100%\\\" height=\\\"100%\\\"/>\\n\t\t\t<line id=\\\"gct0\\\" class=\\\"hguide\\\" x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"0\\\"/>\\n\t\t\t<line id=\\\"gct1\\\" class=\\\"hguide\\\" x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"0\\\"/>\\n\t\t</g>\\n\t\t<line id=\\\"gnv0\\\" class=\\\"hguide\\\" x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"0\\\"/>\\n\t\t<line id=\\\"gnv1\\\" class=\\\"hguide\\\" x1=\\\"0\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"0\\\"/>\\n\t</g>\\n\\n\t<g id=\\\"abs-cols\\\">\\n\t\t<rect id=\\\"columns\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"100%\\\" height=\\\"100%\\\"/>\\n\t</g>\\n\\n\t<g id=\\\"rel-cols\\\">\\n\t\t<line id=\\\"le\\\" class=\\\"vguide edge\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\"/>\\n\t\t<line id=\\\"re\\\" class=\\\"vguide edge\\\" x1=\\\"100%\\\" x2=\\\"100%\\\" y1=\\\"0\\\" y2=\\\"100%\\\"/>\\n\\n\t\t<line id=\\\"gl0\\\" class=\\\"vguide margin\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\"/>\\n\t\t<line id=\\\"gl1\\\" class=\\\"vguide gutter\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\"/>\\n\\n\t\t<line id=\\\"gr0\\\" class=\\\"vguide margin\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\"/>\\n\t\t<line id=\\\"gr1\\\" class=\\\"vguide gutter\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\"/>\\n\\n\t\t<line id=\\\"gm\\\" class=\\\"vguide\\\" x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"100%\\\"/>\\n\t</g>\\n</g>\\n</svg>\\n\";\n},\"useData\":true});\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nvar partial$0 = require('../../view/template/svg/CogSymbol.hbs');\nHandlebarsCompiler.registerPartial('../../view/template/svg/CogSymbol.hbs', partial$0);\nmodule.exports = HandlebarsCompiler.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\t<dd id=\\\"select-layout\\\">\\n\t\t<select size=1>\\n\"\n    + ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.layouts : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t\t</select>\\n\t</dd>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"\t\t\t<option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\">\"\n    + alias2(alias1(depth0, depth0))\n    + \"</option>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {});\n\n  return \"\t\t<li class=\\\"\"\n    + ((stack1 = helpers[\"if\"].call(alias1,depth0,{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(7, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\">\"\n    + container.escapeExpression(((helper = (helper = helpers.key || (data && data.key)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"key\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</li>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \"passed\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \"failed\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.escapeExpression;\n\n  return \"<dl class=\\\"debug-links color-bg\\\">\\n\t<dt id=\\\"links-toggle\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"../../view/template/svg/CogSymbol.hbs\"],depth0,{\"name\":\"../../view/template/svg/CogSymbol.hbs\",\"data\":data,\"indent\":\"\\t\\t\",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"\t</dt>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.layouts : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t<dd id=\\\"edit-backend\\\">\\n\t\t<a href=\\\"\"\n    + alias2((helpers.global || (depth0 && depth0.global) || helpers.helperMissing).call(alias1,\"APP_ROOT\",{\"name\":\"global\",\"hash\":{},\"data\":data}))\n    + \"symphony/\\\" class=\\\"color-fg color-bg\\\" target=\\\"_blank\\\">CMS</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-tests\\\">\\n\t\t<a href=\\\"#toggle-tests\\\" class=\\\"color-fg color-bg\\\">Tests</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-state\\\">\\n\t\t<a href=\\\"#toggle-state\\\" class=\\\"color-fg color-bg\\\">Route</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-blocks-nav\\\">\\n\t\t<a href=\\\"#toggle-blocks-nav\\\" class=\\\"color-fg color-bg\\\">Nav</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-blocks-content\\\">\\n\t\t<a href=\\\"#toggle-blocks-content\\\" class=\\\"color-fg color-bg\\\">Content</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-mdown\\\">\\n\t\t<a href=\\\"#toggle-mdown\\\" class=\\\"color-fg color-bg\\\">Markdown</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-tx\\\">\\n\t\t<a href=\\\"#toggle-tx\\\" class=\\\"color-fg color-bg\\\">TX/FX</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-grid-bg\\\">\\n\t\t<a href=\\\"#toggle-grid-bg\\\" class=\\\"color-fg color-bg\\\">Grid</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-graph\\\">\\n\t\t<a href=\\\"#toggle-graph\\\" class=\\\"color-fg color-bg\\\">Graph</a>\\n\t</dd>\\n\t<dd id=\\\"toggle-logs\\\">\\n\t\t<a href=\\\"#toggle-logs\\\" class=\\\"color-fg color-bg\\\">Logs</a>\\n\t</dd>\\n\t<dd id=\\\"media-info\\\">\\n\t\t<span></span>\\n\t</dd>\\n\t<dd id=\\\"viewport-info\\\">\\n\t\t<span></span>\\n\t</dd>\\n\t<dd id=\\\"app-state\\\">\\n\t\t<span class=\\\"color-fg color-bg\\\" data-prop=\\\"collapsed\\\">c</span><span class=\\\"color-fg color-bg\\\" data-prop=\\\"withBundle\\\">b</span><span class=\\\"color-fg color-bg\\\" data-prop=\\\"withMedia\\\">m</span><span class=\\\"color-fg color-bg\\\" data-prop=\\\"withArticle\\\">a</span>\\n\t</dd>\\n</dl>\\n<div id=\\\"test-results\\\">\\n\t<h6>Tests <a id=\\\"toggle-passed\\\" href=\\\"#toggle-passed\\\">Passed</a></h6>\\n\t<p>\"\n    + alias2(container.lambda(((stack1 = (depth0 != null ? depth0.navigator : depth0)) != null ? stack1.userAgent : stack1), depth0))\n    + \"</p>\\n\t<ul>\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.tests : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t</ul>\\n</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n",
    "/**\n * @module app/model/BaseItem\n * @requires module:backbone\n */\n/** @type {module:backbone} */\nconst BaseModel = require(\"backbone\").Model;\n// /** @type {module:app/model/BaseModel} */\n// var BaseModel = require(\"app/model/BaseModel\");\n\n// /** @type {module:utils/strings/stripTags} */\n// const stripTags = require(\"utils/strings/stripTags\");\n// /** @type {module:app/control/Globals} */\n// const Globals = require(\"app/control/Globals\");\n\nmodule.exports = BaseModel.extend({\n\n\tdefaults: {\n\t\trouteName: \"initial\",\n\t\tfromRouteName: \"\",\n\t\tpage: \"\",\n\t\tarticle: null,\n\t\tbundle: null,\n\t\tmedia: null,\n\t\twithArticle: false,\n\t\twithBundle: false,\n\t\twithMedia: false,\n\t\tcollapsed: false\n\t},\n\n\tgetters: [\n\t\t\"page\",\n\t\t\"routeName\",\n\t\t\"fromRouteName\",\n\t\t\"article\",\n\t\t\"bundle\",\n\t\t\"media\",\n\t\t\"withArticle\",\n\t\t\"withBundle\",\n\t\t\"withMedia\",\n\t\t\"collapsed\"\n\t],\n\n\t// mutators: {\n\t// \trouteName: {\n\t// \t\tset: function(key, value, opts, set) {\n\t// \t\t\t// Set fromRoute to avoid losing current \"changing\" state\n\t// \t\t\tthis._previousAttributes[\"fromRouteName\"] = this.attributes[\"fromRouteName\"];\n\t// \t\t\tthis.changed[\"fromRouteName\"] = this.attributes[\"fromRouteName\"] = this.previous(\"routeName\");\n\t// \t\t\t// set(\"fromRouteName\", this.previous(\"routeName\"), {\n\t// \t\t\t// \tsilent: true\n\t// \t\t\t// });\n\t// \t\t}\n\t// \t}\n\t// },\n\n\tinitialize: function() {\n\t\t// this.listenTo(this, {\n\t\t// \t\"change:routeName\": function() {\n\t\t// \t\tthis.set(\"fromRouteName\", this.previous(\"routeName\"));\n\t\t// \t},\n\t\t// \t\"change:article\": function(val) {\n\t\t// \t\tconsole.log(\"%s:[change] %o\", this.cid, arguments);\n\t\t// \t\tthis.set(\"withArticle\", (typeof val === 'object'));\n\t\t// \t},\n\t\t// \t\"change:bundle\": function(val) {\n\t\t// \t\tconsole.log(\"%s:[change] %o\", this.cid, arguments);\n\t\t// \t\tthis.set(\"withBundle\", (typeof val === 'object'));\n\t\t// \t},\n\t\t// \t\"change:media\": function(val) {\n\t\t// \t\tconsole.log(\"%s:[change] %o\", this.cid, arguments);\n\t\t// \t\tthis.set(\"withMedia\", (typeof val === 'object'));\n\t\t// \t},\n\t\t// });\n\n\t\t// this.set({\n\t\t// \tfromRouteName: \"\",\n\t\t// \t\twithArticle: false,\n\t\t// \t\twithBundle: false,\n\t\t// \t\twithMedia: false\n\t\t// });\n\t\tvar opts = { silent: false };\n\n\t\tthis.listenTo(this, \"change\", function(attrs) {\n\t\t\t// var opts = { silent: false };\n\t\t\tif (this.hasChanged(\"routeName\")) {\n\t\t\t\tthis.set(\"fromRouteName\", this.previous(\"routeName\"), opts);\n\t\t\t}\n\t\t\tif (this.hasChanged(\"article\")) {\n\t\t\t\tthis.set(\"withArticle\", this.has(\"article\"), opts);\n\t\t\t}\n\t\t\tif (this.hasChanged(\"bundle\")) {\n\t\t\t\tthis.set(\"withBundle\", this.has(\"bundle\"), opts);\n\t\t\t}\n\t\t\tif (this.hasChanged(\"media\")) {\n\t\t\t\tthis.set(\"withMedia\", this.has(\"media\"), opts);\n\t\t\t}\n\t\t\t// this.set(\"pageTitle\", this._getDocumentTitle(), { silent: true });\n\t\t});\n\n\t\tthis.listenTo(this, \"change:routeName\",\n\t\t\tfunction(val) {\n\t\t\t\tconsole.log(\"%s:[change:routeName] %o\", this.cid, val);\n\t\t\t\t// this.set(\"fromRouteName\", this.previous(\"routeName\"));\n\t\t\t});\n\t\tthis.listenTo(this, \"change:article\",\n\t\t\tfunction(val) {\n\t\t\t\tconsole.log(\"%s:[change:article] %o\", this.cid, val);\n\t\t\t\t// this.set(\"withArticle\", _.isObject(val));\n\t\t\t});\n\t\tthis.listenTo(this, \"change:bundle\",\n\t\t\tfunction(val) {\n\t\t\t\tconsole.log(\"%s:[change:bundle] %o\", this.cid, val);\n\t\t\t\t// this.set(\"withBundle\", _.isObject(val));\n\t\t\t});\n\t\tthis.listenTo(this, \"change:media\",\n\t\t\tfunction(val) {\n\t\t\t\tconsole.log(\"%s:[change:media] %o\", this.cid, val);\n\t\t\t\t// this.set(\"withMedia\", _.isObject(val));\n\t\t\t});\n\t},\n\n\thasAnyPrevious: function(attr) {\n\t\treturn this.previous(attr) != null;\n\t},\n\n\thasAnyChanged: function(attr) {\n\t\treturn this.hasChanged(attr) && (this.has(attr) != this.hasAnyPrevious(attr));\n\t},\n\n\t// _getDocumentTitle: function() {\n\t// \tlet docTitle = [];\n\t// \tdocTitle.push(Globals.APP_NAME);\n\t// \tif (this.get(\"bundle\")) {\n\t// \t\tdocTitle.push(stripTags(this.get(\"bundle\").get(\"name\")));\n\t// \t\tif (this.model.get(\"media\")) {\n\t// \t\t\tdocTitle.push(stripTags(this.get(\"media\").get(\"name\")));\n\t// \t\t}\n\t// \t} else if (this.get(\"article\")) {\n\t// \t\tdocTitle.push(stripTags(this.get(\"article\").get(\"name\")));\n\t// \t}\n\t// \treturn _.unescape(docTitle.join(\" / \"));\n\t// }\n\n\t// constructor: function() {\n\t// \tObject.keys(this.defaults).forEach(function(getterName) {\n\t// \t\tObject.defineProperty(this, getterName, {\n\t// \t\t\tenumerable: true,\n\t// \t\t\tget: function() {\n\t// \t\t\t\treturn this.get(getterName);\n\t// \t\t\t}\n\t// \t\t});\n\t// \t});\n\t// \tBaseModel.apply(this, arguments);\n\t// }\n});\n",
    "/**\n * @module app/model/BaseItem\n * @requires module:backbone\n */\n\n/** @type {module:app/model/BaseModel} */\nconst BaseModel = require(\"app/model/BaseModel\");\n\n// /** @type {module:app/control/Globals} */\n// var Globals = require(\"app/control/Globals\");\n// /** @type {module:app/utils/strings/stripTags} */\n// var stripTags = require(\"utils/strings/stripTags\");\n// /** @type {module:app/model/parseSymAttrs} */\n//var parseSymAttrs = require(\"app/model/parseSymAttrs\");\n\nvar parseSymAttrs = function(s) {\n\treturn s.replace(/(\\,|\\;)/g, function(m) {\n\t\treturn (m == \",\") ? \";\" : \",\";\n\t});\n};\nvar toAttrsHash = function(obj, attr) {\n\tif (_.isString(attr)) {\n\t\tvar idx = attr.indexOf(\":\");\n\t\tif (idx > 0) {\n\t\t\tobj[attr.substring(0, idx)] = parseSymAttrs(attr.substring(idx + 1));\n\t\t} else {\n\t\t\tobj[attr] = attr; // to match HTML5<>XHTML valueless attributes\n\t\t}\n\t} // else ignore non-string values\n\treturn obj;\n};\n/**\n * @constructor\n * @type {module:app/model/BaseItem}\n */\nmodule.exports = BaseModel.extend({\n\n\t_domPrefix: \"_\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\t// attrs: function() { return {}; },\n\t\tget attrs() {\n\t\t\treturn {};\n\t\t},\n\t},\n\n\tgetters: [\"domid\"],\n\n\tmutators: {\n\t\tdomid: function() {\n\t\t\tif (!this.hasOwnProperty(\"_domId\"))\n\t\t\t\tthis._domId = this._domPrefix + this.id;\n\t\t\treturn this._domId;\n\t\t},\n\t\tattrs: {\n\t\t\tset: function(key, value, options, set) {\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tvalue = value.reduce(toAttrsHash, {});\n\t\t\t\t}\n\t\t\t\tif (!_.isObject(value)) {\n\t\t\t\t\tconsole.error(\"%s::attrs value not an object or string array\", this.cid, value);\n\t\t\t\t\tvalue = {};\n\t\t\t\t}\n\t\t\t\tset(key, value, options);\n\t\t\t}\n\t\t},\n\t},\n\n\tattr: function(attr) {\n\t\treturn this.attrs()[attr];\n\t},\n\n\tattrs: function() {\n\t\treturn this.get(\"attrs\");\n\t},\n\n\ttoString: function() {\n\t\treturn this.get(\"domid\");\n\t},\n\n\tgetDistanceToSelected: function() {\n\t\tif (this.collection && this.collection.selectedIndex > 0) {\n\t\t\treturn this.collection.indexOf(this) - this.collection.selectedIndex;\n\t\t}\n\t\treturn -1;\n\t},\n\n\tgetIndex: function() {\n\t\tif (this.collection) {\n\t\t\treturn this.collection.indexOf(this);\n\t\t}\n\t\treturn -1;\n\t}\n});\n",
    "/**\n * @module app/model/BaseModel\n * @requires module:backbone\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\nvar BaseModelProto = {\n\t// constructor: function() {\n\t// \tif (this.properties) {\n\t// \t\tObject.defineProperties(this, this.properties);\n\t// \t}\n\t// \tBackbone.Model.apply(this, arguments);\n\t// }\n};\n\nvar BaseModel = {\n\textend: function(proto, obj) {\n\t\tvar constr, propName; //, propDef;\n\t\tfor (propName in proto) {\n\t\t\tif (proto.hasOwnProperty(propName) && _.isObject(proto[propName])) { //(Object.getPrototypeOf(proto[propName]) === Object.prototype)) {\n\t\t\t\tproto[propName] = _.defaults(proto[propName], this.prototype[propName]);\n\t\t\t\t// console.log(\"BaseModel::extend '%s:%s' is Object\\n%s\", proto._domPrefix, propName, JSON.stringify(proto[propName]));\n\t\t\t}\n\t\t}\n\n\t\t// if (_.isObject(proto.properties)) {\n\t\t// \tif (Array.isArray(proto.getters)) {\n\t\t// \t\tproto.properties = _.omit(proto.properties, proto.getters);\n\t\t// \t}\n\t\t// }\n\t\t// if (proto.properties && this.prototype.properties) {\n\t\t// \t_.defaults(proto.properties, this.prototype.properties);\n\t\t// }\n\n\t\tconstr = Backbone.Model.extend.apply(this, arguments);\n\n\t\tif (Array.isArray(constr.prototype.getters)) {\n\t\t\tconstr.prototype.getters.forEach(function(getterName) {\n\t\t\t\tObject.defineProperty(constr.prototype, getterName, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn this.get(getterName);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// if (Array.isArray(constr.prototype.properties)) {\n\t\t// }\n\n\t\t// if (_.isObject(proto.properties)) {\n\t\t// \tfor (propName in proto.properties) {\n\t\t// \t\tif (proto.properties.hasOwnProperty(propName)) {\n\t\t// \t\t\tpropDef = proto.properties[propName];\n\t\t// \t\t\tif (_.isFunction(propDef)) {\n\t\t// \t\t\t\tproto.properties[propName] = {\n\t\t// \t\t\t\t\tenumerable: true, get: propDef\n\t\t// \t\t\t\t};\n\t\t// \t\t\t} else if (_.isObject(propDef)){\n\t\t// \t\t\t\tpropDef.enumerable = true;\n\t\t// \t\t\t} else {\n\t\t// \t\t\t\tdelete proto.properties[propName];\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// \tObject.defineProperties(proto, proto.properties);\n\t\t// \tdelete proto.properties;\n\t\t// }\n\t\treturn constr;\n\t}\n};\n\n/**\n * @constructor\n * @type {module:app/model/BaseModel}\n */\nmodule.exports = Backbone.Model.extend.call(Backbone.Model, BaseModelProto, BaseModel);\n// module.exports = Model.extend(BaseModelProto, BaseModel);\n",
    "/**\n * @module app/model/SelectableCollection\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n/**\n * @constructor\n * @type {module:app/model/SelectableCollection}\n */\nvar SelectableCollection = Backbone.Collection.extend({\n\n\tinitialize: function(models, options) {\n\t\toptions = _.defaults({}, options, {\n\t\t\tinitialSelection: \"none\",\n\t\t\tsilentInitial: true\n\t\t});\n\t\tthis.initialSelection = options.initialSelection;\n\t\tthis.initialOptions = {\n\t\t\tsilent: options.silentInitial\n\t\t};\n\t},\n\n\treset: function(models, options) {\n\t\tthis.deselect(this.initialOptions);\n\t\tBackbone.Collection.prototype.reset.apply(this, arguments);\n\t\tif (this.initialSelection === \"first\" && this.length) {\n\t\t\tthis.select(this.at(0), this.initialOptions);\n\t\t}\n\t},\n\n\tselect: function(newModel, options) {\n\t\tif (newModel === void 0) {\n\t\t\tnewModel = null;\n\t\t}\n\t\tif (this.selected === newModel) {\n\t\t\treturn;\n\t\t}\n\t\tvar triggerEvents = !(options && options.silent);\n\t\tvar oldModel = this.selected;\n\n\t\tthis.lastSelected = this.selected;\n\t\tthis.lastSelectedIndex = this.selectedIndex;\n\t\tthis.selected = newModel;\n\t\tthis.selectedIndex = this.indexOf(newModel);\n\n\t\tif (oldModel) {\n\t\t\tif (_.isFunction(oldModel.deselect)) {\n\t\t\t\toldModel.deselect(options);\n\t\t\t} else if (triggerEvents) {\n\t\t\t\toldModel.selected = void 0;\n\t\t\t\toldModel.trigger(\"deselected\", newModel, oldModel);\n\t\t\t}\n\t\t\tif (triggerEvents) this.trigger(\"deselect:one\", oldModel);\n\t\t} else {\n\t\t\tif (triggerEvents) this.trigger(\"deselect:none\", null);\n\t\t}\n\n\t\tif (newModel) {\n\t\t\tif (_.isFunction(newModel.select)) {\n\t\t\t\tnewModel.select(options);\n\t\t\t} else if (triggerEvents) {\n\t\t\t\tnewModel.selected = true;\n\t\t\t\tnewModel.trigger(\"selected\", newModel, oldModel);\n\t\t\t}\n\t\t\tif (triggerEvents) this.trigger(\"select:one\", newModel);\n\t\t} else {\n\t\t\tif (triggerEvents) this.trigger(\"select:none\", null);\n\t\t}\n\t},\n\n\tdeselect: function(options) {\n\t\tthis.select(null, options);\n\t},\n\n\tselectAt: function(index, options) {\n\t\tif (0 > index || index >= this.length) {\n\t\t\tnew RangeError(\"index is out of bounds\");\n\t\t}\n\t\tthis.select(this.at(index), options);\n\t},\n\n\tdistance: function(a, b) {\n\t\tvar aIdx, bIdx;\n\n\t\tif (!a) return NaN;\n\t\taIdx = this.indexOf(a);\n\t\tif (aIdx == -1) return NaN;\n\n\t\tif (arguments.length == 1) {\n\t\t\tbIdx = this.selectedIndex;\n\t\t} else {\n\t\t\tif (!b) return NaN;\n\t\t\tbIdx = this.indexOf(b);\n\t\t\tif (bIdx == -1) return NaN;\n\t\t}\n\t\treturn Math.abs(bIdx - aIdx);\n\t},\n\n\t/* TODO: MOVE INTO MIXIN */\n\n\t/** @return boolean\t/*/\n\thasFollowing: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.indexOf(model) < (this.length - 1);\n\t},\n\n\t/** @return next model\t*/\n\tfollowing: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.hasFollowing(model) ? this.at(this.indexOf(model) + 1) : null;\n\t},\n\n\t/** @return next model or the beginning if at the end */\n\tfollowingOrFirst: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.at((this.indexOf(model) + 1) % this.length);\n\t},\n\n\t/** @return boolean\t/*/\n\thasPreceding: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.indexOf(model) > 0;\n\t},\n\n\t/** @return the previous model */\n\tpreceding: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.hasPreceding(model) ? this.at(this.indexOf(model) - 1) : null;\n\t},\n\n\t/** @return the previous model or the end if at the beginning */\n\tprecedingOrLast: function(model) {\n\t\tmodel || (model = this.selected);\n\t\tvar index = this.indexOf(model) - 1;\n\t\treturn this.at(index > -1 ? index : this.length - 1);\n\t},\n\n});\n\nmodule.exports = SelectableCollection;\n",
    "/**\n * @module app/model/collection/ArticleCollection\n */\n\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/model/item/ArticleItem} */\nconst ArticleItem = require(\"app/model/item/ArticleItem\");\n\n/**\n * @constructor\n * @type {module:app/model/collection/ArticleCollection}\n */\nvar ArticleCollection = SelectableCollection.extend({\n\n\t/** @type {Backbone.Model} */\n\tmodel: ArticleItem\n\n});\n\nmodule.exports = new ArticleCollection();\n",
    "/**\n * @module app/model/collection/BundleCollection\n */\n\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/model/item/BundleItem} */\nconst BundleItem = require(\"app/model/item/BundleItem\");\n\n/**\n * @constructor\n * @type {module:app/model/collection/BundleCollection}\n */\nvar BundleCollection = SelectableCollection.extend({\n\n\t/** @type {Backbone.Model} */\n\tmodel: BundleItem,\n\n\t/** @type {Function} */\n\tcomparator: function(oa, ob) {\n\t\tvar a = oa.get(\"completed\");\n\t\tvar b = ob.get(\"completed\");\n\t\tif (a > b) {\n\t\t\treturn -1;\n\t\t} else if (a < b) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t},\n\n\t/** @type {String} */\n\turl: \"/json/bundles/\",\n\n});\n\nmodule.exports = new BundleCollection();\n",
    "/**\n * @module app/model/collection/KeywordCollection\n * @requires module:backbone\n */\n\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/model/item/KeywordItem} */\nconst KeywordItem = require(\"app/model/item/KeywordItem\");\n\n/**\n * @constructor\n * @type {module:app/model/collection/KeywordCollection}\n */\nvar KeywordCollection = SelectableCollection.extend({\n\n\t/** @type {Backbone.Model} */\n\tmodel: KeywordItem\n\n});\n\nmodule.exports = new KeywordCollection();\n",
    "/**\n * @module app/model/collection/TypeCollection\n * @requires module:backbone\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n/** @type {module:app/model/item/TypeItem} */\nconst TypeItem = require(\"app/model/item/TypeItem\");\n\n/**\n * @constructor\n * @type {module:app/model/collection/TypeCollection}\n */\nvar TypeCollection = Backbone.Collection.extend({\n\n\t/** @type {Backbone.Model} */\n\tmodel: TypeItem\n\n});\n\nmodule.exports = new TypeCollection();\n",
    "module.exports = function(bootstrap) {\n\n\t/** @type {module:app/control/Globals} */\n\tvar Globals = require(\"app/control/Globals\");\n\n\t// Globals.GA_TAGS = bootstrap[\"ga-tags\"];\n\t// Globals.PARAMS = bootstrap[\"params\"];\n\t// Globals.APP_ROOT = bootstrap[\"params\"][\"root\"];\n\t// Globals.MEDIA_DIR = bootstrap[\"params\"][\"uploads\"];\n\tGlobals.APP_NAME = bootstrap[\"params\"][\"website-name\"];\n\n\t/** @type {module:app/model/collection/TypeCollection} */\n\tvar typeList = require(\"app/model/collection/TypeCollection\");\n\t/** @type {module:app/model/collection/KeywordCollection} */\n\tvar keywordList = require(\"app/model/collection/KeywordCollection\");\n\t/** @type {module:app/model/collection/BundleCollection} */\n\tvar bundleList = require(\"app/model/collection/BundleCollection\");\n\t/** @type {module:app/model/collection/ArticleCollection} */\n\tvar articleList = require(\"app/model/collection/ArticleCollection\");\n\n\t// Fix-ups to bootstrap data.\n\tvar articles = bootstrap[\"articles-all\"];\n\tvar types = bootstrap[\"types-all\"];\n\tvar keywords = bootstrap[\"keywords-all\"];\n\tvar bundles = bootstrap[\"bundles-all\"];\n\tvar media = bootstrap[\"media-all\"];\n\n\t// Attach media to their bundles\n\tvar mediaByBundle = _.groupBy(media, \"bId\");\n\n\t// Fill-in back-references:\n\t// Create Keyword.bundleIds from existing Bundle.keywordIds,\n\t// then Bundle.typeIds from unique Keyword.typeId\n\n\t// _.each(bundles, function (bo, bi, ba) {\n\tbundles.forEach(function(bo, bi, ba) {\n\t\tbo.tIds = [];\n\t\tbo.media = mediaByBundle[bo.id];\n\t\t// _.each(keywords, function (ko, ki, ka) {\n\t\tkeywords.forEach(function(ko, ki, ka) {\n\t\t\tif (bi === 0) {\n\t\t\t\tko.bIds = [];\n\t\t\t}\n\t\t\t// if (_.contains(bo.kIds, ko.id)) {\n\t\t\tif (bo.kIds.indexOf(ko.id) != -1) {\n\t\t\t\tko.bIds.push(bo.id);\n\t\t\t\t// if (!_.contains(bo.tIds, ko.tId)) {\n\t\t\t\tif (bo.tIds.indexOf(ko.tId) == -1) {\n\t\t\t\t\tbo.tIds.push(ko.tId);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\t// Fill collection singletons\n\tarticleList.reset(articles);\n\ttypeList.reset(types);\n\tkeywordList.reset(keywords);\n\tbundleList.reset(bundles);\n\n\t// bootstrap[\"params\"] = bootstrap[\"articles-all\"] = bootstrap[\"types-all\"] = bootstrap[\"keywords-all\"] = bootstrap[\"bundles-all\"] = bootstrap[\"media-all\"] = null;\n};\n",
    "/**\n * @module app/model/item/ArticleItem\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n\n/**\n * @constructor\n * @type {module:app/model/item/ArticleItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"a\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tname: \"\",\n\t\thandle: \"\",\n\t\ttext: \"\"\n\t},\n\n});\n",
    "/**\n * @module app/model/item/BundleItem\n * @requires module:backbone\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");/** @type {Function} */\nconst Color = require(\"color\");\n\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n/** @type {module:app/model/item/MediaItem} */\nconst MediaItem = require(\"app/model/item/MediaItem\");\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/utils/strings/stripTags} */\nconst stripTags = require(\"utils/strings/stripTags\");\n// /** @type {module:app/utils/strings/parseTaglist} */\n// var parseSymAttrs = require(\"app/model/parseSymAttrs\");\n\n// /** @type {module:app/model/collection/KeywordCollection} */\n// var keywords = require(\"app/model/collection/KeywordCollection\");\n\n// Globals.DEFAULT_COLORS[\"color\"];\n// Globals.DEFAULT_COLORS[\"background-color\"];\nvar attrsDefault = _.defaults({\n\t\"has-colors\": \"defaults\"\n}, Globals.DEFAULT_COLORS);\n\n/** @private */\nvar MediaCollection = SelectableCollection.extend({\n\tmodel: MediaItem,\n\tcomparator: \"o\"\n});\n\n/**\n * @constructor\n * @type {module:app/model/item/BundleItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"b\",\n\n\t/** @type {Object|Function} */\n\t// defaults: function() {\n\t// \treturn {\n\t// \t\tname: \"\",\n\t// \t\thandle: \"\",\n\t// \t\tdesc: \"\",\n\t// \t\tcompleted: 0,\n\t// \t\tkIds: [],\n\t// \t};\n\t// },\n\tdefaults: {\n\t\tname: \"\",\n\t\thandle: \"\",\n\t\tdesc: \"\",\n\t\tcompleted: 0,\n\t\tget kIds() {\n\t\t\treturn [];\n\t\t},\n\t\t// get keywords() { return []; },\n\t},\n\n\tgetters: [\"name\", \"media\"],\n\n\tmutators: {\n\t\ttext: function() {\n\t\t\treturn stripTags(this.get(\"desc\"));\n\t\t},\n\t\t// kIds: {\n\t\t// \tset: function (key, value, options, set) {\n\t\t// \t\tif (Array.isArray(value)) {\n\t\t// \t\t\tset(\"keywords\", value.map(function(id) {\n\t\t// \t\t\t\tvar obj = keywords.get(id);\n\t\t// \t\t\t\treturn obj;\n\t\t// \t\t\t}, this), options;\n\t\t// \t\t}\n\t\t// \t\tset(key, value, options);\n\t\t// \t},\n\t\t// },\n\t\tmedia: {\n\t\t\ttransient: true,\n\t\t\tset: function(key, value, options, set) {\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tvalue.forEach(function(o) {\n\t\t\t\t\t\to.bundle = this;\n\t\t\t\t\t}, this);\n\t\t\t\t\tvalue = new MediaCollection(value);\n\t\t\t\t}\n\t\t\t\tset(key, value, options);\n\t\t\t},\n\t\t},\n\t},\n\n\tinitialize: function(attrs, options) {\n\t\tthis.colors = {\n\t\t\tfgColor: new Color(this.attr(\"color\")),\n\t\t\tbgColor: new Color(this.attr(\"background-color\")),\n\t\t\tlnColor: new Color(this.attr(\"link-color\")),\n\t\t};\n\t\tthis.colors.hasDarkBg = this.colors.fgColor.luminosity() > this.colors.bgColor.luminosity();\n\t},\n\n\tattrs: function() {\n\t\treturn this._attrs || (this._attrs = _.defaults({}, this.get(\"attrs\"), attrsDefault));\n\t},\n});\n",
    "/**\n * @module app/model/item/KeywordItem\n * @requires module:app/model/BaseItem\n */\n\n/** @type {module:app/model/BaseItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n\n// /** @type {module:app/model/collection/TypeCollection} */\n// var types = require(\"app/model/collection/TypeCollection\");\n\n/**\n * @constructor\n * @type {module:app/model/item/KeywordItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"k\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tname: \"\",\n\t\thandle: \"\",\n\t\ttId: -1,\n\t},\n\n\t// mutators: {\n\t// \ttId: {\n\t// \t\tset: function (key, value, options, set) {\n\t// \t\t\tvar type = types.get(value);\n\t// \t\t\tif (type) {\n\t// \t\t\t\ttype.get(\"keywords\").push(this);\n\t// \t\t\t\tset(\"type\", type, options);\n\t// \t\t\t}\n\t// \t\t\tset(key, value, options);\n\t// \t\t}\n\t// \t},\n\t// }\n});\n",
    "/**\n * @module app/model/item/MediaItem\n * @requires module:backbone\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");/** @type {Function} */\nconst Color = require(\"color\");\n\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n/** @type {module:app/model/item/SourceItem} */\nconst SourceItem = require(\"app/model/item/SourceItem\");\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/utils/strings/stripTags} */\nconst stripTags = require(\"utils/strings/stripTags\");\n// /** @type {module:app/model/parseSymAttrs} */\n// var parseSymAttrs = require(\"app/model/parseSymAttrs\");\n\n// console.log(Globals.PARAMS);\n\nvar urlTemplates = {\n\t\"original\": _.template(Globals.MEDIA_DIR + \"/<%= src %>\"),\n\t\"constrain-width\": _.template(Globals.APP_ROOT + \"image/1/<%= width %>/0/uploads/<%= src %>\"),\n\t\"constrain-height\": _.template(Globals.APP_ROOT + \"image/1/0/<%= height %>/uploads/<%= src %>\"),\n\t\"debug-bandwidth\": _.template(Globals.MEDIA_DIR.replace(/(https?\\:\\/\\/[^\\/]+)/, \"$1/slow/<%= kbps %>\") + \"/<%= src %>\"),\n};\n\n/**\n * @constructor\n * @type {module:app/model/item/MediaItem.SourceCollection}\n */\nvar SourceCollection = SelectableCollection.extend({\n\tmodel: SourceItem\n});\n\n/**\n * @constructor\n * @type {module:app/model/item/MediaItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"m\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tname: \"<p><em>Untitled</em></p>\",\n\t\tsub: \"\",\n\t\to: 0,\n\t\tbId: -1,\n\t\tsrcIdx: 0,\n\t\tget srcset() {\n\t\t\treturn [];\n\t\t},\n\t\tget sources() {\n\t\t\treturn new SourceCollection();\n\t\t},\n\t},\n\n\tgetters: [\"name\", \"bundle\", \"source\", \"sources\"],\n\n\tmutators: {\n\t\t// desc: function() {\n\t\t// \treturn this.get(\"name\");\n\t\t// },\n\t\thandle: function() {\n\t\t\treturn this.get(\"src\");\n\t\t},\n\t\ttext: function() {\n\t\t\tif (!this.hasOwnProperty(\"_text\"))\n\t\t\t\tthis._text = _.unescape(stripTags(this.get(\"name\")));\n\t\t\treturn this._text;\n\t\t},\n\t\tattrs: {\n\t\t\tset: function(key, value, opts, set) {\n\t\t\t\tthis._attrs = null;\n\t\t\t\tBaseItem.prototype.mutators.attrs.set.apply(this, arguments);\n\t\t\t\tthis._updateSources();\n\t\t\t}\n\t\t},\n\t\tsrcset: {\n\t\t\tset: function(key, value, opts, set) {\n\t\t\t\tset(key, value, opts);\n\t\t\t\tthis.get(\"sources\").reset(value, opts);\n\t\t\t\tthis._updateSources();\n\t\t\t}\n\t\t},\n\t\tsource: {\n\t\t\ttransient: true,\n\t\t\tget: function() {\n\t\t\t\treturn this.get(\"sources\").at(this.get(\"srcIdx\"));\n\t\t\t},\n\t\t},\n\t},\n\n\tinitialize: function() {\n\t\tthis._updateColors();\n\t\tthis.listenTo(this, \"change:attrs change:bundle\", function() {\n\t\t\tthis._attrs = null;\n\t\t});\n\t},\n\n\tattrs: function() {\n\t\treturn this._attrs || (this._attrs = _.defaults({}, this.get(\"bundle\").attrs(), this.get(\"attrs\")));\n\t},\n\n\t_updateColors: function() {\n\t\tthis.colors = {\n\t\t\tfgColor: new Color(this.attr(\"color\")),\n\t\t\tbgColor: new Color(this.attr(\"background-color\"))\n\t\t};\n\t\tthis.colors.hasDarkBg = this.colors.fgColor.luminosity() > this.colors.bgColor.luminosity();\n\t},\n\n\t_updateSources: function() {\n\t\tvar srcObj = {\n\t\t\tkbps: this.attr(\"@debug-bandwidth\")\n\t\t};\n\t\tvar srcTpl = urlTemplates[srcObj.kbps ? \"debug-bandwidth\" : \"original\"];\n\t\tthis.get(\"sources\").forEach(function(item) {\n\t\t\tsrcObj.src = item.get(\"src\");\n\t\t\titem.set(\"original\", srcTpl(srcObj));\n\t\t});\n\t},\n\n\t// _updateSourcesArr: function() {\n\t// \tvar srcset = this.get(\"srcset\");\n\t// \tif (Array.isArray(srcset)) {\n\t// \t\tvar srcObj = { kbps: this.attr(\"@debug-bandwidth\") };\n\t// \t\tvar srcTpl = Globals.MEDIA_SRC_TPL[srcObj.kbps? \"debug-bandwidth\" : \"original\"];\n\t// \t\tsrcset.forEach(function(o) {\n\t// \t\t\tsrcObj.src = o.src;\n\t// \t\t\to.original = srcTpl(srcObj);\n\t// \t\t}, this);\n\t// \t}\n\t// \tthis.get(\"sources\").reset(srcset);\n\t// },\n\n});\n",
    "/**\n * @module app/model/item/SourceItem\n * @requires module:backbone\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");\n// /** @type {module:app/control/Globals} */\n// var Globals = require(\"app/control/Globals\");\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n\n/** @type {String} */\nvar noCacheSuffix = \"?\" + Date.now();\n\n/**\n * @constructor\n * @type {module:app/model/item/SourceItem}\n */\n// module.exports = Backbone.Model.extend({\nmodule.exports = BaseItem.extend({\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tsrc: null,\n\t\tmime: null,\n\t\tw: null,\n\t\th: null,\n\t},\n\n\tgetters: [\"src\", \"original\"],\n\n\tmutators: {\n\t\tsrc: {\n\t\t\tset: function(key, value, options, set) {\n\t\t\t\tif (DEBUG) {\n\t\t\t\t\tvalue += noCacheSuffix;\n\t\t\t\t}\n\t\t\t\tset(key, value, options);\n\t\t\t}\n\t\t},\n\t\t// original: { \n\t\t// \ttransient: true,\n\t\t// \tget: function (key, value, options, set) {\n\t\t// \t\treturn this.attributes.original || (this.attributes.original = this._composeOriginalSrc());\n\t\t// \t},\n\t\t// },\n\t\t// media: {\n\t\t// \ttransient: true,\n\t\t// \tget: function () {\n\t\t// \t\tvar retval;\n\t\t// \t\tif (this._noRecusion) {\n\t\t// \t\t\tconsole.log(\"%s::media returning null\", this.cid);\n\t\t// \t\t\tretval = null;//this.id;\n\t\t// \t\t} else {\n\t\t// \t\t\tconsole.log(\"%s::media returning Object\", this.cid);\n\t\t// \t\t\tthis._noRecusion = true;\n\t\t// \t\t\tretval = this.attributes.media;\n\t\t// \t\t\tthis._noRecusion = false;\n\t\t// \t\t}\n\t\t// \t\treturn retval;\n\t\t// \t},\n\t\t// \tset: function (key, value, options, set) {\n\t\t// \t\tif (value instanceof BaseItem) {\n\t\t// \t\t\tset(key, value, options);\n\t\t// \t\t}\n\t\t// \t},\n\t\t// },\n\t},\n\n\t// initialize: function() {\n\t// \tif (DEBUG) {\n\t// \t\tvar cb = function() {\n\t// \t\t\t// console.log(\"@debug-bandwidth:\", JSON.stringify(this.get(\"media\").attr(\"@debug-bandwidth\")));\n\t// \t\t\tconsole.log(\"media:\", JSON.stringify(this.toJSON()));\n\t// \t\t\t// if ((this.get(\"media\") instanceof BaseItem) && this.get(\"media\").attr(\"@debug-bandwidth\")) {\n\t// \t\t\t// \tconsole.log(\"original\", this.get(\"original\"));\n\t// \t\t\t// \tconsole.log(\"media:\", JSON.stringify(this.get(\"media\").toJSON()));\n\t// \t\t\t// }\n\t// \t\t}.bind(this);\n\t// \t\twindow.requestAnimationFrame(cb);\n\t// \t}\n\t// },\n\t// \n\t// _composeOriginalSrc: function() {\n\t// \tvar values = { src: this.get(\"src\") };\n\t// \tif (this.has(\"media\") && (values.kbps = this.get(\"media\").attr(\"@debug-bandwidth\"))) {\n\t// \t// if (this.has(\"media\") && this.get(\"media\").attrs().hasOwnProperty(\"@debug-bandwidth\")) {\n\t// \t// \tvalues.kbps = this.get(\"media\").attrs()[\"@debug-bandwidth\"];\n\t// \t\treturn Globals.MEDIA_SRC_TPL[\"debug-bandwidth\"](values);\n\t// \t}\n\t// \treturn Globals.MEDIA_SRC_TPL[\"original\"](values);\n\t// },\n});\n",
    "/**\n * @module app/model/item/TypeItem\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n\n/**\n * @constructor\n * @type {module:app/model/item/TypeItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"t\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tname: \"\",\n\t\thandle: \"\",\n\t\t// get kIds() { return []; },\n\t\t// get keywords() { return []; },\n\t},\n\n});\n",
    "/**\n * @module app/view/AppView\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n/** @type {module:app/utils/debug/traceArgs} */\nconst stripTags = require(\"utils/strings/stripTags\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/control/Controller} */\nconst controller = require(\"app/control/Controller\");\n/** @type {module:app/model/AppState} */\nconst AppState = require(\"app/model/AppState\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n/** @type {module:app/model/collection/ArticleCollection} */\nconst articles = require(\"app/model/collection/ArticleCollection\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/NavigationView} */\nconst NavigationView = require(\"app/view/NavigationView\");\n/** @type {module:app/view/ContentView} */\nconst ContentView = require(\"app/view/ContentView\");\n\n\n/** @type {module:app/view/base/TouchManager} */\nconst TouchManager = require(\"app/view/base/TouchManager\");\n// /** @type {module:hammerjs} */\n// const Hammer = require(\"hammerjs\");\n// /** @type {module:utils/touch/SmoothPanRecognizer} */\n// const Pan = require(\"utils/touch/SmoothPanRecognizer\");\n// /** @type {module:hammerjs.Tap} */\n// const Tap = Hammer.Tap;\n\n// /** @type {module:utils/debug/traceElement} */\n// const traceElement = require(\"utils/debug/traceElement\");\n//\n// const vpanLogFn = _.debounce(console.log.bind(console), 100, false);\n// const hpanLogFn = _.debounce(console.log.bind(console), 100, false);\n\n/**\n * @constructor\n * @type {module:app/view/AppView}\n */\nmodule.exports = View.extend({\n\n\t/** @override */\n\tcidPrefix: \"app\",\n\t/** @override */\n\tel: \"html\",\n\t// /** @override */\n\tclassName: \"app\", // without-bundle without-media without-article\",\n\t/** @override */\n\tmodel: AppState,\n\n\t/** @override */\n\tevents: {\n\t\t\"visibilitychange\": function(ev) {\n\t\t\tconsole.log(\"%s:[%s]\", this.cid, ev.type);\n\t\t},\n\t\t\"fullscreenchange\": function(ev) {\n\t\t\tconsole.log(\"%s:[%s] fullscreen: %o\", this.cid, ev.type, (document.fullscreenElement !== null), document.fullscreen);\n\t\t},\n\t\t\"dragstart\": function(ev) {\n\t\t\tif (ev.target.nodeName == \"IMG\" || ev.target.nodeName == \"A\") {\n\t\t\t\tev.defaultPrevented || ev.preventDefault();\n\t\t\t}\n\t\t},\n\t\t// \"touchmove body\": function(ev) {\n\t\t// \tev.defaultPrevented || ev.preventDefault();\n\t\t// },\n\t},\n\n\tproperties: {\n\t\tcontainer: {\n\t\t\tget: function() {\n\t\t\t\treturn this._container ||\n\t\t\t\t\t(this._container = document.getElementById(\"container\"));\n\t\t\t\t// (this._container = document.body);\n\t\t\t}\n\t\t},\n\t\tnavigation: {\n\t\t\tget: function() {\n\t\t\t\treturn this._navigation ||\n\t\t\t\t\t(this._navigation = document.getElementById(\"navigation\"));\n\t\t\t}\n\t\t},\n\t\tcontent: {\n\t\t\tget: function() {\n\t\t\t\treturn this._content ||\n\t\t\t\t\t(this._content = document.getElementById(\"content\"));\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t/* elements */\n\t\t// this.routeEl = this.el;\n\t\t// this.stateEl = this.el\n\t\tthis.breakpointEl = this.el;\n\n\t\t/* init HammerJS handlers */\n\t\tvar vtouch, htouch, touchEl;\n\t\t// var vpan, hpan, tap;\n\n\t\t// this._vpanEnableFn = function(mc, ev) {\n\t\t// \tvar retval = !this._hasOverflowY(this.container);\n\t\t// \tvpanLogFn(\"%s::_vpanEnableFn -> %o\\n%o\", this.cid, retval, arguments);\n\t\t// \treturn retval;\n\t\t// }.bind(this);\n\t\t//\n\t\t// this._hpanEnableFn = function(mc, ev) {\n\t\t// \tvar retval = this.model.get(\"withBundle\") && this.model.get(\"collapsed\");\n\t\t// \thpanLogFn(\"%s::_hpanEnableFn -> %o\\n%o\", this.cid, retval, arguments);\n\t\t// \treturn !!retval;\n\t\t// }.bind(this);\n\n\t\ttouchEl = this.content;\n\t\t// touchEl = document.body;\n\t\tvtouch = htouch = TouchManager.init(touchEl);\n\n\t\t// vtouch.get(\"vpan\").set({ enable: this._vpanEnableFn });\n\t\t// htouch.get(\"hpan\").set({ enable: this._hpanEnableFn });\n\t\t// \t\tvtouch.set({\n\t\t// \t\t\tenable: function() {\n\t\t// \t\t\t\tconsole.log(\"app1::hammerjs enable\", arguments);\n\t\t// \t\t\t\treturn true;\n\t\t// \t\t\t}\n\t\t// \t\t});\n\t\t// hpan = vpan;\n\n\t\t// this.el.style.touchAction = \"none\"; //\"pan-x pan-y\";\n\n\t\t// tap = new Hammer.Tap();\n\t\t// hpan = new Pan({\n\t\t// \tevent: \"hpan\",\n\t\t// \tdirection: Hammer.DIRECTION_HORIZONTAL\n\t\t// });\n\t\t// hpan.set({\n\t\t// \tenable: this._hpanEnableFn\n\t\t// });\n\t\t// vpan = new Pan({\n\t\t// \tevent: \"vpan\",\n\t\t// \tdirection: Hammer.DIRECTION_VERTICAL\n\t\t// });\n\t\t// vpan.set({\n\t\t// \tenable: this._vpanEnableFn\n\t\t// });\n\t\t// hpan.requireFailure(vpan);\n\t\t// vpan.requireFailure(hpan);\n\t\t// vtouch.add([]);\n\n\t\t// htouch = vtouch = new Hammer.Manager(this.content);\n\t\t// htouch.add([tap, hpan, vpan]);\n\t\t// htouch.add([hpan, vpan]);\n\t\t// htouch.set({ touchAction: \"pan-x pan-y\" });\n\n\t\t// vpan = new Hammer(this.navigation, {\n\t\t// \trecognizers: [\n\t\t// \t\t[Pan, {\n\t\t// \t\t\tevent: 'vpan',\n\t\t// \t\t\ttouchAction: \"pan-y\",\n\t\t// \t\t\tdirection: Hammer.DIRECTION_VERTICAL,\n\t\t// \t\t\tenable: vpanEnableFn\n\t\t// \t\t}],\n\t\t// \t]\n\t\t// });\n\t\t// hpan = new Hammer(this.content, {\n\t\t// \trecognizers: [\n\t\t// \t\t[Pan, {\n\t\t// \t\t\tevent: 'hpan',\n\t\t// \t\t\ttouchAction: \"pan-x\",\n\t\t// \t\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t\t// \t\t\tenable: hpanEnableFn\n\t\t// \t\t}],\n\t\t// \t\t[Tap]\n\t\t// \t]\n\t\t// });\n\t\t// hpan.get(\"hpan\").requireFailure(vpan.get(\"vpan\"));\n\n\t\t// this._afterRender = this._afterRender.bind(this);\n\t\tthis._onResize = this._onResize.bind(this);\n\n\t\t/* render on resize, onorientationchange, visibilitychange */\n\t\t// window.addEventListener(\"orientationchange\", this._onResize, false);\n\t\t// window.addEventListener(\"resize\", _.debounce(this._onResize.bind(this), 30, false), false);\n\t\twindow.addEventListener(\"resize\", this._onResize, false);\n\n\t\t// var h = function(ev) { console.log(ev.type, ev) };\n\t\t// window.addEventListener(\"scroll\", h, false);\n\t\t// window.addEventListener(\"wheel\", h, false);\n\n\t\t/* TODO: replace resize w/ mediaquery listeners. Caveat: some components\n\t\t(vg. Carousel) require update on resize */\n\t\t// this._onBreakpointChange = this._onBreakpointChange.bind(this);\n\t\t// Object.keys(Globals.BREAKPOINTS).forEach(function(s) {\n\t\t// \tGlobals.BREAKPOINTS[s].addListeners(this._onBreakpointChange);\n\t\t// }, this);\n\n\n\t\t/* initialize controller/model listeners BEFORE views register their own */\n\t\tthis.listenTo(controller, \"route\", this._onRoute);\n\t\t// this.listenTo(controller, \"change:after\", this._afterControllerChanged);\n\t\tthis.listenTo(this.model, \"change\", this._onModelChange); /* FIXME */\n\n\t\t/* initialize views */\n\t\tthis.navigationView = new NavigationView({\n\t\t\tel: this.navigation,\n\t\t\tmodel: this.model,\n\t\t\tvpan: vtouch,\n\t\t\thpan: htouch\n\t\t});\n\n\t\tthis.contentView = new ContentView({\n\t\t\tel: this.content,\n\t\t\tmodel: this.model,\n\t\t\tvpan: vtouch,\n\t\t\thpan: htouch,\n\t\t});\n\n\t\t/* TouchEvents fixups\n\t\t * ------------------------------- */\n\t\t// var traceTouchEvent = (msg, traceObj) => {\n\t\t// \tif (msg.hasOwnProperty(\"type\")) {\n\t\t// \t\tmsg = msg.type + \" : \" +\n\t\t// \t\t\t(msg.defaultPrevented ? \"prevented\" : \"not prevented\");\n\t\t// \t}\n\t\t// \tvar sy, sh, ch;\n\t\t// \tsy = this.el.scrollTop;\n\t\t// \tsh = this.el.scrollHeight - 1;\n\t\t// \tch = this.el.clientHeight;\n\t\t// \tconsole.log(\"%s:[%s] \" +\n\t\t// \t\t\"sy:[1>%o>=%s = %o] \" +\n\t\t// \t\t\"sh:[%o<=%o = %o] \" +\n\t\t// \t\t\"nav:[css:%o val:%o]\",\n\t\t// \t\tthis.cid, msg,\n\t\t// \t\tsy, sh - ch, (1 <= sy <= (sh - ch)),\n\t\t// \t\tsh, ch, (sh <= ch),\n\t\t// \t\tthis.navigationView.el.style.height,\n\t\t// \t\tthis.navigationView.el.scrollHeight,\n\t\t// \t\ttraceObj || \"\"\n\t\t// \t);\n\t\t// };\n\n\n\t\t// var scrolltouch = new Hammer.Manager(this.el);\n\t\t// scrolltouch.add(new Hammer.Pan({ direction: Hammer.DIRECTION_VERTICAL, threshold: 0 }));\n\t\t// scrolltouch.on(\"panmove\", function(ev) {\n\t\t//\n\t\t// \t// var sy, sh, ch;\n\t\t// \t// sy = this.el.scrollTop;\n\t\t// \t// sh = this.el.scrollHeight - 1;\n\t\t// \t// ch = this.el.clientHeight;\n\t\t// \t//\n\t\t// \t// if ((1 > sy) && (ev.direction | Hammer.DIRECTION_DOWN)) {\n\t\t// \t// \tev.preventDefault();\n\t\t// \t// \tconsole.log(\"%s:[panmove] %s\", this.cid, \"prevent at top\");\n\t\t// \t// } else\n\t\t// \t// if ((sy > (sh - ch)) && (ev.direction | Hammer.DIRECTION_UP)) {\n\t\t// \t// \tev.preventDefault();\n\t\t// \t// \tconsole.log(\"%s:[panmove] %s\", this.cid, \"prevent at bottom\");\n\t\t// \t// }\n\t\t// \tif ((this.el.scrollHeight - 1) <= this.el.clientHeight) {\n\t\t// \t\tev.srcEvent.preventDefault();\n\t\t// \t}\n\t\t// \t// traceTouchEvent(ev);\n\t\t// }.bind(this));\n\n\t\tvar touchOpts = { capture: false, passive: false };\n\t\tvar onTouchStart = (ev) => {\n\t\t\tthis.el.addEventListener(\"touchmove\", onTouchMove, touchOpts);\n\t\t\tthis.el.addEventListener(\"touchend\", onTouchEnd, touchOpts);\n\t\t\tthis.el.addEventListener(\"touchcancel\", onTouchEnd, touchOpts);\n\t\t};\n\t\tvar onTouchMove = (ev) => {\n\t\t\tif (!ev.defaultPrevented && (this.el.scrollHeight - 1) <= this.el.clientHeight) {\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t\t//traceTouchEvent(ev);\n\t\t};\n\t\tvar onTouchEnd = (ev) => {\n\t\t\tthis.el.removeEventListener(\"touchmove\", onTouchMove, touchOpts);\n\t\t\tthis.el.removeEventListener(\"touchend\", onTouchEnd, touchOpts);\n\t\t\tthis.el.removeEventListener(\"touchcancel\", onTouchEnd, touchOpts);\n\t\t};\n\t\tthis.el.addEventListener(\"touchstart\", onTouchStart, { passive: true });\n\n\t\tvar onMeasured = (view) => {\n\t\t\tthis.setImmediate(() => {\n\t\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\t\tif ((this.el.scrollHeight - 1) <= this.el.clientHeight) {\n\t\t\t\t\t\tthis.el.style.overflowY = \"hidden\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.el.style.overflowY = \"\";\n\t\t\t\t\t}\n\t\t\t\t\tthis.el.scrollTop = 1;\n\t\t\t\t\t//traceTouchEvent(\"view:collapsed:measured\");\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\tthis.listenTo(this.navigationView, \"view:collapsed:measured\", onMeasured);\n\n\t\t/* Google Analytics\n\t\t * ------------------------------- */\n\t\t// if (window.GTAG_ID) {\n\t\t// \t// let gaPageviewDisable = /(?:(localhost|\\.local))$/.test(location.hostname) || window.GTAG_ID === \"UA-0000000-0\";\n\t\t// \tif (window.gtag) {\n\t\t// \t\tcontroller\n\t\t// \t\t\t.on(\"route\", (name) => {\n\t\t// \t\t\t\tvar page = Backbone.history.getFragment();\n\t\t// \t\t\t\t// Add a slash if neccesary\n\t\t// \t\t\t\tif (page.charAt(0) !== '/') {\n\t\t// \t\t\t\t\tpage = '/' + page;\n\t\t// \t\t\t\t}\n\t\t// \t\t\t\t// page.replace(/^(?!\\/)/, \"/\");\n\t\t// \t\t\t\twindow.gtag('config', window.GTAG_ID, {\n\t\t// \t\t\t\t\t'page_title': page,\n\t\t// \t\t\t\t\t'page_path': page\n\t\t// \t\t\t\t});\n\t\t// \t\t\t\tconsole.warn(\"GTAG page set to '%s'\", page);\n\t\t// \t\t\t});\n\t\t// \t\t// } else\n\t\t// \t\t// if (window.ga) {\n\t\t// \t\t// \tcontroller\n\t\t// \t\t// \t\t.once(\"route\", () => {\n\t\t// \t\t// \t\t\twindow.ga(\"create\", window.GTAG_ID, \"auto\");\n\t\t// \t\t// \t\t\t// if localhost or dummy ID, disable analytics\n\t\t// \t\t// \t\t\tif (gaPageviewDisable) {\n\t\t// \t\t// \t\t\t\twindow.ga(\"set\", \"sendHitTask\", null);\n\t\t// \t\t// \t\t\t}\n\t\t// \t\t// \t\t\tconsole.warn(\"GA enabled tag '%s'\", window.GTAG_ID);\n\t\t// \t\t// \t\t})\n\t\t// \t\t// \t\t.on(\"route\", (name) => {\n\t\t// \t\t// \t\t\tvar page = Backbone.history.getFragment();\n\t\t// \t\t// \t\t\t// Add a slash if neccesary\n\t\t// \t\t// \t\t\tif (page.charAt(0) !== '/') {\n\t\t// \t\t// \t\t\t\tpage = '/' + page;\n\t\t// \t\t// \t\t\t}\n\t\t// \t\t// \t\t\t// page.replace(/^(?!\\/)/, \"/\");\n\t\t// \t\t// \t\t\twindow.ga(\"set\", \"page\", page);\n\t\t// \t\t// \t\t\twindow.ga(\"send\", \"pageview\");\n\t\t// \t\t//\n\t\t// \t\t// \t\t\tconsole.warn(\"GA page set to '%s'\", page);\n\t\t// \t\t// \t\t});\n\t\t// \t} else {\n\t\t// \t\tconsole.warn(\"GA/GTAG not loaded (LIB: %s, GA_ID: %s)\", !!(window.ga || window.gtag), window.GTAG_ID);\n\t\t// \t}\n\t\t// } else {\n\t\t// \tconsole.warn(\"GA/GTAG not enabled (LIB: %s, GA_ID: %s)\", !!(window.ga || window.gtag), window.GTAG_ID);\n\t\t// }\n\n\t\t// if (window.ga && window.GTAG_ID) {\n\t\t// \tcontroller\n\t\t// \t\t.once(\"route\", () => {\n\t\t// \t\t\twindow.ga(\"create\", window.GTAG_ID, \"auto\");\n\t\t// \t\t\t// if localhost or dummy ID, disable analytics\n\t\t// \t\t\tif (/(?:(localhost|\\.local))$/.test(location.hostname)\n\t\t// \t\t\t\t|| window.GTAG_ID == \"XX-0000000-0\") {\n\t\t// \t\t\t\twindow.ga(\"set\", \"sendHitTask\", null);\n\t\t// \t\t\t\twindow.gtag('config', 'GA_TRACKING_ID', { 'send_page_view': false });\n\t\t// \t\t\t\tconsole.warn(\"GA disabled for localhost\", window.GTAG_ID);\n\t\t// \t\t\t}\n\t\t// \t\t})\n\t\t// \t\t.on(\"route\", (name) => {\n\t\t// \t\t\tvar page = Backbone.history.getFragment();\n\t\t// \t\t\t// Add a slash if neccesary\n\t\t// \t\t\tif (page.charAt(0) !== '/') {\n\t\t// \t\t\t\tpage = '/' + page;\n\t\t// \t\t\t}\n\t\t// \t\t\t// page.replace(/^(?!\\/)/, \"/\");\n\t\t// \t\t\twindow.ga(\"set\", \"page\", page);\n\t\t// \t\t\twindow.ga(\"send\", \"pageview\");\n\t\t//\n\t\t// \t\t\tconsole.warn(\"GA page set to '%s'\", page);\n\t\t// \t\t});\n\t\t// } else {\n\t\t// \tconsole.warn(\"GA not enabled (LIB: %s, GA_ENABLED: %s, GA_ID: %s)\", !!window.ga, window.GA_ENABLED, window.GTAG_ID);\n\t\t// }\n\t\t// if (window.ga && window.GTAG_ID) {\n\t\t// \tcontroller.once(\"route\", () => {\n\t\t// \t\twindow.ga(\"create\", window.GTAG_ID, \"auto\");\n\t\t// \t});\n\t\t// }\n\t\t// console.info(\"Git: %s\", GIT_REV);\n\t\tconsole.info(\"Analytics GTAG_ENABLED: %s, GTAG_ID: %s, GA_LIB: %s\", GTAG_ENABLED, window.GTAG_ID, !!window.ga);\n\n\t\t/* Startup listener, added last */\n\t\tthis.listenToOnce(controller, \"route\", this._appStart);\n\n\t\t/* start router, which will request appropiate state */\n\t\tBackbone.history.start({\n\t\t\tpushState: false,\n\t\t\thashChange: true,\n\t\t});\n\t},\n\n\t/* -------------------------------\n\t/* _appStart\n\t/* ------------------------------- */\n\n\t_appStart: function(name, args) {\n\t\tconsole.info(\"%s::_appStart(%s, %s)\", this.cid, name, args.join());\n\t\tthis.skipTransitions = true;\n\t\tthis.el.classList.add(\"skip-transitions\");\n\n\t\tif (window.ga && window.GTAG_ID) {\n\t\t\twindow.ga(\"create\", window.GTAG_ID, \"auto\");\n\t\t}\n\n\t\tthis.requestRender(View.MODEL_INVALID | View.SIZE_INVALID)\n\t\t\t.requestChildrenRender(View.MODEL_INVALID | View.SIZE_INVALID)\n\t\t\t.listenToOnce(this, \"view:render:after\", function(view, flags) {\n\t\t\t\t// this.setImmediate(function() {\n\t\t\t\tthis.requestAnimationFrame(function() {\n\t\t\t\t\tconsole.log(\"%s::_appStart[view:render:after][raf]\", this.cid);\n\t\t\t\t\tthis.skipTransitions = false;\n\t\t\t\t\tthis.el.classList.remove(\"skip-transitions\");\n\t\t\t\t\tthis.el.classList.remove(\"app-initial\");\n\t\t\t\t});\n\t\t\t});\n\t},\n\n\t/* --------------------------- *\n\t/* route changed\n\t/* --------------------------- */\n\n\t_onRoute: function(name, args) {\n\t\tconsole.info(\"%s::_onRoute %o -> %o\", this.cid, this.model.get(\"routeName\"), name);\n\t\t// var o = _.defaults({ routeName: name }, AppState.prototype.defaults);\n\t\tvar o = {\n\t\t\trouteName: name,\n\t\t\tbundle: null,\n\t\t\tmedia: null,\n\t\t\tarticle: null,\n\t\t\tpage: Backbone.history.getFragment().replace(/^(?!\\/)/, \"/\"),\n\t\t};\n\t\tswitch (name) {\n\t\t\tcase \"media-item\":\n\t\t\t\to.bundle = bundles.selected;\n\t\t\t\t// o.withBundle = true;\n\t\t\t\to.media = o.bundle.media.selected;\n\t\t\t\t// o.withMedia = true;\n\t\t\t\to.collapsed = true;\n\t\t\t\tbreak;\n\t\t\tcase \"bundle-item\":\n\t\t\t\to.bundle = bundles.selected;\n\t\t\t\t// o.withBundle = true;\n\t\t\t\to.collapsed = true;\n\t\t\t\tbreak;\n\t\t\tcase \"article-item\":\n\t\t\t\to.article = articles.selected;\n\t\t\t\t// o.withArticle = true;\n\t\t\t\to.collapsed = true;\n\t\t\t\tbreak;\n\t\t\tcase \"bundle-list\":\n\t\t\tcase \"notfound\":\n\t\t\tcase \"root\":\n\t\t\tdefault:\n\t\t\t\to.collapsed = false;\n\t\t\t\tbreak;\n\t\t}\n\t\t// console.log(\"%s::_onRoute args: %o\", this.cid, name, args);\n\t\tthis.model.set(o);\n\t},\n\n\t/* --------------------------- *\n\t/* model changed\n\t/* --------------------------- */\n\n\t_onModelChange: function() {\n\t\tif (DEBUG) {\n\t\t\tconsole.groupCollapsed(this.cid + \"::_onModelChange\");\n\t\t\tconsole.groupCollapsed(\"changes\");\n\t\t\tObject.keys(this.model.changedAttributes()).forEach(function(key) {\n\t\t\t\tconsole.info(\"%s::_onModelChange %s: %s -> %s\", this.cid, key,\n\t\t\t\t\tthis.model.previous(key),\n\t\t\t\t\tthis.model.get(key));\n\t\t\t}, this);\n\n\t\t\t[\"Article\", \"Bundle\", \"Media\"].forEach(function(name) {\n\t\t\t\tlet key = name.toLowerCase();\n\t\t\t\tlet wName = `with${name}`;\n\t\t\t\t// let logArgs = [\n\t\t\t\t// \t\"%s::_onModelChange with%s: %o with%sChanged: %o\", this.cid,\n\t\t\t\t// \twName, this.has(key), name, this.hasAnyChanged(key)\n\t\t\t\t// ];\n\t\t\t\t// if (this.hasChanged(wName) !== this.hasAnyChanged(key)) {\n\t\t\t\t// \tconsole.error.apply(console, logArgs);\n\t\t\t\t// } else {\n\t\t\t\t// \tconsole.log.apply(console, logArgs);\n\t\t\t\t// }\n\t\t\t\tconsole.assert(this.hasChanged(wName) === this.hasAnyChanged(key), this)\n\t\t\t}, this.model);\n\t\t\tconsole.groupEnd();\n\n\t\t\tthis.once(\"view:render:after\", function(view, flags) {\n\t\t\t\tconsole.info(\"%s::_onModelChange [view:render:after]\", view.cid);\n\t\t\t\tconsole.groupEnd();\n\t\t\t});\n\t\t}\n\n\t\tthis.requestRender(View.MODEL_INVALID);\n\t\t// this.requestChildrenRender(View.MODEL_INVALID);\n\t},\n\n\t/* -------------------------------\n\t/* resize\n\t/* ------------------------------- */\n\n\t_onResize: function(ev) {\n\t\tconsole.group(this.cid + \"::_onResize [event]\");\n\t\tthis.skipTransitions = true;\n\t\tthis.el.classList.add(\"skip-transitions\");\n\n\t\tthis.requestRender(View.SIZE_INVALID)\n\t\t\t// .whenRendered().then(function(view) {\n\t\t\t.once(\"view:render:after\", function(view, flags) {\n\t\t\t\t// this.requestChildrenRender(View.SIZE_INVALID, true);\n\t\t\t\t// this.setImmediate(function() {\n\t\t\t\tthis.requestAnimationFrame(function() {\n\t\t\t\t\tconsole.info(\"%s::_onResize [view:render:after][raf]\", view.cid);\n\t\t\t\t\tview.skipTransitions = false;\n\t\t\t\t\tthis.el.scrollTop = 1;\n\t\t\t\t\tview.el.classList.remove(\"skip-transitions\");\n\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t})\n\t\t\t});\n\t\tif (document.fullscreenElement === null) this.renderNow();\n\t},\n\n\t/* -------------------------------\n\t/* render\n\t/* ------------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\tconsole.log(\"%s::renderFrame [%s]\", this.cid, View.flagsToString(flags));\n\n\t\t/* model: set route & model id classes */\n\t\tif (flags & View.MODEL_INVALID) {\n\t\t\tthis.renderModelChange(flags);\n\t\t}\n\n\t\t/* size: check breakpoints and set classes*/\n\t\tif (flags & View.SIZE_INVALID) {\n\t\t\t_.each(Globals.BREAKPOINTS, function(o, s) {\n\t\t\t\tthis.toggle(s, o.matches);\n\t\t\t}, this.breakpointEl.classList);\n\t\t}\n\t\t/* request children render:  always render now */\n\t\tthis.requestChildrenRender(flags, true);\n\t\t/* request children render:  set 'now' flag if size is invalid */\n\t\t// this.requestChildrenRender(flags, flags & View.SIZE_INVALID);\n\n\t\t// if ((this.el.scrollHeight - 1) <= this.el.clientHeight) {\n\t\t// \tthis.el.scrollTop = 1;\n\t\t// \tthis.el.style.overflowY = \"hidden\";\n\t\t// } else {\n\t\t// \tthis.el.style.overflowY = \"\";\n\t\t// }\n\t\t// this.navigationView.whenRendered().then(function(view) {\n\t\t// \tthis.requestAnimationFrame(function() {\n\t\t// \t\tconsole.log(\"%s::renderFrame [raf] css:%o val:%o\",\n\t\t// \t\t\tthis.cid,\n\t\t// \t\t\tthis.navigationView.el.style.height,\n\t\t// \t\t\tthis.navigationView.el.scrollHeight,\n\t\t// \t\t\tthis.el.scrollTop,\n\t\t// \t\t\tthis.el.scrollHeight - 1,\n\t\t// \t\t\tthis.el.clientHeight,\n\t\t// \t\t\t(this.el.scrollHeight - 1) <= this.el.clientHeight,\n\t\t// \t\t\tthis.el.style.overflowY\n\t\t// \t\t);\n\t\t// \t});\n\t\t// }.bind(this));\n\t},\n\n\t/* -------------------------------\n\t/* body classes etc\n\t/* ------------------------------- */\n\n\trenderModelChange: function() {\n\t\tlet cls = this.el.classList;\n\t\tlet prevAttr = null;\n\t\tlet hasDarkBg = false;\n\t\tlet docTitle = [];\n\n\t\tdocTitle.push(Globals.APP_NAME);\n\t\tif (this.model.get(\"bundle\")) {\n\t\t\tdocTitle.push(stripTags(this.model.get(\"bundle\").get(\"name\")));\n\t\t\tif (this.model.get(\"media\")) {\n\t\t\t\tdocTitle.push(stripTags(this.model.get(\"media\").get(\"name\")));\n\t\t\t}\n\t\t} else if (this.model.get(\"article\")) {\n\t\t\tdocTitle.push(stripTags(this.model.get(\"article\").get(\"name\")));\n\t\t}\n\t\tdocTitle = _.unescape(docTitle.join(\" / \"))\n\t\tdocument.title = docTitle;\n\n\t\tlet metaTitle = docTitle;\n\t\tlet metaUrl = document.location.origin\n\t\t\t+ document.location.pathname\n\t\t\t+ document.location.hash;\n\n\t\tdocument.head.querySelector(\"meta[property='og:title']\")\n\t\t\t.setAttribute(\"content\", metaTitle);\n\t\tdocument.head.querySelector(\"meta[property='og:url']\")\n\t\t\t.setAttribute(\"content\", metaUrl);\n\t\tdocument.head.querySelector(\"link[rel='canonical']\")\n\t\t\t.setAttribute(\"href\", metaUrl);\n\n\t\tif (window.ga && window.GTAG_ID) {\n\t\t\twindow.ga('send', {\n\t\t\t\t'hitType': 'pageview',\n\t\t\t\t'page': this.model.get(\"page\"),\n\t\t\t\t'title': docTitle\n\t\t\t});\n\t\t}\n\n\t\t/* Set route class */\n\t\tif (this.model.hasChanged(\"routeName\")) {\n\t\t\tprevAttr = this.model.previous(\"fromRouteName\");\n\t\t\tif (prevAttr) {\n\t\t\t\tcls.remove(\"from-route-\" + prevAttr);\n\t\t\t}\n\t\t\tcls.add(\"from-route-\" + this.model.get(\"fromRouteName\"));\n\t\t\tprevAttr = this.model.previous(\"routeName\");\n\t\t\tif (prevAttr) {\n\t\t\t\tcls.remove(\"route-\" + prevAttr);\n\t\t\t}\n\t\t\tcls.add(\"route-\" + this.model.get(\"routeName\"));\n\t\t}\n\n\t\t/* Set model id classes for color styles */\n\t\t[\"article\", \"bundle\", \"media\"].forEach(function(prop) {\n\t\t\tvar item = this.model.get(prop);\n\t\t\tif (this.model.hasChanged(prop)) {\n\t\t\t\tprevAttr = this.model.previous(prop);\n\t\t\t\tif (prevAttr) {\n\t\t\t\t\tcls.remove(prevAttr.get(\"domid\"));\n\t\t\t\t}\n\t\t\t\tif (item) {\n\t\t\t\t\tcls.add(item.get(\"domid\"));\n\t\t\t\t}\n\t\t\t}\n\t\t\tcls.toggle(\"with-\" + prop, !!item);\n\t\t\tcls.toggle(\"without-\" + prop, !item);\n\t\t\thasDarkBg |= (item && item.colors && item.colors.hasDarkBg);\n\t\t}.bind(this));\n\n\t\t/* flag dark background */\n\t\tcls.toggle(\"color-dark\", hasDarkBg);\n\t},\n}, {\n\tgetInstance: function() {\n\t\tif (!(window.app instanceof this)) {\n\t\t\twindow.app = new(this)({\n\t\t\t\tmodel: new AppState()\n\t\t\t});\n\t\t}\n\t\treturn window.app;\n\t}\n});\n\nif (DEBUG) {\n\tmodule.exports = (function(AppView) {\n\t\t/** @type {module:app/debug/DebugToolbar} */\n\t\tvar DebugToolbar = require(\"app/debug/DebugToolbar\");\n\n\t\treturn AppView.extend({\n\t\t\tinitialize: function() {\n\t\t\t\tvar retval;\n\t\t\t\tvar view = new DebugToolbar({\n\t\t\t\t\tid: \"debug-toolbar\",\n\t\t\t\t\tmodel: this.model\n\t\t\t\t});\n\t\t\t\tdocument.body.appendChild(view.render().el);\n\t\t\t\tretval = AppView.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis._logFlags[\"view.trace\"] = true;\n\t\t\t\tthis.navigationView._logFlags[\"view.trace\"] = true;\n\t\t\t\treturn retval;\n\t\t\t},\n\t\t})\n\t})(module.exports);\n}\n",
    "/**\n * @module app/view/ContentView\n */\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:utils/TransformHelper} */\nconst TransformHelper = require(\"utils/TransformHelper\");\n// /** @type {module:app/view/base/TouchManager} */\n// var TouchManager = require(\"app/view/base/TouchManager\");\n\n/** @type {module:app/control/Controller} */\nconst controller = require(\"app/control/Controller\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n/** @type {module:app/model/collection/ArticleCollection} */\nconst articles = require(\"app/model/collection/ArticleCollection\");\n\n// /** @type {module:app/model/collection/BundleItem} */\n// var BundleItem = require(\"app/model/item/BundleItem\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/component/ArticleView} */\nconst ArticleView = require(\"app/view/component/ArticleView\");\n/** @type {module:app/view/component/CollectionStack} */\nconst CollectionStack = require(\"app/view/component/CollectionStack\");\n/** @type {module:app/view/component/CollectionStack} */\nconst SelectableListView = require(\"app/view/component/SelectableListView\");\n/** @type {module:app/view/render/DotNavigationRenderer} */\nconst DotNavigationRenderer = require(\"app/view/render/DotNavigationRenderer\");\n/** @type {module:app/view/component/Carousel} */\nconst Carousel = require(\"app/view/component/Carousel\");\n\n/** @type {module:app/view/render/CarouselRenderer} */\nconst CarouselRenderer = require(\"app/view/render/CarouselRenderer\");\n/** @type {module:app/view/render/ImageRenderer} */\nconst ImageRenderer = require(\"app/view/render/ImageRenderer\");\n/** @type {module:app/view/render/VideoRenderer} */\nconst VideoRenderer = require(\"app/view/render/VideoRenderer\");\n/** @type {module:app/view/render/SequenceRenderer} */\nconst SequenceRenderer = require(\"app/view/render/SequenceRenderer\");\n// /** @type {module:app/view/component/CanvasProgressMeter} */\n// var ProgressMeter = require(\"app/view/component/CanvasProgressMeter\");\n\n/** @type {Function} */\nconst carouselEmptyTemplate = require(\"./template/Carousel.EmptyRenderer.Bundle.hbs\");\n/** @type {Function} */\nconst mediaStackTemplate = require(\"./template/CollectionStack.Media.hbs\");\n\n// var transitionEnd = View.prefixedEvent(\"transitionend\");\nvar transformProp = View.prefixedProperty(\"transform\");\nvar transitionProp = View.prefixedProperty(\"transition\");\n\nvar tx = Globals.transitions;\n\n\n// var clickEvent = window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\",\n\n/**\n * @constructor\n * @type {module:app/view/ContentView}\n */\nmodule.exports = View.extend({\n\n\t/** @override */\n\tcidPrefix: \"contentView\",\n\n\t/** @override */\n\tclassName: \"container-expanded\",\n\n\t/** @override */\n\tevents: {\n\t\t\"transitionend .adding-child\": \"_onAddedTransitionEnd\",\n\t\t\"transitionend .removing-child\": \"_onRemovedTransitionEnd\",\n\t\t// \"transitionend\": \"_onTransitionEnd\",\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t_.bindAll(this, \"_onVPanStart\", \"_onVPanMove\", \"_onVPanFinal\", \"_onCollapsedEvent\");\n\n\t\tthis.transforms = new TransformHelper();\n\t\t// this.touch = options.touch || new Error(\"no touch\"); //TouchManager.getInstance();\n\t\tthis.vpan = options.vpan || new Error(\"no vpan\");\n\t\tthis.hpan = options.hpan || new Error(\"no hpan\");\n\n\t\tthis.listenTo(this.model, \"change\", this._onModelChange);\n\n\t\t// disconnect children before last change\n\t\t// this.listenTo(bundles, \"deselect:one\", this._onDeselectOneBundle);\n\n\t\tthis.skipTransitions = true;\n\t\tthis.itemViews = [];\n\n\t\t// this.progressWrapper = this.createProgressWrapper(),\n\t\t// this.el.appendChild(this.progressWrapper.el);\n\t},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\t// values\n\t\tvar collapsed = this.model.get(\"collapsed\");\n\t\tvar collapsedChanged = (flags & View.MODEL_INVALID)\n\t\t\t&& this.model.hasChanged(\"collapsed\");\n\t\tvar childrenChanged = (flags & View.MODEL_INVALID)\n\t\t\t&& (this.model.hasChanged(\"bundle\") || this.model.hasChanged(\"article\"));\n\n\t\t// flags\n\t\tvar sizeChanged = !!(flags & View.SIZE_INVALID);\n\t\tvar transformsChanged = !!(flags & (View.MODEL_INVALID | View.SIZE_INVALID | View.LAYOUT_INVALID));\n\t\ttransformsChanged = transformsChanged || this._transformsChanged || this.skipTransitions;\n\n\t\t// debug\n\t\t// - - - - - - - - - - - - - - - - -\n\t\t// if (flags & View.MODEL_INVALID) {\n\t\t// \tconsole.group(this.cid + \"::renderFrame model changed:\");\n\t\t// \tObject.keys(this.model.changed).forEach(function(key) {\n\t\t// \t\tconsole.log(\"\\t%s: %s -> %s\", key, this.model._previousAttributes[key], this.model.changed[key]);\n\t\t// \t}, this);\n\t\t// \tconsole.groupEnd();\n\t\t// }\n\n\t\t// model:children\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (childrenChanged) {\n\t\t\tthis.removeChildren();\n\t\t\tif (bundles.selected) {\n\t\t\t\tthis.createChildren(bundles.selected);\n\t\t\t} else\n\t\t\tif (articles.selected) {\n\t\t\t\tthis.createChildren(articles.selected);\n\t\t\t}\n\t\t}\n\n\t\t// model:collapsed\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (collapsedChanged) {\n\t\t\tthis.el.classList.toggle(\"container-collapsed\", collapsed);\n\t\t\tthis.el.classList.toggle(\"container-expanded\", !collapsed);\n\t\t}\n\n\t\t// size\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (sizeChanged) {\n\t\t\tthis.transforms.clearAllCaptures();\n\t\t}\n\n\t\t// transforms\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (transformsChanged) {\n\t\t\tthis.el.classList.remove(\"container-changing\");\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tthis.transforms.stopAllTransitions();\n\t\t\t\tthis.el.classList.remove(\"container-changed\");\n\t\t\t\tif (!childrenChanged) {\n\t\t\t\t\t// this.transforms.clearAllOffsets();\n\t\t\t\t\tif (collapsedChanged) {\n\t\t\t\t\t\tthis._setChildrenEnabled(collapsed);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!childrenChanged) {\n\t\t\t\t\tif (collapsedChanged) {\n\t\t\t\t\t\tvar afterTransitionsFn;\n\t\t\t\t\t\tthis.el.classList.add(\"container-changed\");\n\t\t\t\t\t\t// this.transforms.clearAllOffsets();\n\t\t\t\t\t\tif (collapsed) {\n\t\t\t\t\t\t\t// container-collapsed, enable last\n\t\t\t\t\t\t\tafterTransitionsFn = function() {\n\t\t\t\t\t\t\t\tthis._setChildrenEnabled(true);\n\t\t\t\t\t\t\t\tthis.el.classList.remove(\"container-changed\");\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.transforms.runAllTransitions(tx.LAST);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// container-expanded, disable first\n\t\t\t\t\t\t\tafterTransitionsFn = function() {\n\t\t\t\t\t\t\t\tthis.el.classList.remove(\"container-changed\");\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis._setChildrenEnabled(false);\n\t\t\t\t\t\t\tthis.transforms.runAllTransitions(tx.FIRST);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tafterTransitionsFn = afterTransitionsFn.bind(this);\n\t\t\t\t\t\tthis.transforms.whenAllTransitionsEnd().then(afterTransitionsFn, afterTransitionsFn);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.transforms.items.forEach(function(o) {\n\t\t\t\t\t\t\tif (o.hasOffset) {\n\t\t\t\t\t\t\t\to.runTransition(tx.NOW);\n\t\t\t\t\t\t\t\t// o.clearOffset();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!childrenChanged) {\n\t\t\t\tthis.transforms.clearAllOffsets();\n\t\t\t}\n\t\t\tthis.transforms.validate();\n\t\t}\n\t\tif (sizeChanged) {\n\t\t\tthis.itemViews.forEach(function(view) {\n\t\t\t\tview.skipTransitions = this.skipTransitions;\n\t\t\t\tview.requestRender(View.SIZE_INVALID).renderNow();\n\t\t\t}, this);\n\t\t\t/*Promise.all(this.itemViews.map(function(view) {\n\t\t\t\t\tview.skipTransitions = this.skipTransitions;\n\t\t\t\t\treturn view.requestRender(View.SIZE_INVALID).whenRendered();\n\t\t\t\t}, this))\n\t\t\t\t.then(\n\t\t\t\t\tfunction(views) {\n\t\t\t\t\t\tvar nh = this.el.offsetParent.offsetHeight - this.el.offsetTop;\n\t\t\t\t\t\t// var oh = views.reduce(function(h, view) {\n\t\t\t\t\t\t// \treturn Math.max(h, view.el.offsetHeight);\n\t\t\t\t\t\t// }, nh);\n\t\t\t\t\t\t// oh++;\n\t\t\t\t\t\t// console.log(\"%s:[whenRendered] [result: %s %s] %o\", this.cid,\n\t\t\t\t\t\t// \tnh, oh, this.el.parent, views);\n\t\t\t\t\t\tthis.el.style.minHeight = nh + \"px\";\n\t\t\t\t\t\treturn views;\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tfunction(reason) {\n\t\t\t\t\t\tconsole.warn(\"%s:[whenRendered] [rejected] %o\", this.cid, reason);\n\t\t\t\t\t\treturn reason;\n\t\t\t\t\t}.bind(this)\n\t\t\t\t);*/\n\t\t}\n\t\tthis.skipTransitions = this._transformsChanged = false;\n\t},\n\n\t_setChildrenEnabled: function(enabled) {\n\t\t// if (enabled) {\n\t\t// \tthis.el.removeEventListener(\"click\", this._onCollapsedClick, false);\n\t\t// } else {\n\t\t// \tthis.el.addEventListener(\"click\", this._onCollapsedClick, false);\n\t\t// }\n\t\tthis.itemViews.forEach(function(view) {\n\t\t\tview.setEnabled(enabled);\n\t\t});\n\t},\n\n\t/* -------------------------------\n\t/* Collapse UI gestures/events\n\t/* ------------------------------- */\n\n\t_onCollapsedEvent: function(ev) {\n\t\tconsole.log(\"%s:[%s -> _onCollapsedEvent] target: %s\", this.cid, ev.type, ev.target);\n\t\tif (!ev.defaultPrevented &&\n\t\t\tthis.model.has(\"bundle\") &&\n\t\t\t!this.model.get(\"collapsed\") &&\n\t\t\t!this.enabled) {\n\t\t\t// this.setImmediate(function() {\n\t\t\t// if (ev.type == \"click\") ev.stopPropagation();\n\t\t\tev.preventDefault();\n\t\t\tthis.setImmediate(function() {\n\t\t\t\t// if (ev.type == \"click\") ev.stopPropagation();\n\t\t\t\tthis.model.set(\"collapsed\", true);\n\t\t\t});\n\t\t\t// });\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* model changed\n\t/* --------------------------- */\n\n\t_onModelChange: function() {\n\t\tif (this.model.hasAnyChanged(\"bundle\")) {\n\t\t\tif (this.model.has(\"bundle\")) {\n\t\t\t\tthis.vpan.on(\"vpanstart\", this._onVPanStart);\n\t\t\t} else {\n\t\t\t\tthis.vpan.off(\"vpanstart\", this._onVPanStart);\n\t\t\t}\n\t\t}\n\t\t/*\n\t\tif (this.model.hasChanged(\"withBundle\") ||\n\t\t\tthis.model.hasChanged(\"collapsed\")) {\n\t\t\tif (this.model.get(\"withBundle\") &&\n\t\t\t\t!this.model.get(\"collapsed\")) {\n\t\t\t\tthis.hpan.on(\"hpanleft hpanright\", this._onCollapsedEvent);\n\t\t\t\tthis.el.addEventListener(View.CLICK_EVENT, this._onCollapsedEvent, false);\n\t\t\t} else {\n\t\t\t\tthis.hpan.off(\"hpanleft hpanright\", this._onCollapsedEvent);\n\t\t\t\tthis.el.removeEventListener(View.CLICK_EVENT, this._onCollapsedEvent, false);\n\t\t\t}\n\t\t}\n\t\t*/\n\t\tthis.requestRender(View.MODEL_INVALID);\n\t},\n\n\t/* -------------------------------\n\t/* Vertical touch/move (_onVPan*)\n\t/* ------------------------------- */\n\n\t_collapsedOffsetY: Globals.COLLAPSE_OFFSET,\n\n\t_onVPanStart: function(ev) {\n\t\tthis.vpan.on(\"vpanmove\", this._onVPanMove);\n\t\tthis.vpan.on(\"vpanend vpancancel\", this._onVPanFinal);\n\n\t\tthis.transforms.stopAllTransitions();\n\t\t// this.transforms.clearAllOffsets();\n\t\t// this.transforms.validate();\n\t\tthis.transforms.clearAllCaptures();\n\n\t\tthis.el.classList.add(\"container-changing\");\n\t\tthis._onVPanMove(ev);\n\t},\n\n\t_onVPanMove: function(ev) {\n\t\tvar collapsed = this.model.get(\"collapsed\");\n\t\tvar delta = ev.deltaY; //ev.thresholdDeltaY;\n\t\tvar maxDelta = this._collapsedOffsetY; // + Math.abs(ev.thresholdOffsetY);\n\n\t\t// check if direction is aligned with collapsed/expand\n\t\tvar isValidDir = collapsed ? (delta > 0) : (delta < 0);\n\t\tvar moveFactor = collapsed ? Globals.VPAN_DRAG : 1 - Globals.VPAN_DRAG;\n\n\t\tdelta = Math.abs(delta); // remove sign\n\t\tdelta *= moveFactor;\n\t\tmaxDelta *= moveFactor;\n\n\t\tif (isValidDir) {\n\t\t\tif (delta > maxDelta) { // overshooting\n\t\t\t\tdelta = ((delta - maxDelta) * Globals.VPAN_OUT_DRAG) + maxDelta;\n\t\t\t} else { // no overshooting\n\t\t\t\t// delta = delta;\n\t\t\t}\n\t\t} else {\n\t\t\tdelta = (-delta) * Globals.VPAN_OUT_DRAG; // delta is opposite\n\t\t}\n\t\tdelta *= collapsed ? 1 : -1; // reapply sign\n\n\t\tthis.transforms.offsetAll(0, delta);\n\t\tthis.transforms.validate();\n\t},\n\n\t_onVPanFinal: function(ev) {\n\t\tthis.vpan.off(\"vpanmove\", this._onVPanMove);\n\t\tthis.vpan.off(\"vpanend vpancancel\", this._onVPanFinal);\n\n\t\t// FIXME: model.collapsed may have already changed, _onVPanMove would run with wrong values:\n\t\t// model.collapsed is changed in a setImmediate callback from NavigationView.\n\n\t\tthis._onVPanMove(ev);\n\t\tthis.setImmediate(function() {\n\t\t\tthis._transformsChanged = true;\n\t\t\tthis.requestRender();\n\t\t});\n\t},\n\n\t// willCollapsedChange: function(ev) {\n\t// \tvar collapsed = this.model.get(\"collapsed\");\n\t// \treturn ev.type == \"vpanend\"? collapsed?\n\t// \t\tev.thresholdDeltaY > Globals.COLLAPSE_THRESHOLD :\n\t// \t\tev.thresholdDeltaY < -Globals.COLLAPSE_THRESHOLD :\n\t// \t\tfalse;\n\t// },\n\n\t/* -------------------------------\n\t/* create/remove children on bundle selection\n\t/* ------------------------------- */\n\n\t/** Create children on bundle select */\n\tcreateChildren: function(model) {\n\t\tvar view;\n\t\tif (model.__proto__.constructor === bundles.model) {\n\t\t\t// will be attached to dom in this order\n\t\t\tview = this.createMediaCaptionStack(model);\n\t\t\tthis.itemViews.push(view);\n\t\t\tthis.transforms.add(view.el);\n\t\t\tview = this.createMediaCarousel(model);\n\t\t\tthis.itemViews.push(view);\n\t\t\tthis.transforms.add(view.el);\n\t\t\tview = this.createMediaDotNavigation(model);\n\t\t\tthis.itemViews.push(view);\n\t\t} else\n\t\tif (model.__proto__.constructor === articles.model) {\n\t\t\tview = this.createArticleView(model);\n\t\t\tthis.itemViews.push(view);\n\t\t}\n\n\t\tthis.itemViews.forEach(function(view) {\n\t\t\tif (!this.skipTransitions) {\n\t\t\t\tview.el.classList.add(\"adding-child\");\n\t\t\t\tview.el.style.opacity = 0;\n\t\t\t}\n\t\t\tthis.el.appendChild(view.el);\n\t\t\tview.render();\n\t\t}, this);\n\n\t\tif (!this.skipTransitions) {\n\t\t\tthis.requestAnimationFrame(function() {\n\t\t\t\tconsole.log(\"%s::createChildren::[callback:requestAnimationFrame]\", this.cid);\n\t\t\t\tthis.itemViews.forEach(function(view) {\n\t\t\t\t\tif (!this.skipTransitions) {\n\t\t\t\t\t\tview.el.style[transitionProp] = \"opacity \" + tx.LAST.cssText;\n\t\t\t\t\t}\n\t\t\t\t\tview.el.style.removeProperty(\"opacity\");\n\t\t\t\t}, this);\n\t\t\t});\n\t\t}\n\t},\n\n\tremoveChildren: function() {\n\t\tthis.itemViews.forEach(function(view, i, arr) {\n\t\t\tthis.transforms.remove(view.el);\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tview.remove();\n\t\t\t} else {\n\t\t\t\tvar s = window.getComputedStyle(view.el);\n\t\t\t\tif (s.opacity == \"0\" || s.visibility == \"hidden\") {\n\t\t\t\t\tconsole.log(\"%s::removeChildren [view:%s] removed immediately (invisible)\", this.cid, view.cid);\n\t\t\t\t\tview.remove();\n\t\t\t\t} else {\n\t\t\t\t\tview.el.classList.add(\"removing-child\");\n\t\t\t\t\tif (s[transformProp]) view.el.style[transformProp] = s[transformProp];\n\t\t\t\t\tview.el.style[transitionProp] = \"opacity \" + tx.FIRST.cssText;\n\t\t\t\t\tview.el.style.opacity = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tarr[i] = null;\n\t\t}, this);\n\t\tthis.itemViews.length = 0;\n\t},\n\n\t_onAddedTransitionEnd: function(ev) {\n\t\tif (ev.target.cid && this.childViews.hasOwnProperty(ev.target.cid)) {\n\t\t\tconsole.log(\"%s::_onAddedTransitionEnd [view:%s] [prop:%s] [ev:%s]\", this.cid, ev.target.cid, ev.propertyName, ev.type);\n\t\t\tvar view = this.childViews[ev.target.cid];\n\t\t\tview.el.classList.remove(\"adding-child\");\n\t\t\tview.el.style.removeProperty(transitionProp);\n\t\t}\n\t},\n\n\t_onRemovedTransitionEnd: function(ev) {\n\t\tif (ev.target.cid && this.childViews.hasOwnProperty(ev.target.cid)) {\n\t\t\tconsole.log(\"%s::_onRemovedTransitionEnd [view:%s] [prop:%s] [ev:%s]\", this.cid, ev.target.cid, ev.propertyName, ev.type);\n\t\t\tvar view = this.childViews[ev.target.cid];\n\t\t\tview.el.classList.remove(\"removing-child\");\n\t\t\tview.remove();\n\t\t}\n\t},\n\n\t// purgeChildren: function() {\n\t// \tvar i, el, els = this.el.querySelectorAll(\".removing-child\");\n\t// \tfor (i = 0; i < els.length; i++) {\n\t// \t\tel = els.item(i);\n\t// \t\tif (el.parentElement === this.el) {\n\t// \t\t\ttry {\n\t// \t\t\t\tconsole.error(\"%s::purgeChildren\", this.cid, el.getAttribute(\"data-cid\"));\n\t// \t\t\t\tView.findByElement(el).remove();\n\t// \t\t\t} catch (err) {\n\t// \t\t\t\tconsole.error(\"s::purgeChildren\", this.cid, \"orphaned element\", err);\n\t// \t\t\t\tthis.el.removeChild(el);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// },\n\n\t/* -------------------------------\n\t/* Components\n\t/* ------------------------------- */\n\n\n\t/**\n\t * media-carousel\n\t */\n\tcreateMediaCarousel: function(bundle) {\n\t\t// Create carousel\n\t\tvar EmptyRenderer = CarouselRenderer.extend({\n\t\t\tclassName: \"carousel-item empty-item\",\n\t\t\tmodel: bundle,\n\t\t\ttemplate: carouselEmptyTemplate,\n\t\t});\n\t\tvar rendererFunction = function(item, index, arr) {\n\t\t\tif (index === -1) {\n\t\t\t\treturn EmptyRenderer;\n\t\t\t}\n\t\t\tswitch (item.attr(\"@renderer\")) {\n\t\t\t\tcase \"video\":\n\t\t\t\t\treturn VideoRenderer;\n\t\t\t\tcase \"sequence\":\n\t\t\t\t\treturn SequenceRenderer;\n\t\t\t\tcase \"image\":\n\t\t\t\t\treturn ImageRenderer;\n\t\t\t\tdefault:\n\t\t\t\t\treturn ImageRenderer;\n\t\t\t}\n\t\t};\n\t\tvar view = new Carousel({\n\t\t\tclassName: \"media-carousel \" + bundle.get(\"domid\"),\n\t\t\tcollection: bundle.get(\"media\"),\n\t\t\trendererFunction: rendererFunction,\n\t\t\trequireSelection: !!(bundle.attr(\"@no-desc\")),\n\t\t\t// direction: Carousel.DIRECTION_HORIZONTAL,\n\t\t\ttouch: this.hpan,\n\t\t});\n\t\tcontroller.listenTo(view, {\n\t\t\t\"view:select:one\": (model) => {\n\t\t\t\tconsole.log(\"%s:[view:select:one] %s\", view.cid, model.cid);\n\t\t\t\tcontroller.selectMedia(model);\n\t\t\t},\n\t\t\t\"view:select:none\": controller.deselectMedia,\n\t\t\t// \"view:removed\": controller.stopListening\n\t\t});\n\t\tview.listenTo(bundle, \"deselected\", function() {\n\t\t\tthis.stopListening(this.collection);\n\t\t\tcontroller.stopListening(this);\n\t\t});\n\t\treturn view;\n\t},\n\n\t/**\n\t * media-caption-stack\n\t */\n\tcreateMediaCaptionStack: function(bundle) {\n\t\tvar view = new CollectionStack({\n\t\t\tclassName: \"media-caption-stack\",\n\t\t\tcollection: bundle.get(\"media\"),\n\t\t\ttemplate: mediaStackTemplate\n\t\t});\n\t\tview.listenTo(bundle, \"deselected\", function() {\n\t\t\tthis.stopListening(this.collection);\n\t\t});\n\t\treturn view;\n\t},\n\n\t/**\n\t * media-dotnav\n\t */\n\tcreateMediaDotNavigation: function(bundle) {\n\t\tvar view = new SelectableListView({\n\t\t\tclassName: \"media-dotnav dots-fontface color-fg05\",\n\t\t\tcollection: bundle.get(\"media\"),\n\t\t\trenderer: DotNavigationRenderer\n\t\t});\n\t\tcontroller.listenTo(view, {\n\t\t\t\"view:select:one\": controller.selectMedia,\n\t\t\t\"view:select:none\": controller.deselectMedia,\n\t\t\t// \"view:removed\": controller.stopListening\n\t\t});\n\t\tview.listenTo(bundle, \"deselected\", function() {\n\t\t\tthis.stopListening(this.collection);\n\t\t\tcontroller.stopListening(this);\n\t\t});\n\t\treturn view;\n\t},\n\n\t/**\n\t * @param el {module:app/model/item/ArticleView}\n\t * @return {module:app/view/base/View}\n\t */\n\tcreateArticleView: function(article) {\n\t\tvar view = new ArticleView({\n\t\t\tmodel: article,\n\t\t});\n\t\treturn view;\n\t},\n\n\t// createProgressWrapper: function() {\n\t// \t// var view = new ProgressMeter({\n\t// \t// \tid: \"media-progress-wrapper\",\n\t// \t// \t// className: \"color-bg color-fg05\",\n\t// \t// \tuseOpaque: false,\n\t// \t// \tlabelFn: function() { return \"0%\"; }\n\t// \t// });\n\t// \t// this.el.appendChild(this.progressWrapper.el);\n\t// \t// return view;\n\t// \treturn null;\n\t// },\n});\n",
    "/**\n * @module app/view/NavigationView\n */\n\n/** @type {module:hammerjs} */\nconst Hammer = require(\"hammerjs\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:utils/TransformHelper} */\nconst TransformHelper = require(\"utils/TransformHelper\");\n// /** @type {module:app/view/base/TouchManager} */\n// var TouchManager = require(\"app/view/base/TouchManager\");\n\n/** @type {module:app/control/Controller} */\nconst controller = require(\"app/control/Controller\");\n/** @type {module:app/model/collection/TypeCollection} */\nconst types = require(\"app/model/collection/TypeCollection\");\n/** @type {module:app/model/collection/KeywordCollection} */\nconst keywords = require(\"app/model/collection/KeywordCollection\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n/** @type {module:app/model/collection/ArticleCollection} */\nconst articles = require(\"app/model/collection/ArticleCollection\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/component/FilterableListView} */\nconst FilterableListView = require(\"app/view/component/FilterableListView\");\n/** @type {module:app/view/component/GroupingListView} */\nconst GroupingListView = require(\"app/view/component/GroupingListView\");\n// /** @type {module:app/view/component/CollectionPager} */\n// var CollectionPager = require(\"app/view/component/CollectionPager\");\n/** @type {module:app/view/component/GraphView} */\nconst GraphView = require(\"app/view/component/GraphView\");\n/** @type {module:app/view/component/ArticleButton} */\nconst ArticleButton = require(\"app/view/component/ArticleButton\");\n\n// /** @type {module:utils/prefixedProperty} */\n// var prefixedProperty = require(\"utils/prefixedProperty\");\n\n// var traceElement = require(\"utils/debug/traceElement\");\n\nvar tx = Globals.transitions;\n\nvar txNow = _.clone(tx.NOW);\ntxNow.easing = \"ease\";\n// var hTx = _.clone(collapsed ? tx.LAST : tx.FIRST);\n// hTx.easing = \"ease\";\n\n/**\n * @constructor\n * @type {module:app/view/NavigationView}\n */\nmodule.exports = View.extend({\n\n\t// /** @override */\n\t// tagName: \"div\",\n\t/** @override */\n\tcidPrefix: \"navigationView\",\n\t/** @override */\n\tclassName: \"navigation container-expanded\",\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t_.bindAll(this, \"_onVPanStart\", \"_onVPanMove\", \"_onVPanFinal\");\n\t\t_.bindAll(this, \"_onHPanStart\", \"_onHPanMove\", \"_onHPanFinal\");\n\t\t_.bindAll(this, \"_onNavigationClick\");\n\t\t// _.bindAll(this, \"_whenTransitionsEnd\", \"_whenTransitionsAbort\");\n\t\t// _.bindAll(this, \"_whenListsRendered\");\n\n\t\t// this._metrics = {\n\t\t// \tminHeight: 0\n\t\t// };\n\t\tthis.itemViews = [];\n\t\tthis.transforms = new TransformHelper();\n\t\t// this.touch = options.touch || new Error(\"no touch\"); //TouchManager.getInstance();\n\t\tthis.vpan = options.vpan || new Error(\"no vpan\");\n\t\tthis.hpan = options.hpan || new Error(\"no hpan\");\n\n\t\tthis.listenTo(this.model, \"change\", this._onModelChange);\n\t\tthis.listenTo(keywords, \"select:one select:none\", this._onKeywordSelect);\n\t\t// this.listenTo(this.model, \"withBundle:change\", this._onwithBundleChange);\n\n\t\tthis.vpanGroup = this.el.querySelector(\"#vpan-group\");\n\t\t// this.el.style.touchAction = \"none\";\n\t\t// this.el.style.webkitUserSelect = \"none\";\n\t\t// this.el.style.webkitUserDrag = \"none\";\n\n\t\tthis.keywordList = this.createKeywordList();\n\t\tthis.bundleList = this.createBundleList();\n\t\tthis.itemViews.push(this.keywordList);\n\t\tthis.itemViews.push(this.bundleList);\n\n\t\tthis.graph = this.createGraphView(this.bundleList,\n\t\t\tthis.keywordList, this.vpanGroup);\n\n\t\tthis.sitename = this.createSitenameButton();\n\t\tthis.about = this.createAboutButton();\n\n\t\t/* NOTE: .list-group .label moves horizontally (cf. sass/layouts/*.scss) */\n\t\tthis.hGroupings = this.keywordList.el.querySelectorAll(\".list-group .label\");\n\n\t\tthis.transforms.add(\n\t\t\tthis.vpanGroup,\n\t\t\tthis.bundleList.wrapper,\n\t\t\tthis.keywordList.wrapper,\n\t\t\tthis.bundleList.el,\n\t\t\tthis.keywordList.el,\n\t\t\tthis.hGroupings,\n\t\t\tthis.sitename.wrapper,\n\t\t\tthis.about.wrapper,\n\t\t\tthis.sitename.el,\n\t\t\tthis.about.el,\n\t\t\tthis.graph.el\n\t\t);\n\t\t// this.itemViews.push(this.graph);\n\t\t// this.listenTo(this.graph, {\n\t\t// \t\"canvas:update\": this._onGraphUpdate,\n\t\t// \t\"canvas:redraw\": this._onGraphRedraw,\n\t\t// });\n\n\t\t/*this.listenTo(this.graph, \"view:render:before\", function(view, flags) {\n\t\t\tvar vmax;\n\t\t\tif (!view.el.style.height) {\n\t\t\t\t// if (flags & (View.SIZE_INVALID | View.MODEL_INVALID)) {\n\t\t\t\t// if ((this.bundleList.renderFlags | View.SIZE_INVALID) ||\n\t\t\t\t// \t(this.keywordList.renderFlags | View.SIZE_INVALID)) {\n\t\t\t\t// }\n\t\t\t\tvmax = Math.max(\n\t\t\t\t\tthis.bundleList._metrics.height,\n\t\t\t\t\tthis.keywordList._metrics.height\n\t\t\t\t);\n\t\t\t\tif (_.isNumber(vmax)) {\n\t\t\t\t\tview.el.style.height = vmax + \"px\";\n\t\t\t\t\tconsole.log(\"%s:[view:render:before][once]:%s [%s] heights:[%i, %i] (max %i)\",\n\t\t\t\t\t\tthis.cid, view.cid, View.flagsToString(flags),\n\t\t\t\t\t\tthis.bundleList._metrics.height,\n\t\t\t\t\t\tthis.keywordList._metrics.height,\n\t\t\t\t\t\tvmax);\n\t\t\t\t}\n\t\t\t}\n\t\t});*/\n\t\t// this.listenTo(this.bundleList, \"view:render:after\", function(view, flags) {\n\t\t// \tconsole.info(\"%s:[view:render:after %s]\", this.cid, view.cid, View.flagsToString(flags & View.SIZE_INVALID));\n\t\t// \t\tif (flags & View.SIZE_INVALID) {\n\t\t// \t\t\t// console.info(\"%s:[%s view:render:after] bundleList height\", this.cid, view.cid, this.bundleList.el.style.height);\n\t\t// \t\t\t// this.graph.el.style.height = this.bundleList.el.style.height;\n\t\t// \t\t\tthis.graph.el.style.opacity = this.bundleList.collapsed? 0 : 1;\n\t\t// \t\t\tthis.graph.requestRender(View.SIZE_INVALID).renderNow();\n\t\t// \t// \t}\n\t\t// });\n\t\t// this.listenTo(this.bundleList, \"view:render:after\", this._onListResize);\n\t\t// this.listenTo(this.keywordList, \"view:render:after\", this._onListResize);\n\t},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\tif (flags & View.MODEL_INVALID) {\n\t\t\tif (this.model.hasChanged(\"collapsed\")) {\n\t\t\t\tthis.el.classList.toggle(\"container-collapsed\", this.model.get(\"collapsed\"));\n\t\t\t\tthis.el.classList.toggle(\"container-expanded\", !this.model.get(\"collapsed\"));\n\t\t\t}\n\t\t\tif (this.model.hasChanged(\"collapsed\")\n\t\t\t\t|| this.model.hasChanged(\"withBundle\")) {\n\t\t\t\tthis.el.classList.add(\"container-changing\");\n\t\t\t}\n\t\t\tif (this.model.hasChanged(\"routeName\")) {\n\t\t\t\tthis.bundleList.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\t\tthis.keywordList.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\t}\n\t\t}\n\n\t\t// transforms\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (this.skipTransitions ||\n\t\t\t(flags & View.ALL_INVALID)) {\n\t\t\t// (flags & (View.MODEL_INVALID | View.SIZE_INVALID | View.LAYOUT_INVALID))) {\n\t\t\t// if (transformsChanged) {\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tthis.transforms.stopAllTransitions();\n\t\t\t\tthis.transforms.validate();\n\t\t\t\tthis.transforms.clearAllOffsets();\n\t\t\t} else {\n\t\t\t\tthis.renderTransitions(flags);\n\t\t\t}\n\t\t\tthis.transforms.validate();\n\t\t\t// console.log(\"%s::renderFrame %o\", this.cid,\n\t\t\t// \tthis.transforms.items.map(function(o) {\n\t\t\t// \t\treturn traceElement(o.el) + \":\" +\n\t\t\t// \t\t\t(o.hasTransition ? o.transition.name : \"-\");\n\t\t\t// \t}));\n\t\t}\n\t\t// if (this.model.hasChanged(\"collapsed\") && this.model.get(\"collapsed\")) {\n\t\t// \tthis.el.style.height = \"\";\n\t\t// \t// this.el.style.minHeight = hval + \"px\";\n\t\t// \tthis.graph.el.style.height = \"\";\n\t\t// }\n\n\t\t// promise handlers\n\t\t// - - - - - - - - - - - - - - - - -\n\n\t\tvar measureRenderedLists = function(result) {\n\t\t\t// var hval = result.reduce(function(a, o) {\n\t\t\t// \treturn Math.max(a, o.metrics.height);\n\t\t\t// }, 0);\n\t\t\tvar hval = Math.max(\n\t\t\t\tthis.bundleList.metrics.height,\n\t\t\t\tthis.keywordList.metrics.height);\n\n\t\t\tif (this.model.get(\"collapsed\")) {\n\t\t\t\tthis.el.style.height = \"\";\n\t\t\t\t// this.el.style.minHeight = hval + \"px\";\n\t\t\t\tthis.graph.el.style.height = \"\";\n\t\t\t} else {\n\t\t\t\tthis.el.style.height = hval + \"px\";\n\t\t\t\t// this.el.style.minHeight = \"\";\n\t\t\t\tthis.graph.el.style.height = hval + \"px\";\n\t\t\t}\n\t\t\t// this.el.style.height = this.model.get(\"collapsed\") ? \"\" : \"100%\";\n\t\t\t// this.vpanGroup.style.height = hval;\n\t\t\tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\tconsole.log(\"%s:[whenListsRenderedDone] height set to %s\", this.cid, this.model.get(\"collapsed\") ? hval + \"px\" : \"[not set]\", result);\n\t\t\tthis.trigger(\"view:collapsed:measured\", this);\n\t\t\treturn result;\n\t\t}.bind(this);\n\n\t\tvar toggleGraph = function(result) {\n\t\t\tthis.graph.enabled = !this.model.get(\"collapsed\");\n\t\t\tthis.graph.valueTo(\"a2b\", 0, 0);\n\t\t\tif (!this.model.get(\"collapsed\")) {\n\t\t\t\tthis.graph.valueTo(\"a2b\", 1, Globals.TRANSITION_DURATION);\n\t\t\t}\n\t\t\treturn result;\n\t\t}.bind(this);\n\n\t\tvar whenCollapsedChangeDone = function(result) {\n\t\t\tconsole.log(\"%s:[whenCollapsedChangeDone][flags: %s]\", this.cid, View.flagsToString(flags), result);\n\t\t\tthis.el.classList.remove(\"container-changing\");\n\t\t\tthis.trigger(\"view:collapsed:end\", this);\n\t\t\treturn result;\n\t\t}.bind(this);\n\n\t\t// promises\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tvar p;\n\t\t// p = Promise.all([\n\t\t// \t\tthis.bundleList.whenRendered(),\n\t\t// \t\tthis.keywordList.whenRendered(),\n\t\t// \t\tthis.bundleList.whenCollapseChangeEnds(),\n\t\t// \t\tthis.keywordList.whenCollapseChangeEnds(),\n\t\t// \t\tthis.transforms.whenAllTransitionsEnd(),\n\t\t// \t]);\n\n\t\tp = Promise.all([\n\t\t\t\tthis.bundleList.whenCollapseChangeEnds(),\n\t\t\t\tthis.keywordList.whenCollapseChangeEnds(),\n\t\t\t])\n\t\t\t.then(measureRenderedLists);\n\n\t\tif ((flags & View.MODEL_INVALID) && this.model.hasChanged(\"collapsed\")) {\n\t\t\tp = p.then(toggleGraph);\n\t\t}\n\t\tp\n\t\t\t.then(this.transforms.whenAllTransitionsEnd())\n\t\t\t.then(whenCollapsedChangeDone, function(reason) {\n\t\t\t\tconsole.error(reason);\n\t\t\t})\n\t\t\t.catch(function(reason) {\n\t\t\t\tconsole.warn(\"%s::renderFrame promise rejected\", this.cid);\n\t\t\t}.bind(this));\n\n\t\t/*\n\t\tvar whenListsRendered = Promise.all([\n\t\t\tthis.bundleList.whenRendered(),\n\t\t\tthis.keywordList.whenRendered()\n\t\t]);\n\n\t\tvar whenTransformsEnd = this.transforms.promise();\n\n\t\twhenListsRendered.then(\n\t\t\twhenListsRenderedDone,\n\t\t\tfunction(reason) {\n\t\t\t\tconsole.warn(\"%s:[whenListsRendered] failed: %o\", this.cid, reason);\n\t\t\t\treturn reason;\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tPromise.all([\n\t\t\twhenListsRendered,\n\t\t\twhenTransformsEnd\n\t\t])\n\t\t\t.then(\n\t\t\t\tfunction(result) {\n\t\t\t\t\tconsole.log(\"%s:[whenListsRendered+whenTransformsEnd] [%s]\", this.cid, View.flagsToString(flags), result);\n\t\t\t\t\tthis.el.classList.remove(\"container-changing\");\n\t\t\t\t\tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction(reason) {\n\t\t\t\t\tconsole.warn(\"%s:[whenListsRendered+whenTransformsEnd] [%s]\", this.cid, View.flagsToString(flags), reason);\n\t\t\t\t\tthis.el.classList.remove(\"container-changing\");\n\t\t\t\t\tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\t\t}.bind(this)\n\t\t\t);*/\n\n\n\t\t// trace result handlers\n\t\t// - - - - - - - - - - - - - - - - -\n\t\t/*if (this.model.hasChanged(\"collapsed\")) {\n\t\t\tvar msgBase = this.model.get(\"collapsed\") ? \"collaps\" : \"expand\";\n\t\t\tPromise.all([\n\t\t\t\tPromise.all([\n\t\t\t\t\t\tthis.bundleList.whenRendered(),\n\t\t\t\t\t\tthis.keywordList.whenRendered()\n\t\t\t\t\t])\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tconsole.log(\"nav-tx:%sing\", msgBase, arguments);\n\t\t\t\t\t\t}),\n\t\t\t\tthis.transforms.promise()\n\t\t\t])\n\t\t\t\t.catch(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tconsole.warn(\"nav-tx:%sed [rejected]\", msgBase, arguments);\n\t\t\t\t\t})\n\t\t\t\t.finally(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tconsole.log(\"nav-tx:%sed\", msgBase, arguments);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}*/\n\n\t\t// graph\n\t\t// - - - - - - - - - - - - - - - - -\n\t\t// if ((flags & (View.SIZE_INVALID | ~View.MODEL_INVALID))\n\t\t// \t/* collapsed has not changed, no bundle selected */\n\t\t// \t&& !this.model.hasChanged(\"collapsed\")\n\t\t// \t&& !this.model.get(\"withBundle\")) {\n\t\t// \tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t// \tif (!this.skipTransitions) {\n\t\t// \t\tthis.graph.renderNow();\n\t\t// \t}\n\t\t// }\n\t\t// else\n\t\t// if ((flags & View.SIZE_INVALID) && !this.model.get(\"collapsed\")) {\n\t\t// \t/* NavigationView has resized while uncollapsed,\n\t\t// \tbut model is unchanged */\n\t\t// \tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t// }\n\n\n\t\t// children loop\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tthis.itemViews.forEach(function(view) {\n\t\t\t// view.skipTransitions = view.skipTransitions || this.skipTransitions;\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tview.skipTransitions = true;\n\t\t\t}\n\t\t\tif (flags & View.SIZE_INVALID) {\n\t\t\t\tview.requestRender(View.SIZE_INVALID);\n\t\t\t}\n\t\t\t// if (!view.skipTransitions) {\n\t\t\tview.renderNow();\n\t\t\t// }\n\t\t}, this);\n\n\t\tthis.requestAnimationFrame(function() {\n\t\t\tthis.skipTransitions = false;\n\t\t});\n\t},\n\n\t/*_whenListsRendered: function(result) {\n\t\tvar hval;\n\t\tif (this.model.get(\"collapsed\")) {\n\t\t\tthis.el.style.height = \"\";\n\t\t\t// this.graph.el.style.height = \"100%\";\n\t\t} else {\n\t\t\t// hval = result.reduce(function(a, o) {\n\t\t\t// \treturn Math.max(a, o.metrics.height);\n\t\t\t// }, 0);\n\t\t\thval = Math.max(\n\t\t\t\tthis.bundleList.metrics.height,\n\t\t\t\tthis.keywordList.metrics.height);\n\t\t\tthis.el.style.height = hval + \"px\";\n\t\t\t// this.graph.el.style.height = hval + \"px\";\n\t\t}\n\t\tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID).renderNow();\n\t\tconsole.log(\"%s:[_whenListsRendered] height set to %opx\", this.cid, hval ? hval : \"[empty]\", arguments);\n\t\treturn result\n\t},\n\n\t_whenTransitionsEnd: function(result) {\n\t\tconsole.info(\"%s::_whenTransitionsEnd\", this.cid);\n\t\tthis.el.classList.remove(\"container-changing\");\n\t\t// if (!Globals.BREAKPOINTS[\"medium-wide\"].matches)\n\t\t// \treturn;\n\t\t// if (!this.model.get(\"collapsed\")) {\n\t\t// \tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID); //.renderNow();\n\t\t// }\n\t\treturn result;\n\t},\n\n\t_whenTransitionsAbort: function(reason) {\n\t\tconsole.warn(\"%s::_whenTransitionsAbort %o\", this.cid, reason);\n\t\tthis.el.classList.remove(\"container-changing\");\n\t\t// if (!Globals.BREAKPOINTS[\"medium-wide\"].matches)\n\t\t// \treturn;\n\t\t// if (!this.model.get(\"collapsed\")) {\n\t\t// \tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID); //.renderNow();\n\t\t// }\n\t\treturn result;\n\t},*/\n\n\t/* -------------------------------\n\t/* renderTransitions\n\t/* ------------------------------- */\n\n\trenderTransitions: function(flags) {\n\n\t\tvar modelChanged = (flags & View.MODEL_INVALID);\n\n\t\tvar fromRoute = this.model.get(\"fromRouteName\");\n\t\tvar toRoute = this.model.get(\"routeName\");\n\t\tvar routeChanged = modelChanged && this.model.hasChanged(\"routeName\");\n\n\t\t/* bundle */\n\t\tvar withBundle = this.model.has(\"bundle\");\n\t\tvar withBundleChanged = modelChanged && this.model.hasAnyChanged(\"bundle\");\n\t\tvar bundleChanged = modelChanged && this.model.hasChanged(\"bundle\");\n\t\t/* media */\n\t\tvar withMedia = this.model.has(\"media\");\n\t\tvar withMediaChanged = modelChanged && this.model.hasAnyChanged(\"media\");\n\t\t//var mediaChanged = modelChanged && this.model.hasChanged(\"media\");\n\t\t/* article */\n\t\t// var withArticle = this.model.has(\"article\");\n\t\tvar withArticleChanged = modelChanged && this.model.hasAnyChanged(\"article\");\n\t\t//var articleChanged = modelChanged && this.model.hasChanged(\"article\");\n\t\t/* collapsed */\n\t\tvar collapsed = this.model.get(\"collapsed\");\n\t\tvar collapsedChanged = modelChanged && this.model.hasChanged(\"collapsed\");\n\n\t\tvar tf;\n\t\t/* this.vpanGroup */\n\t\ttf = this.transforms.get(this.vpanGroup);\n\t\tif (tf && tf.hasOffset) {\n\t\t\ttf.runTransition(collapsedChanged ? tx.BETWEEN : tx.NOW);\n\t\t\ttf.clearOffset();\n\t\t}\n\t\t/* this.bundleList.el */\n\t\t// tf = this.transforms.get(this.bundleList.el);\n\t\t// if (tf.hasOffset) {\n\t\t// \ttf.runTransition(collapsedChanged ? tx.BETWEEN : tx.NOW);\n\t\t// \ttf.clearOffset();\n\t\t// }\n\t\t/* this.keywordList.el */\n\t\t// tf = this.transforms.get(this.keywordList.el);\n\t\t// if (tf.hasOffset) {\n\t\t// \ttf.runTransition(collapsedChanged ? tx.BETWEEN : tx.NOW);\n\t\t// \ttf.clearOffset();\n\t\t// }\n\t\t/* this.graph.el */\n\t\t// tf = this.transforms.get(this.graph.el);\n\t\t// if (tf && tf.hasOffset) {\n\t\t// \ttf.runTransition(collapsedChanged ? tx.BETWEEN : tx.NOW);\n\t\t// \ttf.clearOffset();\n\t\t// }\n\n\t\t/*\n\t\t * NOTE:\n\t\t * Vertical:\n\t\t *\t\tsite-name-wrapper,\n\t\t *\t\tarticle-list-wrapper\n\t\t * Horizontal:\n\t\t *\t\tsite-name,\n\t\t *\t\tarticle-buttons,\n\t\t *\t\tkeywordList.wrapper,\n\t\t *\t\tbundleList.wrapper,\n\t\t *\t\thGroupings\n\t\t */\n\t\tif (Globals.BREAKPOINTS[\"medium-wide\"].matches || Globals.BREAKPOINTS[\"medium-wide-stretch\"].matches) {\n\t\t\t/* HORIZONTAL: keywordList.wrapper */\n\t\t\ttf = this.transforms.get(this.keywordList.wrapper);\n\t\t\tif (collapsedChanged && !withArticleChanged) {\n\t\t\t\t// if (collapsedChanged) {\n\t\t\t\tif (withBundleChanged) {\n\t\t\t\t\tif (withMediaChanged)\n\t\t\t\t\t\ttf.runTransition(withBundle ? tx.LAST : tx.FIRST);\n\t\t\t\t} else {\n\t\t\t\t\tif (withMedia)\n\t\t\t\t\t\ttf.runTransition(collapsed ? tx.LAST : tx.FIRST);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!withBundleChanged && withMediaChanged)\n\t\t\t\t\ttf.runTransition(bundleChanged ? tx.BETWEEN : txNow); //tx.NOW);\n\t\t\t}\n\t\t\tif (tf.hasOffset)\n\t\t\t\ttf.clearOffset();\n\n\t\t\t/* HORIZONTAL: the rest */\n\t\t\tif (collapsedChanged ^ withArticleChanged) {\n\t\t\t\tthis.transforms.runTransition(collapsed ? tx.LAST : tx.FIRST,\n\t\t\t\t\tthis.sitename.el, this.about.el, this.bundleList.wrapper);\n\t\t\t\t// if (fromRoute != 'article-item' && toRoute != 'media-item') {\n\t\t\t\tthis.transforms.runTransition(collapsed ? tx.LAST : tx.FIRST, this.hGroupings);\n\t\t\t\t// }\n\t\t\t}\n\t\t\t/* VERTICAL */\n\t\t\tif (routeChanged && (fromRoute == 'root' || toRoute == 'root')) {\n\t\t\t\tthis.transforms.runTransition(tx.BETWEEN,\n\t\t\t\t\tthis.sitename.wrapper, this.about.wrapper);\n\t\t\t}\n\t\t\t/* this.hGroupings */\n\t\t\t// if (collapsedChanged ^ withArticleChanged) {\n\t\t\t// \t// if (collapsedChanged && !withArticleChanged) {\n\t\t\t// \tthis.transforms.runTransition(collapsed ? tx.LAST : tx.FIRST, this.hGroupings);\n\t\t\t// }\n\t\t\t// if (collapsedChanged) {\n\t\t\t// \tif (!withArticleChanged) {\n\t\t\t// \t\t// if (fromRoute == 'root' || toRoute == 'root') {\n\t\t\t// \t\tthis.transforms.runTransition(collapsed ? tx.LAST : tx.FIRST, this.bundleList.wrapper);\n\t\t\t// \t}\n\t\t\t// } else {\n\t\t\t// \tif (withArticleChanged && withBundleChanged) {\n\t\t\t// \t\tthis.transforms.runTransition(withArticle ? tx.BETWEEN : tx.LAST, this.bundleList.wrapper);\n\t\t\t// \t}\n\t\t\t// }\n\t\t} else if (Globals.BREAKPOINTS[\"small-stretch\"].matches) {\n\t\t\t// if (collapsedChanged ) {\n\t\t\tif (collapsedChanged ^ withArticleChanged) {\n\t\t\t\tthis.transforms.runTransition(collapsed ? tx.FIRST : tx.LAST,\n\t\t\t\t\tthis.sitename.el, this.about.el);\n\t\t\t}\n\t\t} else {\n\t\t\tif (withBundleChanged) {\n\t\t\t\tthis.transforms.runTransition(tx.BETWEEN,\n\t\t\t\t\tthis.sitename.el, this.about.el);\n\t\t\t}\n\t\t}\n\t\t// this.transforms.clearOffset(\n\t\t// \t// this.bundleList.el,\n\t\t// \t// this.keywordList.el,\n\t\t// \tthis.bundleList.wrapper);\n\t},\n\n\t/* --------------------------- *\n\t/* own model changed\n\t/* --------------------------- */\n\n\t_onModelChange: function() {\n\t\t// \tthis.setImmediate(this.commitModel);\n\t\t// },\n\t\t//\n\t\t// commitModel: function() {\n\t\t// this.requestRender(View.MODEL_INVALID | View.LAYOUT_INVALID);\n\t\tthis.requestRender(View.MODEL_INVALID);\n\t\t// keywords.deselect();\n\t\tif (this.model.hasChanged(\"collapsed\")) {\n\t\t\tif (this.model.get(\"collapsed\")) {\n\t\t\t\t// clear keyword selection\n\t\t\t\tkeywords.deselect();\n\t\t\t} // else {}\n\t\t\tthis.keywordList.collapsed = this.model.get(\"collapsed\");\n\t\t\tthis.bundleList.collapsed = this.model.get(\"collapsed\");\n\t\t}\n\t\tif (this.model.hasChanged(\"bundle\")) {\n\t\t\tthis.bundleList.selectedItem = this.model.get(\"bundle\");\n\t\t\tthis.keywordList.refreshFilter();\n\n\t\t\t// if (!this.model.get(\"collapsed\") && this.graph) {\n\t\t\t// \tthis.listenToOnce(this.keywordList, \"view:render:after\", function(view, flags) {\n\t\t\t// \t\tconsole.log(\"%s::_onBundleSelect -> %s:[view:render:after] flags:%s\", this.cid, view.cid, View.flagsToString(flags));\n\t\t\t// \t\tthis.graph.valueTo( \"a2b\", 0,  0);\n\t\t\t// \t\t// this.graph.renderNow();\n\t\t\t// \t\tthis.graph.valueTo( \"a2b\", 1,  Globals.TRANSITION_DURATION);\n\t\t\t// \t});\n\t\t\t// }\n\t\t\t// keywords.deselect();\n\t\t\t// this.graph && this.graph.requestRender(View.SIZE_INVALID);\n\t\t}\n\t\t// var clickEv = \"click\";//View.CLICK_EVENT\n\t\tif (this.model.hasChanged(\"withBundle\")) {\n\t\t\t// this.keywordList.refreshFilter()\n\t\t\tif (this.model.get(\"withBundle\")) {\n\n\t\t\t\tthis.el.addEventListener(View.CLICK_EVENT, this._onNavigationClick);\n\t\t\t\tthis.vpan.on(\"vpanstart\", this._onVPanStart);\n\t\t\t\tthis.hpan.on(\"hpanstart\", this._onHPanStart);\n\t\t\t\t// this.hpan.on(\"tap\", this._onTap);\n\t\t\t} else {\n\t\t\t\tthis.el.removeEventListener(View.CLICK_EVENT, this._onNavigationClick);\n\t\t\t\tthis.vpan.off(\"vpanstart\", this._onVPanStart);\n\t\t\t\tthis.hpan.off(\"hpanstart\", this._onHPanStart);\n\t\t\t\tkeywords.deselect();\n\t\t\t\t// this.hpan.off(\"tap\", this._onTap);\n\t\t\t}\n\t\t\t// this.graph.valueTo()\n\t\t}\n\t},\n\n\t// _onwithBundleChange: function(withBundle) {\n\t// \tif (withBundle) {\n\t// \t\tthis.listenTo(this.model, \"collapsed:change\", function(collapsed){\n\t//\n\t// \t\t});\n\t// \t} else {\n\t// \t\tthis.stopListening(this.model, \"collapsed:change\", function(collapsed){\n\t//\n\t// \t\t});\n\t// \t}\n\t// },\n\n\t/* --------------------------- *\n\t/* keyword collection changed\n\t/* --------------------------- */\n\n\t_onKeywordSelect: function(keyword) {\n\t\t// use collection listener to avoid redundant refreshFilter calls\n\t\tif (!this.model.get(\"collapsed\") && this.graph) {\n\t\t\tthis.listenToOnce(this.bundleList, \"view:render:after\", function(view, flags) {\n\t\t\t\t// console.log(\"%s::_onKeywordSelect -> %s:[view:render:after] flags:%s\", this.cid, view.cid, View.flagsToString(flags));\n\t\t\t\tthis.graph.valueTo(\"b2a\", 0, 0);\n\t\t\t\tthis.graph.valueTo(\"b2a\", 1, Globals.TRANSITION_DURATION);\n\t\t\t});\n\t\t}\n\t\tthis.bundleList.refreshFilter();\n\t},\n\n\t/* --------------------------- *\n\t/* UI Events: bundleList keywordList buttons\n\t/* --------------------------- */\n\n\t_onNavigationClick: function(ev) {\n\t\tconsole.log(\"%s::_onNavigationClick [%s] defaultPrevented:%s\", this.cid, ev.type, ev.defaultPrevented);\n\t\tif (ev.defaultPrevented) return;\n\t\t// if (ev.target !== this.graph.el && ev.target !== this.el) return;\n\n\t\tev.preventDefault();\n\t\tif (this.model.has(\"bundle\")) {\n\t\t\t// this.transforms.offset(0, 1, this.graph.el);\n\t\t\t// this.transforms.validate();\n\t\t\t// this._setCollapsed(!this.model.get(\"collapsed\"));\n\t\t\t// this.setImmediate(function() {\n\t\t\tthis.model.set(\"collapsed\", !this.model.get(\"collapsed\"));\n\t\t\t// });\n\t\t}\n\t},\n\n\t_setCollapsed: function(value) {\n\t\tif (value !== this.model.get(\"collapsed\")) {\n\t\t\t// this.transforms.offset(0, 1, this.graph.el);\n\t\t\t// this.transforms.validate();\n\t\t\tthis.setImmediate(function() {\n\t\t\t\t// console.log(\"%s::_setCollapsed -> %s (setImmediate)\", this.cid, value);\n\t\t\t\tthis.model.set(\"collapsed\", value);\n\t\t\t});\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* Horizontal touch/move (HammerJS)\n\t/* ------------------------------- */\n\n\t_onHPanStart: function(ev) {\n\t\tthis.transforms.get(this.keywordList.wrapper)\n\t\t\t.stopTransition()\n\t\t\t.clearOffset()\n\t\t\t.validate();\n\t\t// if (this.model.get(\"layoutName\") != \"left-layout\"\n\t\t// \t&& this.model.get(\"layoutName\") != \"default-layout\") {\n\t\t// \treturn;\n\t\t// }\n\t\tif ((Globals.BREAKPOINTS[\"medium-wide\"].matches || Globals.BREAKPOINTS[\"medium-wide-stretch\"].matches)\n\t\t\t&& (this.model.get(\"routeName\") === \"bundleItem\")\n\t\t\t&& (this.model.get(\"bundle\").get(\"media\").selectedIndex <= 0)\n\t\t\t&& this.model.get(\"collapsed\")) {\n\t\t\tthis.transforms.get(this.keywordList.wrapper).clearCapture();\n\t\t\tthis._onHPanMove(ev);\n\n\t\t\tthis.hpan.on(\"hpanmove\", this._onHPanMove);\n\t\t\tthis.hpan.on(\"hpanend hpancancel\", this._onHPanFinal);\n\t\t}\n\t},\n\n\t_onHPanMove: function(ev) {\n\t\t// var HPAN_DRAG = 1;\n\t\t// var HPAN_DRAG = 0.75;\n\t\tvar HPAN_DRAG = 720 / 920;\n\t\tvar delta = ev.deltaX; //ev.thresholdDeltaX;\n\t\t// var mediaItems = this.model.get(\"bundle\").get(\"media\");\n\n\t\tif (this.model.has(\"media\")) {\n\t\t\tdelta *= (ev.offsetDirection & Hammer.DIRECTION_LEFT) ?\n\t\t\t\t0.0 : HPAN_DRAG;\n\t\t} else {\n\t\t\tdelta *= (ev.offsetDirection & Hammer.DIRECTION_LEFT) ?\n\t\t\t\tHPAN_DRAG : Globals.HPAN_OUT_DRAG;\n\t\t}\n\t\tthis.transforms.offset(delta, null, this.keywordList.wrapper);\n\t\tthis.transforms.validate();\n\t},\n\n\t_onHPanFinal: function(ev) {\n\t\tthis.hpan.off(\"hpanmove\", this._onHPanMove);\n\t\tthis.hpan.off(\"hpanend hpancancel\", this._onHPanFinal);\n\n\t\t/* NOTE: if there is no model change, set tx here. Otherwise just wait for render */\n\t\tvar kTf = this.transforms.get(this.keywordList.wrapper);\n\t\tif (!(this._renderFlags & View.MODEL_INVALID) && kTf.hasOffset) {\n\t\t\tif (kTf.offsetX != 0) {\n\t\t\t\tkTf.runTransition(tx.NOW);\n\t\t\t}\n\t\t\tkTf.clearOffset().validate();\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* Vertical touch/move (_onVPan*)\n\t/* ------------------------------- */\n\n\t_collapsedOffsetY: Globals.COLLAPSE_OFFSET,\n\n\t_onVPanStart: function(ev) {\n\t\tthis.vpan.on(\"vpanmove\", this._onVPanMove);\n\t\tthis.vpan.on(\"vpanend vpancancel\", this._onVPanFinal);\n\n\n\t\tthis.transforms.stopTransition(this.vpanGroup);\n\t\tthis.transforms.clearCapture(this.vpanGroup);\n\t\t// this.transforms.stopTransition(this.bundleList.el, this.keywordList.el); //, this.graph.el);\n\t\t// // this.transforms.clearOffset(this.bundleList.el, this.keywordList.el);\n\t\t// // this.transforms.validate();\n\t\t// this.transforms.clearCapture(this.bundleList.el, this.keywordList.el); //, this.graph.el);\n\t\t//\n\t\t// if (!this.model.get(\"collapsed\")) {\n\t\t// \tthis.transforms.stopTransition(this.graph.el);\n\t\t// \tthis.transforms.clearCapture(this.graph.el);\n\t\t// }\n\t\t// // this.el.classList.add(\"container-changing\");\n\n\t\t// this._onVPanMove(ev);\n\t},\n\n\t_onVPanMove: function(ev) {\n\t\tvar delta = this._computeVPanDelta(ev.deltaY); //ev.thresholdDeltaY);\n\n\t\tthis.transforms.offset(0, delta, this.vpanGroup);\n\t\t// this.transforms.offset(0, delta,\n\t\t// \tthis.bundleList.el, this.keywordList.el);\n\t\t// if (!this.model.get(\"collapsed\")) {\n\t\t// \tthis.transforms.offset(0, delta, this.graph.el);\n\t\t// }\n\t\tthis.transforms.validate();\n\t},\n\n\t_onVPanFinal: function(ev) {\n\t\tthis.vpan.off(\"vpanmove\", this._onVPanMove);\n\t\tthis.vpan.off(\"vpanend vpancancel\", this._onVPanFinal);\n\n\t\t// this._onVPanMove(ev);\n\t\t// this.transforms.validate();\n\n\t\tthis.setImmediate(function() {\n\t\t\t// this.transforms.clearOffset(this.bundleList.el, this.keywordList.el, this.graph.el);\n\t\t\tif (this.willCollapsedChange(ev)) {\n\t\t\t\t// this._setCollapsed(!this.model.get(\"collapsed\"));\n\t\t\t\tthis.model.set(\"collapsed\", !this.model.get(\"collapsed\"));\n\t\t\t}\n\t\t\tthis.requestRender(View.LAYOUT_INVALID); //.renderNow();\n\t\t});\n\t},\n\n\twillCollapsedChange: function(ev) {\n\t\treturn ev.type == \"vpanend\" ? this.model.get(\"collapsed\") ?\n\t\t\tev.deltaY > Globals.COLLAPSE_THRESHOLD :\n\t\t\tev.deltaY < -Globals.COLLAPSE_THRESHOLD :\n\t\t\tfalse;\n\t},\n\n\t_computeVPanDelta: function(delta) {\n\t\tvar collapsed = this.model.get(\"collapsed\");\n\t\tvar maxDelta = this._collapsedOffsetY; // + Math.abs(ev.thresholdOffsetY);\n\t\t// check if direction is aligned with collapsed/expand\n\t\tvar isValidDir = collapsed ? (delta > 0) : (delta < 0);\n\t\tvar moveFactor = collapsed ? 1 - Globals.VPAN_DRAG : Globals.VPAN_DRAG;\n\n\t\tdelta = Math.abs(delta); // remove sign\n\t\tdelta *= moveFactor;\n\t\tmaxDelta *= moveFactor;\n\n\t\tif (isValidDir) {\n\t\t\tif (delta > maxDelta) { // overshooting\n\t\t\t\tdelta = ((delta - maxDelta) * Globals.VPAN_OUT_DRAG) + maxDelta;\n\t\t\t} else { // no overshooting\n\t\t\t\t// delta = delta;\n\t\t\t}\n\t\t} else {\n\t\t\tdelta = (-delta) * Globals.VPAN_OUT_DRAG; // delta is opposite\n\t\t}\n\t\tdelta *= collapsed ? 0.5 : -1; // reapply sign\n\t\treturn delta;\n\t},\n\n\t/* -------------------------------\n\t/* Create children components\n\t/* ------------------------------- */\n\n\t// -------------------------------\n\t// #site-name\n\t// -------------------------------\n\n\tcreateSitenameButton: function() {\n\t\tvar view = new View({\n\t\t\tel: \"#site-name\",\n\t\t\tevents: {\n\t\t\t\t\"click a\": function(domev) {\n\t\t\t\t\tdomev.defaultPrevented || domev.preventDefault();\n\t\t\t\t\tthis.trigger(\"view:click\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tview.wrapper = view.el.parentElement;\n\t\tthis.listenTo(view, \"view:click\", this._onSitenameClick);\n\t\treturn view;\n\t},\n\n\t_onSitenameClick: function() {\n\t\tswitch (this.model.get(\"routeName\")) {\n\t\t\tcase \"media-item\":\n\t\t\tcase \"bundle-item\":\n\t\t\t\t// if (this.model.get(\"collapsed\")) {\n\t\t\t\t// \tthis._setCollapsed(false);\n\t\t\t\t// } else {\n\t\t\t\tcontroller.deselectBundle();\n\t\t\t\t// }\n\t\t\t\tbreak;\n\t\t\tcase \"article-item\":\n\t\t\t\tcontroller.deselectArticle();\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\t// -------------------------------\n\t// .article-button\n\t// -------------------------------\n\n\tcreateArticleButton: function(articleItem) {\n\t\tvar view = new ArticleButton({\n\t\t\tel: \".article-button[data-handle='about']\",\n\t\t\tmodel: articleItem\n\t\t}).render();\n\t\tview.wrapper = view.el.parentElement;\n\t\tthis.listenTo(view, \"view:click\", this._onArticleClick);\n\t\treturn view;\n\t},\n\n\t_onArticleClick: function(item) {\n\t\tswitch (this.model.get(\"routeName\")) {\n\t\t\tcase \"article-item\":\n\t\t\t\tcontroller.deselectArticle();\n\t\t\t\tbreak;\n\t\t\tcase \"root\":\n\t\t\tdefault:\n\t\t\t\tcontroller.selectArticle(item);\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\tcreateAboutButton: function() {\n\t\treturn this.createArticleButton(articles.findWhere({ handle: \"about\" }));\n\t},\n\n\t// -------------------------------\n\t// #bundle-list\n\t// -------------------------------\n\n\t/**\n\t * @param el {HTMLElement}\n\t * @return {module:app/base/view/component/FilterableListView}\n\t */\n\tcreateBundleList: function(el) {\n\t\tvar view = new FilterableListView({\n\t\t\tel: \"#bundle-list\",\n\t\t\tcollection: bundles,\n\t\t\tcollapsed: false,\n\t\t\tfilterFn: function(bundle, index, arr) {\n\t\t\t\treturn keywords.selected ?\n\t\t\t\t\tbundle.get(\"kIds\").indexOf(keywords.selected.id) !== -1 : false;\n\t\t\t},\n\t\t});\n\t\tview.wrapper = view.el.parentElement;\n\t\tthis.listenTo(view, \"view:select:one view:select:none\", function(bundle) {\n\t\t\tthis.setImmediate(function() {\n\t\t\t\tcontroller.selectBundle(bundle);\n\t\t\t});\n\t\t})\n\t\tthis.listenTo(view, \"view:select:same\", this._onBundleListSame);\n\t\treturn view;\n\t},\n\n\t_onBundleListSame: function(bundle) {\n\t\t// this.transforms.offset(0, 1, this.graph.el);\n\t\t// this.transforms.validate();\n\t\t// this.setImmediate(function() {\n\t\tthis.model.set(\"collapsed\", !this.model.get(\"collapsed\"));\n\t\t// });\n\t},\n\n\t// -------------------------------\n\t// #keyword-list\n\t// -------------------------------\n\n\t/**\n\t * @param el {HTMLElement}\n\t * @return {module:app/base/view/component/GroupingListView}\n\t */\n\tcreateKeywordList: function(el) {\n\t\tvar view = new GroupingListView({\n\t\t\tel: \"#keyword-list\",\n\t\t\tcollection: keywords,\n\t\t\tcollapsed: false,\n\t\t\tfilterFn: function(item, idx, arr) {\n\t\t\t\treturn bundles.selected ?\n\t\t\t\t\t(bundles.selected.get(\"kIds\").indexOf(item.id) !== -1) : false;\n\t\t\t},\n\t\t\tgroupingFn: function(item, idx, arr) {\n\t\t\t\treturn types.get(item.get(\"tId\"));\n\t\t\t},\n\t\t});\n\t\tview.wrapper = view.el.parentElement;\n\t\tview.listenTo(keywords, \"select:one select:none\", function(item) {\n\t\t\tview.selectedItem = item;\n\t\t});\n\t\tthis.listenTo(view, \"view:select:one view:select:none\", this._onKeywordListChange);\n\t\treturn view;\n\t},\n\n\t_onKeywordListChange: function(keyword) {\n\t\tif (!this.model.get(\"collapsed\")) {\n\t\t\tkeywords.select(keyword);\n\t\t}\n\t},\n\n\t// -------------------------------\n\t// #nav-graph\n\t// -------------------------------\n\n\t/**\n\t * @param listA {module:app/base/view/component/FilterableListView}\n\t * @param listB {module:app/base/view/component/FilterableListView}\n\t * @param parentEl {HTMLElement}\n\t * @return {module:app/base/view/component/GraphView}\n\t */\n\tcreateGraphView: function(listA, listB, parentEl) {\n\t\tvar view = new GraphView({\n\t\t\tid: \"nav-graph\",\n\t\t\tlistA: listA,\n\t\t\tlistB: listB,\n\t\t\tmodel: this.model,\n\t\t\tuseOpaque: false\n\t\t});\n\t\tparentEl || (parentEl = this.el);\n\t\tparentEl.insertBefore(view.el, parentEl.firstElementChild);\n\t\treturn view;\n\t},\n\n\t/* -------------------------------\n\t/* Horizontal touch/move (MutationObserver)\n\t/* ------------------------------- */\n\n\t/*\n\t_beginTransformObserve: function() {\n\t\tif (!(Globals.BREAKPOINTS[\"medium-wide\"].matches && this.model.get(\"bundle\").get(\"media\").selectedIndex <= 0 && this.model.get(\"collapsed\"))) {\n\t\t\treturn;\n\t\t}\n\t\tvar target = document.querySelector(\".carousel > .empty-item\");\n\t\tif (target === null) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this._transformObserver) {\n\t\t\tthis._transformObserver = new MutationObserver(this._onTransformMutation);\n\t\t}\n\t\tthis._transformObserver.observe(target, { attributes: true, attributeFilter: [\"style\"] });\n\t\tthis.hpan.on(\"hpanend hpancancel\", this._endTransformObserve);\n\t\tthis.transforms.get(this.keywordList.wrapper)\n\t\t\t.stopTransition()\n\t\t\t.clearOffset()\n\t\t\t.clearCapture()\n\t\t\t.validate();\n\t},\n\n\t_endTransformObserve: function() {\n\t\tthis._transformObserver.disconnect();\n\t\tthis.hpan.off(\"hpanend hpancancel\", this._endTransformObserve);\n\t\tthis.transforms.get(this.keywordList.wrapper)\n\t\t\t.clearOffset()\n\t\t\t.runTransition(tx.NOW)\n\t\t\t.validate();\n\t},\n\n\t_onTransformMutation: function(mutations) {\n\t\tvar tView, tMetrics, tCss, dTxObj, pos;\n\n\t\t// this.keywordList.wrapper.style[prefixedProperty(\"transform\")];\n\t\t// transform = mutations[0].target.style.getPropertyValue(prefixedProperty(\"transform\"));\n\n\t\ttView = View.findByElement(mutations[0].target);\n\t\tif (tView) {\n\t\t\ttMetrics = tView.metrics;\n\t\t\tdTxObj = this.transforms.get(this.keywordList.wrapper);\n\t\t\tconsole.log(\"%s::_onTransformMutation [withMedia: %s] target: (%f\\+%f) %f wrapper: (%f) %f\", this.cid,\n\t\t\t\tthis.model.has(\"media\"),\n\t\t\t\ttMetrics.translateX, tMetrics.width, tMetrics.translateX + tMetrics.width,\n\t\t\t\tdTxObj.capturedX, tMetrics.translateX - dTxObj.capturedX,\n\t\t\t\ttMetrics\n\t\t\t);\n\n\t\t\tthis.transforms.offset(tMetrics.translateX - dTxObj.capturedX, void 0, this.keywordList.wrapper);\n\t\t\tthis.transforms.validate();\n\t\t}\n\t},\n\t*/\n});\n",
    "var PriorityQueue = function(offset) {\n\tthis._offset = offset | 0;\n\tthis._items = [];\n\tthis._priorities = [];\n\tthis._numItems = 0;\n};\n\nPriorityQueue.prototype = Object.create({\n\tenqueue: function(item, priority) {\n\t\tvar i = this._items.length;\n\t\tthis._items[i] = item;\n\t\tthis._priorities[i] = {\n\t\t\tpriority: (priority | 0),\n\t\t\tindex: i\n\t\t};\n\t\tthis._numItems++;\n\t\t// console.log(\"FrameQueue::RequestQueue::enqueue() [numItems:%i] ID:%i\", this._numItems, this._offset + i);\n\t\treturn this._offset + i;\n\t},\n\n\tcontains: function(index) {\n\t\tindex -= this.offset;\n\t\treturn 0 <= index && index < this._items.length;\n\t},\n\n\tskip: function(index) {\n\t\tvar i, item;\n\t\ti = index - this._offset;\n\t\tif (0 > i || i >= this._items.length) {\n\t\t\t// \tconsole.warn(\"FrameQueue::RequestQueue::skip(id:%i) out of range (%i-%i)\", index, this._offset, this._offset + (this._numItems - 1));\n\t\t\treturn void 0;\n\t\t}\n\t\titem = this._items[i];\n\t\tif (item !== null) {\n\t\t\t// if (item = this._items[i]) {\n\t\t\tthis._items[i] = null;\n\t\t\tthis._numItems--;\n\t\t}\n\t\treturn item;\n\t},\n\n\tindexes: function() {\n\t\tvar items = this._priorities.concat();\n\t\titems.sort(function(a, b) {\n\t\t\tif (a.priority > b.priority)\n\t\t\t\treturn 1;\n\t\t\tif (a.priority < b.priority)\n\t\t\t\treturn -1;\n\t\t\treturn 0;\n\t\t});\n\t\titems.forEach(function(o, i, a) {\n\t\t\ta[i] = o.index;\n\t\t}, this);\n\t\treturn items;\n\t},\n\n\titems: function() {\n\t\tvar items = this._priorities.concat();\n\t\titems.sort(function(a, b) {\n\t\t\tif (a.priority > b.priority)\n\t\t\t\treturn 1;\n\t\t\tif (a.priority < b.priority)\n\t\t\t\treturn -1;\n\t\t\treturn 0;\n\t\t});\n\t\titems.forEach(function(o, i, a) {\n\t\t\ta[i] = this._items[o.index];\n\t\t}, this);\n\t\treturn items;\n\t},\n\n\t_empty: function(offset) {\n\t\tthis._offset = offset;\n\t\tthis._items.length = 0;\n\t\tthis._priorities.length = 0;\n\t\tthis._numItems = 0;\n\t}\n}, {\n\n\toffset: {\n\t\tget: function() {\n\t\t\treturn this._offset;\n\t\t}\n\t},\n\n\tlength: {\n\t\tget: function() {\n\t\t\treturn this._items.length;\n\t\t}\n\t},\n\n\tnumItems: {\n\t\tget: function() {\n\t\t\treturn this._numItems;\n\t\t}\n\t},\n});\n\nvar CallbackQueue = function(requestFn, cancelFn) {\n\tthis._nextQueue = new PriorityQueue(0);\n\tthis._currQueue = null;\n\n\t// this._pending = false;\n\tthis._running = false;\n\tthis._runId = -1;\n\n\tthis._requestFn = requestFn;\n\tthis._cancelFn = cancelFn;\n\tthis._runQueue = this._runQueue.bind(this)\n};\n\nCallbackQueue.prototype = Object.create({\n\t/**\n\t * @param tstamp {int}\n\t */\n\t_runQueue: function() {\n\t\tif (this._running) throw new Error(\"wtf!!!\");\n\n\t\tthis._currQueue = this._nextQueue;\n\t\tthis._nextQueue = new PriorityQueue(this._currQueue.offset + this._currQueue.length);\n\n\t\tthis._runId = -1;\n\t\tthis._running = true;\n\n\t\tvar i, item;\n\t\tvar indexes = this._currQueue.indexes();\n\t\tvar items = this._currQueue._items;\n\t\tfor (i = 0; i < indexes.length; i++) {\n\t\t\titem = items[indexes[i]];\n\t\t\tif (item !== null) {\n\t\t\t\titem.apply(null, arguments);\n\t\t\t}\n\t\t}\n\n\t\t// var self = this;\n\t\t// this._currQueue.indexes().forEach(function(index) {\n\t\t// \tvar fn = self._currQueue._items[index];\n\t\t// \tif (fn !== null) {\n\t\t// \t\tfn.apply(null, arguments);\n\t\t// \t}\n\t\t// });\n\t\tthis._running = false;\n\t\tthis._currQueue = null;\n\n\t\tif (this._nextQueue.numItems > 0) {\n\t\t\tthis._runId = this._requestFn.call(null, this._runQueue);\n\t\t\t// this._runId = this._requestFn(this._runQueue);\n\t\t}\n\t},\n\n\t/**\n\t * @param fn {Function}\n\t * @param priority {int}\n\t * @return {int}\n\t */\n\trequest: function(fn, priority) {\n\t\t// if (!this._running && !this._pending) {\n\t\t// \tthis._pending = true;\n\t\t// \tconsole.warn(\"FrameQueue::request setImmediate: pending\");\n\t\t// \tsetImmediate(function() {\n\t\t// \t\tthis._pending = false;\n\t\t// \t\tif (this._nextQueue.numItems > 0) {\n\t\t// \t\t\tthis._runId = window.requestAnimationFrame(_runQueue);\n\t\t// \t\t\tconsole.warn(\"FrameQueue::request setImmediate: raf:%i for %i items\", this._runId, this._nextQueue.numItems);\n\t\t// \t\t} else {\n\t\t// \t\t\tconsole.warn(\"FrameQueue::request setImmediate: no items\");\n\t\t// \t\t}\n\t\t// \t});\n\t\t// }\n\t\tif (!this._running && this._runId === -1) {\n\t\t\tthis._runId = this._requestFn.call(null, this._runQueue);\n\t\t\t// this._runId = this._requestFn(this._runQueue);\n\t\t}\n\t\treturn this._nextQueue.enqueue(fn, priority);\n\t},\n\n\t/**\n\t * @param id {int}\n\t * @return {Function?}\n\t */\n\tcancel: function(id) {\n\t\tvar fn;\n\t\tif (this._running) {\n\t\t\tfn = this._currQueue.skip(id) || this._nextQueue.skip(id);\n\t\t} else {\n\t\t\tfn = this._nextQueue.skip(id);\n\t\t\tif ((this._runId !== -1) && (this._nextQueue.numItems === 0)) {\n\t\t\t\tthis._cancelFn.call(null, this._runId);\n\t\t\t\t// this._cancelFn(this._runId);\n\t\t\t\tthis._runId = -1;\n\t\t\t}\n\t\t}\n\t\treturn fn;\n\t},\n}, {\n\trunning: {\n\t\tget: function() {\n\t\t\treturn this._running;\n\t\t}\n\t}\n});\n\nmodule.exports = CallbackQueue;\n",
    "/* global Path2D */\n/**\n * @module app/view/component/progress/CanvasView\n */\n\n// /** @type {module:color} */\n// var Color = require(\"color\");\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/view/base/Interpolator} */\nconst Interpolator = require(\"app/view/base/Interpolator\");\n/** @type {module:utils/css/getBoxEdgeStyles} */\nconst getBoxEdgeStyles = require(\"utils/css/getBoxEdgeStyles\");\n\nvar MIN_CANVAS_RATIO = 1; // /Firefox/.test(window.navigator.userAgent)? 2 : 1;\n\n/**\n * @constructor\n * @type {module:app/view/component/progress/CanvasView}\n */\nvar CanvasView = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"canvasView\",\n\t/** @type {string} */\n\ttagName: \"canvas\",\n\t/** @type {string} */\n\tclassName: \"canvas-view\",\n\n\tproperties: {\n\t\tpaused: {\n\t\t\tget: function() {\n\t\t\t\treturn this._paused;\n\t\t\t},\n\t\t\tset: function(paused) {\n\t\t\t\tpaused = !!(paused);\n\t\t\t\tif (this._interpolator.paused !== paused) {\n\t\t\t\t\tthis._interpolator.paused = paused;\n\t\t\t\t\tif (!paused) {\n\t\t\t\t\t\tthis.requestRender();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcontext: {\n\t\t\tget: function() {\n\t\t\t\treturn this._ctx;\n\t\t\t}\n\t\t},\n\t\tinterpolator: {\n\t\t\tget: function() {\n\t\t\t\treturn this._interpolator;\n\t\t\t}\n\t\t},\n\t\tcanvasRatio: {\n\t\t\tget: function() {\n\t\t\t\treturn this._canvasRatio;\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tvalues: {\n\t\t\tvalue: 0\n\t\t},\n\t\tmaxValues: {\n\t\t\tvalue: 1\n\t\t},\n\t\tpaused: false,\n\t\tuseOpaque: false,\n\t},\n\n\t/* --------------------------- *\n\t * children/layout\n\t * --------------------------- */\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t// TODO: cleanup this options mess\n\t\toptions = _.defaults(options || {}, this.defaults);\n\t\toptions.values = _.defaults(options.values || {}, this.defaults.values);\n\t\toptions.maxValues = _.defaults(options.maxValues || {}, this.defaults.maxValues);\n\n\t\tthis._interpolator = new Interpolator(options.values, options.maxValues);\n\t\tthis._interpolator.paused = options.paused;\n\n\t\tthis._useOpaque = options.useOpaque;\n\t\tthis._options = _.pick(options, \"color\", \"backgroundColor\");\n\n\t\t// opaque background\n\t\t// --------------------------------\n\t\tvar ctxOpts = {};\n\t\t// if (this._useOpaque) {\n\t\t// \tthis._opaqueProp = Modernizr.prefixed(\"opaque\", this.el, false);\n\t\t// \tif (this._opaqueProp) {\n\t\t// \t\tthis.el[this._opaqueProp] = true;\n\t\t// \t} else {\n\t\t// \t\tctxOpts.alpha = true;\n\t\t// \t}\n\t\t// \tthis.el.classList.add(\"color-bg\");\n\t\t// }\n\n\t\t// canvas' context init\n\t\t// --------------------------------\n\t\tthis._ctx = this.el.getContext(\"2d\", ctxOpts);\n\n\t\t// adjust canvas size to pixel ratio\n\t\t// upscale the canvas if the two ratios don't match\n\t\t// --------------------------------\n\t\tvar ratio = MIN_CANVAS_RATIO;\n\t\tvar ctxRatio = this._ctx.webkitBackingStorePixelRatio || 1;\n\t\tif (window.devicePixelRatio !== ctxRatio) {\n\t\t\t// ratio = Math.max(window.devicePixelRatio / ctxRatio, MIN_CANVAS_RATIO);\n\t\t\tratio = window.devicePixelRatio / ctxRatio;\n\t\t\tratio = Math.max(ratio, MIN_CANVAS_RATIO);\n\t\t}\n\t\tthis._canvasRatio = ratio;\n\t\t// console.log(\"%s::init canvasRatio: %f\", this.cid, this._canvasRatio);\n\n\t\tthis.listenTo(this, \"view:attached\", function() {\n\t\t\t// this.invalidateSize();\n\t\t\t// this.renderNow();\n\t\t\tthis.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID).renderNow();\n\t\t});\n\t},\n\n\t// _computeCanvasRatio: function() {\n\t// \tvar ratio = MIN_CANVAS_RATIO;\n\t// \tvar ctxRatio = this._ctx.webkitBackingStorePixelRatio || 1;\n\t// \tif (window.devicePixelRatio !== ctxRatio) {\n\t// \t\t// ratio = Math.max(window.devicePixelRatio / ctxRatio, MIN_CANVAS_RATIO);\n\t// \t\tratio = window.devicePixelRatio / ctxRatio;\n\t// \t\tratio = Math.max(ratio, MIN_CANVAS_RATIO);\n\t// \t}\n\t// \tthis._canvasRatio = ratio;\n\t// },\n\n\t_updateCanvas: function() {\n\t\t// adjust canvas size to pixel ratio\n\t\t// upscale the canvas if the two ratios don't match\n\t\t// --------------------------------\n\n\t\tvar s = getComputedStyle(this.el);\n\n\t\t// this._canvasWidth = this.el.offsetWidth;\n\t\t// this._canvasHeight = this.el.offsetHeight;\n\t\tthis._canvasWidth = this.el.scrollWidth;\n\t\tthis._canvasHeight = this.el.scrollHeight;\n\n\t\tif (s.boxSizing === \"border-box\") {\n\t\t\tvar m = getBoxEdgeStyles(s);\n\t\t\tthis._canvasWidth -= m.paddingLeft + m.paddingRight + m.borderLeftWidth + m.borderRightWidth;\n\t\t\tthis._canvasHeight -= m.paddingTop + m.paddingBottom + m.borderTopWidth + m.borderBottomWidth;\n\t\t}\n\n\t\tthis._canvasWidth *= this._canvasRatio;\n\t\tthis._canvasHeight *= this._canvasRatio;\n\n\t\tthis.measureCanvas(this._canvasWidth, this._canvasHeight, s);\n\t\tthis.el.width = this._canvasWidth;\n\t\tthis.el.height = this._canvasHeight;\n\t\t// this.el.style.height = h + \"px\";\n\t\t// this.el.style.width = w + \"px\";\n\n\t\t// colors\n\t\t// --------------------------------\n\t\tthis._color = this._options.color ||\n\t\t\ts.color || Globals.DEFAULT_COLORS[\"color\"];\n\t\tthis._backgroundColor = this._options.backgroundColor ||\n\t\t\ts.backgroundColor || Globals.DEFAULT_COLORS[\"background-color\"];\n\n\t\t// mozOpaque\n\t\t// --------------------------------\n\t\tif (this._useOpaque && this._opaqueProp) {\n\t\t\t// this.el.style.backgroundColor = this._backgroundColor;\n\t\t\tthis.el[this._opaqueProp] = true;\n\t\t}\n\n\t\t// fontSize\n\t\t// --------------------------------\n\t\tthis._fontSize = parseFloat(s.fontSize) * this._canvasRatio;\n\t\tthis._fontFamily = s.fontFamily;\n\n\t\t// prepare canvas context\n\t\t// --------------------------------\n\t\tthis._ctx.restore();\n\n\t\tthis._ctx.font = [s.fontWeight, s.fontStyle, this._fontSize + \"px/1\", s.fontFamily].join(\" \");\n\t\tthis._ctx.textAlign = \"left\";\n\t\tthis._ctx.lineCap = \"butt\";\n\t\tthis._ctx.lineJoin = \"miter\";\n\t\tthis._ctx.strokeStyle = this._color;\n\t\tthis._ctx.fillStyle = this._color;\n\n\t\tthis.updateCanvas(this._ctx, s);\n\t\tthis._ctx.save();\n\n\t\t// console.group(this.cid+\"::_updateCanvas\");\n\t\t// console.log(\"ratio:    %f (min: %f, device: %f, context: %s)\", this._canvasRatio, MIN_CANVAS_RATIO, window.devicePixelRatio, this._ctx.webkitBackingStorePixelRatio || \"(webkit-only)\");\n\t\t// console.log(\"colors:   fg: %s bg: %s\", this._color, this._backgroundColor);\n\t\t// console.log(\"style:    %s, %s, padding: %s (%s)\", s.width, s.height, s.padding, s.boxSizing);\n\t\t// console.log(\"box:      %f x %f px\", m.width, m.height);\n\t\t// console.log(\"measured: %f x %f px\", w, h);\n\t\t// console.log(\"canvas:   %f x %f px\", this._canvasWidth, this._canvasHeight);\n\t\t// console.groupEnd();\n\t},\n\n\tmeasureCanvas: function(w, h, s) {\n\t\t/* abstract */\n\t},\n\n\tupdateCanvas: function(ctx, s) {\n\t\t/* abstract */\n\t},\n\n\t_getFontMetrics: function(str) {\n\t\tvar key, idx, mObj, mIdx = str.length;\n\t\tfor (key in Globals.FONT_METRICS) {\n\t\t\tidx = str.indexOf(key);\n\t\t\tif (idx !== -1 && idx < mIdx) {\n\t\t\t\tmIdx = idx;\n\t\t\t\tmObj = Globals.FONT_METRICS[key];\n\t\t\t}\n\t\t}\n\t\treturn mObj || {\n\t\t\t\"unitsPerEm\": 1024,\n\t\t\t\"ascent\": 939,\n\t\t\t\"descent\": -256\n\t\t};\n\t},\n\n\t_clearCanvas: function() {\n\t\tif (arguments.length == 4) {\n\t\t\tthis._clearCanvasRect.apply(this, arguments);\n\t\t} else {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tthis._clearCanvasRect(0, 0, this.el.width, this.el.height);\n\t\t\tthis._ctx.restore();\n\t\t}\n\t},\n\n\t_clearCanvasRect: function(x, y, w, h) {\n\t\tthis._ctx.clearRect(x, y, w, h);\n\t\tif (this._useOpaque) {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.fillStyle = this._backgroundColor;\n\t\t\tthis._ctx.fillRect(x, y, w, h);\n\t\t\tthis._ctx.restore();\n\t\t}\n\t},\n\n\t_setStyle: function(s) {\n\t\tCanvasView.setStyle(this._ctx, s);\n\t},\n\n\t/* --------------------------- *\n\t * render\n\t * --------------------------- */\n\n\t/** @override */\n\trender: function() {\n\t\tif (this.attached) {\n\t\t\treturn this.renderNow();\n\t\t}\n\t\treturn this;\n\t},\n\n\t/** @override */\n\trenderFrame: function(tstamp, flags) {\n\t\tif (!this.attached) {\n\t\t\treturn flags;\n\t\t}\n\t\tif (flags & View.SIZE_INVALID) {\n\t\t\tthis._updateCanvas();\n\t\t}\n\t\tif (this._interpolator.valuesChanged) {\n\t\t\tflags |= View.LAYOUT_INVALID;\n\t\t\tthis._interpolator.interpolate(tstamp);\n\t\t}\n\t\tif (flags & (View.LAYOUT_INVALID | View.SIZE_INVALID)) {\n\t\t\tthis.redraw(this._ctx, this._interpolator, flags);\n\t\t\tif (this._interpolator.valuesChanged) {\n\t\t\t\tthis.requestRender();\n\t\t\t}\n\t\t}\n\t},\n\n\t// setEnabled: function(enabled) {\n\t// \tView.prototype.setEnabled.apply(this, arguments);\n\t// \tif (this.attached) {\n\t// \t\tconsole.info(\"[%s] %s::setEnabled\", this.parentView.cid, this.cid, this.enabled);\n\t// \t\t// if (this._enabled && this._interpolator.valuesChanged) {\n\t// \t\t// this.requestRender();\n\t// \t\t// this.requestRender(CanvasView.LAYOUT_INVALID);\n\t// \t\t// }\n\t// \t}\n\t// },\n\n\t/* --------------------------- *\n\t/* public\n\t/* --------------------------- */\n\n\tgetTargetValue: function(key) {\n\t\treturn this._interpolator.getTargetValue(key);\n\t},\n\n\tgetRenderedValue: function(key) {\n\t\treturn this._interpolator.getRenderedValue(key);\n\t},\n\n\tvalueTo: function(key, value, duration) {\n\t\tthis._interpolator.valueTo(key, value, duration);\n\t\tthis.requestRender(View.MODEL_INVALID | View.LAYOUT_INVALID);\n\t},\n\n\t// updateValue: function(key) {\n\t// \treturn this._interpolator.updateValue(key || this.defaultKey);\n\t// },\n\n\t/* --------------------------- *\n\t/* redraw\n\t/* --------------------------- */\n\n\tredraw: function(ctx, interp, flags) {},\n\n}, {\n\tsetStyle: function(ctx, s) {\n\t\tif (typeof s != \"object\") return;\n\t\tfor (var p in s) {\n\t\t\tswitch (typeof ctx[p]) {\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif (Array.isArray(s[p])) ctx[p].apply(ctx, s[p]);\n\t\t\t\t\telse ctx[p].call(ctx, s[p]);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tctx[p] = s[p];\n\t\t\t}\n\t\t}\n\t}\n});\n\nif (DEBUG) {\n\tCanvasView.prototype._logFlags = \"\";\n}\n\nmodule.exports = CanvasView;\n",
    "/**\n * @module app/view/base/Interpolator\n */\n\n/** @type {module:utils/ease/fn/linear} */\nconst linear = require(\"utils/ease/fn/linear\");\n\n/**\n * @constructor\n * @type {module:app/view/base/Interpolator}\n */\nvar Interpolator = function(values, maxValues, easeValues) {\n\tthis._tstamp = 0;\n\n\t// gets thrown away by first interpolate() but avoid null access errors\n\tthis._renderableKeys = [];\n\tthis._renderedKeys = [];\n\n\tthis._paused = false;\n\tthis._pausedChanging = false;\n\t//this._pausedKeys = [];\n\n\tthis._maxValues = _.isObject(maxValues) ? _.extend({}, maxValues) : {};\n\tthis._easeFn = _.isObject(easeValues) ? _.extend({}, easeValues) : {};\n\tthis._valueData = {};\n\n\t// var key, val, maxVal, easeFn;\n\tfor (var key in values) {\n\t\t_.isNumber(this._maxValues[key]) || (this._maxValues[key] = null);\n\t\t_.isFunction(this._easeFn[key]) || (this._easeFn[key] = linear);\n\n\t\t// create value object and store it\n\t\tthis._valueData[key] = this._initValue(values[key], 0, this._maxValues[key]);\n\n\t\t// add to next render list\n\t\tthis._renderableKeys.push(key);\n\t}\n};\n\nInterpolator.prototype = Object.create({\n\n\t/* --------------------------- *\n\t/* public interface\n\t/* --------------------------- */\n\n\tisAtTarget: function(key) {\n\t\treturn this._renderableKeys.indexOf(key) === -1;\n\t},\n\n\tgetCurrentValue: function(key) {\n\t\treturn this._valueData[key]._renderedValue || this._valueData[key]._value;\n\t},\n\n\tgetTargetValue: function(key) {\n\t\treturn this._valueData[key]._value;\n\t},\n\n\tgetStartValue: function(key) {\n\t\treturn this._valueData[key]._startValue;\n\t},\n\n\tgetRenderedValue: function(key) {\n\t\treturn this._valueData[key]._renderedValue;\n\t},\n\n\tgetOption: function(key, opt) {\n\t\tif (opt === \"max\") return this._maxValues[key];\n\t\tif (opt === \"ease\") return this._easeFn[key];\n\t},\n\n\tvalueTo: function(key, value, duration, ease) {\n\t\tvar changed, dataObj = this._valueData[key];\n\t\tif (_.isFunction(ease)) {\n\t\t\tthis._easeFn[key] = ease;\n\t\t}\n\t\t// console.log(\"%s::valueTo [%s]\", \"[interpolator]\", key, value);\n\t\tif (Array.isArray(dataObj)) {\n\t\t\tchanged = value.reduce(function(prevChanged, itemValue, i) {\n\t\t\t\tif (dataObj[i]) {\n\t\t\t\t\tdataObj[i] = this._initNumber(itemValue, duration, this._maxValues[key]);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn this._setValue(dataObj[i], itemValue, duration) || prevChanged;\n\t\t\t}.bind(this), changed);\n\t\t} else {\n\t\t\tchanged = this._setValue(dataObj, value, duration);\n\t\t}\n\t\tif (changed) {\n\t\t\tthis._renderableKeys.indexOf(key) !== -1 || this._renderableKeys.push(key);\n\t\t}\n\t\treturn this;\n\t},\n\n\tupdateValue: function(key) {\n\t\t// Call _interpolateKey only if needed. _interpolateKey() returns false\n\t\t// once interpolation is done, in which case remove key from _renderableKeys.\n\t\tvar kIndex = this._renderableKeys.indexOf(key);\n\t\tif (kIndex !== -1 && !this._interpolateKey(key)) {\n\t\t\tthis._renderableKeys.splice(kIndex, 1);\n\t\t}\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t/* private: valueData\n\t/* --------------------------- */\n\n\t_initValue: function(value, duration, maxVal) {\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(function(val) {\n\t\t\t\treturn this._initNumber(val, duration, maxVal);\n\t\t\t}, this);\n\t\t}\n\t\treturn this._initNumber(value, duration, maxVal);\n\t},\n\n\t_initNumber: function(value, duration, maxVal) {\n\t\tvar o = {};\n\t\to._value = value;\n\t\to._startValue = value;\n\t\to._valueDelta = 0;\n\n\t\to._duration = duration || 0;\n\t\to._startTime = NaN;\n\t\to._elapsedTime = NaN;\n\n\t\to._lastRenderedValue = null;\n\t\to._renderedValue = o._startValue;\n\n\t\to._maxVal = maxVal;\n\t\t// if (maxVal !== void 0) o._maxVal = maxVal;\n\t\t// o._maxVal = this._maxValues[key];\n\t\t// o._maxVal = this._maxVal;// FIXME\n\t\treturn o;\n\t},\n\n\t_setValue: function(o, value, duration) {\n\t\tif (o._value !== value) {\n\t\t\to._startValue = o._value;\n\t\t\to._valueDelta = value - o._value;\n\t\t\to._value = value;\n\n\t\t\to._duration = duration || 0;\n\t\t\to._startTime = NaN;\n\t\t\to._elapsedTime = NaN;\n\n\t\t\t// o._lastRenderedValue = o._renderedValue;\n\t\t\t// o._renderedValue = o._startValue;\n\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\t/* --------------------------- *\n\t/* private: interpolate\n\t/* --------------------------- */\n\n\t_tstamp: 0,\n\n\t/** @override */\n\tinterpolate: function(tstamp) {\n\t\tthis._tstamp = tstamp;\n\n\t\tif (this.valuesChanged) {\n\t\t\tif (this._pausedChanging) {\n\t\t\t\tthis._renderableKeys.forEach(function(key) {\n\t\t\t\t\tvar o = this._valueData[key];\n\t\t\t\t\tif (!isNaN(o._elapsedTime)) {\n\t\t\t\t\t\to._startTime = tstamp - o._elapsedTime;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\tthis._pausedChanging = false;\n\t\t\t}\n\t\t\tvar changedKeys = this._renderableKeys;\n\t\t\tthis._renderableKeys = changedKeys.filter(function(key) {\n\t\t\t\treturn this._interpolateValue(tstamp, this._valueData[key], this._easeFn[key]);\n\t\t\t}, this);\n\t\t\tthis._renderedKeys = changedKeys;\n\t\t}\n\t\treturn this;\n\t},\n\n\t_interpolateKey: function(key) {\n\t\treturn this._interpolateValue(this._tstamp, this._valueData[key], this._easeFn[key]);\n\t},\n\n\t_interpolateValue: function(tstamp, o, fn) {\n\t\tif (Array.isArray(o)) {\n\t\t\treturn o.reduce(function(changed, item, index, arr) {\n\t\t\t\treturn this._interpolateNumber(tstamp, item, fn) || changed;\n\t\t\t}.bind(this), false);\n\t\t}\n\t\treturn this._interpolateNumber(tstamp, o, fn);\n\t},\n\n\t_interpolateNumber: function(tstamp, o, fn) {\n\t\tif (isNaN(o._startTime)) {\n\t\t\to._startTime = tstamp;\n\t\t}\n\t\to._lastRenderedValue = o._renderedValue;\n\n\t\tvar elapsed = Math.max(0, tstamp - o._startTime);\n\t\tif (elapsed < o._duration) {\n\t\t\tif (o._maxVal && o._valueDelta < 0) {\n\t\t\t\t// upper-bound values\n\t\t\t\to._renderedValue = fn(elapsed, o._startValue,\n\t\t\t\t\to._valueDelta + o._maxVal, o._duration) - o._maxVal;\n\t\t\t} else {\n\t\t\t\t// unbound values\n\t\t\t\to._renderedValue = fn(elapsed, o._startValue,\n\t\t\t\t\to._valueDelta, o._duration);\n\t\t\t}\n\t\t\to._elapsedTime = elapsed;\n\t\t\treturn true;\n\t\t}\n\t\to._renderedValue = o._value;\n\t\to._elapsedTime = NaN;\n\t\to._startTime = NaN;\n\t\treturn false;\n\t},\n}, {\n\t/**\n\t * @type {boolean}\n\t */\n\tpaused: {\n\t\tget: function() {\n\t\t\treturn this._paused;\n\t\t},\n\t\tset: function(value) {\n\t\t\tvalue = !!(value); // Convert to boolean\n\t\t\tif (this._paused !== value) {\n\t\t\t\tthis._paused = value;\n\t\t\t\tthis._pausedChanging = true;\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * @type {boolean} Has any value been changed by valueTo() since last interpolate()\n\t */\n\tvaluesChanged: {\n\t\tget: function() {\n\t\t\treturn !this._paused && this._renderableKeys.length > 0;\n\t\t}\n\t},\n\t/**\n\t * @type {array} Keys that are not yet at target value\n\t */\n\trenderableKeys: {\n\t\tget: function() {\n\t\t\treturn this._renderableKeys;\n\t\t}\n\t},\n\t/**\n\t * @type {array} Keys that have been rendered in the last interpolate()\n\t */\n\trenderedKeys: {\n\t\tget: function() {\n\t\t\treturn this._renderedKeys;\n\t\t}\n\t},\n\t/**\n\t * @type {array} All keys\n\t */\n\tkeys: {\n\t\tget: function() {\n\t\t\treturn Object.keys(this._valueData);\n\t\t}\n\t},\n});\n\nmodule.exports = Interpolator;\n",
    "/** @type {module:utils/prefixedEvent} */\nconst prefixedEvent = require(\"utils/prefixedEvent\");\n\nvar eventMap = {\n\t\"transitionend\": prefixedEvent(\"transitionend\"),\n\t\"fullscreenchange\": prefixedEvent(\"fullscreenchange\", document),\n\t\"fullscreenerror\": prefixedEvent(\"fullscreenerror\", document),\n\t\"visibilitychange\": prefixedEvent(\"visibilitychange\", document, \"hidden\")\n};\n\nvar eventNum = 0;\nfor (var eventName in eventMap) {\n\tif (eventName === eventMap[eventName]) {\n\t\tdelete eventMap[eventName];\n\t} else {\n\t\tObject.defineProperty(eventMap, eventName, {\n\t\t\tvalue: eventMap[eventName],\n\t\t\tenumerable: true\n\t\t});\n\t\tObject.defineProperty(eventMap, eventNum, {\n\t\t\tvalue: eventName,\n\t\t\tenumerable: false\n\t\t});\n\t\teventNum++;\n\t}\n}\nObject.defineProperty(eventMap, \"length\", {\n\tvalue: eventNum\n});\n\nif (DEBUG) {\n\tconsole.log(\"prefixes enabled for %i events\", eventMap.length, Object.keys(eventMap));\n}\n\nmodule.exports = eventMap;\n\n// module.exports = eventNum > 0? eventMap : null;\n",
    "/**\n * @module app/view/base/TouchManager\n */\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:hammerjs} */\nconst Hammer = require(\"hammerjs\");\n// /** @type {module:hammerjs.Tap} */\n// const Tap = Hammer.Tap;\n/** @type {module:utils/touch/SmoothPanRecognizer} */\nconst Pan = require(\"utils/touch/SmoothPanRecognizer\");\n/** @type {module:hammerjs.Pan} */\n// const Pan = Hammer.Pan;\n\n/* -------------------------------\n/* Static private\n/* ------------------------------- */\n\n/**\n * @param el HTMLElement\n * @return {Hammer.Manager}\n */\nfunction createInstance(el) {\n\tlet manager = new Hammer.Manager(el);\n\t// manager.set({ domevents: true });\n\n\t// let tap = new Hammer.Tap({\n\t// \tthreshold: Globals.PAN_THRESHOLD - 1\n\t// });\n\t// manager.add(tap);\n\tlet hpan = new Pan({\n\t\tevent: \"hpan\",\n\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t\tthreshold: Globals.PAN_THRESHOLD,\n\t\t// touchAction: \"pan-y\",\n\t});\n\tmanager.add(hpan);\n\n\t// let vpan = new Pan({\n\t// \tevent: \"vpan\",\n\t// \tdirection: Hammer.DIRECTION_VERTICAL,\n\t// \t// threshold: Globals.PAN_THRESHOLD,\n\t// \t// touchAction: \"pan-x\",\n\t// });\n\t// manager.add(vpan);\n\t// vpan.requireFailure(hpan);\n\n\treturn manager;\n}\n\n/* -------------------------------\n * hammerjs fixup handlers\n * ------------------------------- */\n\n/* eslint-disable no-unused-vars */\nconst PANEND_THRES_MS = 300; // millisecs\nconst PANEND_THRES_PX = 25; // pixels\nconst UP_EVENT = window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\";\n\nlet touchHandlers = {};\nlet captureHandlers = {};\nlet bubblingHandlers = {};\n\n/*https://gist.githubusercontent.com/jtangelder/361052976f044200ea17/raw/f54c2cef78d59da3f38286fad683471e1c976072/PreventGhostClick.js*/\nvar lastTimeStamp = NaN;\nvar panSessionOpened = false;\n\nlet saveTimeStamp = function(hev) {\n\tpanSessionOpened = !hev.isFinal;\n\tif (hev.isFinal) {\n\t\tlastTimeStamp = hev.srcEvent.timeStamp;\n\t}\n\tif (DEBUG) {\n\t\tlogPanEvent(hev);\n\t}\n};\n\n// let preventSrcEvent = function(hev) {\n// \t//console.log(hev.type, \"preventDefault\");\n// \thev.srcEvent.preventDefault();\n// };\n\n// let preventWhilePanning = function(domev) {\n// \tpanSessionOpened && domev.preventDefault();\n// };\n\n// let preventWhileNotPanning = function(domev) {\n// \t!panSessionOpened && domev.preventDefault();\n// };\n\nlet stopEventAfterPan = function(domev) {\n\tif ((domev.timeStamp - lastTimeStamp) < PANEND_THRES_MS) {\n\t\t// domev.defaultPrevented ||\n\t\tdomev.preventDefault();\n\t\tdomev.stopPropagation();\n\t}\n\tif (DEBUG) {\n\t\tlogEvent(domev, (domev.timeStamp - lastTimeStamp).toFixed(3));\n\t}\n\tlastTimeStamp = NaN;\n};\n\ntouchHandlers[\"hpanstart hpanend hpancancel\"] = saveTimeStamp;\n// touchHandlers[\"vpanstart vpanend vpancancel\"] = saveTimeStamp;\n// touchHandlers[\"hpanmove hpanend hpancancel\"] = preventSrcEvent;\n// touchHandlers[\"vpanmove vpanend vpancancel\"] = preventSrcEvent;\n\ncaptureHandlers[\"click\"] = stopEventAfterPan;\n// bubblingHandlers[\"click\"] = stopEventAfterPan;\n\n// touchHandlers[[\n// \t\"vpanstart\", \"vpanend\", \"vpancancel\", \"vpanmove\",\n// \t\"hpanstart\", \"hpanend\", \"hpancancel\", \"hpanmove\"\n// ].join(\" \")] = logHammerEvent;\n\n/* -------------------------------\n/* DOM event handlers\n/* ------------------------------- */\n\n\n// captureHandlers[UP_EVENT] = preventWhilePanning;\n// captureHandlers[\"touchmove\"] = captureHandlers[\"mousemove\"] = logDOMEvent;\n\nif (DEBUG) {\n\tvar logPanEvent = function(hev) {\n\t\tlogEvent(hev.srcEvent, `[${hev.type}]`);\n\t};\n\tvar logEvent = function(domev, msg) {\n\t\tlet msgs = [];\n\t\tif (domev.defaultPrevented)\n\t\t\tmsgs.push(\"prevented\");\n\t\tif (msg)\n\t\t\tmsgs.push(msg);\n\t\tmsgs.push(`${panSessionOpened ? \"panning\" : \"pan ended\"} ${(domev.timeStamp - lastTimeStamp).toFixed(3)}`);\n\t\tconsole.log(\"TouchManager %s [%s]\",\n\t\t\tdomev.timeStamp.toFixed(3),\n\t\t\tdomev.type,\n\t\t\tmsgs.join(\", \")\n\t\t);\n\t};\n}\n\n/* eslint-enable no-unsused-vars */\n\n// -------------------------------\n//\n// -------------------------------\n\nfunction addHandlers() {\n\tlet eventName;\n\tconst el = instance.element;\n\tfor (eventName in touchHandlers)\n\t\tif (touchHandlers.hasOwnProperty(eventName))\n\t\t\tinstance.on(eventName, touchHandlers[eventName]);\n\tfor (eventName in captureHandlers)\n\t\tif (captureHandlers.hasOwnProperty(eventName))\n\t\t\tel.addEventListener(eventName, captureHandlers[eventName], true);\n\tfor (eventName in bubblingHandlers)\n\t\tif (bubblingHandlers.hasOwnProperty(eventName))\n\t\t\tel.addEventListener(eventName, bubblingHandlers[eventName], false);\n\t// document.addEventListener(\"touchmove\", preventWhileNotPanning, false);\n}\n\nfunction removeHandlers() {\n\tlet eventName;\n\tconst el = instance.element;\n\tfor (eventName in captureHandlers)\n\t\tif (captureHandlers.hasOwnProperty(eventName))\n\t\t\tel.removeEventListener(eventName, captureHandlers[eventName], true);\n\tfor (eventName in bubblingHandlers)\n\t\tif (captureHandlers.hasOwnProperty(eventName))\n\t\t\tel.removeEventListener(eventName, bubblingHandlers[eventName], true);\n\t// document.removeEventListener(\"touchmove\", preventWhileNotPanning, false);\n}\n\n/** @type {Hammer.Manager} */\nlet instance = null;\n\n/* -------------------------------\n/* Static public\n/* ------------------------------- */\n\nlet TouchManager = {\n\tinit: function(target) {\n\t\tif (instance === null) {\n\t\t\tinstance = createInstance(target);\n\t\t\taddHandlers();\n\t\t} else if (instance.element !== target) {\n\t\t\tconsole.warn(\"TouchManager already initialized with another element\");\n\t\t}\n\t\treturn instance;\n\t},\n\n\tdestroy: function() {\n\t\tif (instance !== null) {\n\t\t\tremoveHandlers();\n\t\t\tinstance.destroy();\n\t\t\tinstance = null;\n\t\t} else {\n\t\t\tconsole.warn(\"no instance to destroy\");\n\t\t}\n\t},\n\n\tgetInstance: function() {\n\t\tif (instance === null) {\n\t\t\tconsole.error(\"TouchManager has not been initialized\");\n\t\t}\n\t\treturn instance;\n\t}\n};\n\nmodule.exports = TouchManager;\n\n/*\n// alt syntax\nfunction createInstance(el) {\n\treturn new Hammer(el, {\n\t\trecognizers: [\n\t\t\t[Tap],\n\t\t\t[Pan, {\n\t\t\t\tevent: 'hpan',\n\t\t\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t\t\t\tthreshold: Globals.THRESHOLD\n\t\t\t}],\n\t\t\t[Pan, {\n\t\t\t\tevent: 'vpan',\n\t\t\t\tdirection: Hammer.DIRECTION_VERTICAL,\n\t\t\t\tthreshold: Globals.THRESHOLD\n\t\t\t}, ['hpan']]\n\t\t]\n\t});\n}\n*/\n",
    "/* global HTMLElement, MutationObserver */\n/**\n * @module app/view/base/View\n */\n\n// /** @type {module:setimmediate} */\n// require(\"setimmediate\");\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n/* -------------------------------\n/* MutationObserver\n/* ------------------------------- */\n\nvar _cidSeed = 1;\nvar _viewsByCid = {};\n\nfunction addChildViews(el) {\n\tvar view, els = el.querySelectorAll(\"*[data-cid]\");\n\tfor (var i = 0, ii = els.length; i < ii; i++) {\n\t\tview = View.findByElement(els.item(i));\n\t\tif (view) {\n\t\t\tif (!view.attached) {\n\t\t\t\t// console.log(\"View::[attached (parent)] %s\", view.cid);\n\t\t\t\tview._elementAttached();\n\t\t\t\t// } else {\n\t\t\t\t// \tconsole.warn(\"View::[attached (parent)] %s (ignored)\", view.cid);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction removeChildViews(el) {\n\tvar view, els = el.querySelectorAll(\"*[data-cid]\");\n\tfor (var i = 0, ii = els.length; i < ii; i++) {\n\t\tview = View.findByElement(els.item(i));\n\t\tif (view) {\n\t\t\tif (view.attached) {\n\t\t\t\tconsole.log(\"View::[detached (parent)] %s\", view.cid);\n\t\t\t\tview._elementDetached();\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"View::[detached (parent)] %s (ignored)\", view.cid);\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar observer = new MutationObserver(function(mm) {\n\t// console.log(\"View::mutations %s\", JSON.stringify(mm, null, \" \"));\n\tvar i, ii, m;\n\tvar j, jj, e;\n\tvar view;\n\tfor (i = 0, ii = mm.length; i < ii; i++) {\n\t\tm = mm[i];\n\t\tif (m.type == \"childList\") {\n\t\t\tfor (j = 0, jj = m.addedNodes.length; j < jj; j++) {\n\t\t\t\te = m.addedNodes.item(j);\n\t\t\t\tview = View.findByElement(e);\n\t\t\t\tif (view) {\n\t\t\t\t\tif (!view.attached) {\n\t\t\t\t\t\t// console.log(\"View::[attached (childList)] %s\", view.cid);\n\t\t\t\t\t\tview._elementAttached();\n\t\t\t\t\t\t// } else {\n\t\t\t\t\t\t// \tconsole.warn(\"View::[attached (childList)] %s (ignored)\", view.cid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof HTMLElement) addChildViews(e);\n\t\t\t}\n\t\t\tfor (j = 0, jj = m.removedNodes.length; j < jj; j++) {\n\t\t\t\te = m.removedNodes.item(j);\n\t\t\t\t// console.log(\"View::[detached (childList)] %s\", e.cid);\n\t\t\t\tview = View.findByElement(e);\n\t\t\t\tif (view) {\n\t\t\t\t\tif (view.attached) {\n\t\t\t\t\t\tconsole.log(\"View::[detached (childList)] %s\", view.cid, view.attached);\n\t\t\t\t\t\tview._elementDetached();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"View::[detached (childList)] %s (ignored)\", view.cid, view.attached);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof HTMLElement) removeChildViews(e);\n\t\t\t}\n\t\t} else if (m.type == \"attributes\") {\n\t\t\tview = View.findByElement(m.target);\n\t\t\tif (view) {\n\t\t\t\tif (!view.attached) {\n\t\t\t\t\t// console.log(\"View::[attached (attribute)] %s\", view.cid);\n\t\t\t\t\tview._elementAttached();\n\t\t\t\t\t// } else {\n\t\t\t\t\t// \tconsole.warn(\"View::[attached (attribute)] %s (ignored)\", view.cid);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// else {\n\t\t\t// \tconsole.warn(\"View::[attributes] target has no cid (%s='%s')\", m.attributeName, m.target.getAttribute(m.attributeName), m);\n\t\t\t// }\n\t\t}\n\t}\n});\n\nobserver.observe(document.body, {\n\tattributes: true,\n\tchildList: true,\n\tsubtree: true,\n\tattributeFilter: [\"data-cid\"]\n});\n\n/* -------------------------------\n/* static private\n/* ------------------------------- */\n\nvar _now = window.performance ?\n\twindow.performance.now.bind(window.performance) :\n\tDate.now.bind(Date);\n// var _now = window.performance?\n// \tfunction() { return window.performance.now(); }:\n// \tfunction() { return Date.now(); };\n\n// /** @type {module:app/view/base/renderQueue} */\n// var renderQueue = require(\"app/view/base/renderQueue\");\n//\n/** @type {module:app/view/base/CallbackQueue} */\nvar renderQueue = (function(CallbackQueue) {\n\treturn new CallbackQueue(\n\t\tfunction(callback) {\n\t\t\treturn window.requestAnimationFrame(callback);\n\t\t},\n\t\tfunction(id) {\n\t\t\treturn window.cancelAnimationFrame(id);\n\t\t}\n\t);\n})(require(\"app/view/base/CallbackQueue\"));\n\n/** @type {module:app/view/base/CallbackQueue} */\nvar modelQueue = (function(CallbackQueue) {\n\treturn new CallbackQueue(\n\t\tfunction(callback) {\n\t\t\treturn window.setImmediate(function() {\n\t\t\t\tcallback.call(null, _now());\n\t\t\t});\n\t\t},\n\t\tfunction(id) {\n\t\t\treturn window.clearImmediate(id);\n\t\t}\n\t);\n})(require(\"app/view/base/CallbackQueue\"));\n\n/** @type {module:app/view/base/PrefixedEvents} */\nconst PrefixedEvents = require(\"app/view/base/PrefixedEvents\");\n\nvar applyEventPrefixes = function(events) {\n\tvar selector, unprefixed;\n\tfor (selector in events) {\n\t\tunprefixed = selector.match(/^\\w+/i)[0];\n\t\tif (PrefixedEvents.hasOwnProperty(unprefixed)) {\n\t\t\tevents[selector.replace(unprefixed, PrefixedEvents[unprefixed])] = events[selector];\n\t\t\t// console.log(\"applyEventPrefixes\", unprefixed, prefixedEvents[unprefixed]);\n\t\t\tdelete events[selector];\n\t\t}\n\t}\n\treturn events;\n};\n\nvar getViewDepth = function(view) {\n\tif (!view) {\n\t\treturn null;\n\t}\n\tif (!view.attached) {\n\t\treturn NaN;\n\t}\n\tif (view.parentView === null) {\n\t\treturn 0;\n\t}\n\treturn view.parentView.viewDepth + 1;\n};\n\nfunction logAttachInfo(view, name, level) {\n\tif ([\"log\", \"info\", \"warn\", \"error\"].indexOf(level) != -1) {\n\t\tlevel = \"log\";\n\t}\n\tconsole[level].call(console, \"%s::%s [parent:%s %s %s depth:%s]\", view.cid, name, view.parentView && view.parentView.cid, view.attached ? \"attached\" : \"detached\", view._viewPhase, view.viewDepth);\n}\n\n/* -------------------------------\n/* static public\n/* ------------------------------- */\n\n\nvar View = {\n\n\t/** @const */\n\tNONE_INVALID: 0,\n\t/** @const */\n\tALL_INVALID: ~0 >>> 1,\n\n\t/** @const */\n\tCHILDREN_INVALID: 1,\n\t/** @const */\n\tMODEL_INVALID: 2,\n\t/** @const */\n\tSTYLES_INVALID: 4,\n\t/** @const */\n\tSIZE_INVALID: 8,\n\t/** @const */\n\tLAYOUT_INVALID: 16,\n\n\t/** @const */\n\tCLICK_EVENT: \"click\", //window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\",\n\n\t/** @type {module:app/view/base/ViewError} */\n\tViewError: require(\"app/view/base/ViewError\"),\n\n\t/** @type {module:utils/prefixedProperty} */\n\tprefixedProperty: require(\"utils/prefixedProperty\"),\n\n\t/** @type {module:utils/prefixedStyleName} */\n\tprefixedStyleName: require(\"utils/prefixedStyleName\"),\n\n\t/** @type {module:utils/prefixedEvent} */\n\tprefixedEvent: require(\"utils/prefixedEvent\"),\n\n\t/** @type {module:app/view/promise/whenViewIsAttached} */\n\twhenViewIsAttached: require(\"app/view/promise/whenViewIsAttached\"),\n\n\t/** @type {module:app/view/promise/whenViewIsRendered} */\n\twhenViewIsRendered: require(\"app/view/promise/whenViewIsRendered\"),\n\n\t/**\n\t/* @param el {HTMLElement}\n\t/* @return {module:app/view/base/View}\n\t/*/\n\tfindByElement: function(el) {\n\t\tif (_viewsByCid[el.cid]) {\n\t\t\treturn _viewsByCid[el.cid];\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t/* @param el {HTMLElement}\n\t/* @return {module:app/view/base/View}\n\t/*/\n\tfindByDescendant: function(el) {\n\t\tdo {\n\t\t\tif (_viewsByCid[el.cid]) {\n\t\t\t\treturn _viewsByCid[el.cid];\n\t\t\t}\n\t\t} while ((el = el.parentElement || el.parentNode));\n\t\treturn null;\n\t},\n\n\t/** @override */\n\textend: function(proto, obj) {\n\t\tif (PrefixedEvents.length && proto.events) {\n\t\t\tif (_.isFunction(proto.events)) {\n\t\t\t\tproto.events = _.wrap(proto.events, function(fn) {\n\t\t\t\t\treturn applyEventPrefixes(fn.apply(this));\n\t\t\t\t});\n\t\t\t} else\n\t\t\tif (_.isObject(proto.events)) {\n\t\t\t\tproto.events = applyEventPrefixes(proto.events);\n\t\t\t}\n\t\t}\n\t\tif (proto.properties && this.prototype.properties) {\n\t\t\t_.defaults(proto.properties, this.prototype.properties);\n\t\t}\n\t\treturn Backbone.View.extend.apply(this, arguments);\n\t},\n\n\t_flagsToStrings: [\"-\"],\n\n\tflagsToString: function(flags) {\n\t\tvar s = View._flagsToStrings[flags | 0];\n\t\tif (!s) {\n\t\t\ts = [];\n\t\t\tif (flags & View.CHILDREN_INVALID) s.push(\"children\");\n\t\t\tif (flags & View.MODEL_INVALID) s.push(\"model\");\n\t\t\tif (flags & View.STYLES_INVALID) s.push(\"styles\");\n\t\t\tif (flags & View.SIZE_INVALID) s.push(\"size\");\n\t\t\tif (flags & View.LAYOUT_INVALID) s.push(\"layout\");\n\t\t\tView._flagsToStrings[flags] = s = s.join(\" \");\n\t\t}\n\t\treturn s;\n\t\t// return (flags | 0).toString(2);\n\t},\n};\n\nObject.defineProperty(View, \"instances\", {\n\tvalue: _viewsByCid,\n\tenumerable: true\n});\n\n/* -------------------------------\n/* prototype\n/* ------------------------------- */\n\n// module.exports = Backbone.View.extend({\nvar ViewProto = {\n\n\t/** @type {string} */\n\tcidPrefix: \"view\",\n\t/** @type {Boolean} */\n\t_attached: false,\n\t/** @type {HTMLElement|null} */\n\t_parentView: null,\n\t/** @type {int|null} */\n\t_viewDepth: null,\n\t/** @type {string} initializing > initialized > disposing > disposed */\n\t_viewPhase: \"initializing\",\n\t/** @type {int} */\n\t_renderQueueId: -1,\n\t/** @type {int} */\n\t_renderFlags: 0,\n\t/** @type {Boolean} */\n\t_enabled: null,\n\n\t/** @type {object} */\n\tproperties: {\n\t\tcid: {\n\t\t\tget: function() {\n\t\t\t\treturn this._cid || (this._cid = this.cidPrefix + _cidSeed++);\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\t// ignored\n\t\t\t}\n\t\t},\n\t\tattached: {\n\t\t\tget: function() {\n\t\t\t\treturn this._attached;\n\t\t\t}\n\t\t},\n\t\tparentView: {\n\t\t\tget: function() {\n\t\t\t\treturn this._parentView;\n\t\t\t}\n\t\t},\n\t\tviewDepth: {\n\t\t\tget: function() {\n\t\t\t\treturn this._getViewDepth();\n\t\t\t}\n\t\t},\n\t\tinvalidated: {\n\t\t\tget: function() {\n\t\t\t\treturn this._renderQueueId !== -1;\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tget: function() {\n\t\t\t\treturn this._enabled;\n\t\t\t},\n\t\t\tset: function(enabled) {\n\t\t\t\tthis.setEnabled(enabled);\n\t\t\t}\n\t\t},\n\t\trenderFlags: {\n\t\t\tget: function() {\n\t\t\t\treturn this._renderFlags;\n\t\t\t}\n\t\t}\n\t},\n\n\t$: Backbone.$,\n\n\t/**\n\t * @constructor\n\t * @type {module:app/view/base/View}\n\t */\n\tconstructor: function(options) {\n\t\tthis.transform = {};\n\t\tthis.childViews = {};\n\t\tthis._applyRender = this._applyRender.bind(this);\n\n\t\tif (this.properties) {\n\t\t\t// Object.defineProperties(this, getPrototypeChainValue(this, \"properties\", Backbone.View));\n\t\t\tObject.defineProperties(this, this.properties);\n\t\t}\n\t\tif (options && options.className && this.className) {\n\t\t\toptions.className += \" \" + _.result(this, \"className\");\n\t\t}\n\t\tif (options && options.parentView) {\n\t\t\tthis._setParentView(options.parentView, true);\n\t\t}\n\t\tBackbone.View.apply(this, arguments);\n\n\t\t// console.log(\"%s::initialize viewPhase:[%s => initialized]\", this.cid, this._viewPhase);\n\t\tthis._viewPhase = \"initialized\";\n\n\t\tif (this.parentView !== null) {\n\t\t\tthis.trigger(\"view:parentChange\", this.parentView, null);\n\t\t}\n\t\tif (this.attached) {\n\t\t\tthis.trigger(\"view:attached\", this);\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* remove\n\t/* ------------------------------- */\n\n\t/** @override */\n\tremove: function() {\n\t\tif (this._viewPhase == \"disposing\") {\n\t\t\tlogAttachInfo(this, \"remove\", \"warn\");\n\t\t} else {\n\t\t\t// logAttachInfo(this, \"remove\", \"log\");\n\t\t}\n\n\t\t// before removal\n\t\tthis._viewPhase = \"disposing\";\n\t\tthis._cancelRender();\n\n\t\t// call Backbone impl\n\t\t// Backbone.View.prototype.remove.apply(this, arguments);\n\n\t\t// NOTE: from Backbone impl\n\t\tthis.$el.remove(); // from Backbone impl\n\n\t\tthis._attached = false;\n\t\tthis.trigger(\"view:removed\", this);\n\n\t\t// remove parent/child references\n\t\tthis._setParentView(null);\n\n\t\t// NOTE: from Backbone impl. No more events after this\n\t\tthis.stopListening();\n\n\t\t// check for invalidations that may have been triggered by \"view:removed\"\n\t\tif (this.invalidated) {\n\t\t\tconsole.warn(\"%s::remove invalidated after remove()\", this.cid);\n\t\t\tthis._cancelRender();\n\t\t}\n\t\t// // check for children still here\n\t\t// var ccids = Object.keys(this.childViews);\n\t\t// if (ccids.length) {\n\t\t// \tconsole.warn(\"%s::remove %i children not removed [%s]\", this.cid, ccids.length, ccids.join(\", \"), this.childViews);\n\t\t// }\n\t\t// // remove childViews\n\t\t// for (var cid in this.childViews) {\n\t\t// \tthis.childViews[cid].remove();\n\t\t// }\n\t\t// clear reference in view map\n\t\tdelete _viewsByCid[this.cid];\n\t\t// delete this.el.cid;\n\t\t// update phase\n\t\tthis._viewPhase = \"disposed\";\n\t\treturn this;\n\t},\n\n\t/* -------------------------------\n\t/* _elementAttached _elementDetached\n\t/* ------------------------------- */\n\n\t_elementAttached: function() {\n\t\t// this._addToParentView();\n\t\tthis._attached = true;\n\t\tthis._viewDepth = null;\n\t\tthis.setEnabled(true);\n\t\tthis._setParentView(View.findByDescendant(this.el.parentElement));\n\n\t\t// if (this.parentView) {\n\t\t// \tconsole.log(\"[attach] [%i] %s > %s::_elementAttached\", this.viewDepth, this.parentView.cid, this.cid);\n\t\t// } else {\n\t\t// \tconsole.log(\"[attach] [%i] %s::_elementAttached\", this.viewDepth, this.cid);\n\t\t// }\n\n\t\t// if (this._viewPhase == \"initializing\") {\n\t\t// \t// this.trigger(\"view:attached\", this);\n\t\t// } else\n\t\tif (this._viewPhase == \"initialized\") {\n\t\t\tthis.trigger(\"view:attached\", this);\n\t\t} else\n\t\tif (this._viewPhase == \"replacing\") {\n\t\t\tthis._viewPhase = \"initialized\";\n\t\t\tthis.trigger(\"view:replaced\", this);\n\t\t}\n\t},\n\n\t_elementDetached: function() {\n\t\tif (!this.attached || (this._viewPhase == \"disposing\") || (this._viewPhase == \"disposed\")) {\n\t\t\tlogAttachInfo(this, \"_elementDetached\", \"error\");\n\t\t\t// } else {\n\t\t\t// \tlogAttachInfo(this, \"_elementDetached\", \"log\");\n\t\t}\n\t\tthis._attached = false;\n\t\tthis._viewDepth = null;\n\t\tthis.setEnabled(false);\n\n\t\tif (this._viewPhase != \"disposing\" || this._viewPhase == \"disposed\") {\n\t\t\tthis.remove();\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* parentView\n\t/* ------------------------------- */\n\n\t_setParentView: function(newParent, silent) {\n\t\tif (newParent === void 0) {\n\t\t\tconsole.warn(\"$s::_setParentView invalid value '%s'\", this.cid, newParent);\n\t\t\tnewParent = null;\n\t\t}\n\t\tvar oldParent = this._parentView;\n\t\tthis._parentView = newParent;\n\n\t\t// force update of _viewDepth\n\t\tthis._viewDepth = null; //getViewDepth(this);\n\n\t\t// skip the rest if arg is the same\n\t\tif (newParent === oldParent) {\n\t\t\treturn;\n\t\t}\n\t\tif (oldParent !== null) {\n\t\t\tif (this.cid in oldParent.childViews) {\n\t\t\t\tdelete oldParent.childViews[this.cid];\n\t\t\t}\n\t\t}\n\t\tif (newParent !== null) {\n\t\t\tnewParent.childViews[this.cid] = this;\n\t\t}\n\t\tif (!silent)\n\t\t\tthis.trigger(\"view:parentChange\", this, newParent, oldParent);\n\t},\n\n\twhenAttached: function() {\n\t\treturn View.whenViewIsAttached(this);\n\t},\n\n\t_getViewDepth: function() {\n\t\tif (this._viewDepth === null) {\n\t\t\tthis._viewDepth = getViewDepth(this);\n\t\t}\n\t\treturn this._viewDepth;\n\t},\n\n\t/* -------------------------------\n\t/* Backbone.View overrides\n\t/* ------------------------------- */\n\n\t/** @override */\n\tsetElement: function(element, delegate) {\n\t\t// setElement always initializes this.el, so check it to be non-null before calling super\n\t\tif (this.el) {\n\t\t\tif (this.el !== element && this.el.parentElement) {\n\t\t\t\t// Element is being replaced\n\t\t\t\tif (this.attached) {\n\t\t\t\t\t// Since old element is attached to document tree, _elementAttached will be\n\t\t\t\t\t// triggered by replaceChild: set _viewPhase = \"replacing\" to flag this\n\t\t\t\t\t// change and trigger 'view:replaced' instead of 'view:added'.\n\t\t\t\t\tthis._viewPhase = \"replacing\";\n\t\t\t\t}\n\t\t\t\tthis.el.parentElement.replaceChild(element, this.el);\n\t\t\t}\n\t\t\tBackbone.View.prototype.setElement.apply(this, arguments);\n\t\t\t// Merge classes specified by this view with the ones already in the element,\n\t\t\t// as backbone will not:\n\t\t\tif (this.className) {\n\t\t\t\t_.result(this, \"className\").split(\" \").forEach(function(item) {\n\t\t\t\t\tthis.el.classList.add(item);\n\t\t\t\t}, this);\n\t\t\t}\n\t\t} else {\n\t\t\tBackbone.View.prototype.setElement.apply(this, arguments);\n\t\t}\n\n\t\tif (this.el === void 0) {\n\t\t\tthrow new Error(\"Backbone view has no element\");\n\t\t}\n\t\t_viewsByCid[this.cid] = this;\n\t\tthis.el.cid = this.cid;\n\t\tthis.el.setAttribute(\"data-cid\", this.cid);\n\t\tif (this.model) {\n\t\t\tthis.el.setAttribute(\"data-mcid\", this.model.cid);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/* ---------------------------\n\t/* event helpers\n\t/* --------------------------- */\n\n\taddListeners: function(target, events, handler, useCapture) {\n\t\tif (!_.isObject(useCapture)) useCapture = !!useCapture;\n\t\tif (typeof events === \"string\") { events = events.split(\" \"); }\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\ttarget.addEventListener(events[i], handler, useCapture);\n\t\t}\n\t\treturn this;\n\t},\n\n\tremoveListeners: function(target, events, handler, useCapture) {\n\t\tif (!_.isObject(useCapture)) useCapture = !!useCapture;\n\t\tif (typeof events === \"string\") { events = events.split(\" \"); }\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\ttarget.removeEventListener(events[i], handler, useCapture);\n\t\t}\n\t\treturn this;\n\t},\n\n\tlistenToElement: function(target, events, handler) {\n\t\ttarget = Backbone.$(target);\n\t\tif (typeof events === \"string\") { events = events.split(\" \"); }\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tthis.listenTo(target, events[i], handler);\n\t\t}\n\t},\n\tstopListeningToElement: function(target, events, handler) {\n\t\ttarget = Backbone.$(target);\n\t\tif (typeof events === \"string\") { events = events.split(\" \"); }\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tthis.stopListening(target, events[i], handler);\n\t\t}\n\t},\n\n\t// listenToElementOnce: function(target, event, handler, useCapture) {\n\t// \tthis.listenToOnce(this.$(target), event, handler);\n\t// },\n\t// stopListenToElement: function(target, event, handler, useCapture) {\n\t// \tthis.stopListening(Backbone.$(target), event, handler);\n\t// },\n\n\tlistenToElementOnce: function(target, event, handler, useCapture) {\n\t\tif (!_.isObject(useCapture)) useCapture = !!useCapture;\n\t\tvar cleanup, wrapper, ctx;\n\t\tctx = this;\n\t\tcleanup = function() {\n\t\t\tctx.off(\"view:remove\", cleanup);\n\t\t\ttarget.removeEventListener(event, wrapper, useCapture);\n\t\t};\n\t\twrapper = function(ev) {\n\t\t\tcleanup();\n\t\t\thandler.call(ctx, ev);\n\t\t};\n\t\tctx.on(\"view:remove\", cleanup);\n\t\ttarget.addEventListener(event, wrapper, useCapture);\n\t\treturn this;\n\t},\n\n\t/* -------------------------------\n\t/* requestAnimationFrame\n\t/* ------------------------------- */\n\n\trequestAnimationFrame: function(callback, priority, ctx) {\n\t\treturn renderQueue.request(callback.bind(ctx || this), priority);\n\t},\n\n\tcancelAnimationFrame: function(id) {\n\t\treturn renderQueue.cancel(id);\n\t},\n\n\tsetImmediate: function(callback, priority, ctx) {\n\t\treturn modelQueue.request(callback.bind(ctx || this), priority);\n\t},\n\n\tclearImmediate: function(id) {\n\t\treturn modelQueue.cancel(id);\n\t\t// return window.clearImmediate(id);\n\t},\n\n\t/* -------------------------------\n\t/* deferred render: private methods\n\t/* ------------------------------- */\n\n\t_traceRenderStatus: function() {\n\t\treturn [\n\t\t\t(this._renderQueueId != -1 ? \"async id:\" + this._renderQueueId : \"sync\"),\n\t\t\tView.flagsToString(this._renderFlags),\n\t\t\t(this.attached ? \"attached\" : \"detached\"),\n\t\t\t(this.skipTransitions ? \"skip\" : \"run\") + \"-tx\"\n\t\t].join(\", \");\n\t},\n\n\t/** @private */\n\t_applyRender: function(tstamp) {\n\t\tif (DEBUG) {\n\t\t\tif (this._logFlags[\"view.render\"]) {\n\t\t\t\tconsole.log(\"%s::_applyRender [%s]\",\n\t\t\t\t\tthis.cid, this._traceRenderStatus(),\n\t\t\t\t\tthis._logFlags[\"view.trace\"] ?\n\t\t\t\t\tthis._logRenderCallers.join(\"\\n\") : \"\");\n\t\t\t}\n\t\t\tthis._logRenderCallers.length = 0;\n\t\t}\n\n\t\tvar flags = this._renderFlags;\n\t\tthis.trigger(\"view:render:before\", this, flags);\n\t\tthis._renderFlags = 0;\n\t\tthis._renderQueueId = -1;\n\t\tthis._renderFlags |= this.renderFrame(tstamp, flags);\n\t\tthis.trigger(\"view:render:after\", this, flags);\n\n\t\tif (this._renderFlags != 0) {\n\t\t\tconsole.warn(\"%s::_applyRender [returned] phase: %s flags: %s (%s)\", this.cid, this._viewPhase, View.flagsToString(this._renderFlags), this._renderFlags);\n\t\t}\n\t},\n\n\t_cancelRender: function() {\n\t\tif (this._renderQueueId != -1) {\n\t\t\tvar cancelId, cancelFn;\n\n\t\t\tcancelId = this._renderQueueId;\n\t\t\tthis._renderQueueId = -1;\n\t\t\tcancelFn = renderQueue.cancel(cancelId);\n\n\t\t\tif (cancelFn === void 0) {\n\t\t\t\tconsole.warn(\"%s::_cancelRender [id:%i] not found\", this.cid, cancelId);\n\t\t\t} else if (cancelFn === null) {\n\t\t\t\tconsole.warn(\"%s::_cancelRender [id:%i] already cancelled\", this.cid, cancelId);\n\t\t\t\t// } else {\n\t\t\t\t// \tif (this._logFlags[\"view.render\"] && !renderQueue.running)\n\t\t\t\t// \t\tconsole.log(\"%s::_cancelRender ID:%i cancelled\", this.cid, cancelId);\n\t\t\t}\n\t\t}\n\t},\n\n\t_requestRender: function() {\n\t\tif (renderQueue.running) {\n\t\t\tthis._cancelRender();\n\t\t\t// if (DEBUG) {\n\t\t\t// \tif (this._logFlags[\"view.render\"]) {\n\t\t\t// \t\tconsole.info(\"%s::_requestRender rescheduled [%s (%s)]\", this.cid, View.flagsToString(this._renderFlags), this._renderFlags);\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t\tif (this._renderQueueId == -1) {\n\t\t\tthis._renderQueueId = renderQueue.request(this._applyRender, isNaN(this.viewDepth) ? Number.MAX_VALUE : this.viewDepth);\n\t\t}\n\t\tif (DEBUG) {\n\t\t\tif (this._logFlags[\"view.trace\"]) {\n\t\t\t\t// if (this._logFlags[\"view.trace\"]) {\n\t\t\t\t// \tconsole.groupCollapsed(this.cid + \"::_requestRender [\" + this._traceRenderStatus() + \"] trace\");\n\t\t\t\t// \tconsole.trace();\n\t\t\t\t// \tconsole.groupEnd();\n\t\t\t\t// } else {\n\t\t\t\tconsole.log(\"%s::_requestRender %s [%s]\", this.cid,\n\t\t\t\t\t(renderQueue.running ? \"rescheduled \" : \"\"),\n\t\t\t\t\tthis._traceRenderStatus()\n\t\t\t\t);\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* render: public / abstract methods\n\t/* ------------------------------- */\n\n\tinvalidate: function(flags) {\n\t\tif (flags !== void 0) {\n\t\t\t/*if (DEBUG) {\n\t\t\t\tif (this._logFlags[\"view.render\"]) {\n\t\t\t\t\tif (this._renderFlags > 0) {\n\t\t\t\t\t\tconsole.log(\"%s::invalidate [%s (%s)] + [%s (%s)]\", this.cid, View.flagsToString(this._renderFlags), this._renderFlags, View.flagsToString(flags), flags);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"%s::invalidate [%s (%s)]\", this.cid, View.flagsToString(flags), flags);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}*/\n\t\t\tthis._renderFlags |= flags;\n\t\t}\n\t\treturn this;\n\t},\n\n\trequestRender: function(flags) {\n\t\t// if (DEBUG) {\n\t\t// \tif (this._logFlags[\"view.trace\"]) {\n\t\t// \t\tvar fnPath = [];\n\t\t// \t\tvar fn = arguments.callee.caller;\n\t\t// \t\twhile (fn) {\n\t\t// \t\t\tif (fnPath.length > 5) break;\n\t\t// \t\t\tfnPath.push(fn.name);\n\t\t// \t\t\tfn = fn.caller;\n\t\t// \t\t}\n\t\t// \t\t// this._logRenderCallers.push(fnPath.join(\"\\n\\t->\"));\n\t\t// \t\tthis._logRenderCallers.push(fnPath.join(\" -> \"));\n\t\t// \t}\n\t\t// }\n\t\t// if (flags !== void 0) {\n\t\t// \tthis._renderFlags |= flags;\n\t\t// }\n\t\tthis.invalidate(flags);\n\t\tthis._requestRender();\n\t\treturn this;\n\t},\n\n\t/** @abstract */\n\trenderFrame: function(tstamp, flags) {\n\t\t// subclasses should override this method\n\t\treturn View.NONE_INVALID;\n\t},\n\n\trenderNow: function(alwaysRun) {\n\t\tif (this._renderQueueId != -1) {\n\t\t\tthis._cancelRender();\n\t\t\talwaysRun = true;\n\t\t}\n\t\t// if (alwaysRun === true) {\n\t\tif (alwaysRun) {\n\t\t\tthis._applyRender(_now());\n\t\t}\n\t\treturn this;\n\t},\n\n\twhenRendered: function() {\n\t\treturn View.whenViewIsRendered(this);\n\t},\n\n\t/* -------------------------------\n\t/* render bitwise flags\n\t/* - check: this._renderFlags & flags\n\t/* - add: this._renderFlags |= flags\n\t/* - remove: this._renderFlags &= ~flags\n\t/* ------------------------------- */\n\n\t/* helpers ------------------ */\n\n\trequestChildrenRender: function(flags, now, force) {\n\t\tvar ccid, view;\n\t\tfor (ccid in this.childViews) {\n\t\t\tview = this.childViews[ccid];\n\t\t\tview.skipTransitions = view.skipTransitions || this.skipTransitions;\n\t\t\tview.requestRender(flags);\n\t\t\tif (now) {\n\t\t\t\tview.renderNow(force);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\trender: function() {\n\t\treturn this.renderNow(true);\n\t},\n\n\t/* -------------------------------\n\t/* common abstract\n\t/* ------------------------------- */\n\n\t/**\n\t/* @param {Boolean}\n\t/*/\n\tsetEnabled: function(enable) {\n\t\tif (this._enabled == enable) return;\n\t\tthis._enabled = !!(enable);\n\t\tif (this._enabled) {\n\t\t\tthis.delegateEvents();\n\t\t} else {\n\t\t\tthis.undelegateEvents();\n\t\t}\n\t},\n};\n//, View);\n\nif (DEBUG) {\n\tViewProto._logFlags = [\n\t\t\"view.render\",\n\t\t// \"view.trace\"\n\t].join(\" \");\n\n\tViewProto.constructor = (function(fn) {\n\t\treturn function() {\n\t\t\tvar retval;\n\t\t\tthis._logRenderCallers = [];\n\t\t\tthis._logFlags = this._logFlags.split(\" \").reduce(function(r, o) {\n\t\t\t\tr[o] = true;\n\t\t\t\treturn r;\n\t\t\t}, {});\n\t\t\tretval = fn.apply(this, arguments);\n\t\t\t// console.log(\"------ %s %o\", this.cid, this._logFlags);\n\t\t\treturn retval;\n\t\t};\n\t})(ViewProto.constructor);\n}\n\nmodule.exports = Backbone.View.extend(ViewProto, View);\n",
    "function ViewError(view, err) {\n\tthis.view = view;\n\tthis.err = err;\n\tthis.message = err.message;\n}\nViewError.prototype = Object.create(Error.prototype);\nViewError.prototype.constructor = ViewError;\nViewError.prototype.name = \"ViewError\";\n\nmodule.exports = ViewError;\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4=\"function\";\n\n  return \"<a href=\\\"\"\n    + alias3((helpers.global || (depth0 && depth0.global) || alias2).call(alias1,\"APP_ROOT\",{\"name\":\"global\",\"hash\":{},\"data\":data}))\n    + \"#\"\n    + alias3(((helper = (helper = helpers.handle || (depth0 != null ? depth0.handle : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{\"name\":\"handle\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"><span class=\\\"label\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</span></a>\\n\";\n},\"useData\":true});\n",
    "/**\n/* @module app/view/component/ArticleView\n/*/\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {Function} */\nconst viewTemplate = require(\"./ArticleButton.hbs\");\n\n/**\n/* @constructor\n/* @type {module:app/view/component/ArticleButton}\n/*/\nvar ArticleButton = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"articleButton\",\n\t/** @override */\n\ttagName: \"h2\",\n\t/** @override */\n\tclassName: \"article-button\",\n\t/** @type {Function} */\n\ttemplate: viewTemplate,\n\n\tevents: {\n\t\t\"click a\": function(domev) {\n\t\t\tdomev.defaultPrevented || domev.preventDefault();\n\t\t\tthis.trigger(\"view:click\", this.model);\n\t\t}\n\t},\n\n\t// /** @override */\n\t// initialize: function(options) {},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t},\n});\nmodule.exports = ArticleButton;\n",
    "/**\n/* @module app/view/component/ArticleView\n/*/\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n// /** @type {module:utils/net/toAbsoluteURL} */\n// var toAbsoluteURL = require(\"utils/net/toAbsoluteURL\");\n//\n// /** @type {string} */\n// var ABS_APP_ROOT = toAbsoluteURL(require(\"app/control/Globals\").APP_ROOT);\n\nconst RECAPTCHA_KEYS = {\n\t'canillas.name': '6LcaPHwUAAAAAAfzEnqRchIx8jY1YkUEpuswJDHx'\n};\nconst RECAPTCHA_URL = (key) => `https://www.google.com/recaptcha/api.js?render=${RECAPTCHA_KEYS[key]}`;\n\n/**\n/* @constructor\n/* @type {module:app/view/component/ArticleView}\n/*/\nvar ArticleView = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"articleView\",\n\t/** @override */\n\ttagName: \"article\",\n\t/** @override */\n\tclassName: \"article-view mdown\",\n\n\t/** @override */\n\tinitialize: function(options) {},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\tthis.el.innerHTML = this.model.get(\"text\");\n\n\t\t// let linkEls = this.el.querySelectorAll(\"a[href]\");\n\t\t// if (linkEls.length) {\n\t\t// \tRECAPTCHA_URL('canillas.name');\n\t\t// }\n\t\t// linkEls.forEach(el => {\n\t\t// });\n\n\t\t// FIXME: now done in xslt\n\t\t// this.el.querySelectorAll(\"a[href]\").forEach(function(el) {\n\t\t// \tvar url = toAbsoluteURL(el.getAttribute(\"href\"));\n\t\t// \tif (url.indexOf(ABS_APP_ROOT) !== 0) {\n\t\t// \t\tel.setAttribute(\"target\", \"_blank\");\n\t\t// \t}\n\t\t// });\n\t},\n});\nmodule.exports = ArticleView;\n",
    "/**\n * @module app/view/component/progress/CanvasProgressMeter\n */\n\n/** @type {module:app/view/base/CanvasView} */\nconst CanvasView = require(\"app/view/base/CanvasView\");\n\nvar PI2 = Math.PI * 2;\n/* NOTE: avoid negative rotations */\nvar BASE_ROTATION = 1 - 0.25; // of PI2 (-90 degrees)\nvar GAP_ARC = PI2 / 48;\n\n/** @type {module:utils/ease/fn/easeInQuad} */\nconst easeIn = require(\"utils/ease/fn/easeInQuad\");\n/** @type {module:utils/ease/fn/easeOutQuad} */\nconst easeOut = require(\"utils/ease/fn/easeOutQuad\");\n\nvar LOOP_OFFSET = 1.833333;\nvar STEP_MS = 400; // tween time base\n\nvar ARC_DEFAULTS = {\n\t\"amount\": {\n\t\tlineWidth: 0.75,\n\t\tradiusOffset: 0\n\t},\n\t\"available\": {\n\t\tlineWidth: 0.75,\n\t\t// lineDash: [1.3, 0.7],\n\t\tinverse: \"not-available\"\n\t},\n\t\"not-available\": {\n\t\tlineWidth: 0.8,\n\t\tlineDash: [0.3, 0.7],\n\t\tlineDashOffset: 0\n\t},\n\t\"indeterminate\": {\n\t\tlineWidth: 2.0, //0.8,\n\t\tlineDash: [0.3, 1.7],\n\t\t// lineDash: [0.6, 1.4],\n\t\tlineDashOffset: 0\n\t},\n};\n\n/**\n * @constructor\n * @type {module:app/view/component/progress/CanvasProgressMeter}\n */\nmodule.exports = CanvasView.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"canvasProgressMeter\",\n\t/** @type {string} */\n\tclassName: \"progress-meter canvas-progress-meter\",\n\n\tdefaultKey: \"amount\",\n\n\tdefaults: {\n\t\tvalues: {\n\t\t\tamount: 0,\n\t\t\tavailable: 0,\n\t\t\t_loop: 0,\n\t\t\t_stalled_arc: 0,\n\t\t\t_stalled_loop: 0,\n\t\t},\n\t\tmaxValues: {\n\t\t\tamount: 1,\n\t\t\tavailable: 1,\n\t\t\t_stalled_loop: 1,\n\t\t},\n\t\tuseOpaque: true,\n\t\tlabelFn: function(value, max) {\n\t\t\treturn ((value / max) * 100) | 0;\n\t\t},\n\t},\n\n\tproperties: {\n\t\tstalled: {\n\t\t\tget: function() {\n\t\t\t\treturn false; //this._stalled;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\t// this._setStalled(value)\n\t\t\t}\n\t\t}\n\t},\n\n\t_setStalled: function(value) {\n\t\tif (this._stalled !== value) {\n\t\t\tthis._stalled = value;\n\t\t\tthis.requestRender(CanvasView.MODEL_INVALID | CanvasView.LAYOUT_INVALID);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* children/layout\n\t/* --------------------------- */\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t// TODO: cleanup options mess in CanvasView\n\t\tCanvasView.prototype.initialize.apply(this, arguments);\n\t\t// options = _.defaults(options, this.defaults);\n\n\t\tthis._labelFn = options.labelFn;\n\t\tthis._stalled = !!(options.stalled);\n\t\tthis._valueStyles = {};\n\t\tthis._canvasSize = null;\n\t\tthis._canvasOrigin = null;\n\t},\n\n\t_needsLoop: false,\n\n\t/** @override */\n\tvalueTo: function(key, value, duration) {\n\t\tif (key === \"amount\" && value < this.interpolator.getCurrentValue(\"amount\")) {\n\t\t\tthis._needsLoop = true;\n\t\t}\n\t\tCanvasView.prototype.valueTo.apply(this, arguments);\n\t},\n\n\t/* --------------------------- *\n\t/* private\n\t/* --------------------------- */\n\n\t/** @override */\n\tmeasureCanvas: function(w, h, s) {\n\t\t// make canvas square\n\t\tthis._canvasHeight = this._canvasWidth = Math.min(w, h);\n\t},\n\n\t/** @override */\n\tupdateCanvas: function() {\n\t\t// CanvasView.prototype._updateCanvas.apply(this, arguments);\n\n\t\t// size, lines, gaps, dashes (this._valueStyles, GAP_ARC, this._arcRadius)\n\t\t// --------------------------------\n\t\t// var arcName, s, arcDefault;\n\t\t// var mapLineDash = function(n) {\n\t\t// \treturn n * this.radius * GAP_ARC;\n\t\t// };\n\t\t// var sumFn = function(s, n) {\n\t\t// \treturn s + n;\n\t\t// };\n\n\t\t// this._canvasSize = Math.min(this._canvasWidth, this._canvasHeight);\n\n\t\tvar s;\n\t\t// this._maxDashArc = 0\n\t\tfor (var styleName in ARC_DEFAULTS) {\n\t\t\ts = _.defaults({}, ARC_DEFAULTS[styleName]);\n\t\t\ts.lineWidth *= this._canvasRatio;\n\t\t\ts.radius = (this._canvasWidth - s.lineWidth) / 2;\n\t\t\tif (s.radiusOffset) {\n\t\t\t\ts.radius += s.radiusOffset * this._canvasRatio;\n\t\t\t}\n\t\t\tif (_.isArray(s.lineDash)) {\n\t\t\t\ts.lineDash = s.lineDash.map(function(val, i, arr) {\n\t\t\t\t\treturn val * this.radius * GAP_ARC;\n\t\t\t\t}, s);\n\t\t\t\ts.lineDashLength = s.lineDash.reduce(function(res, val, i, arr) {\n\t\t\t\t\treturn res + val;\n\t\t\t\t}, 0);\n\t\t\t\ts.lineDashArc = s.lineDash[0] * GAP_ARC;\n\t\t\t\t// this._maxDashArc = Math.max(this._maxDashArc, s.lineDashArc);\n\t\t\t} else {\n\t\t\t\ts.lineDashArc = 0;\n\t\t\t}\n\t\t\tthis._valueStyles[styleName] = s;\n\t\t}\n\n\t\t// baselineShift\n\t\t// --------------------------------\n\t\t// NOTE: Center baseline: use ascent data to center to x-height, or sort-of.\n\t\t// with ascent/descent values (0.7, -0.3), x-height is 0.4\n\t\tvar mObj = this._getFontMetrics(this._fontFamily);\n\t\tthis._baselineShift = mObj ? (mObj.ascent + mObj.descent) / mObj.unitsPerEm : 0.7; // default value\n\t\tthis._baselineShift *= this._fontSize * 0.5; // apply to font-size, halve it\n\t\tthis._baselineShift = Math.round(this._baselineShift);\n\n\t\t// save canvas context\n\t\t// --------------------------------\n\t\t// reset matrix and translate 0,0 to center\n\t\tthis._ctx.restore();\n\t\tthis._ctx.setTransform(1, 0, 0, 1, this._canvasWidth / 2, this._canvasHeight / 2);\n\t\tthis._ctx.save();\n\t},\n\n\t/** @override */\n\tredraw: function(ctx, intrp, flags) {\n\t\tthis._clearCanvas(-this._canvasWidth / 2, -this._canvasHeight / 2,\n\t\t\tthis._canvasWidth, this._canvasHeight\n\t\t);\n\n\t\tvar s, // reused style objects\n\t\t\tvalData, // reused for interpolated data\n\t\t\tarcVal; // reused arc values\n\n\t\t// amount label\n\t\t// --------------------------------\n\t\tvalData = intrp._valueData[\"amount\"];\n\t\tthis.drawLabel(this._labelFn(valData._renderedValue, valData._maxVal));\n\n\t\t// indeterminate\n\t\t// --------------------------------\n\n\t\t/*\n\t\tvar indVal;\n\t\tif (this.stalled) {\n\t\t\t// _ind loop indefinitely while indeterminate: restart if at end\n\t\t\tif (intrp.isAtTarget(\"_ind\")) {\n\t\t\t\t// if (intrp.renderedKeys && (intrp.renderedKeys.indexOf(\"_ind\") === -1)) {\n\t\t\t\tintrp.valueTo(\"_ind\", 0, 0);\n\t\t\t\tintrp.valueTo(\"_ind\", 1, 1000);\n\t\t\t\tintrp.updateValue(\"_ind\");\n\t\t\t}\n\t\t\tindVal = intrp.getCurrentValue(\"_ind\");\n\t\t\t//indVal = intrp._valueData[\"_ind\"]._renderedValue || 0;\n\n\t\t\t// draw spinning arc\n\t\t\t// --------------------------------\n\t\t\t// s = this._valueStyles[\"amount\"];\n\t\t\t// ctx.save();\n\t\t\t// ctx.rotate(PI2 * (BASE_ROTATION + (indVal))); // + GAP_ARC);\n\t\t\t// lastEndArc = this.drawArc(1,\n\t\t\t// \tGAP_ARC,\n\t\t\t// \tPI2 - GAP_ARC,\n\t\t\t// \t0, s);\n\t\t\t// ctx.restore();\n\t\t\t// return;\n\n\t\t\t// lineDashOffset animation\n\t\t\t// --------------------------------\n\t\t\ts = this._valueStyles[\"indeterminate\"];\n\t\t\ts.lineDashOffset = s.lineDashLength * ((1 - indVal) % 3) * 3;\n\t\t\tthis._valueStyles[\"available\"].inverse = \"indeterminate\";\n\n\t\t\t// console.log(\"%s::redraw indVal:%o s.lineDashOffset:%o s.lineDash:%o\", this.cid, indVal, s.lineDashOffset, s.lineDash[0]);\n\n\t\t\t// draw spinning wheel\n\t\t\t// --------------------------------\n\t\t\t// ctx.save();\n\t\t\t// ctx.rotate((PI2 / WHEEL_NUM) * indVal); // + GAP_ARC);\n\t\t\t// this.drawWheel(this._valueStyles[\"amount\"], 2 / 5, 3 / 5);\n\t\t\t// ctx.restore();\n\n\t\t} else {\n\t\t\tif (!intrp.isAtTarget(\"_ind\")) {\n\t\t\t\t// if (intrp.renderedKeys && (intrp.renderedKeys.indexOf(\"_ind\") !== -1)) {\n\t\t\t\tintrp.valueTo(\"_ind\", 0, 0);\n\t\t\t\tintrp.updateValue(\"_ind\");\n\t\t\t}\n\t\t\t// lineDashOffset animation\n\t\t\t// --------------------------------\n\t\t\tthis._valueStyles[\"available\"].inverse = \"not-available\";\n\t\t}*/\n\n\t\t// save ctx before drawing arcs\n\t\tctx.save();\n\n\t\t// loop (amount)\n\t\t// --------------------------------\n\t\tvar loopVal;\n\t\t/*\n\t\tNOTE: If value \"amount\" has changed (with valueTo()) but no yet\n\t\tinterpolated, and its last rendered value is less, then its been reset\n\t\t(a reload, a loop, etc): we trigger a 'loop' of the whole arc.\n\t\t*/\n\t\t// if ((intrp.renderedKeys.indexOf(\"amount\") !== -1) && (valData._lastRenderedValue > valData._renderedValue)) {\n\t\tif (this._needsLoop) {\n\t\t\tthis._needsLoop = false;\n\t\t\t// trigger loop\n\t\t\tintrp.valueTo(\"_loop\", 1, 0);\n\t\t\tintrp.valueTo(\"_loop\", 0, 750);\n\t\t\tintrp.updateValue(\"_loop\");\n\t\t}\n\t\t// loopVal = intrp._valueData[\"_loop\"]._renderedValue || 0;\n\t\tloopVal = intrp.getCurrentValue(\"_loop\");\n\t\tctx.rotate((PI2 * (BASE_ROTATION + (1 - loopVal)))); // + GAP_ARC);\n\n\t\t// amount arc\n\t\t// --------------------------------\n\t\t// var amountGapArc = GAP_ARC;\n\t\tvar lastEndArc = 0;\n\n\t\ts = this._valueStyles[\"amount\"];\n\t\tarcVal = loopVal + valData._renderedValue / valData._maxVal;\n\n\t\tif (arcVal > 0) {\n\t\t\tlastEndArc = this.drawArc(arcVal,\n\t\t\t\tGAP_ARC,\n\t\t\t\tPI2 - GAP_ARC,\n\t\t\t\tlastEndArc, s);\n\t\t\tthis.drawEndCap(lastEndArc, s);\n\t\t\tlastEndArc = lastEndArc + GAP_ARC * 2;\n\t\t}\n\n\t\t// available arc\n\t\t// --------------------------------\n\t\ts = this._valueStyles[\"available\"];\n\t\tvalData = intrp._valueData[\"available\"];\n\n\t\tvar stepsNum = valData.length || 1;\n\t\tvar stepBaseArc = PI2 / stepsNum;\n\t\tvar stepAdjustArc = stepBaseArc % GAP_ARC;\n\t\tvar stepGapArc = GAP_ARC + (stepAdjustArc - s.lineDashArc) / 2;\n\n\t\tif (Array.isArray(valData)) {\n\t\t\tfor (var i = 0; i < stepsNum; i++) {\n\t\t\t\tarcVal = valData[i]._renderedValue / (valData[i]._maxVal / stepsNum);\n\t\t\t\tthis.drawArc(arcVal,\n\t\t\t\t\t(i * stepBaseArc) + stepGapArc,\n\t\t\t\t\t((i + 1) * stepBaseArc) - stepGapArc,\n\t\t\t\t\tlastEndArc, s);\n\t\t\t}\n\t\t} else {\n\t\t\tarcVal = valData._renderedValue / valData._maxVal;\n\t\t\tthis.drawArc(arcVal,\n\t\t\t\tstepGapArc,\n\t\t\t\tPI2 - stepGapArc,\n\t\t\t\tlastEndArc, s);\n\t\t}\n\t\t// restore ctx after drawing arcs\n\t\t// keep rotation transform\n\t\t//ctx.restore();\n\n\t\tif (this._stalled) {\n\t\t\tif (intrp.getTargetValue('_stalled_arc') === 0) {\n\t\t\t\tintrp.valueTo('_stalled_arc', 1, 1 * STEP_MS, easeIn).updateValue('_stalled_arc');\n\t\t\t}\n\t\t} else {\n\t\t\tif (intrp.getTargetValue('_stalled_arc') === 1) {\n\t\t\t\tintrp.valueTo('_stalled_arc', 0, 1 * STEP_MS, easeOut).updateValue('_stalled_arc');\n\t\t\t}\n\t\t}\n\t\tvar a = intrp.getRenderedValue(\"_stalled_arc\");\n\t\t// while arc is > 0, loop indefinitely while spinning and restart\n\t\t// if at end. Otherwise let interp exhaust arc duration\n\t\tif (a > 0) {\n\t\t\tif (!intrp.paused && intrp.isAtTarget('_stalled_loop')) {\n\t\t\t\tintrp\n\t\t\t\t\t.valueTo('_stalled_loop', 0, 0)\n\t\t\t\t\t.valueTo('_stalled_loop', 1, 2 * STEP_MS)\n\t\t\t\t\t.updateValue('_stalled_loop');\n\t\t\t}\n\t\t}\n\t\tvar l = intrp.getRenderedValue(\"_stalled_loop\");\n\t\t// always render while arc is > 0\n\t\tif (a > 0) {\n\t\t\t// arc span bounce\n\t\t\tvar b = (l < 0.5 ? (l % 0.5) : 0.5 - (l % 0.5)) * 2;\n\t\t\t// bounce + main arc span\n\t\t\tvar aa = (a * b * 0.25) + (a * 0.125) + .0001;\n\t\t\t// rotation loop\n\t\t\tvar ll = l + LOOP_OFFSET;\n\n\t\t\tctx.save();\n\t\t\tctx.lineWidth = 10 * this._canvasRatio;\n\t\t\tctx.globalAlpha = 1;\n\t\t\tctx.globalCompositeOperation = \"destination-out\";\n\t\t\tctx.strokeColor = 'red';\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(0, 0, (this._canvasWidth) / 2, ((1 - aa) + ll) * PI2, (aa + ll) * PI2, false);\n\t\t\tctx.stroke();\n\t\t\tctx.restore();\n\t\t}\n\t\tctx.restore();\n\t},\n\n\tdrawArc: function(value, startArc, endArc, prevArc, style) {\n\t\tvar valArc,\n\t\t\tvalStartArc,\n\t\t\tvalEndArc,\n\t\t\tinvStyle,\n\t\t\tinvStartArc,\n\t\t\tinvEndArc;\n\n\t\tprevArc || (prevArc = 0);\n\n\t\tvalArc = endArc - startArc;\n\t\tvalEndArc = startArc + (valArc * value);\n\t\tvalStartArc = Math.max(startArc, prevArc);\n\t\tif (valEndArc > valStartArc) {\n\t\t\tthis._ctx.save();\n\t\t\tthis.applyValueStyle(style);\n\t\t\tthis._ctx.beginPath();\n\t\t\tthis._ctx.arc(0, 0, style.radius, valEndArc, valStartArc, true);\n\t\t\tthis._ctx.stroke();\n\t\t\tthis._ctx.restore();\n\t\t}\n\n\t\t// if there's valueStyle, draw rest of span, minus prevArc overlap too\n\t\tif (style.inverse !== void 0) {\n\t\t\tinvStyle = this._valueStyles[style.inverse];\n\n\t\t\tinvEndArc = valEndArc + (valArc * (1 - value));\n\t\t\tinvStartArc = Math.max(valEndArc, prevArc);\n\t\t\tif (invEndArc > invStartArc) {\n\t\t\t\tthis._ctx.save();\n\t\t\t\tthis.applyValueStyle(invStyle);\n\t\t\t\tthis._ctx.beginPath();\n\t\t\t\tthis._ctx.arc(0, 0, invStyle.radius, invEndArc, invStartArc, true);\n\t\t\t\tthis._ctx.stroke();\n\t\t\t\tthis._ctx.restore();\n\t\t\t}\n\t\t}\n\n\t\treturn valEndArc;\n\t},\n\n\tapplyValueStyle: function(s) {\n\t\tthis._ctx.lineWidth = s.lineWidth;\n\t\tif (_.isArray(s.lineDash)) {\n\t\t\tthis._ctx.setLineDash(s.lineDash);\n\t\t}\n\t\tif (_.isNumber(s.lineDashOffset)) {\n\t\t\tthis._ctx.lineDashOffset = s.lineDashOffset;\n\t\t}\n\t},\n\n\n\tdrawNotch: function(arcPos, length, s) {\n\t\tvar ex, ey, ec1, ec2;\n\n\t\tex = Math.cos(arcPos);\n\t\tey = Math.sin(arcPos);\n\t\tec1 = s.radius;\n\t\tec2 = s.radius - length;\n\n\t\tthis._ctx.save();\n\t\tthis.applyValueStyle(s);\n\t\tthis._ctx.lineCap = \"square\";\n\t\tthis._ctx.beginPath();\n\t\tthis._ctx.moveTo(ec1 * ex, ec1 * ey);\n\t\tthis._ctx.lineTo(ec2 * ex, ec2 * ey);\n\t\tthis._ctx.stroke();\n\t\tthis._ctx.restore();\n\t},\n\n\tdrawEndCap: function(arcPos, s) {\n\t\tvar radius = s.radius;\n\t\tthis._ctx.save();\n\t\tthis._ctx.lineWidth = s.lineWidth;\n\n\t\tthis._ctx.rotate(arcPos - GAP_ARC * 2); // 1.5);\n\t\tthis._ctx.beginPath();\n\t\tthis._ctx.arc(0, 0, radius, GAP_ARC * 0.5, GAP_ARC * 2, false);\n\t\tthis._ctx.lineTo(radius - (GAP_ARC * radius), 0);\n\t\tthis._ctx.closePath();\n\n\t\tthis._ctx.fill();\n\t\tthis._ctx.stroke();\n\t\tthis._ctx.restore();\n\t},\n\n\tdrawLabel: function(s) {\n\t\tif (this._labelText !== s) {\n\t\t\tthis._labelText = s;\n\t\t\tthis._labelWidth = this._ctx.measureText(s).width;\n\t\t}\n\t\tthis._ctx.fillText(s, this._labelWidth * -0.5, this._baselineShift, this._labelWidth);\n\t},\n});\n\nif (DEBUG) {\n\tmodule.exports.prototype._logFlags = \"\";\n}\n",
    "/**\n * @module app/view/component/Carousel\n */\n\n/** @type {module:backbone.babysitter} */\nconst Container = require(\"backbone.babysitter\");\n\n/** @type {module:hammerjs} */\nconst Hammer = require(\"hammerjs\");\n/** @type {module:utils/touch/SmoothPanRecognizer} */\nconst Pan = require(\"utils/touch/SmoothPanRecognizer\");\n/** @type {module:hammerjs.Tap} */\nvar Tap = Hammer.Tap;\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n// /** @type {module:app/view/base/DeferredView} */\n// var View = require(\"app/view/base/DeferredView\");\n\n/** @type {module:app/view/render/CarouselRenderer} */\nconst CarouselRenderer = require(\"app/view/render/CarouselRenderer\");\n\n/** @type {module:utils/prefixedProperty} */\nconst prefixedProperty = require(\"utils/prefixedProperty\");\n/** @type {module:utils/prefixedStyleName} */\nconst prefixedStyleName = require(\"utils/prefixedStyleName\");\n\nvar transformStyleName = prefixedStyleName(\"transform\");\nvar transformProperty = prefixedProperty(\"transform\");\nvar translateTemplate = Globals.TRANSLATE_TEMPLATE;\n\n// var cssToPx = function(cssVal, el) {\n// \treturn parseInt(cssVal);\n// };\n\n// var defaultRendererFunction = (function() {\n// \tvar defaultRenderer = CarouselRenderer.extend({ className: \"carousel-item default-renderer\"}),\n// \t\temptyRenderer = CarouselRenderer.extend({ className: \"carousel-item empty-renderer\"});\n// \treturn function(item, index, arr) {\n// \t\treturn (index === -1)? emptyRenderer: defaultRenderer;\n// \t};\n// })();\n\n/** @const */\nvar MAX_SELECT_THRESHOLD = 20;\n\n// /** @const */\n// var CHILDREN_INVALID = View.CHILDREN_INVALID,\n// \tSTYLES_INVALID = View.STYLES_INVALID,\n// \tMODEL_INVALID = View.MODEL_INVALID,\n// \tSIZE_INVALID = View.SIZE_INVALID,\n// \tLAYOUT_INVALID = View.LAYOUT_INVALID;\n\nvar VERTICAL = Hammer.DIRECTION_VERTICAL,\n\tHORIZONTAL = Hammer.DIRECTION_HORIZONTAL;\n\n// x: [\"x\", \"y\"],\n// y: [\"y\", \"x\"],\n// offsetLeft: [\"offsetLeft\", \"offsetTop\"],\n// offsetTop: [\"offsetTop\", \"offsetLeft\"],\n// offsetWidth: [\"offsetWidth\", \"offsetHeight\"],\n// offsetHeight: [\"offsetHeight\", \"offsetWidth\"],\n// width: [\"width\",\"height\"],\n// height: [\"height\",\"width\"],\n// marginLeft: [\"marginLeft\",\"marginTop\"],\n// marginRight: [\"marginRight\",\"marginBottom\"],\n\n/*\nvar HORIZONTAL_PROPS = {\n\tpos: \"x\",\n\tsize: \"width\",\n\toffsetPos: \"offsetLeft\",\n\toffsetSize: \"offsetWidth\",\n\tmarginBefore: \"marginLeft\",\n\tmarginAfter: \"marginRight\",\n};\nvar VERTICAL_PROPS = {\n\tpos: \"y\",\n\tsize: \"height\",\n\toffsetPos: \"offsetTop\",\n\toffsetSize: \"offsetHeight\",\n\tmarginBefore: \"marginTop\",\n\tmarginAfter: \"marginBottom\",\n};\n*/\n\n// var DIRECTION_NONE = 1;\n// var DIRECTION_LEFT = 2;\n// var DIRECTION_RIGHT = 4;\n// var DIRECTION_UP = 8;\n// var DIRECTION_DOWN = 16;\n\nvar dirToStr = function(dir) {\n\tif (dir === Hammer.DIRECTION_NONE) return 'NONE';\n\tif (dir === Hammer.DIRECTION_LEFT) return 'LEFT';\n\tif (dir === Hammer.DIRECTION_RIGHT) return 'RIGHT';\n\tif (dir === Hammer.DIRECTION_UP) return 'UP';\n\tif (dir === Hammer.DIRECTION_DOWN) return 'DOWN';\n\tif (dir === Hammer.DIRECTION_HORIZONTAL) return 'HOR'; //IZONTAL';\n\tif (dir === Hammer.DIRECTION_VERTICAL) return 'VER'; //TICAL';\n\tif (dir === Hammer.DIRECTION_ALL) return 'ALL';\n\treturn 'UNREC'; //OGNIZED';\n}\n\nvar isValidTouchManager = function(touch, direction) {\n\t// var retval;\n\ttry {\n\t\treturn touch.get(\"hpan\").options.direction == direction;\n\t} catch (err) {\n\t\treturn false;\n\t}\n\t// return retval;\n};\n\n// /** @type {int} In pixels */\n// var panThreshold: 15;\n\nvar createTouchManager = function(el, dir, thres) {\n\tvar touch = new Hammer.Manager(el);\n\tvar pan = new Pan({\n\t\tevent: \"hpan\",\n\t\tthreshold: Globals.THRESHOLD,\n\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t});\n\tvar tap = new Tap({\n\t\tthreshold: Globals.THRESHOLD - 1,\n\t\tinterval: 50,\n\t\ttime: 200,\n\t});\n\ttap.recognizeWith(pan);\n\ttouch.add([pan, tap]);\n\treturn touch;\n};\n\n\nvar Carousel = {\n\t/** const */\n\tANIMATED: false,\n\t/** const */\n\tIMMEDIATE: true,\n\n\t/** copy of Hammer.DIRECTION_VERTICAL */\n\tDIRECTION_VERTICAL: VERTICAL,\n\t/** copy of Hammer.DIRECTION_HORIZONTAL */\n\tDIRECTION_HORIZONTAL: HORIZONTAL,\n\t/** @type {Object} */\n\tdefaults: {\n\t\t/** @type {boolean} */\n\t\tselectOnScrollEnd: false,\n\t\t/** @type {boolean} */\n\t\trequireSelection: false,\n\t\t/** @type {int} */\n\t\tdirection: HORIZONTAL,\n\t\t/** @type {int} In pixels */\n\t\tselectThreshold: 20,\n\t\t/** @type {Function} */\n\t\trendererFunction: (function() {\n\t\t\tvar defaultRenderer = CarouselRenderer.extend({\n\t\t\t\t\tclassName: \"carousel-item default-renderer\"\n\t\t\t\t}),\n\t\t\t\temptyRenderer = CarouselRenderer.extend({\n\t\t\t\t\tclassName: \"carousel-item empty-renderer\"\n\t\t\t\t});\n\t\t\treturn function(item, index, arr) {\n\t\t\t\treturn (index === -1) ? emptyRenderer : defaultRenderer;\n\t\t\t};\n\t\t})(),\n\t},\n};\nCarousel.validOptions = _.keys(Carousel.defaults);\n\n/**\n/* @constructor\n/* @type {module:app/view/component/Carousel}\n/*/\nvar CarouselProto = {\n\n\t/** @override */\n\tcidPrefix: \"carousel\",\n\t/** @override */\n\ttagName: \"div\",\n\t/** @override */\n\tclassName: \"carousel skip-transitions\",\n\n\t/* --------------------------- *\n\t/* properties\n\t/* --------------------------- */\n\n\tproperties: {\n\t\tscrolling: {\n\t\t\tget: function() {\n\t\t\t\treturn this._scrolling;\n\t\t\t}\n\t\t},\n\t\tselectedItem: {\n\t\t\tget: function() {\n\t\t\t\treturn this._selectedView.model;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (value)\n\t\t\t\t\tthis._onSelectOne(value)\n\t\t\t\telse\n\t\t\t\t\tthis._onSelectNone();\n\t\t\t}\n\t\t},\n\t},\n\n\tevents: {\n\t\t// \"mousedown\": \"_onMouseDown\", \"mouseup\": \"_onMouseUp\",\n\t\t\"transitionend .carousel-item.selected\": \"_onScrollTransitionEnd\",\n\t\t\"click .carousel-item:not(.selected)\": \"_onClick\",\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t_.bindAll(this, \"_onPointerEvent\", \"_onClick\");\n\n\t\tthis.itemViews = new Container();\n\t\tthis.metrics = {};\n\n\t\t_.extend(this, _.defaults(_.pick(options, Carousel.validOptions), Carousel.defaults));\n\n\t\t// this.childGap = 0; //this.dirProp(20, 18);\n\t\tthis._precedingDir = (Hammer.DIRECTION_LEFT | Hammer.DIRECTION_UP) & this.direction;\n\t\tthis._followingDir = (Hammer.DIRECTION_RIGHT | Hammer.DIRECTION_DOWN) & this.direction;\n\n\t\t// use supplied touch mgr or create private\n\t\tif (isValidTouchManager(options.touch, this.direction)) {\n\t\t\tthis.touch = options.touch;\n\t\t} else {\n\t\t\tconsole.warn(\"%s::initialize creating Hammer instance\", this.cid);\n\t\t\tthis.touch = createTouchManager(this.el, this.direction);\n\t\t\t// this.on(\"view:removed\", this.touch.destroy, this.touch);\n\t\t\tthis.listenTo(this, \"view:removed\", function() {\n\t\t\t\tthis.touch.destroy();\n\t\t\t});\n\t\t}\n\n\t\t/* create children and props */\n\t\tthis.setEnabled(true);\n\t\tthis.skipTransitions = true;\n\t\tthis._renderFlags = View.CHILDREN_INVALID;\n\t\t// this.invalidateChildren();\n\n\t\tthis.listenTo(this, \"view:attached\", function() {\n\t\t\tthis.skipTransitions = true;\n\t\t\t// this.invalidateSize();\n\t\t\t// this.renderNow();\n\t\t\t// this.requestRender();\n\t\t\tthis.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t});\n\n\t\t/* collection listeners */\n\t\tthis.listenTo(this.collection, {\n\t\t\t\"reset\": this._onReset,\n\t\t\t\"select:one\": this._onSelectOne,\n\t\t\t\"select:none\": this._onSelectNone,\n\t\t\t\"deselect:one\": this._onDeselectAny,\n\t\t\t\"deselect:none\": this._onDeselectAny,\n\t\t});\n\t},\n\t/* --------------------------- *\n\t/* Hammer init\n\t/* --------------------------- */\n\n\t// validateTouchManager: function(touch, direction) {\n\t// \ttry {\n\t// \t\treturn touch.get(\"pan\").options.direction === direction);\n\t// \t} catch (err) {\n\t// \t\treturn false;\n\t// \t}\n\t// },\n\n\t// initializeHammer: function(options) {\n\t// \t// direction from opts/defaults\n\t// \tif (options.direction === VERTICAL) {\n\t// \t\tthis.direction = VERTICAL;\n\t// \t} // do nothing: the default is horizontal\n\t//\n\t// \t// validate hammer instance or create local\n\t// \tif ((touch = options.touch) && (pan = touch.get(\"pan\"))) {\n\t// \t\t// Override direction only if specific\n\t// \t\tif (pan.options.direction !== Hammer.DIRECTION_ALL) {\n\t// \t\t\tthis.direction = pan.options.direction;\n\t// \t\t}\n\t// \t\tthis.panThreshold = pan.options.threshold;\n\t// \t} else {\n\t// \t\tconsole.warn(\"%s::initializeHammer using private Hammer instance\", this.cid);\n\t// \t\ttouch = createHammerInstance(this.el, this.panThreshold, this.direction);\n\t// \t\tthis.on(\"view:removed\", touch.destroy, touch);\n\t// \t}\n\t// \tthis.touch = touch;\n\t// },\n\n\tremove: function() {\n\t\t// this._scrollPendingAction && this._scrollPendingAction(true);\n\t\t// if (this._enabled) {\n\t\t// \tthis.touch.off(\"tap\", this._onTap);\n\t\t// \tthis.touch.off(\"hpanstart hpanmove hpanend hpancancel\", this._onPan);\n\t\t// }\n\t\tthis._togglePointerEvents(false);\n\t\tthis.removeChildren();\n\t\tView.prototype.remove.apply(this, arguments);\n\t\treturn this;\n\t},\n\n\n\t/* --------------------------- *\n\t/* helper functions\n\t/* --------------------------- */\n\n\tdirProp: function(hProp, vProp) {\n\t\treturn (this.direction & HORIZONTAL) ? hProp : vProp;\n\t},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\t// render: function() {\n\t// \tif (this.attached) {\n\t// \t\tthis.skipTransitions = true;\n\t// \t\t// this.invalidateSize();\n\t// \t\tthis.renderNow(true);\n\t// \t}\n\t// },\n\n\t// /** @override */\n\t// render: function () {\n\t// \tif (!this.attached) {\n\t// \t\tif (!this._renderPending) {\n\t// \t\t\tthis._renderPending = true;\n\t// \t\t\tthis.listenTo(this, \"view:attached\", this.render);\n\t// \t\t}\n\t// \t} else {\n\t// \t\tif (this._renderPending) {\n\t// \t\t\tthis._renderPending = false;\n\t// \t\t\tthis.stopListening(this, \"view:attached\", this.render);\n\t// \t\t}\n\t// \t\tthis._delta = 0;\n\t// \t\tthis.skipTransitions = true;\n\t// \t\tthis.invalidateSize();\n\t// \t\t// this.invalidateLayout();\n\t// \t\tthis.renderNow();\n\t// \t}\n\t// \treturn this;\n\t// },\n\n\t// render: function () {\n\t// \tthis.measureLater();\n\t// \tthis.scrollBy(0, Carousel.IMMEDIATE);\n\t//\n\t// \tif (this.el.parentElement) {\n\t// \t\tthis.renderNow();\n\t// \t}\n\t// \treturn this;\n\t// },\n\n\t/** @override */\n\trenderFrame: function(tstamp, flags) {\n\t\tif (flags & View.CHILDREN_INVALID) {\n\t\t\tthis._createChildren();\n\t\t\t// clear this flag now: render may be deferred until attached\n\t\t\tflags &= ~View.CHILDREN_INVALID;\n\t\t}\n\t\tif (this.attached) {\n\t\t\tif (flags & View.SIZE_INVALID) {\n\t\t\t\tthis._measure();\n\t\t\t}\n\t\t\tif (flags & (View.LAYOUT_INVALID | View.SIZE_INVALID)) {\n\t\t\t\tthis._scrollBy(this._delta, this.skipTransitions);\n\t\t\t}\n\t\t} else if (flags) {\n\t\t\tthis.listenToOnce(this, \"view:attached\", function() {\n\t\t\t\tthis.requestRender(flags);\n\t\t\t});\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* enabled\n\t/* --------------------------- */\n\n\t// /** @override */\n\t// _enabled: undefined,\n\n\t/** @override */\n\tsetEnabled: function(enabled) {\n\t\tif (this._enabled !== enabled) {\n\t\t\tthis._enabled = enabled;\n\t\t\t// toggle events immediately\n\t\t\tthis._togglePointerEvents(enabled);\n\t\t\t// dom manipulation on render (_renderEnabled)\n\t\t\t// this._renderFlags |= View.STYLES_INVALID;\n\t\t\t// this.requestRender();\n\t\t\tthis.setImmediate(this._renderEnabled);\n\t\t\t// this._renderEnabled();\n\t\t}\n\t},\n\n\t_renderEnabled: function() {\n\t\tthis.el.classList.toggle(\"disabled\", !this.enabled);\n\t\tthis.itemViews.each(function(view) {\n\t\t\tview.setEnabled(this.enabled);\n\t\t}, this);\n\t},\n\n\t/* --------------------------- *\n\t/* Create children\n\t/* --------------------------- */\n\n\t_createChildren: function() {\n\t\t// var sIndex;\n\t\tvar buffer, renderer, view, viewOpts;\n\n\t\tthis.removeChildren();\n\n\t\tif (this.collection.length) {\n\t\t\tviewOpts = {\n\t\t\t\t// viewDepth: this.viewDepth + 1,\n\t\t\t\t// parentView: this,\n\t\t\t\tenabled: this.enabled\n\t\t\t};\n\t\t\tbuffer = document.createDocumentFragment();\n\t\t\t// buffer = this.el;\n\n\t\t\tif (!this.requireSelection) {\n\t\t\t\trenderer = this.rendererFunction(null, -1, this.collection);\n\t\t\t\tview = new renderer(viewOpts);\n\t\t\t\tthis.itemViews.add(view);\n\t\t\t\tbuffer.appendChild(view.el);\n\t\t\t\tthis.emptyView = view;\n\t\t\t}\n\n\t\t\tthis.collection.each(function(item, index, arr) {\n\t\t\t\tviewOpts.model = item;\n\t\t\t\trenderer = this.rendererFunction(item, index, arr);\n\t\t\t\tview = new renderer(viewOpts);\n\t\t\t\tthis.itemViews.add(view);\n\t\t\t\tbuffer.appendChild(view.el);\n\t\t\t}, this);\n\n\t\t\t// if (!this.requireSelection) {\n\t\t\t// \tbuffer = this.appendItemView(buffer, this.model, -1, this.collection);\n\t\t\t// \tthis.emptyView = this.itemViews.first();\n\t\t\t// }\n\t\t\t// buffer = this.collection.reduce(this.appendItemView, buffer, this);\n\n\t\t\tthis.adjustToSelection();\n\t\t\tthis._selectedView.el.classList.add(\"selected\");\n\n\t\t\tthis.el.appendChild(buffer);\n\t\t}\n\t},\n\n\t// appendItemView: function (parentEl, model, index, arr) {\n\t// \tvar renderer = this.rendererFunction(model, index, arr);\n\t// \tvar view = new renderer({\n\t// \t\tmodel: model,\n\t// \t\tparentView: this,\n\t// \t\tenabled: this.enabled\n\t// \t});\n\t// \tthis.itemViews.add(view);\n\t// \tparentEl.appendChild(view.el);\n\t// \treturn parentEl;\n\t// },\n\n\t// createItemView: function (renderer, opts) {\n\t// \tvar view = new renderer(opts);\n\t// \tthis.itemViews.add(view);\n\t// \treturn view;\n\t// },\n\n\tremoveChildren: function() {\n\t\tthis.itemViews.each(this.removeItemView, this);\n\t\tthis.emptyView = (void 0);\n\t},\n\n\tremoveItemView: function(view) {\n\t\tthis.itemViews.remove(view);\n\t\tview.remove();\n\t\treturn view;\n\t},\n\n\t/* --------------------------- *\n\t/* measure\n\t/* --------------------------- */\n\n\t_measure: function() {\n\t\tvar m, mm;\n\t\tvar pos = 0,\n\t\t\tposInner = 0;\n\t\tvar maxAcross = 0,\n\t\t\tmaxOuter = 0;\n\t\tvar maxOuterView, maxAcrossView;\n\n\t\tmaxOuterView = maxAcrossView = this.emptyView || this.itemViews.first();\n\n\t\t// chidren metrics\n\t\tthis.itemViews.each(function(view) {\n\t\t\tview.render();\n\t\t});\n\n\t\tthis.itemViews.each(function(view) {\n\t\t\tm = this.measureItemView(view);\n\t\t\tm.pos = pos;\n\t\t\tpos += m.outer; // + this.childGap;\n\t\t\tm.posInner = posInner;\n\t\t\tposInner += m.inner; //+ this.childGap;\n\t\t\tif (view !== this.emptyView) {\n\t\t\t\tif (m.across > maxAcross) {\n\t\t\t\t\tmaxAcross = m.across;\n\t\t\t\t\tmaxAcrossView = view;\n\t\t\t\t}\n\t\t\t\tif (m.outer > maxOuter) {\n\t\t\t\t\tmaxOuter = m.outer;\n\t\t\t\t\tmaxOuterView = view;\n\t\t\t\t}\n\t\t\t}\n\t\t}, this);\n\n\t\t// measure self + max child metrics\n\t\tmm = this.metrics[this.cid] || (this.metrics[this.cid] = {});\n\t\tmm.outer = this.el[this.dirProp(\"offsetWidth\", \"offsetHeight\")];\n\t\tmm.before = maxOuterView.el[this.dirProp(\"offsetLeft\", \"offsetTop\")];\n\t\tmm.inner = maxOuterView.el[this.dirProp(\"offsetWidth\", \"offsetHeight\")];\n\t\tmm.after = mm.outer - (mm.inner + mm.before);\n\t\tmm.across = maxAcross;\n\n\t\t// m = this.metrics[maxOuterView.cid];\n\t\t// mm.inner = m.inner;\n\n\t\t// tap area\n\t\tthis._tapAcrossBefore = maxAcrossView.el[this.dirProp(\"offsetTop\", \"offsetLeft\")];\n\t\tthis._tapAcrossAfter = this._tapAcrossBefore + maxAcross;\n\t\tthis._tapBefore = mm.before + this._tapGrow;\n\t\tthis._tapAfter = mm.before + mm.inner - this._tapGrow;\n\n\t\tthis.selectThreshold = Math.min(MAX_SELECT_THRESHOLD, mm.outer * 0.1);\n\t},\n\n\tmeasureItemView: function(view) {\n\t\tvar m, viewEl;\n\t\t// var s, sizeEl;\n\n\t\tviewEl = view.el;\n\t\tm = this.metrics[view.cid] || (this.metrics[view.cid] = {});\n\n\t\tm.outer = viewEl[this.dirProp(\"offsetWidth\", \"offsetHeight\")];\n\t\tm.across = viewEl[this.dirProp(\"offsetHeight\", \"offsetWidth\")];\n\n\t\tif (view.metrics) {\n\t\t\tm.before = view.metrics[this.dirProp(\"marginLeft\", \"marginTop\")];\n\t\t\tm.outer += m.before;\n\t\t\tm.outer += view.metrics[this.dirProp(\"marginRight\", \"marginBottom\")];\n\t\t\tm.inner = view.metrics.content[this.dirProp(\"width\", \"height\")];\n\t\t\tm.before += view.metrics.content[this.dirProp(\"x\", \"y\")];\n\t\t\tm.after = m.outer - (m.inner + m.before);\n\n\t\t\t// var marginBefore = view.metrics[this.dirProp(\"marginLeft\",\"marginTop\")];\n\t\t\t// var marginAfter = view.metrics[this.dirProp(\"marginRight\",\"marginBottom\")];\n\t\t\t// var pos = view.metrics.content[this.dirProp(\"x\",\"y\")];\n\t\t\t//\n\t\t\t// m.inner = view.metrics.content[this.dirProp(\"width\",\"height\")];\n\t\t\t// m.before = marginBefore + pos;\n\t\t\t// m.outer += marginBefore + marginAfter;\n\t\t\t// m.after = m.outer - (m.inner + m.before);\n\t\t} else {\n\t\t\t// throw new Error(\"renderer has no metrics\");\n\t\t\tconsole.warn(\"%s::measureItemView view '%s' has no metrics\", this.cid, view.cid);\n\t\t\tm.inner = m.outer;\n\t\t\tm.after = m.before = 0;\n\t\t}\n\n\t\treturn m;\n\t},\n\n\t/* --------------------------- *\n\t/* scrolling property\n\t/* --------------------------- */\n\n\t_delta: 0,\n\n\t_scrolling: false,\n\n\t_setScrolling: function(scrolling) {\n\t\t// console.warn(\"_setScrolling current/requested\", this._scrolling, scrolling);\n\t\tif (this._scrolling != scrolling) {\n\t\t\tthis._scrolling = scrolling;\n\t\t\tthis.el.classList.toggle(\"scrolling\", scrolling);\n\t\t\tthis.trigger(scrolling ? \"view:scrollstart\" : \"view:scrollend\");\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Scroll/layout\n\t/* --------------------------- */\n\n\tscrollBy: function(delta, skipTransitions) {\n\t\tthis._delta = delta || 0;\n\t\tthis.skipTransitions = !!skipTransitions;\n\t\t// this.invalidateLayout();\n\t\tthis.requestRender(View.LAYOUT_INVALID);\n\t},\n\n\t_scrollBy: function(delta, skipTransitions) {\n\t\tvar sMetrics, metrics, pos;\n\n\t\tsMetrics = this.metrics[(this._scrollCandidateView || this._selectedView).cid];\n\t\tthis.itemViews.each(function(view) {\n\t\t\tmetrics = this.metrics[view.cid];\n\t\t\tpos = Math.floor(this._getScrollOffset(delta, metrics, sMetrics));\n\t\t\tview.metrics.translateX = (this.direction & HORIZONTAL) ? pos : 0;\n\t\t\tview.metrics.translateY = (this.direction & HORIZONTAL) ? 0 : pos;\n\t\t\tview.metrics._transform = translateTemplate(view.metrics.translateX, view.metrics.translateY);\n\t\t\tview.el.style[transformProperty] = view.metrics._transform;\n\t\t\t// view.el.style[transformProperty] = (this.direction & HORIZONTAL)?\n\t\t\t// \t\"translate3d(\" + pos + \"px,0,0)\":\n\t\t\t// \t\"translate3d(0,\" + pos + \"px,0)\";\n\t\t}, this);\n\n\t\tthis.el.classList.toggle(\"skip-transitions\", skipTransitions);\n\t\tthis.selectFromView();\n\t},\n\n\t_getScrollOffset: function(delta, mCurr, mSel) {\n\t\tvar pos, offset = 0;\n\n\t\tpos = mCurr.pos - mSel.pos + delta;\n\t\tif (pos < 0) {\n\t\t\tif (Math.abs(pos) < mSel.outer) {\n\t\t\t\toffset += (-mCurr.after) / mSel.outer * pos;\n\t\t\t} else {\n\t\t\t\toffset += mCurr.after;\n\t\t\t}\n\t\t} else\n\t\tif (0 <= pos) {\n\t\t\tif (Math.abs(pos) < mSel.outer) {\n\t\t\t\toffset -= mCurr.before / mSel.outer * pos;\n\t\t\t} else {\n\t\t\t\toffset -= mCurr.before;\n\t\t\t}\n\t\t}\n\t\treturn pos + offset;\n\t},\n\n\t_onScrollTransitionEnd: function(ev) {\n\t\tif (ev.propertyName === transformStyleName && this.scrolling) {\n\t\t\tconsole.log(\"%s::_onScrollTransitionEnd selected: %s\", this.cid, ev.target.cid);\n\t\t\tthis._setScrolling(false);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* toggle touch events\n\t/* --------------------------- */\n\n\t_togglePointerEvents: function(enable) {\n\t\t// console.log(\"%s::_togglePointerEvents\", this.cid, enable);\n\t\tif (this._pointerEventsEnabled == enable) return;\n\n\t\tthis._pointerEventsEnabled = enable;\n\t\tif (enable) {\n\t\t\tthis.touch.on(\"hpanstart hpanmove hpanend hpancancel\", this._onPointerEvent);\n\t\t\tthis.el.addEventListener(View.CLICK_EVENT, this._onClick, true);\n\t\t} else {\n\t\t\tthis.touch.off(\"hpanstart hpanmove hpanend hpancancel\", this._onPointerEvent);\n\t\t\tthis.el.removeEventListener(View.CLICK_EVENT, this._onClick, true);\n\t\t}\n\t},\n\n\t_onPointerEvent: function(ev) {\n\t\t// NOTE: https://github.com/hammerjs/hammer.js/pull/1118\n\t\tif (ev.srcEvent.type === 'pointercancel')\n\t\t\treturn;\n\n\t\tconsole.log(\"%s:[%s (%s)]:_onPointerEvent offs:%s [%s|%s==%s] [%s]\", this.cid, ev.type, ev.srcEvent.type,\n\t\t\tdirToStr(ev.offsetDirection),\n\t\t\tdirToStr(ev.direction),\n\t\t\tdirToStr(this.direction),\n\t\t\tdirToStr(ev.direction | this.direction),\n\t\t\t(ev.srcEvent.defaultPrevented ? \"prevented\" : \"-\"));\n\n\t\t// if (ev.direction & this.direction) {\n\t\tswitch (ev.type) {\n\t\t\t// case View.CLICK_EVENT:\n\t\t\t// \treturn this._onClick(ev);\n\t\t\t// case \"tap\":\n\t\t\t// \treturn this._onTap(ev);\n\t\t\tcase \"hpanstart\":\n\t\t\t\treturn this._onPanStart(ev);\n\t\t\tcase \"hpanmove\":\n\t\t\t\treturn this._onPanMove(ev);\n\t\t\tcase \"hpanend\":\n\t\t\t\treturn this._onPanFinal(ev);\n\t\t\tcase \"hpancancel\":\n\t\t\t\treturn this._onPanFinal(ev);\n\t\t}\n\t\t// }\n\t},\n\n\t/* --------------------------- *\n\t/* touch event: pan\n\t/* --------------------------- */\n\n\tgetViewAtPanDir: function(dir) {\n\t\t// return (dir & this._precedingDir) ? this._precedingView : this._followingView;\n\t\treturn (dir & this._followingDir) ? this._precedingView : this._followingView;\n\t},\n\n\t// _panCapturedOffset: 0,\n\n\t/** @param {Object} ev */\n\t_onPanStart: function(ev) {\n\t\tthis.selectFromView();\n\t\tthis.el.classList.add(\"panning\");\n\t\tthis._setScrolling(true);\n\t},\n\n\t/** @param {Object} ev */\n\t_onPanMove: function(ev) {\n\t\t// var delta = (this.direction & HORIZONTAL) ? ev.thresholdDeltaX : ev.thresholdDeltaY;\n\t\tvar delta = (this.direction & HORIZONTAL) ? ev.deltaX : ev.deltaY;\n\t\tvar view = this.getViewAtPanDir(ev.offsetDirection);\n\t\tvar cView = this._panCandidateView;\n\n\t\tif (cView !== view) {\n\t\t\tcView && cView.el.classList.remove(\"candidate\");\n\t\t\tview && view.el.classList.add(\"candidate\");\n\t\t\tthis._panCandidateView = view;\n\t\t}\n\t\tif (cView === (void 0)) {\n\t\t\tdelta *= Globals.HPAN_OUT_DRAG;\n\t\t}\n\n\t\tif (this._renderRafId !== -1) {\n\t\t\tthis.scrollBy(delta, Carousel.IMMEDIATE);\n\t\t\tthis.renderNow();\n\t\t} else {\n\t\t\tthis._scrollBy(delta, Carousel.IMMEDIATE);\n\t\t}\n\t},\n\n\t/** @param {Object} ev */\n\t_onPanFinal: function(ev) {\n\t\tvar scrollCandidate;\n\t\t// NOTE: this delta is used for determining selection, NOT for layout\n\t\t// var delta = (this.direction & HORIZONTAL) ? ev.thresholdDeltaX : ev.thresholdDeltaY;\n\t\tvar delta = (this.direction & HORIZONTAL) ? ev.deltaX : ev.deltaY;\n\n\t\tif ((ev.type == \"hpanend\")\n\t\t\t/* pan direction (current event) and offsetDirection (whole gesture) must match */\n\t\t\t&& (ev.direction ^ ev.offsetDirection ^ this.direction)\n\t\t\t// && (ev.direction & ev.offsetDirection & this.direction)\n\t\t\t/* gesture must overshoot selectThreshold */\n\t\t\t&& (Math.abs(delta) > this.selectThreshold)) {\n\t\t\t/* choose next scroll target */\n\t\t\tscrollCandidate = this.getViewAtPanDir(ev.offsetDirection);\n\t\t}\n\t\tthis._scrollCandidateView = scrollCandidate || (void 0);\n\n\t\tif (this._panCandidateView && (this._panCandidateView !== scrollCandidate)) {\n\t\t\tthis._panCandidateView.el.classList.remove(\"candidate\");\n\t\t}\n\t\tthis._panCandidateView = (void 0);\n\t\tthis.el.classList.remove(\"panning\");\n\n\t\tconsole.log(\"%s:[%s]:_onPanFinal thres:(%s>%s) dir:(e:%s o:%s c:%s)=%s\\n\", this.cid, ev.type,\n\t\t\tMath.abs(delta), this.selectThreshold,\n\t\t\tdirToStr(ev.direction),\n\t\t\tdirToStr(ev.offsetDirection),\n\t\t\tdirToStr(this.direction),\n\t\t\tdirToStr(ev.direction ^ ev.offsetDirection ^ this.direction),\n\t\t\tscrollCandidate ? (scrollCandidate.cid + \":\" + scrollCandidate.model.cid) : \"none\");\n\t\t// console.log(\"%s::_onPanFinal\", this.cid, ev);\n\n\t\tthis.scrollBy(0, Carousel.ANIMATED);\n\t\tthis.selectFromView();\n\n\t\t// if (this._renderRafId !== -1) {\n\t\t// \tthis.scrollBy(0, Carousel.ANIMATED);\n\t\t// \tthis.renderNow();\n\t\t// } else {\n\t\t// \tthis._scrollBy(0, Carousel.ANIMATED);\n\t\t// }\n\t},\n\n\t/* --------------------------- *\n\t/* touch event: tap\n\t/* --------------------------- */\n\n\t/** @type {int} In pixels */\n\t_tapGrow: 10,\n\n\tgetViewAtTapPos: function(posAlong, posAcross) {\n\t\tif ((this._tapAcrossBefore < posAcross) && (posAcross < this._tapAcrossAfter)) {\n\t\t\tif (posAlong < this._tapBefore) {\n\t\t\t\treturn this._precedingView;\n\t\t\t} else\n\t\t\tif (posAlong > this._tapAfter) {\n\t\t\t\treturn this._followingView;\n\t\t\t}\n\t\t}\n\t\treturn (void 0);\n\t},\n\n\t_onClick: function(ev) {\n\t\tconsole.log(\"%s::_onClick [%s]\", this.cid, ev.type, ev.defaultPrevented ? \"prevented\" : \"not-prevented\");\n\t\tthis._onTap(ev);\n\t},\n\n\t_onTap: function(ev) {\n\t\tif (ev.defaultPrevented) return;\n\n\t\tvar tapCandidate;\n\t\tvar targetView = View.findByDescendant(ev.target);\n\t\t// console.log(\"%s::_onTap %o\", this.cid, targetView.cid, ev.target);\n\t\t// if (!this.itemViews.contains(targetView)) {\n\t\t// \treturn;\n\t\t// }\n\t\tdo {\n\t\t\tif (this._selectedView === targetView) {\n\t\t\t\ttapCandidate = null;\n\t\t\t\tbreak;\n\t\t\t} else if (this === targetView.parentView) {\n\t\t\t\ttapCandidate = targetView;\n\t\t\t\tbreak;\n\t\t\t} else if (this === targetView) {\n\t\t\t\tvar bounds, tapX, tapY;\n\t\t\t\tbounds = this.el.getBoundingClientRect();\n\t\t\t\ttapX = (ev.type === \"tap\" ? ev.center.x : ev.clientX) - bounds.left;\n\t\t\t\ttapY = (ev.type === \"tap\" ? ev.center.y : ev.clientY) - bounds.top;\n\t\t\t\ttapCandidate = this.getViewAtTapPos(\n\t\t\t\t\tthis.dirProp(tapX, tapY),\n\t\t\t\t\tthis.dirProp(tapY, tapX)\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} while ((targetView = targetView.parentView))\n\n\t\tif (tapCandidate) {\n\t\t\tev.preventDefault();\n\t\t\t// ev.stopPropagation();\n\n\t\t\t// this._scrollCandidateView = tapCandidate;\n\t\t\t// this._setScrolling(true);\n\t\t\t// this.scrollBy(0, Carousel.ANIMATED);\n\t\t\t// this._scrollCandidateView.el.classList.add(\"candidate\");\n\t\t\t// this.selectFromView();\n\n\t\t\t//// NOT using internalSelection\n\t\t\t// this.triggerSelectionEvents(tapCandidate, false);\n\n\t\t\t// using internalSelection\n\t\t\tthis._scrollCandidateView = tapCandidate;\n\t\t\tthis._setScrolling(true);\n\t\t\tthis.scrollBy(0, Carousel.ANIMATED);\n\n\t\t\tthis.triggerSelectionEvents(tapCandidate, true);\n\t\t\t// this.renderNow();\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Private\n\t/* --------------------------- */\n\n\ttriggerSelectionEvents: function(view, internal) {\n\t\tif (view === (void 0) || this._internalSelection) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._internalSelection = !!internal;\n\t\tif (view === this.emptyView) {\n\t\t\tthis.trigger(\"view:select:none\");\n\t\t} else {\n\t\t\tthis.trigger(\"view:select:one\", view.model);\n\t\t}\n\t\tthis._internalSelection = false;\n\t},\n\n\tselectFromView: function() {\n\t\tif (this._scrollCandidateView) {\n\t\t\tthis.triggerSelectionEvents(this._scrollCandidateView, true);\n\t\t}\n\t\t// if (this._scrollCandidateView === (void 0)) {\n\t\t// \treturn;\n\t\t// }\n\t\t// var view = this._scrollCandidateView;\n\t\t// this.triggerSelectionEvents(view, true);\n\t},\n\n\tadjustToSelection: function() {\n\t\tvar m, i = this.collection.selectedIndex;\n\t\t// assume -1 < index < this.collection.length\n\t\tif (this.requireSelection) {\n\t\t\t(i == -1) && i++; // if selection is null (index -1), set _selectedView to first item (index 0)\n\t\t\tthis._selectedView = (m = this.collection.at(i)) && this.itemViews.findByModel(m);\n\t\t\tthis._precedingView = (m = this.collection.at(i - 1)) && this.itemViews.findByModel(m);\n\t\t\tthis._followingView = (m = this.collection.at(i + 1)) && this.itemViews.findByModel(m);\n\t\t} else {\n\t\t\tthis._selectedView = (m = this.collection.at(i)) ? this.itemViews.findByModel(m) : this.emptyView;\n\t\t\tthis._precedingView = m && ((m = this.collection.at(i - 1)) ? this.itemViews.findByModel(m) : this.emptyView);\n\t\t\tthis._followingView = (m = this.collection.at(i + 1)) && this.itemViews.findByModel(m);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Model listeners\n\t/* --------------------------- */\n\n\t/** @private */\n\t_onSelectOne: function(model) {\n\t\tif (model === this._selectedView.model) {\n\t\t\t// console.info(\"INTERNAL\");\n\t\t\treturn;\n\t\t}\n\t\tthis._onSelectAny(model);\n\t},\n\n\t/** @private */\n\t_onSelectNone: function() {\n\t\tif ((this.requireSelection ? this.itemViews.first() : this.emptyView) === this._selectedView) {\n\t\t\t// console.info(\"INTERNAL\");\n\t\t\treturn;\n\t\t}\n\t\tthis._onSelectAny();\n\t},\n\n\t/** @private */\n\t_onSelectAny: function(model) {\n\t\tthis._selectedView.el.classList.remove(\"selected\");\n\t\tthis.adjustToSelection();\n\t\tthis._selectedView.el.classList.add(\"selected\");\n\t\tif (this._scrollCandidateView) {\n\t\t\tthis._scrollCandidateView.el.classList.remove(\"candidate\");\n\t\t\tthis._scrollCandidateView = (void 0);\n\t\t}\n\n\t\tif (!this._internalSelection) {\n\t\t\tthis._setScrolling(true);\n\t\t\tthis.scrollBy(0, Carousel.ANIMATED);\n\t\t}\n\t},\n\n\t// _onDeselectAny: function (model) {},\n\n\t/** @private */\n\t_onReset: function() {\n\t\t// this._createChildren();\n\t\t// this.invalidateChildren();\n\t\tthis.requestRender(View.CHILDREN_INVALID | View.MODEL_INVALID);\n\t},\n\n\n\t/* --------------------------- *\n\t/* TEMP\n\t/* --------------------------- */\n\n\t// _scrollBy2: function (delta, skipTransitions) {\n\t// \tvar metrics, pos;\n\t// \tvar sMetrics = this.metrics[(this._scrollCandidateView || this._selectedView).cid];\n\t// \tvar cMetrics = this.metrics[(this._panCandidateView || this._selectedView).cid];\n\t//\n\t// \tthis.itemViews.each(function (view) {\n\t// \t\tmetrics = this.metrics[view.cid];\n\t// \t\tpos = Math.floor(this._getScrollOffset(delta, metrics, sMetrics, cMetrics));\n\t// \t\tview.el.style[transformProperty] = (this.direction & HORIZONTAL)?\n\t// \t\t\t\t\"translate3d(\" + pos + \"px,0,0)\" : \"translate3d(0,\" + pos + \"px,0)\";\n\t// \t\t\t\t// \"translate(\" + pos + \"px,0)\" : \"translate(0,\" + pos + \"px)\";\n\t// \t\t\t\t// \"translateX(\" + pos + \"px)\" : \"translateY(\" + pos + \"px)\";\n\t// \t}, this);\n\t// \tthis.el.classList.toggle(\"skip-transitions\", skipTransitions);\n\t// \tthis.selectFromView();\n\t// },\n\n\t// _getScrollOffset2: function (delta, mCurr, mSel, mCan) {\n\t// \tvar offset = 0;\n\t// \tvar posInner = mCurr.posInner - mSel.posInner + delta;\n\t//\n\t// \tif (posInner < -mSel.inner) {\n\t// \t\toffset = -(mCurr.before);\n\t// \t} else if (posInner > mSel.inner) {\n\t// \t\toffset = (mSel.after);\n\t// \t} else {\n\t// \t\tif (posInner < 0) {\n\t// \t\t\toffset = (mCurr.before) / (mCurr.inner) * posInner;\n\t// \t\t} else {\n\t// \t\t\toffset = (mSel.after) / (mCan.inner) * posInner;\n\t// \t\t}\n\t// \t}\n\t// \treturn posInner + offset;\n\t// },\n\n\t// captureSelectedOffset: function() {\n\t// \tvar val, view, cssval, m, mm;\n\t//\n\t// \tval = 0;\n\t// \tview = this._scrollCandidateView || this._selectedView;\n\t// \tcssval = getComputedStyle(view.el)[transformProperty];\n\t//\n\t// \tmm = cssval.match(/(matrix|matrix3d)\\(([^\\)]+)\\)/);\n\t// \tif (mm) {\n\t// \t\tm = mm[2].split(\",\");\n\t// \t\tif (this.direction & HORIZONTAL) {\n\t// \t\t\tval = m[mm[1]==\"matrix\"? 4 : 12];\n\t// \t\t} else {\n\t// \t\t\tval = m[mm[1]==\"matrix\"? 5 : 13];\n\t// \t\t}\n\t// \t\tval = parseFloat(val);\n\t// \t}\n\t//\n\t// \tconsole.log(\"%s::captureSelectedOffset\", this.cid, cssval, val, cssval.match(/matrix\\((?:\\d\\,){3}(\\d)\\,(\\d)|matrix3d\\((?:\\d\\,){11}(\\d)\\,(\\d)/));\n\t//\n\t// \treturn val;\n\t// },\n\n\t// _onScrollEnd: function(exec) {\n\t// \tthis._scrollEndCancellable = (void 0);\n\t// \t// this.el.classList.remove(\"disabled-changing\");\n\t// \tif (exec) {\n\t// \t\tthis._setScrolling(false);\n\t// \t\t// this.el.classList.remove(\"scrolling\");\n\t// \t\t// this.trigger(\"view:scrollend\");\n\t// \t\tconsole.log(\"%s::_onScrollEnd\", this.cid);\n\t// \t}\n\t// },\n\t// _onMouseDown: function(ev) {\n\t// \tif (this._scrolling) {\n\t// \t\tthis._panCapturedOffset = this.captureSelectedOffset();\n\t// \t\tconsole.log(\"%s::events[mousedown] scrolling interrupted (pos %f)\", this.cid, this._panCapturedOffset);\n\t// \t}\n\t// },\n\t// _onMouseUp:function(ev) {\n\t// \tthis._panCapturedOffset = 0;\n\t// },\n\n};\n\nif (DEBUG) {\n\tCarouselProto._logFlags = \"\";\n}\n\nmodule.exports = Carousel = View.extend(CarouselProto, Carousel);\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return container.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)));\n},\"useData\":true});\n",
    "/**\n * @module app/view/component/CollectionStack\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/** @type {string} */\nconst viewTemplate = require(\"./CollectionStack.hbs\");\n\n/**\n * @constructor\n * @type {module:app/component/CollectionStack}\n */\nmodule.exports = View.extend({\n\n\t/** @override */\n\tcidPrefix: \"stack\",\n\t/** @override */\n\ttagName: \"div\",\n\t/** @override */\n\tclassName: \"stack\",\n\t/** @override */\n\ttemplate: viewTemplate,\n\n\tevents: {\n\t\t\"transitionend\": function(ev) {\n\t\t\t// console.log(\"%s::transitionend [invalid: %s] [transition: %s]\", this.cid, this._contentInvalid, (this._skipTransitions? \"skip\": \"run\"), ev.target.id, ev.target.className);\n\t\t\tthis._renderContent();\n\t\t}\n\t},\n\n\tinitialize: function(options) {\n\t\tthis._enabled = true;\n\t\tthis._skipTransitions = true;\n\t\tthis._contentInvalid = true;\n\n\t\toptions.template && (this.template = options.template);\n\t\tthis.content = document.createElement(\"div\");\n\t\tthis.content.className = \"stack-item\";\n\t\tthis.el.appendChild(this.content);\n\n\t\tthis.listenTo(this.collection, \"select:one select:none\", this._onSelectChange);\n\t},\n\n\tsetEnabled: function(enabled) {\n\t\tif (this._enabled !== enabled) {\n\t\t\tthis._enabled = enabled;\n\t\t\tthis.el.classList.toggle(\"disabled\", !this._enabled);\n\t\t}\n\t},\n\n\t_onSelectChange: function(item) {\n\t\tif (this._renderedItem === this.collection.selected) {\n\t\t\tthrow new Error(\"change event received but item is identical\");\n\t\t}\n\t\tthis._renderedItem = this.collection.selected;\n\n\t\tthis._contentInvalid = true;\n\t\tthis.render();\n\t},\n\n\t/* --------------------------- *\n\t/* render\n\t/* --------------------------- */\n\n\trender: function() {\n\t\tif (this._skipTransitions) {\n\t\t\t// execute even if content has not changed to apply styles immediately\n\t\t\tthis._skipTransitions = false;\n\t\t\tthis.el.classList.add(\"skip-transitions\");\n\t\t\tthis.setImmediate(function() {\n\t\t\t\tthis.el.classList.remove(\"skip-transitions\");\n\t\t\t});\n\n\t\t\t// render changed content immediately\n\t\t\tif (this._contentInvalid) {\n\t\t\t\tthis._renderContent();\n\t\t\t}\n\t\t} else {\n\t\t\t// else remove 'current' class and render on transitionend\n\t\t\tif (this._contentInvalid) {\n\t\t\t\tthis.content.classList.remove(\"current\");\n\t\t\t\t// this.content.className = \"stack-item\";\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\t_renderContent: function() {\n\t\tif (this._contentInvalid) {\n\t\t\tthis._contentInvalid = false;\n\t\t\tvar item = this.collection.selected;\n\t\t\tthis.content.innerHTML = item ? this.template(item.toJSON()) : \"\";\n\t\t\tthis.content.classList.add(\"current\");\n\t\t\t// this.content.className = \"stack-item current\";\n\t\t}\n\t},\n});\n",
    "/**\n/* @module app/view/component/FilterableListView\n/*/\n\n/** @type {module:backbone.babysitter} */\nconst Container = require(\"backbone.babysitter\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/component/ClickableRenderer} */\nconst ClickableRenderer = require(\"app/view/render/ClickableRenderer\");\n/** @type {module:utils/prefixedProperty} */\nconst prefixedProperty = require(\"utils/prefixedProperty\");\n/** @type {module:utils/css/getBoxEdgeStyles} */\nconst getBoxEdgeStyles = require(\"utils/css/getBoxEdgeStyles\");\n/** @type {module:utils/array/difference} */\nconst diff = require(\"utils/array/difference\");\n/** @type {module:utils/promise/resolveAll} */\nconst resolveAll = require(\"utils/promise/resolveAll\");\n/** @type {module:utils/promise/rejectAll} */\nconst rejectAll = require(\"utils/promise/rejectAll\");\n\n// var resolveAll = function(pp, result) {\n// \tif (pp.length != 0) {\n// \t\tpp.forEach(function(p, i, a) {\n// \t\t\tp.resolve(result);\n// \t\t\ta[i] = null;\n// \t\t});\n// \t\tpp.length = 0;\n// \t}\n// \treturn pp;\n// };\n\n// var rejectAll = function(pp, reason) {\n// \tif (pp.length != 0) {\n// \t\tpp.forEach(function(p, i, a) {\n// \t\t\tp.reject(reason);\n// \t\t\ta[i] = null;\n// \t\t});\n// \t\tpp.length = 0;\n// \t}\n// \treturn pp;\n// };\n\n/** @type {module:app/control/Globals.TRANSLATE_TEMPLATE} */\nconst translateCssValue = require(\"app/control/Globals\").TRANSLATE_TEMPLATE;\n\n/** @const */\nvar transformProp = prefixedProperty(\"transform\");\n\n/**\n/* @constructor\n/* @type {module:app/view/component/FilterableListView}\n/*/\nvar FilterableListView = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"filterableList\",\n\t/** @override */\n\ttagName: \"ul\",\n\t/** @override */\n\tclassName: \"list selectable filterable\",\n\n\t/** @override */\n\tdefaults: {\n\t\tcollapsed: true,\n\t\tfilterFn: function() {\n\t\t\treturn true;\n\t\t},\n\t\trenderer: ClickableRenderer.extend({\n\t\t\t/** @override */\n\t\t\tcidPrefix: \"listItem\",\n\t\t\t/** @override */\n\t\t\tclassName: \"list-item list-node\",\n\t\t}),\n\t},\n\n\t/** @override */\n\tproperties: {\n\t\tcollapsed: {\n\t\t\tget: function() {\n\t\t\t\treturn this._collapsed;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tthis._setCollapsed(value);\n\t\t\t}\n\t\t},\n\t\tselectedItem: {\n\t\t\tget: function() {\n\t\t\t\treturn this._selectedItem;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tthis._setSelection(value);\n\t\t\t}\n\t\t},\n\t\tfilteredItems: {\n\t\t\tget: function() {\n\t\t\t\treturn this._filteredItems;\n\t\t\t}\n\t\t},\n\t\tmetrics: {\n\t\t\tget: function() {\n\t\t\t\treturn this._metrics;\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\tevents: {\n\t\t\"transitionend .list-node\": function(ev) {\n\t\t\t// if (!ev.target.classList.contains(\"list-node\")) {}\n\t\t\tif (ev.propertyName == transformProp\n\t\t\t\t&& ev.target.parentElement === this.el) {\n\t\t\t\tthis._changedPosNum--;\n\t\t\t\t// console.log(\"%s:[%s (%s)] [%s]\", this.cid, ev.type, ev.target.className, ev.propertyName, this._changedPosNum, ev);\n\t\t\t}\n\t\t\tif (!this._collapsedChanging) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._changedPosNum == 0) {\n\t\t\t\t// if ((ev.propertyName == transformProp) ||\n\t\t\t\t// \t(ev.propertyName == \"visibility\")) {\n\t\t\t\tconsole.log(\"%s:[%s .list-item] [%s] collapsed-changing end (resolving %s promises)\", this.cid, ev.type, ev.propertyName, this._collapsePromises.length);\n\t\t\t\tthis._collapsedChanging = false;\n\t\t\t\tthis.el.classList.remove(\"collapsed-changing\");\n\t\t\t\tresolveAll(this._collapsePromises, this);\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tthis._filteredItems = [];\n\t\tthis._filteredIncoming = [];\n\t\tthis._filteredOutgoing = [];\n\n\t\tthis._metrics = {};\n\t\tthis._itemMetrics = [];\n\t\tthis._collapsePromises = [];\n\t\tthis.itemViews = new Container();\n\n\t\t_.defaults(options, this.defaults);\n\t\tthis.renderer = options.renderer;\n\t\tthis._filterFn = options.filterFn;\n\n\t\t// this.computeFilter();\n\t\t// this.collection.each(this.createItemView, this);\n\n\t\tthis.collection.each(this.createItemView, this);\n\t\tthis._setSelection(this.collection.selected);\n\t\tthis._setCollapsed(options.collapsed);\n\t\tthis.refreshFilter();\n\t\t// this.skipTransitions = true;\n\t\t// this.renderNow();\n\n\t\t// this.listenTo(this.collection, \"select:one select:none\", this._setSelection);\n\t\tthis.listenTo(this.collection, \"reset\", function() {\n\t\t\tthis._allItems = null;\n\t\t\tthrow new Error(\"not implemented\");\n\t\t});\n\n\t\t// will trigger on return if this.el is already attached\n\t\t// this.skipTransitions = true;\n\t\t// this.el.classList.add(\"skip-transitions\");\n\t\t// this.requestRender(View.ALL_INVALID);\n\n\t\tconsole.log(\"%s::initialize attached: %o\", this.cid, this.attached);\n\n\t\tthis.once(\"view:attached\", function(view) {\n\t\t\tconsole.log(\"%s::initialize -> [view:attached] attached: %o\", view.cid, view.attached);\n\t\t\t// view.requestRender(View.ALL_INVALID).renderNow();\n\t\t\tview.skipTransitions = true;\n\t\t\tview.el.classList.add(\"skip-transitions\");\n\t\t\tview.setImmediate(function() {\n\t\t\t\t// this.skipTransitions = true;\n\t\t\t\tview.renderNow();\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Get an array with a collection contens\n\t * @private\n\t */\n\t_getAllItems: function() {\n\t\treturn this._allItems || (this._allItems = this.collection.slice());\n\t},\n\n\t/* --------------------------- *\n\t/* Transition promises\n\t/* --------------------------- */\n\n\t_whenCollapseChangeEnds: function() {\n\t\tif (this._collapsedChanged) {\n\t\t\tvar view = this;\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\tview.on(\"view:render:after\", resolve);\n\t\t\t})\n\t\t} else {\n\t\t\treturn Promise.resolve(this);\n\t\t}\n\t},\n\n\twhenCollapseChangeEnds: function() {\n\t\tvar d, p, pp;\n\t\tif (this._collapsedChanging || this._collapsedChanged) {\n\t\t\td = {};\n\t\t\tp = new Promise(function(resolve, reject) {\n\t\t\t\td.resolve = resolve;\n\t\t\t\td.reject = reject;\n\t\t\t});\n\t\t\tpp = this._collapsePromises;\n\t\t\tpp.push(d);\n\t\t} else {\n\t\t\tp = Promise.resolve(this);\n\t\t}\n\t\treturn p;\n\t},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\t/** @override */\n\trenderFrame: function(tstamp, flags) {\n\t\t// if (DEBUG) {\n\t\t// \tvar changed = [];\n\t\t// \tthis._collapsedChanged && changed.push(\"collapsed\");\n\t\t// \tthis._selectionChanged && changed.push(\"selection\");\n\t\t// \tthis._filterChanged && changed.push(\"filter\");\n\t\t// \tconsole.log(\"%s::renderFrame [%s]\", this.cid, changed.join(\" \"));\n\t\t// }\n\n\t\t// collapsed transition flag\n\t\tif (this._collapsedChanging) {\n\t\t\tconsole.warn(\"%s::renderFrame collapsed tx interrupted\", this.cid);\n\t\t\tthis._collapsedChanging = false;\n\t\t\tthis.el.classList.remove(\"collapsed-changing\");\n\t\t\trejectAll(this._collapsePromises, this);\n\t\t}\n\t\tif (this.skipTransitions) {\n\t\t\tthis.el.classList.add(\"skip-transitions\");\n\t\t\t// this.requestAnimationFrame(function() {\n\t\t\tthis.setImmediate(function() {\n\t\t\t\tthis.skipTransitions = false;\n\t\t\t\tthis.el.classList.remove(\"skip-transitions\");\n\t\t\t});\n\t\t}\n\n\t\tif (this._collapsedChanged) {\n\t\t\tthis._collapsedChanged = false;\n\t\t\tflags |= View.SIZE_INVALID;\n\t\t\tthis.el.classList.toggle(\"collapsed\", this._collapsed);\n\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tthis._collapsedChanging = false;\n\t\t\t\t// resolveAll(this._collapsePromises, this.el);\n\t\t\t\tthis.once(\"view:render:after\", function(view) {\n\t\t\t\t\tthis._changedPosNum = 0;\n\t\t\t\t\tresolveAll(view._collapsePromises, view);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._collapsedChanging = true;\n\t\t\t\tthis.el.classList.add(\"collapsed-changing\");\n\t\t\t\t// this will be resolved on transitionend\n\t\t\t}\n\t\t\tconsole.log(\"%s:[collapse changed] %s promises\", this.cid,\n\t\t\t\tthis._collapsePromises.length,\n\t\t\t\tthis._collapsedChanging ? \"resolving now\" : \"resolving on transitionend\"\n\t\t\t);\n\t\t}\n\n\t\tif (this._selectionChanged) {\n\t\t\tthis._selectionChanged = false;\n\t\t\tflags |= View.LAYOUT_INVALID;\n\t\t\tthis.renderSelection(this.collection.selected, this.collection.lastSelected);\n\t\t}\n\n\t\tif (this._filterChanged) {\n\t\t\tthis._filterChanged = false;\n\t\t\tflags |= View.LAYOUT_INVALID;\n\t\t\tvar lastFilteredItems = this.filteredItems;\n\t\t\t// this._printStats(lastFilteredItems);\n\t\t\tthis.computeFilter();\n\t\t\tthis.applyFilter();\n\t\t\tif (DEBUG) {\n\t\t\t\tthis._printStats(lastFilteredItems);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & View.SIZE_INVALID) {\n\t\t\tthis.measure(); // NOTE: measures children\n\t\t}\n\n\t\tif (flags & (View.LAYOUT_INVALID | View.SIZE_INVALID)) {\n\t\t\tthis.renderLayout();\n\t\t}\n\t},\n\n\tmeasure: function() {\n\t\t// var i, ii, el, els, m, mm;\n\t\t// els = this.el.children;\n\t\t// ii = els.length;\n\t\t// mm = this._itemMetrics;\n\t\t// for (i = 0; i < ii; i++) {\n\t\t// \tmm[i] = _.pick(els[i], \"offsetTop\", \"offsetHeight\");\n\t\t// }\n\n\t\tthis._metrics = getBoxEdgeStyles(this.el, this._metrics);\n\n\t\t// var itemEl, itemView, baseline = 0;\n\t\t// if (itemEl = this.el.querySelector(\".list-item:not(.excluded) .label\")) {\n\t\t// \t// itemView = this.itemViews.findByCid(itemEl.cid);\n\t\t// \tvar elA = itemEl, elB = itemEl.parentElement;\n\t\t// \tvar yA = elA.offsetTop,\n\t\t// \t\thA = elA.offsetHeight,\n\t\t// \t\tyB = elB.offsetTop,\n\t\t// \t\thB = elB.offsetHeight;\n\t\t// \tbaseline = ((yA + hA) - (yB + hB));\n\t\t// \tconsole.log(\"%s::measure fontSize: %spx (%s+%s)-(%s+%s)=%s\", this.cid, this._metrics.fontSize,\n\t\t// \t\tyA, hA, yB, hB, baseline\n\t\t// \t);\n\t\t// }\n\n\t\tthis.itemViews.forEach(function(view) {\n\t\t\tif (!view._metrics) view._metrics = {};\n\t\t\t// view._metrics.baseline = this._metrics.fontSize - baseline;\n\t\t\tview._metrics.offsetTop = view.el.offsetTop;\n\t\t\tview._metrics.offsetHeight = view.el.offsetHeight;\n\t\t\tview._metrics.offsetLeft = view.el.offsetLeft;\n\t\t\tview._metrics.offsetWidth = view.el.offsetWidth;\n\t\t\tif (!this._collapsed && view.label) {\n\t\t\t\tview._metrics.textLeft = view.label.offsetLeft;\n\t\t\t\tview._metrics.textWidth = view.label.offsetWidth;\n\t\t\t} else {\n\t\t\t\tview._metrics.textLeft = view._metrics.offsetLeft;\n\t\t\t\tview._metrics.textWidth = view._metrics.offsetWidth;\n\t\t\t}\n\t\t}, this);\n\n\t\t// this._metrics.baseline = this._metrics.fontSize - baseline;\n\t},\n\n\trenderLayout: function() {\n\t\tvar posX, posY, lastX, lastY;\n\t\tposX = this._metrics.paddingLeft;\n\t\tposY = this._metrics.paddingTop;\n\n\t\tthis._changedPosNum = 0;\n\t\t// use HTMLElement.children to keep layout order\n\t\tfor (var i = 0, ii = this.el.children.length; i < ii; i++) {\n\t\t\tvar view = this.itemViews.findByCid(this.el.children[i].cid);\n\t\t\tlastX = view.transform.tx;\n\t\t\tlastY = view.transform.ty;\n\t\t\tif (((this.collection.selected && !view.model.selected) ||\n\t\t\t\t\tview.el.classList.contains(\"excluded\")) && this._collapsed) {\n\t\t\t\tview.transform.tx = posX;\n\t\t\t\tview.transform.ty = posY;\n\t\t\t} else {\n\t\t\t\tif (view._metrics.offsetHeight == 0) {\n\t\t\t\t\tposY -= view._metrics.offsetTop;\n\t\t\t\t}\n\t\t\t\tview.transform.tx = posX;\n\t\t\t\tview.transform.ty = posY;\n\t\t\t\tposY += view._metrics.offsetHeight + view._metrics.offsetTop;\n\t\t\t}\n\t\t\tview.el.style[transformProp] = translateCssValue(view.transform.tx, view.transform.ty);\n\t\t\tif (view.transform.tx != lastX || view.transform.ty != lastY) {\n\t\t\t\tthis._changedPosNum++;\n\t\t\t}\n\t\t}\n\n\t\t// posY += this._metrics.paddingBottom;\n\t\tthis._metrics.height = Math.max(0, posY + this._metrics.paddingBottom);\n\t\tthis.el.style.height = this._metrics.height + \"px\";\n\t\t// this.el.style.height = (posY > 0) ? posY + \"px\" : \"\";\n\t},\n\n\t/* --------------------------- *\n\t/* Child views\n\t/* --------------------------- */\n\n\t/** @private */\n\tcreateItemView: function(item, index) {\n\t\tvar view = new this.renderer({\n\t\t\tmodel: item,\n\t\t\tel: this.el.querySelector(\".list-item[data-id=\\\"\" + item.id + \"\\\"]\")\n\t\t});\n\t\t// item.set(\"excluded\", false, { silent: true });\n\t\t// view.listenTo(item, \"change:excluded\", function(item, newVal) {\n\t\t// \t// console.log(arguments);\n\t\t// \tif (this.el.classList.contains(\"excluded\") !== newVal) {\n\t\t// \t\tconsole.warn(\"%s:[change:excluded] m:%o css: %o\", this.cid, newVal, this.el.classList.contains(\"excluded\"));\n\t\t// \t}\n\t\t// \t// this.el.classList.toggle(\"excluded\", excluded);\n\t\t// });\n\t\tthis.listenTo(view, \"renderer:click\", this._onRendererClick);\n\t\tthis.itemViews.add(view);\n\t\treturn view;\n\t},\n\n\t/** @private */\n\t_onRendererClick: function(item, ev) {\n\t\tif (this._collapsedChanging\n\t\t\t|| (this._collapsed && item.get(\"excluded\"))) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.collection.selected !== item) {\n\t\t\tthis.trigger(\"view:select:one\", item);\n\t\t} else {\n\t\t\tif (ev.altKey) {\n\t\t\t\tthis.trigger(\"view:select:none\");\n\t\t\t} else {\n\t\t\t\tthis.trigger(\"view:select:same\", item);\n\t\t\t}\n\t\t\t// this.trigger(\"view:select:none\");\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Collapsed\n\t/* --------------------------- */\n\n\t/** @private */\n\t_collapsed: undefined,\n\n\t/**\n\t * @param {Boolean}\n\t */\n\t_setCollapsed: function(collapsed) {\n\t\tif (collapsed !== this._collapsed) {\n\t\t\tthis._collapsed = collapsed;\n\t\t\tthis._collapsedChanged = true;\n\t\t\tthis.requestRender();\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Selection\n\t/* --------------------------- */\n\n\t/** @private */\n\t_selectedItem: undefined,\n\n\t/** @param {Backbone.Model|null} */\n\t_setSelection: function(item) {\n\t\tif (item !== this._selectedItem) {\n\t\t\tthis._selectedItem = item;\n\t\t\tthis._selectionChanged = true;\n\t\t\tthis.requestRender(View.MODEL_INVALID);\n\t\t}\n\t},\n\n\t/** @private */\n\trenderSelection: function(newItem, oldItem) {\n\t\tvar view;\n\t\tif (oldItem) {\n\t\t\tview = this.itemViews.findByModel(oldItem);\n\t\t\tview.el.classList.remove(\"selected\");\n\t\t\t// view.label.classList.remove(\"color-fg\");\n\t\t\t// view.label.classList.remove(\"color-reverse\");\n\t\t}\n\t\tif (newItem) {\n\t\t\tview = this.itemViews.findByModel(newItem);\n\t\t\tview.el.classList.add(\"selected\");\n\t\t\t// view.label.classList.add(\"color-fg\");\n\t\t\t// view.label.classList.add(\"color-reverse\");\n\t\t}\n\t\tthis.el.classList.toggle(\"has-selected\", this.selectedItem !== null);\n\t},\n\n\t/* --------------------------- *\n\t/* Filter\n\t/* --------------------------- */\n\n\trefreshFilter: function() {\n\t\tif (this._filterFn) {\n\t\t\tthis._filterChanged = true;\n\t\t\tthis.requestRender(View.MODEL_INVALID);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Filter impl 2\n\t/* --------------------------- */\n\n\tcomputeFilter: function() {\n\t\tvar newItems, oldItems;\n\t\tvar hasNew, hasOld;\n\t\tthis._filteredIncoming.length = 0;\n\t\tthis._filteredOutgoing.length = 0;\n\n\t\tnewItems = this._filterFn ? this.collection.filter(this._filterFn, this) : this._getAllItems();\n\t\toldItems = this._filteredItems;\n\t\thasNew = !!(newItems && newItems.length);\n\t\thasOld = !!(oldItems && oldItems.length);\n\t\t// NOTE: diff third arg is destination array\n\t\tif (hasNew) {\n\t\t\t// incoming exclusions\n\t\t\tdiff((hasOld ? oldItems : this._getAllItems()), newItems, this._filteredIncoming);\n\t\t\t// this._filteredIncoming.forEach(function(item) {\n\t\t\t// \titem.set(\"excluded\", true);\n\t\t\t// });\n\t\t}\n\t\tif (hasOld) {\n\t\t\t// outgoing exclusions\n\t\t\tdiff((hasNew ? newItems : this._getAllItems()), oldItems, this._filteredOutgoing);\n\t\t\t// this._filteredOutgoing.forEach(function(item) {\n\t\t\t// \titem.set(\"excluded\", false);\n\t\t\t// });\n\t\t}\n\t\t// console.log(\"%s::renderFilterFn\", this.cid, newItems);\n\t\tthis._filteredItems = newItems;\n\t},\n\n\tapplyFilter: function() {\n\t\t// this.itemViews.forEach(function(view) {\n\t\t// \tview.el.classList.toggle(\"excluded\", view.model.get(\"excluded\"));\n\t\t// });\n\t\tthis._filteredIncoming.forEach(function(item) {\n\t\t\tthis.itemViews.findByModel(item).el.classList.add(\"excluded\");\n\t\t\titem.set(\"excluded\", true);\n\t\t}, this);\n\t\tthis._filteredOutgoing.forEach(function(item) {\n\t\t\tthis.itemViews.findByModel(item).el.classList.remove(\"excluded\");\n\t\t\titem.set(\"excluded\", false);\n\t\t}, this);\n\n\t\tthis.el.classList.toggle(\"has-excluded\", this.filteredItems.length > 0);\n\t},\n\n\t/* --------------------------- *\n\t/* Filter impl 1\n\t/* --------------------------- */\n\n\t/*\n\tcomputeFilter_1: function() {\n\t\tvar items = this._filterFn ? this.collection.filter(this._filterFn, this) : this._getAllItems();\n\t\tthis.renderFilters(items, this._filteredItems);\n\t\tthis._filteredItems = items;\n\t},\n\n\trenderFilters: function(newItems, oldItems) {\n\t\tvar hasNew = !!(newItems && newItems.length);\n\t\tvar hasOld = !!(oldItems && oldItems.length);\n\t\tvar inExcl = [];\n\t\tvar outExcl = [];\n\n\t\t// console.log(\"%s::renderFilterFn\", this.cid, newItems);\n\t\t// NOTE: diff third arg is destination array\n\t\tif (hasNew) {\n\t\t\tdiff((hasOld ? oldItems : this._getAllItems()), newItems, inExcl)\n\t\t\t// .forEach(function(item) {\n\t\t\t// \tthis.itemViews.findByModel(item).el.classList.add(\"excluded\");\n\t\t\t// \titem.set(\"excluded\", true);\n\t\t\t// }, this);\n\t\t}\n\t\tif (hasOld) {\n\t\t\tdiff((hasNew ? newItems : this._getAllItems()), oldItems, outExcl)\n\t\t\t// .forEach(function(item) {\n\t\t\t// \tthis.itemViews.findByModel(item).el.classList.remove(\"excluded\");\n\t\t\t// \titem.set(\"excluded\", false);\n\t\t\t// }, this);\n\t\t}\n\t\tthis._filteredIncoming = inExcl;\n\t\tthis._filteredOutgoing = outExcl;\n\t\t// this.el.classList.toggle(\"has-excluded\", hasNew);\n\t\t// this.applyFilter();\n\t},\n\t*/\n\n\t// computeFiltered: function() {\n\t// \tthis._filterResult = this.collection.map(this._filterFn, this);\n\t// },\n\t//\n\t// renderFiltered: function() {\n\t// \tthis.collection.forEach(function(item, index) {\n\t// \t\tthis.itemViews.findByModel(item).el.classList.toggle(\"excluded\", !this._filterResult[index]);\n\t// \t}, this);\n\t// },\n\n});\n\nif (DEBUG) {\n\tFilterableListView.prototype._logFlags = [\n\t\t\"view.render\",\n\t\t// \"view.trace\"\n\t].join(\" \");\n\n\tFilterableListView.prototype._printStats = function(lastFilteredItems) {\n\t\tif (this._logFlags[\"view.trace\"]) console.log(\"%s::renderFrame %s filtered:%o(=%o)/%o (changed:%o, in:%o, out:%o)\", this.cid,\n\t\t\tthis.filteredItems.length > 0 ? \"has\" : \"has not\",\n\t\t\tthis.filteredItems.length,\n\t\t\tlastFilteredItems ? (this.filteredItems.length + this._filteredIncoming.length) - this._filteredOutgoing.length : this.filteredItems.length,\n\t\t\tthis.collection.length,\n\t\t\t(this._filteredIncoming.length + this._filteredOutgoing.length),\n\t\t\tthis._filteredIncoming.length,\n\t\t\tthis._filteredOutgoing.length);\n\t};\n}\n\nmodule.exports = FilterableListView;\n",
    "/**\n * @module app/view/component/GraphView\n */\n\n/** @type {Function} */\nconst Color = require(\"color\");\n\n/** @type {module:app/view/base/CanvasView} */\nconst CanvasView = require(\"app/view/base/CanvasView\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n\n/** @type {module:utils/canvas/calcArcHConnector} */\nconst calcArcHConnector = require(\"utils/canvas/calcArcHConnector\");\n\n/** @type {module:utils/canvas/CanvasHelper} */\nconst CanvasHelper = require(\"utils/canvas/CanvasHelper\");\n\n/** @type {module:utils/geom/inflateRect} */\nconst inflateRect = require(\"utils/geom/inflateRect\");\n\n// /** @type {module:utils/dom/getAbsoluteClientRect} */\n// var getAbsoluteClientRect = require(\"utils/dom/getAbsoluteClientRect\");\n\n\n// var BEZIER_CIRCLE = 0.551915024494;\n// var MIN_CANVAS_RATIO = 2;\n// var PI2 = Math.PI * 2;\n\nvar styleBase = {\n\tlineCap: \"butt\", // round, butt, square\n\tlineWidth: 0.75,\n\tlineDashOffset: 0,\n\tsetLineDash: [[]],\n\t// radiusBase: 2,\n\t// /* factored to rem unit */ //6,\n\t// radiusIncrement: 0.21, //3, //0.25,\n\t// /* uses lineWidth multiplier */\n\t// outlineWidth: 3,\n\t// /* uses lineWidth multiplier */\n\t// arrowSize: 0.3,\n};\nvar paramsBase = {\n\tradiusBase: 1.25,\n\t/* factored to rem unit */ //6,\n\tradiusIncrement: 0.21, //3, //0.25,\n\t/* uses lineWidth multiplier */\n\toutlineWidth: 3,\n\t/* factored to rem unit */\n\tarrowSize: 0.4, //0.3,\n};\n\n// var overlayStyleBase = {\n// \tglobalAlpha: 0.75,\n// \tglobalCompositeOperation: \"destination-out\",\n// \tlineWidth: 4,\n// \tlineJoin: \"round\",\n// \ttextBaseline: \"top\",\n// \ttextAlign: \"left\",\n// };\n\nif (DEBUG) {\n\t/* eslint-disable no-unused-vars */\n\tvar _dStyles = {\n\t\tdefaults: {\n\t\t\tglobalAlpha: 0.66,\n\t\t\tlineWidth: 0,\n\t\t\tfillStyle: \"transparent\",\n\t\t\tstrokeStyle: \"transparent\",\n\t\t\tlineDashOffset: 0,\n\t\t\tsetLineDash: [[]]\n\t\t}\n\t};\n\n\t/* Stroke */\n\t[\n\t\t\"red\", \"salmon\", \"sienna\",\n\t\t\"green\", \"yellowgreen\", \"olive\",\n\t\t\"blue\", \"lightskyblue\", \"midnightblue\",\n\t\t\"grey\", \"silver\"\n\t]\n\t.forEach(function(colorName) {\n\t\tvar rgbaValue = Color(colorName).alpha(0.75).string();\n\n\t\t_dStyles[colorName] = _.defaults({\n\t\t\tlineWidth: 0.75,\n\t\t\tstrokeStyle: rgbaValue,\n\t\t}, _dStyles[\"defaults\"]);\n\n\t\t_dStyles[colorName + \"_dashed\"] = _.defaults({\n\t\t\tsetLineDash: [[4, 2]],\n\t\t\tstrokeStyle: rgbaValue,\n\t\t}, _dStyles[\"defaults\"]);\n\n\t\t_dStyles[colorName + \"_thick\"] = _.defaults({\n\t\t\tlineWidth: 5,\n\t\t\tstrokeStyle: rgbaValue,\n\t\t}, _dStyles[\"defaults\"]);\n\n\t\t_dStyles[colorName + \"_fill\"] = _.defaults({\n\t\t\tfillStyle: rgbaValue\n\t\t}, _dStyles[\"defaults\"]);\n\t})\n\t/* eslint-enable no-unused-vars */\n}\n\nvar getRectDirX = function(r1, r2) {\n\tif (r1.right < r2.left) {\n\t\treturn 1;\n\t}\n\tif (r2.right < r1.left) {\n\t\treturn -1;\n\t}\n\treturn 0;\n};\n\n/**\n * @constructor\n * @type {module:app/view/component/GraphView}\n */\nvar GraphView = CanvasView.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"graph\",\n\t/** @override */\n\ttagName: \"canvas\",\n\t/** @override */\n\tclassName: \"graph\",\n\n\tdefaultKey: \"a2b\",\n\n\tdefaults: {\n\t\tvalues: {\n\t\t\ta2b: 0,\n\t\t\tb2a: 0,\n\t\t},\n\t\tmaxValues: {\n\t\t\ta2b: 1,\n\t\t\tb2a: 1,\n\t\t},\n\t\t// useOpaque: true,\n\t\t// labelFn: function(value, max) {\n\t\t// \treturn ((value / max) * 100) | 0;\n\t\t// },\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tCanvasView.prototype.initialize.apply(this, arguments);\n\n\t\tthis._listA = options.listA;\n\t\tthis._listB = options.listB;\n\t\tthis._a2b = {\n\t\t\tsrcView: options.listA,\n\t\t\tdestView: options.listB,\n\t\t\ts: _.defaults({\n\t\t\t\tlineWidth: 0.7, //1.25\n\t\t\t\t// radiusIncrement: 0.25,\n\t\t\t}, styleBase, paramsBase),\n\t\t\tp: _.defaults({}, paramsBase),\n\t\t\tstrokeStyleFn: (fg, bg, ln) => Color(ln).mix(bg, 0.1).hex()\n\t\t};\n\t\tthis._b2a = {\n\t\t\tsrcView: options.listB,\n\t\t\tdestView: options.listA,\n\t\t\ts: _.defaults({\n\t\t\t\tlineWidth: 0.7,\n\t\t\t\t// arrowSize: 0.25,\n\t\t\t\t// radiusIncrement: 0,\n\t\t\t\t// outlineWidth: 0,\n\t\t\t}, styleBase, paramsBase),\n\t\t\tp: _.defaults({}, paramsBase),\n\t\t\tstrokeStyleFn: (fg, bg, ln) => Color(fg).mix(bg, 0.4).hex()\n\t\t};\n\n\t\t// this.listenTo(this._a2b.srcView.collection, \"view:select:one view:select:none\", function(item) {\n\t\t// \tthis._a2b.connectorsOut = this._a2b.connectors;\n\t\t// \tthis._a2b.connectors = null;\n\t\t// });\n\t\t//\n\t\t// this.listenTo(this._b2a.srcView.collection, \"view:select:one view:select:none\", function(item) {\n\t\t// \tthis._b2a.connectorsOut = this._b2a.connectors;\n\t\t// \tthis._b2a.connectors = null;\n\t\t// });\n\n\t\t// this.listenTo(this, \"view:render:before\", this._beforeViewRender);\n\n\t\t// this._traceScroll = _.debounce(this.__raceScroll, 100, false);\n\n\t\t// var viewportChanged = function(ev) {\n\t\t// \tconsole.log(\"%s:[%s]\", this.cid, ev.type);\n\t\t//\n\t\t// \t// this._traceScroll(ev.type);\n\t\t// \t// this._labelOverlays = null;\n\t\t// \tthis.invalidate(CanvasView.LAYOUT_INVALID | CanvasView.SIZE_INVALID);\n\t\t// \t// this.requestRender(CanvasView.LAYOUT_INVALID | CanvasView.SIZE_INVALID);\n\t\t// \t// this.requestRender().renderNow();\n\t\t// }.bind(this);\n\t\t// viewportChanged = _.debounce(viewportChanged, 60, false);\n\n\t\t// window.addEventListener(\"scroll\",\n\t\t// \t\t_.debounce(viewportChanged, 100, false), false);\n\t\t// window.addEventListener(\"wheel\",\n\t\t// \t_.debounce(viewportChanged, 100, false), false);\n\t\t// window.addEventListener(\"scroll\", viewportChanged, false);\n\t\t// window.addEventListener(\"wheel\", viewportChanged, false);\n\t\t// window.addEventListener(\"resize\", viewportChanged, false);\n\t\t// window.addEventListener(\"orientationchange\", viewportChanged, false);\n\n\t\t// this._addListListeners(this._a2b);\n\t\t// this._addListListeners(this._b2a);\n\t},\n\n\t/** @override */\n\tmeasureCanvas: function(w, h, s) {\n\t\tconsole.log(\"%s::measureCanvas style:%o scroll:%o offset:%o client:%o arg:%o\", this.cid, s.height, this.el.offsetHeight, this.el.scrollHeight, this.el.clientHeight, h);\n\t},\n\n\t/** @override */\n\tupdateCanvas: function() {\n\t\tthis._updateMetrics();\n\t\tthis._updateStyles();\n\t},\n\n\t/* --------------------------- *\n\t/* styles\n\t/* --------------------------- */\n\n\t_updateStyles: function() {\n\t\tvar b, bgColor, lnColor;\n\t\tif (this.model.has(\"bundle\")) {\n\t\t\tb = this.model.get(\"bundle\");\n\t\t\tlnColor = Color(b.colors.lnColor); //.clone();\n\t\t\tbgColor = Color(b.colors.bgColor); //.clone();\n\t\t} else {\n\t\t\tbgColor = Color(Globals.DEFAULT_COLORS[\"background-color\"]);\n\t\t\tlnColor = Color(Globals.DEFAULT_COLORS[\"link-color\"]);\n\t\t}\n\n\t\tthis._a2b.s.strokeStyle = this._a2b.s.fillStyle =\n\t\t\tthis._a2b.strokeStyleFn(this._color, bgColor, lnColor);\n\t\tthis._b2a.s.strokeStyle = this._b2a.s.fillStyle =\n\t\t\tthis._b2a.strokeStyleFn(this._color, bgColor, lnColor);\n\n\t\tif (DEBUG) {\n\t\t\tthis._debugBlocks = this.el.matches(\".debug-blocks .\" + this.className);\n\t\t\tthis._debugGraph = this.el.matches(\".debug-graph .\" + this.className);\n\t\t}\n\t},\n\n\t_setStyle: function(s) {\n\t\tif (typeof s == \"string\") {\n\t\t\ts = this._styleData[s];\n\t\t}\n\t\tCanvasView.setStyle(this._ctx, s);\n\t},\n\n\t/* --------------------------- *\n\t/* metrics\n\t/* --------------------------- */\n\n\t_updateMetrics: function() {\n\t\tvar bounds;\n\n\t\tthis._rootFontSize = parseFloat(\n\t\t\tgetComputedStyle(document.documentElement).fontSize);\n\n\t\tbounds = this.el.getBoundingClientRect();\n\t\t// bounds = getAbsoluteClientRect(this.el);\n\t\tthis._ctx.setTransform(this._canvasRatio, 0, 0, this._canvasRatio,\n\t\t\t(-(bounds.left + window.pageXOffset) * this._canvasRatio) - 0.5,\n\t\t\t(-(bounds.top + window.pageYOffset) * this._canvasRatio) - 0.5\n\t\t);\n\n\t\tvar i, ii, els;\n\t\tvar srcRect, destRect;\n\t\tvar srcMin, destMin;\n\n\t\tsrcRect = this._a2b.srcView.el.getBoundingClientRect();\n\t\tdestRect = this._a2b.destView.el.getBoundingClientRect();\n\t\tthis._a2b.qx = getRectDirX(srcRect, destRect);\n\n\t\tels = this._listA.el.querySelectorAll(\".label\");\n\t\tsrcMin = srcRect.left + window.pageXOffset;\n\t\tfor (i = 0, ii = els.length; i < ii; i++) {\n\t\t\tsrcMin = Math.max(srcMin,\n\t\t\t\tels[i].getBoundingClientRect().right + window.pageXOffset);\n\t\t}\n\t\tthis._a2b.xMin = srcMin;\n\n\t\tels = this._listB.el.querySelectorAll(\".label\");\n\t\tdestMin = destRect.left + window.pageXOffset;\n\t\tfor (i = 0, ii = els.length; i < ii; i++) {\n\t\t\tdestMin = Math.min(destMin,\n\t\t\t\tels[i].getBoundingClientRect().left + window.pageXOffset);\n\t\t}\n\t\tthis._a2b.destMinX = destMin;\n\n\t\tthis._b2a.qx = -this._a2b.qx;\n\t\tthis._b2a.xMin = this._a2b.destMinX;\n\t\tthis._b2a.destMinX = this._a2b.xMin;\n\n\t\t// var s = getComputedStyle(document.documentElement);\n\t\t// this._rootFontSize = parseFloat(s.fontSize); // * this._canvasRatio;\n\t\t// console.log(\"%s::_updateMetrics _rootFontSize: %s %o\", this.cid, this._rootFontSize, s);\n\n\t\t// var c = Math.abs(sData.xMin - dData.xMin) / 6;\n\t\t// sMin = sData.xMin + c * qx;\n\t\t// dMin = dData.xMin - c * qx;\n\n\t\t// this._a2b.targets = this._measureListItems(listView);\n\t\t// this._b2a.targets = this._measureListItems(listView);\n\n\t\t// // connector minimum branch x2\n\t\t// listView = this._listB;\n\t\t// for (i = 0, ii = listView.groups.length; i < ii; i++) {\n\t\t// \titemView = listView.itemViews.findByModel(listView.groups[i]);\n\t\t// \titemRect = (itemView.label || itemView.el).getBoundingClientRect();\n\t\t// \tthis._b2a.xMin = Math.min(this._b2a.xMin, itemRect.left);\n\t\t// \t// if (itemView._metrics) this._b2a.rect.left + itemView.transform.tx + itemView._metrics.textLeft;\n\t\t// }\n\t},\n\n\t/* --------------------------- *\n\t/* redraw\n\t/* --------------------------- */\n\n\tredraw: function(ctx, interp, flags) {\n\t\tthis._clearCanvas(0, 0, this._canvasWidth, this._canvasHeight);\n\t\tctx.save();\n\t\tthis._redraw_fromElements(ctx, interp, flags);\n\t\t// this._redraw_fromViews(ctx, interp);\n\t\tctx.restore();\n\t},\n\n\t_redraw_fromElements: function(ctx, interp, flags) {\n\t\t// b2a: keyword to bundles, right to left\n\t\t// a2b: bundle to keywords, left to right\n\t\tif (flags & (CanvasView.SIZE_INVALID | CanvasView.MODEL_INVALID)) {\n\t\t\tconsole.log(\"%s::redraw [valuesChanged: %s] [flags: %s]\", this.cid, interp.valuesChanged, CanvasView.flagsToString(flags));\n\t\t\tthis._a2b.connectorsOut = this._a2b.connectors;\n\t\t\tthis._b2a.connectorsOut = this._b2a.connectors;\n\t\t\tthis._b2a.connectors = this._computeConnectors(this._b2a);\n\t\t\tthis._a2b.connectors = this._computeConnectors(this._a2b);\n\t\t\tthis._labelOverlays = this._computeLabelOverlays(this._listB);\n\t\t}\n\n\t\t/* line dash value interpolation */\n\t\tvar b2aVal, a2bVal;\n\t\tb2aVal = interp.getRenderedValue(\"b2a\") / interp.getOption(\"b2a\", \"max\"); //_valueData[\"b2a\"]._maxVal;\n\t\t// b2aVal = interp._valueData[\"b2a\"]._renderedValue / interp._valueData[\"b2a\"]._maxVal;\n\t\ta2bVal = interp.getRenderedValue(\"a2b\") / interp.getOption(\"a2b\", \"max\"); //interp._valueData[\"a2b\"]._maxVal;\n\t\t// a2bVal = interp._valueData[\"a2b\"]._renderedValue / interp._valueData[\"a2b\"]._maxVal;\n\n\t\t/* draw */\n\t\tthis._drawConnectors(this._b2a.connectors, this._b2a.s, b2aVal, 1);\n\t\tthis._drawConnectors(this._b2a.connectorsOut, this._b2a.s, 1 - b2aVal, 1);\n\t\tthis._drawConnectors(this._a2b.connectors, this._a2b.s, a2bVal, 2);\n\t\t// this._drawConnectors(this._a2b.connectorsOut, this._a2b.s, 1 - a2bVal, 2);\n\t\tthis._drawLabelOverlays(this._labelOverlays);\n\t},\n\n\t/* --------------------------- *\n\t * label overlays\n\t * --------------------------- */\n\n\t_computeLabelOverlays: function(list) {\n\t\tvar data = { rects: [] };\n\t\tvar els = list.el.querySelectorAll(\".list-group .label span\");\n\n\t\tvar i, ii, r;\n\t\tfor (i = 0, ii = els.length; i < ii; i++) {\n\t\t\t// r = inflateRect(els[i].getBoundingClientRect(), 0, 0);\n\t\t\tr = _.clone(els[i].getBoundingClientRect());\n\t\t\tr.top += window.pageYOffset; // - 0.5;\n\t\t\tr.left += window.pageXOffset; // - 0.5;\n\t\t\t// r.innerText = els[i].innerText;\n\t\t\tdata.rects[i] = r;\n\t\t}\n\t\t// data.cssStyle = getComputedStyle(els[0]);\n\t\t// data.boxStyle = getBoxEdgeStyles(overlayData.cssStyle);\n\t\t// data.ctxStyle = {\n\t\t// \tfont: [s.fontWeight, s.fontStyle, s.fontSize + \"/\" + s.lineHeight, s.fontFamily].join(\" \")\n\t\t// };\n\t\treturn data;\n\t},\n\n\t_drawLabelOverlays: function(data) {\n\t\tthis._ctx.save();\n\t\t// CanvasView.setStyle(this._ctx, s);\n\t\tthis._ctx.globalAlpha = 0.85;\n\t\tthis._ctx.globalCompositeOperation = \"destination-out\";\n\t\t// this._ctx.canvas.style.letterSpacing = overlayData.cssStyle.letterSpacing;\n\n\t\tdata.rects.forEach(function(r) {\n\t\t\t// this._ctx.clearRect(r.left, r.top, r.width, r.height);\n\t\t\tthis._ctx.fillRect(r.left, r.top, r.width, r.height);\n\t\t\t// this._ctx.strokeText(r.innerText, r.left, r.top);\n\t\t}, this);\n\t\tthis._ctx.restore();\n\n\t\tif (DEBUG) {\n\t\t\tif (this._debugGraph || this._debugBlocks) {\n\t\t\t\tdata.rects.forEach(function(r) {\n\t\t\t\t\tr = inflateRect(r, 0, 0);\n\t\t\t\t\tCanvasHelper.drawRect(this._ctx, _dStyles[\"silver_dashed\"],\n\t\t\t\t\t\tr.left, r.top, r.width, r.height);\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t * connectors\n\t * --------------------------- */\n\n\t_computeConnectors: function(d) {\n\t\tvar sMin = d.xMin;\n\t\tvar dMin = d.destMinX;\n\t\tvar qx = d.qx;\n\n\t\tvar rBase, rInc;\n\t\trBase = this._roundTo(d.s.radiusBase * this._rootFontSize, 0.5);\n\t\trInc = this._roundTo(d.s.radiusIncrement * this._rootFontSize, 0.5);\n\n\t\t// var root = {};\n\t\tvar i, p, ddNum, connectors = [];\n\t\tvar x1, y1, tx;\n\n\t\tvar sView, ddView, ddItems;\n\t\tif (d.srcView.collection.selected && d.destView.filteredItems) {\n\t\t\tsView = d.srcView.itemViews.findByModel(d.srcView.collection.selected);\n\n\t\t\tvar rect = sView.label.getBoundingClientRect();\n\t\t\tx1 = rect.left;\n\t\t\ty1 = rect.top + rect.height / 2;\n\t\t\tif (qx > 0) x1 += rect.width;\n\t\t\tx1 += window.pageXOffset;\n\t\t\ty1 += window.pageYOffset;\n\n\t\t\t// if (!sView._metrics) return;\n\t\t\t// x1 = d.rect.left + sView.transform.tx\n\t\t\t// \t+ sView._metrics.textLeft;\n\t\t\t// y1 = d.rect.top + sView.transform.ty\n\t\t\t// \t+ sView._metrics.offsetHeight / 2;\n\t\t\t// if (qx > 0) x1 += sView._metrics.textWidth;\n\n\t\t\tddItems = d.destView.filteredItems;\n\t\t\tddNum = d.destView.filteredItems.length;\n\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = {};\n\t\t\t\tddView = d.destView.itemViews.findByModel(ddItems[i]);\n\n\t\t\t\trect = ddView.label.getBoundingClientRect();\n\t\t\t\tp.x2 = rect.left;\n\t\t\t\tp.y2 = rect.top + rect.height / 2;\n\t\t\t\tif (qx < 0) p.x2 += rect.width;\n\t\t\t\tp.x2 += window.pageXOffset;\n\t\t\t\tp.y2 += window.pageYOffset;\n\n\t\t\t\t// p.x2 = d.destRect.left + ddView.transform.tx\n\t\t\t\t// \t+ ddView._metrics.textLeft;\n\t\t\t\t// p.y2 = d.destRect.top + ddView.transform.ty\n\t\t\t\t// \t+ ddView._metrics.offsetHeight / 2;\n\t\t\t\t// if (qx < 0) p.x2 += ddView._metrics.textWidth;\n\n\t\t\t\tp.x1 = x1;\n\t\t\t\tp.y1 = y1;\n\t\t\t\tp.qx = qx;\n\t\t\t\tconnectors[i] = p;\n\t\t\t}\n\t\t\tconnectors.sort((a, b) => a.y2 - b.y2);\n\t\t\t// ssEl's number of items above in the Y axis\n\t\t\tvar si = 0;\n\t\t\t// Node first arc (r0) max radius (cx0)\n\t\t\t// They are centered to the label, so halve it\n\t\t\tvar rMax0 = ddNum * rInc * 0.5;\n\t\t\t// cy1 offset from y1\n\t\t\tvar a;\n\n\t\t\t// First pass, calc first radius (r0, at the source of the connector),\n\t\t\t// and the amount of dest connectors vertically closer to the source (di)\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = connectors[i];\n\n\t\t\t\ta = (i - (ddNum - 1) / 2) * rInc;\n\t\t\t\tp.cy1 = p.y1 + a;\n\t\t\t\tp.cy2 = p.y2;\n\t\t\t\tp.r0 = Math.abs(a);\n\t\t\t\tp.cx0 = p.x1 + (rMax0 - p.r0) * qx;\n\n\t\t\t\t// If src (cy1) is above dest (y2), decrease index diff (di)\n\t\t\t\tp.di = ((p.cy1 - p.y2) > 0) ? i : ddNum - (i + 1);\n\t\t\t\tsi = Math.max(si, p.di);\n\n\t\t\t\t// p.dx = x1 - p.x2;\n\t\t\t\t// p.dy = y1 - p.y2;\n\t\t\t}\n\n\t\t\t// Calc max radius that fits sMin to dMin:\n\t\t\t// from space btw sMin to dMin, remove first arc and max arc increase,\n\t\t\t// then halve (there's two arcs left)\n\t\t\tvar rBaseMax = (Math.abs(dMin - sMin) - (rMax0 + (si * rInc))) / 2;\n\t\t\t// Ensure 0 > rBase > rBaseMax\n\t\t\trBase = Math.max(0, Math.min(rBase, rBaseMax));\n\t\t\t// console.log(\"%s::_computeConnectors 1rem = %spx rBase:%s rBaseMax:%s\", this.cid, this._rootFontSize, rBase, rBaseMax);\n\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = connectors[i];\n\t\t\t\tp.r1 = p.di * rInc + rBase;\n\t\t\t\tp.r2 = rBase;\n\n\t\t\t\t// p.r1 = p.di * rInc + rBase;\n\t\t\t\t// p.r2 = (si - p.di) * rInc + rBase;\n\n\t\t\t\tp.cx1 = sMin + (rMax0 * qx);\n\t\t\t\tp.cx2 = dMin - ((si - p.di) * rInc) * qx;\n\t\t\t\t//\n\t\t\t\t// p.cx1 = sMin + (rMax0 * qx);\n\t\t\t\t// p.cx2 = dMin;\n\n\t\t\t\ttx = calcArcHConnector(p.cx1, p.cy1, p.r1, p.cx2, p.cy2, p.r2, 0.7);\n\t\t\t\tif (tx) {\n\t\t\t\t\tp.tx1 = tx[0];\n\t\t\t\t\tp.tx2 = tx[1];\n\t\t\t\t} else {\n\t\t\t\t\tp.tx1 = p.cx1;\n\t\t\t\t\tp.tx2 = p.cx2;\n\t\t\t\t}\n\t\t\t\tp.length = Math.abs(p.x1 - p.x2) + Math.abs(p.cy1 - p.cy2);\n\n\t\t\t\t// Find out longest node connection for setLineDash\n\t\t\t\t// root.maxLength = Math.max(root.maxLength, p.length);\n\t\t\t}\n\t\t\tconnectors.sort((a, b) =>\n\t\t\t\ta.di - b.di // Sort by index distance to from source point\n\t\t\t\t// a.r0 - b.r0 // Sort by first arc (centered)\n\t\t\t\t// (a.r1 + a.r2) - (b.r1 + b.r2)\n\t\t\t\t// a.tx2 - b.tx2\n\t\t\t);\n\n\t\t\tconnectors.si = si;\n\t\t\tconnectors.qx = qx;\n\t\t\tconnectors.sMin = sMin;\n\t\t\tconnectors.dMin = dMin;\n\t\t\t// root.x = x1;\n\t\t\t// root.y = y1;\n\t\t\t// root.qx = qx;\n\t\t\t// root.r0 = si * rInc;\n\t\t}\n\t\t// d.connectors = connectors;\n\t\t// d.root = root;\n\t\t// return d;\n\t\treturn connectors;\n\t},\n\n\t_drawConnectors: function(pp, s, lVal, dir) {\n\t\tvar i, ii, p;\n\t\tvar ow, ra1, ra2, ta;\n\n\t\tif (!(pp && pp.length && lVal)) return;\n\n\t\tii = pp.length;\n\n\t\t/* outline width */\n\t\tow = s.lineWidth + s.outlineWidth;\n\t\t// ow = Math.min(\n\t\t// \tthis._roundTo(s.radiusIncrement * this._rootFontSize, 0.5),\n\t\t// \tthis._roundTo(s.lineWidth * (1 + s.outlineWidth), 0.5)\n\t\t// );\n\n\t\t/* arrow radiuses, direction */\n\t\t// ra1 = (s.radiusIncrement * this._rootFontSize) + s.lineWidth;\n\t\tra1 = s.arrowSize * this._rootFontSize;\n\t\tra2 = ra1 + (ow - s.lineWidth);\n\t\tta = Math.PI * dir;\n\t\t// dir -= 2;\n\n\t\tthis._setStyle(s);\n\n\t\t// if (lVal < 1) {\n\t\t// \tthis._ctx.lineDashOffset = lMax * (1 + lVal);\n\t\t// \tthis._ctx.setLineDash([lMax, lMax])\n\t\t// \t// this._ctx.lineDashOffset = lMax * (1 + lVal);;\n\t\t// \t// this._ctx.setLineDash([lMax * (1 - lVal), lMax]);\n\t\t// }\n\n\t\t// for (i = 0; i < ii; i++) {\n\t\t// p = pp[i];\n\t\tif (s.outlineWidth) {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.globalCompositeOperation = \"destination-out\";\n\t\t\tthis._ctx.lineWidth = ow;\n\t\t\tfor (i = 0; i < ii; i++) {\n\t\t\t\tp = pp[i];\n\n\t\t\t\tif (lVal < 1) {\n\t\t\t\t\tthis._ctx.lineDashOffset = p.length * (1 + lVal);\n\t\t\t\t\tthis._ctx.setLineDash([p.length, p.length])\n\t\t\t\t}\n\t\t\t\tthis._drawConnector(p, i, pp);\n\t\t\t\tif (lVal == 1) {\n\t\t\t\t\tthis._drawArrowhead(p.x2, p.y2, ra2, dir * ta);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._ctx.restore();\n\t\t}\n\n\t\tfor (i = 0; i < ii; i++) {\n\t\t\tp = pp[i];\n\t\t\tif (lVal < 1) {\n\t\t\t\tthis._ctx.lineDashOffset = p.length * (1 + lVal);\n\t\t\t\tthis._ctx.setLineDash([p.length, p.length])\n\t\t\t}\n\t\t\tthis._drawConnector(p, i, pp);\n\t\t\tif (lVal == 1) {\n\t\t\t\tthis._drawArrowhead(p.x2, p.y2, ra1, dir * ta);\n\t\t\t}\n\t\t}\n\t},\n\n\t_drawArrowhead: function(x, y, r, t) {\n\t\t// this._ctx.save();\n\t\t// this._ctx.lineDashOffset = 0;\n\t\t// this._ctx.setLineDash([]);\n\t\tCanvasHelper.arrowhead2(this._ctx, x, y, r, t);\n\t\tthis._ctx.stroke();\n\t\t// this._ctx.restore();\n\t},\n\n\t_drawArrowhead2: function(x, y, r, t) {\n\t\tCanvasHelper.arrowhead(this._ctx, x, y, r, t);\n\t\tthis._ctx.fill();\n\t},\n\n\t// _drawArrowheadH: function(x, y, r, a) {\n\t// \tthis._ctx.save();\n\t// \tthis._ctx.lineDashOffset = 0;\n\t// \tthis._ctx.setLineDash([]);\n\t// \tthis._ctx.beginPath();\n\t// \tthis._ctx.moveTo(x + r * 1 / dir, y - r);\n\t// \tthis._ctx.lineTo(x, y);\n\t// \tthis._ctx.lineTo(x + r * 1 / dir, y + r);\n\t// \tthis._ctx.stroke();\n\t// \tthis._ctx.restore();\n\t// },\n\n\t_drawConnector: function(p, i, pp) {\n\t\tthis._ctx.beginPath();\n\t\tthis._ctx.moveTo(p.x2, p.cy2);\n\t\tthis._ctx.arcTo(p.tx2, p.cy2, p.tx1, p.cy1, p.r2);\n\t\tthis._ctx.arcTo(p.tx1, p.cy1, p.cx1, p.cy1, p.r1);\n\t\tthis._ctx.arcTo(p.cx0, p.cy1, p.cx0, p.y1, p.r0);\n\n\t\t// p.cx00 = p.x1 + ((p.r0 + p.di) * p.qx);\n\t\t// p.cy00 = (p.cy1 + p.y1) / 2;\n\t\t// this._ctx.arcTo(p.cx00, p.cy1, p.cx00, p.cy00, p.r0 / 2);\n\t\t// this._ctx.arcTo(p.cx00, p.y1, p.x1, p.y1, p.r0 / 2);\n\t\t// this._ctx.lineTo(p.x1, p.y1);\n\n\t\t// p.cx00 = p.x1 + (p.r0 * p.qx * 2);\n\t\t// this._ctx.lineTo(p.cx00, p.cy1);\n\t\t// this._ctx.quadraticCurveTo(p.cx0, p.cy1, p.cx0, p.y1);\n\n\t\t// this._ctx.lineTo(p.cx0, p.y1);\n\t\tthis._ctx.stroke();\n\t},\n\n\t_roundTo: function(n, p) {\n\t\tif (p > 1) p = 1 / p;\n\t\treturn Math.round(n / p) * p;\n\t},\n\n\t/*\n\t_computeConnectors: function(d) {\n\t\tvar rBase = d.s.radiusBase;\n\t\tvar rInc = d.s.radiusIncrement;\n\t\tvar sMin = d.xMin;\n\t\tvar dMin = d.destMinX;\n\n\t\tvar lMax = 0;\n\t\tvar p, connectors = [];\n\t\tvar qx, x1, y1, tx;\n\t\tvar si; // ssEl's number of items above in the Y axis\n\n\t\tif (d.rect.right < d.destRect.left) {\n\t\t\tqx = 1;\n\t\t} else if (d.destRect.right < d.rect.left) {\n\t\t\tqx = -1;\n\t\t} else {\n\t\t\tqx = 0;\n\t\t}\n\n\t\tvar ssEl, ddEls, ddNum, ssRect, ddRect, i;\n\t\tssEl = d.srcView.el.querySelector(\".list-item.selected .label\");\n\t\tif (ssEl) {\n\t\t\tssRect = ssEl.getBoundingClientRect();\n\t\t\tx1 = ssRect.left;\n\t\t\tif (qx > 0) x1 += ssRect.width;\n\t\t\ty1 = ssRect.top + ssRect.height / 2;\n\t\t\t// r2 = rBase;\n\t\t\t// cx1 = d.xMin;\n\n\t\t\tsi = 0;\n\t\t\tddEls = d.destView.el.querySelectorAll(\".list-item:not(.excluded) .label\");\n\t\t\tddNum = ddEls.length;\n\t\t\t// dx = Math.abs(d.xMin - dData.xMin);\n\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = {};\n\t\t\t\tddRect = ddEls[i].getBoundingClientRect();\n\t\t\t\tp.x2 = ddRect.left;\n\t\t\t\tif (qx < 0) p.x2 += ddRect.width;\n\t\t\t\tp.y2 = ddRect.top + ddRect.height / 2;\n\t\t\t\tp.x1 = x1;\n\t\t\t\tp.y1 = y1;\n\t\t\t\tp.dx = p.x1 - p.x2;\n\t\t\t\tp.dy = p.y1 - p.y2;\n\t\t\t\tp.qx = qx;\n\t\t\t\tp.qy = Math.sign(p.dy);\n\t\t\t\t// p.dLength = Math.abs(p.x) + Math.abs(p.y);\n\t\t\t\tp.di = p.dy > 0 ? i : ddNum - (i + 1);\n\t\t\t\tsi = Math.max(si, p.di);\n\t\t\t\tconnectors[i] = p;\n\t\t\t}\n\n\t\t\tvar a, rMax0 = ddNum * 0.5 * rInc;\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = connectors[i];\n\t\t\t\tp.r1 = p.di * rInc + rBase;\n\t\t\t\tp.r2 = rBase;\n\t\t\t\t// p.r2 = (si - p.di) * rInc + rBase;\n\n\t\t\t\tp.cx1 = sMin;\n\t\t\t\tp.cx2 = dMin - ((si - p.di) * rInc) * qx;\n\t\t\t\t// p.cx2 = dMin;\n\n\t\t\t\ta = (i - (ddNum - 1) / 2) * rInc;\n\t\t\t\tp.cy1 = p.y1 + a;\n\t\t\t\tp.cy2 = p.y2;\n\n\t\t\t\ta = Math.abs(a);\n\t\t\t\tp.r0 = a;\n\t\t\t\tp.cx0 = p.x1 + (rMax0 - a) * qx;\n\n\t\t\t\ttx = calcArcHConnector(p.cx1, p.cy1, p.r1, p.cx2, p.cy2, p.r2, 0.8);\n\t\t\t\tp.tx1 = tx[0];\n\t\t\t\tp.tx2 = tx[1];\n\n\t\t\t\t// Find out longest node connection for setLineDash\n\t\t\t\tlMax = Math.max(lMax, Math.abs(p.x1 - p.x2) + Math.abs(p.cy1 - p.cy2));\n\t\t\t}\n\t\t\t// Sort by distance y1 (original) > cy1 (rInc offset) distance\n\t\t\tconnectors.sort(function(a, b) {\n\t\t\t\t// return Math.abs(b.y1 - b.cy1) - Math.abs(a.y1 - a.cy1);\n\t\t\t\t// return a.r0 - b.r0;\n\t\t\t\treturn b.di - a.di;\n\t\t\t});\n\t\t}\n\t\td.connectors = connectors;\n\t\td.maxLength = lMax;\n\t\td.maxLength = qx;\n\t}, */\n\n});\n\nif (DEBUG) {\n\t// GraphView.prototype._logFlags = \"\";\n\n\tvar applyFn = function(context, args) {\n\t\treturn Array.prototype.shift.apply(args).apply(context, args);\n\t}\n\n\tGraphView.prototype._drawConnector = _.wrap(GraphView.prototype._drawConnector, function(fn, p, i, pp) {\n\t\tif (!this._debugGraph) {\n\t\t\t// visual debug aids are off\n\t\t\treturn fn.call(this, p, i, pp);\n\t\t}\n\n\t\t// var isRtl = p.qx < 0;\n\t\tvar isFirst = i == 0;\n\t\tvar isLast = i == (pp.length - 1);\n\t\t// guide color\n\t\tvar gs = _dStyles[isFirst ? \"salmon_dashed\" : \"lightskyblue_dashed\"];\n\n\t\tif (isFirst) {\n\t\t\tCanvasHelper.drawVGuide(this._ctx, _dStyles[\"grey\"], pp.sMin);\n\t\t\tCanvasHelper.drawVGuide(this._ctx, _dStyles[\"grey\"], pp.dMin);\n\t\t}\n\n\t\tif (isFirst) {\n\t\t\tCanvasHelper.drawHGuide(this._ctx, _dStyles[\"silver_dashed\"], p.y1);\n\t\t\tCanvasHelper.drawVGuide(this._ctx, _dStyles[\"silver_dashed\"], p.x1);\n\t\t\tCanvasHelper.drawCircle(this._ctx, _dStyles[\"midnightblue\"], p.x1, p.y1, 10);\n\t\t}\n\t\tif (isFirst || isLast) {\n\t\t\t// CanvasHelper.drawVGuide(this._ctx, gs, p.cx1 + (p.r1 * p.qx));\n\t\t\tCanvasHelper.drawVGuide(this._ctx, gs, p.tx2);\n\t\t\tCanvasHelper.drawVGuide(this._ctx, gs, p.cx2 - (p.r2 * p.qx));\n\t\t\t// CanvasHelper.drawVGuide(this._ctx, gs, p.cx2);\n\t\t\t// CanvasHelper.drawHGuide(this._ctx, gs, p.cy2);\n\t\t}\n\t\tif (isFirst || isLast) {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.strokeStyle = _dStyles[(isFirst ? \"red\" : \"blue\")].strokeStyle;\n\t\t\tthis._ctx.lineWidth *= 1.5;\n\t\t}\n\t\t// }\n\n\t\tfn.call(this, p, i, pp);\n\n\t\t// if (isRtl) {\n\t\tif (isFirst || isLast) {\n\t\t\tthis._ctx.restore();\n\t\t}\n\t\t// point color\n\t\tvar pCol = isLast ? \"midnightblue\" : isFirst ? \"sienna\" : \"grey\";\n\t\tvar ps = _dStyles[pCol];\n\t\tvar pf = _dStyles[pCol + \"_fill\"];\n\n\t\t// CanvasHelper.drawCrosshair(this._ctx, ps, p.x1 + ((p.r0 + p.di) * p.qx), p.cy1, 3);\n\n\n\t\tif (isFirst || isLast) {\n\t\t\t// moveTo(p.x2, p.cy2)\n\t\t\tCanvasHelper.drawCrosshair(this._ctx, ps, p.x2, p.cy2, 10);\n\t\t\tCanvasHelper.drawCircle(this._ctx, ps, p.x2, p.cy2, 3);\n\n\t\t\t// arcTo #1: (p.tx2, p.cy2, p.tx1, p.cy1, p.r2)\n\t\t\tCanvasHelper.drawSquare(this._ctx, ps, p.tx2, p.cy2, 4); // p1\n\t\t\tCanvasHelper.drawCircle(this._ctx, pf, p.tx1, p.cy1, 2); // p2\n\n\t\t\t// arcTo #2: (p.tx1, p.cy1, p.cx1, p.cy1, p.r1)\n\t\t\tCanvasHelper.drawSquare(this._ctx, ps, p.tx1, p.cy1, 4); // p1\n\t\t\tCanvasHelper.drawCircle(this._ctx, pf, p.cx1, p.cy1, 2); // p2\n\n\t\t\t// arcTo #2: (p.cx0, p.cy1, p.cx0, p.y1, p.r0)\n\t\t\tCanvasHelper.drawSquare(this._ctx, ps, p.cx0, p.cy1, 4); // p1\n\t\t\tCanvasHelper.drawCircle(this._ctx, pf, p.cx0, p.y1, 2); // p2\n\n\t\t\tCanvasHelper.drawCircle(this._ctx, _dStyles[\"green\"], p.tx1, p.cy1, 4);\n\t\t\tCanvasHelper.drawCircle(this._ctx, _dStyles[\"green\"], p.cx1, p.cy1, 4);\n\t\t\tCanvasHelper.drawCircle(this._ctx, _dStyles[\"green\"], p.cx2, p.cy2, 4);\n\t\t}\n\t\t// }\n\t});\n\n\n\tGraphView.prototype._traceScroll = function(type) {\n\t\tvar tpl = \"%s:[%s] DPR:%i \" +\n\t\t\t\"[window: %i %i] \" +\n\t\t\t\"[html: %i %i %i] \" +\n\t\t\t\"[body: %i %i %i] \" +\n\t\t\t\"[container: %i %i %i] \" +\n\t\t\t\"[graph: %i %i %i]\";\n\t\tconsole.log(tpl, this.cid, type, this._canvasRatio,\n\t\t\twindow.pageYOffset,\n\t\t\twindow.pageYOffset,\n\t\t\tdocument.documentElement.clientHeight,\n\t\t\tdocument.documentElement.scrollTop,\n\t\t\tdocument.documentElement.scrollHeight,\n\t\t\tdocument.body.clientHeight,\n\t\t\tdocument.body.scrollTop,\n\t\t\tdocument.body.scrollHeight,\n\t\t\tdocument.body.firstElementChild.clientHeight,\n\t\t\tdocument.body.firstElementChild.scrollTop,\n\t\t\tdocument.body.firstElementChild.scrollHeight,\n\t\t\tthis.el.clientHeight,\n\t\t\tthis.el.scrollTop,\n\t\t\tthis.el.scrollHeight\n\t\t);\n\t};\n\n\tif (GraphView.prototype._logFlags.split(\" \")[\"view.render\"]) {\n\t\t// GraphView.prototype._requestRender = _.wrap(CanvasView.prototype._requestRender, function(fn) {\n\t\t// \tdebouncedLog(\"%s::_requestRender\", this.cid);\n\t\t// \treturn applyMethod(this, arguments);\n\t\t// });\n\t\tvar debouncedLog = _.debounce(_.bind(console.log, console), 500, true);\n\n\t\tGraphView.prototype._applyRender = _.wrap(CanvasView.prototype._applyRender, function(fn) {\n\t\t\tvar retval;\n\t\t\tthis._logFlags[\"view.render\"] = false;\n\t\t\tdebouncedLog(\"%s::_applyRender [debounced]\", this.cid);\n\t\t\tretval = applyFn(this, arguments);\n\t\t\tthis._logFlags[\"view.render\"] = true;\n\t\t\treturn retval;\n\t\t});\n\t}\n}\n\nmodule.exports = GraphView;\n",
    "/**\n * @module app/view/component/GroupingListView\n */\n\n/** @type {module:app/view/component/FilterableListView} */\nconst FilterableListView = require(\"app/view/component/FilterableListView\");\n/** @type {module:app/view/component/ClickableRenderer} */\nconst ClickableRenderer = require(\"app/view/render/ClickableRenderer\");\n/** @type {module:app/view/render/LabelRenderer} */\nconst LabelRenderer = require(\"app/view/render/LabelRenderer\");\n// /** @type {module:utils/array/difference} */\n// var diff = require(\"utils/array/difference\");\n\n/**\n * @constructor\n * @type {module:app/view/component/GroupingListView}\n */\nvar GroupingListView = FilterableListView.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"groupingList\",\n\n\t/** @override */\n\ttagName: \"dl\",\n\n\t/** @override */\n\tclassName: \"grouped\",\n\n\t/** @type {Function|null} empty array */\n\t_groupingFn: null, //function() { return null; },\n\n\t/** @override */\n\tdefaults: _.defaults({\n\t\t// defaults: {\n\t\trenderer: ClickableRenderer.extend({\n\t\t\t/** @override */\n\t\t\tcidPrefix: \"groupingListItem\",\n\t\t\t/** @override */\n\t\t\ttagName: \"dl\",\n\t\t\t/** @override */\n\t\t\tclassName: \"list-item list-node\",\n\t\t}),\n\t\tgroupingRenderer: LabelRenderer.extend({\n\t\t\t/** @override */\n\t\t\tcidPrefix: \"groupingListGroup\",\n\t\t\t/** @override */\n\t\t\ttagName: \"dt\",\n\t\t\t/** @override */\n\t\t\tclassName: \"list-group list-node\",\n\t\t}),\n\t\tgroupingFn: null,\n\t\t// },\n\t}, FilterableListView.prototype.defaults),\n\n\tproperties: {\n\t\tgroups: {\n\t\t\tget: function() {\n\t\t\t\treturn this._groups;\n\t\t\t}\n\t\t},\n\t\tfilteredGroups: {\n\t\t\tget: function() {\n\t\t\t\treturn this._filteredGroups;\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tFilterableListView.prototype.initialize.apply(this, arguments);\n\n\t\tthis._groups = [];\n\t\tthis._filteredGroups = [];\n\t\tthis._changedFilteredGroups = [];\n\t\tthis._groupsByItemCid = {};\n\n\t\tthis._groupingFn = options.groupingFn;\n\t\tthis.groupingRenderer = options.groupingRenderer;\n\t\tthis._computeGroups();\n\t\tif (this._groupingFn) {\n\t\t\tthis._groups.forEach(this.createGroupingView, this);\n\t\t}\n\t},\n\n\t/**\n\t * Called once on collection change\n\t * @private\n\t */\n\t_computeGroups: function() {\n\t\t// this._groups = _.uniq(this.collection.map(this._groupingFn, this));\n\t\tthis._groups.length = 0;\n\t\t// this._groupItems.length = 0;\n\t\tif (this._groupingFn) {\n\t\t\tthis.collection.forEach(function(item) {\n\t\t\t\tvar gIdx, gObj;\n\t\t\t\tgObj = this._groupingFn.apply(null, arguments);\n\t\t\t\tif (gObj) {\n\t\t\t\t\tgIdx = this._groups.indexOf(gObj);\n\t\t\t\t\tif (gIdx == -1) {\n\t\t\t\t\t\tgIdx = this._groups.length;\n\t\t\t\t\t\tthis._groups[gIdx] = gObj;\n\t\t\t\t\t\t// this._groupItems[gIdx] = [];\n\t\t\t\t\t}\n\t\t\t\t\t// this._groupItems[gIdx].push(item);\n\t\t\t\t}\n\t\t\t\tthis._groupsByItemCid[item.cid] = gObj;\n\t\t\t}, this);\n\t\t} else {\n\t\t\tthis.collection.forEach(function(item) {\n\t\t\t\tthis._groupsByItemCid[item.cid] = null;\n\t\t\t}, this);\n\t\t}\n\t},\n\n\t/** @private Create children views */\n\tcreateGroupingView: function(item) {\n\t\tvar view = new this.groupingRenderer({\n\t\t\tmodel: item,\n\t\t\tel: this.el.querySelector(\".list-group[data-id=\\\"\" + item.id + \"\\\"]\")\n\t\t});\n\t\tthis.itemViews.add(view);\n\t\treturn view;\n\t},\n\n\t/* --------------------------- *\n\t/* Filter impl 1\n\t/* --------------------------- */\n\n\t/** @override */\n\t/*\n\tcomputeFilter_1: function() {\n\t\tFilterableListView.prototype.computeFilter_1.apply(this, arguments);\n\n\t\tif (this._groupingFn) {\n\t\t\tif (this._filteredItems.length == 0) {\n\t\t\t\tthis._filteredGroups = [];\n\t\t\t} else {\n\t\t\t\tthis._filteredGroups = _.uniq(this._filteredItems.map(function(item) {\n\t\t\t\t\treturn this._groupsByItemCid[item.cid];\n\t\t\t\t}, this));\n\t\t\t}\n\t\t}\n\t\t// if (this._groupingFn) {\n\t\t// \tif (this._filteredItems.length == 0) {\n\t\t// \t\tthis._filteredGroups = [];\n\t\t// \t\tthis._groups.forEach(function(group) {\n\t\t// \t\t\tthis.itemViews.findByModel(group).el.classList.remove(\"excluded\");\n\t\t// \t\t}, this);\n\t\t// \t} else {\n\t\t// \t\tthis._filteredGroups = _.uniq(this._filteredItems.map(function(item) {\n\t\t// \t\t\treturn this._groupsByItemCid[item.cid];\n\t\t// \t\t}, this));\n\t\t// \t\tthis._groups.forEach(function(group) {\n\t\t// \t\t\tthis.itemViews.findByModel(group).el.classList.toggle(\"excluded\", this._filteredGroups.indexOf(group) == -1);\n\t\t// \t\t}, this);\n\t\t// \t}\n\t\t// }\n\t},\n\t*/\n\n\t/* --------------------------- *\n\t/* Filter impl 2\n\t/* --------------------------- */\n\n\t// /** @override */\n\t// renderFilterFn_2: function() {\n\t// \tFilterableListView.prototype.renderFilterFn_2.apply(this, arguments);\n\t// },\n\n\t/** @override */\n\tcomputeFilter: function() {\n\t\tFilterableListView.prototype.computeFilter.apply(this, arguments);\n\n\t\tif (this._groupingFn) {\n\t\t\tif (this._filteredItems.length == 0) {\n\t\t\t\tthis._filteredGroups = this._groups.concat(); //[];\n\t\t\t} else {\n\t\t\t\tthis._filteredGroups = _.uniq(this._filteredItems.map(function(item) {\n\t\t\t\t\treturn this._groupsByItemCid[item.cid];\n\t\t\t\t}, this));\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\tapplyFilter: function() {\n\t\tFilterableListView.prototype.applyFilter.apply(this, arguments);\n\n\t\tthis._groups.forEach(function(group) {\n\t\t\tthis.itemViews.findByModel(group).el.classList.toggle(\"excluded\", (this._filteredGroups.indexOf(group) == -1));\n\t\t}, this);\n\t},\n\n\t// computeFiltered: function() {\n\t// \tFilterableListView.prototype.computeFiltered.apply(this, arguments);\n\t// },\n\t//\n\t// renderFiltered: function() {\n\t// \tFilterableListView.prototype.renderFiltered.apply(this, arguments);\n\t// },\n\n});\n\nmodule.exports = GroupingListView;\n",
    "/**\n * @module app/view/component/PlayToggleSymbol\n */\n\n// /** @type {module:app/control/Globals} */\n// var Globals = require(\"app/control/Globals\");\n/** @type {module:app/view/base/CanvasView} */\nconst CanvasView = require(\"app/view/base/CanvasView\");\n\n/** @type {Function} */\nconst Color = require(\"color\");\n/** @type {module:utils/canvas/bitmap/stackBlurRGB} */\nconst stackBlurRGB = require(\"utils/canvas/bitmap/stackBlurRGB\");\n/** @type {module:utils/canvas/bitmap/getAverageRGB} */\nconst getAverageRGB = require(\"utils/canvas/bitmap/getAverageRGB\");\n/** @type {module:utils/canvas/bitmap/multiply} */\nconst multiply = require(\"utils/canvas/bitmap/multiply\");\n/** @type {module:utils/canvas/bitmap/desaturate} */\nconst desaturate = require(\"utils/canvas/bitmap/desaturate\");\n/** @type {module:utils/canvas/CanvasHelper} */\nconst roundRect = require(\"utils/canvas/CanvasHelper\").roundRect;\n\n/** @type {module:utils/ease/fn/easeInQuad} */\nconst easeIn = require(\"utils/ease/fn/easeInQuad\");\n/** @type {module:utils/ease/fn/easeOutQuad} */\nconst easeOut = require(\"utils/ease/fn/easeOutQuad\");\n\nvar PI2 = Math.PI * 2;\nvar LOOP_OFFSET = 1.833333;\nconst INTEP_MS = require(\"app/control/Globals\").TRANSITION_DURATION;\nvar FILTER_REFRESH_THRESHOLD = 0.5; //seconds elapsed\nvar FILTER_SCALE = 1.5;\nvar FILTER_RADIUS = 30; //pixels\nvar FILTER_MULTIPLY = 0.1;\n\nvar PlayToggleSymbol = {\n\tPLAY: \"playing\",\n\tPAUSE: \"paused\",\n\tWAITING: \"waiting\",\n\tENDED: \"ended\",\n};\n\nmodule.exports = CanvasView.extend({\n\n\t\t/** @type {string} */\n\t\tcidPrefix: \"playToggleSymbol\",\n\t\t/** @type {string} */\n\t\tclassName: \"play-toggle\",\n\n\t\tdefaults: {\n\t\t\tvalues: {\n\t\t\t\t_loop: 0,\n\t\t\t\t_arc: 0,\n\t\t\t},\n\t\t\tmaxValues: {\n\t\t\t\t_loop: 1\n\t\t\t},\n\t\t\tcolor: \"rgba(255,255,255,1.0)\",\n\t\t\tbackgroundColor: \"rgba(0,0,0,0.25)\",\n\t\t\tpaused: true,\n\t\t\tsymbolName: \"\",\n\t\t\t// borderRadius: 3,\n\t\t\t// borderWidth: 3,\n\t\t},\n\n\t\tproperties: {\n\t\t\tsymbolName: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this._symbolName;\n\t\t\t\t},\n\t\t\t\tset: function(value) {\n\t\t\t\t\tthis._setSymbolName(value);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t/** @override */\n\t\tinitialize: function(options) {\n\t\t\t// TODO: cleanup options mess in CanvasView\n\t\t\tCanvasView.prototype.initialize.apply(this, arguments);\n\t\t\tthis._options = _.extend(this._options, _.pick(options, \"symbolName\", \"borderRadius\", \"borderWidth\"));\n\t\t\tthis.symbolName = this._options.symbolName;\n\t\t},\n\n\t\t/** @override */\n\t\tmeasureCanvas: function(w, h, s) {\n\t\t\t// make canvas square\n\t\t\tthis._canvasHeight = this._canvasWidth = Math.min(w, h);\n\t\t},\n\n\t\t/** @override */\n\t\tupdateCanvas: function(ctx, s) {\n\t\t\tvar mObj = this._getFontMetrics(this._fontFamily);\n\t\t\tthis._baselineShift = mObj ? (mObj.ascent + mObj.descent) / mObj.unitsPerEm : 0.7; // default value\n\t\t\tthis._baselineShift *= this._fontSize * 0.5; // apply to font-size, halve it\n\t\t\tthis._baselineShift = Math.round(this._baselineShift);\n\n\t\t\tthis._canvasOffsetX = this._canvasOffsetY = this._canvasWidth / 2;\n\t\t\t// double SQRT1_2: square within circle within square\n\t\t\tthis._radius = (this._canvasWidth / 2) * Math.SQRT1_2 * Math.SQRT1_2 * Math.SQRT1_2;\n\t\t\tthis._side = this._radius; // * Math.SQRT1_2; // * Math.SQRT1_2;\n\t\t\t// this._borderWidth = this._options.borderWidth * this._canvasRatio;\n\t\t\t// this._borderRadius = this._canvasWidth * this._canvasRatio / 2; //this._options.borderRadius * this._canvasRatio;\n\n\t\t\t// reset matrix and translate 0,0 to center\n\t\t\tthis._ctx.setTransform(1, 0, 0, 1, this._canvasOffsetX, this._canvasOffsetY);\n\t\t\t// this._ctx.restore();\n\t\t\t// this._ctx.textBaseline = \"middle\";\n\t\t\tthis._ctx.lineWidth = this._radius * (1 - Math.SQRT1_2);\n\t\t\t// this._ctx.fillStyle = \"#FFF\";\n\t\t\tthis._ctx.shadowColor = \"rgba(0,0,0,0.75)\";\n\t\t\tthis._ctx.shadowBlur = 1;\n\t\t\tthis._ctx.shadowOffsetX = 2;\n\t\t\tthis._ctx.shadowOffsetY = 2;\n\t\t\t// this._ctx.save();\n\n\t\t\tthis._isImageDataInvalid = true;\n\t\t\t//console.log(\"%s::updateCanvas %s\", this.cid, this._backgroundColor);\n\t\t},\n\n\t\t/* --------------------------- *\n\t\t * symbolName\n\t\t * --------------------------- */\n\n\t\t_symbolName: \"\",\n\t\t_setSymbolName: function(value) {\n\t\t\tif (this._symbolName !== value) {\n\t\t\t\tthis._lastSymbolName = this._symbolName;\n\t\t\t\tthis._symbolName = value;\n\n\t\t\t\tthis.refreshImageSource();\n\t\t\t\tthis.requestRender(CanvasView.LAYOUT_INVALID);\n\t\t\t\tconsole.log(\"%s::[set] symbol %o (from %o)\", this.attached ? this.parentView.cid : this.cid, this._symbolName, this._lastSymbolName, this.paused ? \"paused\" : \"\");\n\t\t\t}\n\t\t},\n\n\t\t/* --------------------------- *\n\t\t * setImageSource/refreshImageSource\n\t\t * --------------------------- */\n\n\t\t_imageSource: null,\n\t\tsetImageSource: function(imageSource) {\n\t\t\tif (this._imageSource !== imageSource) {\n\t\t\t\tthis._imageSource = imageSource;\n\t\t\t\tthis._isImageDataInvalid = true;\n\t\t\t\tthis.requestRender(CanvasView.SIZE_INVALID);\n\t\t\t}\n\t\t},\n\n\t\t_imageDataTC: null,\n\t\trefreshImageSource: function(threshold) {\n\t\t\tif (this._isImageDataInvalid || !(this._imageSource instanceof HTMLVideoElement)) {\n\t\t\t\treturn; // data is marked for refresh already, or not a video\n\t\t\t}\n\t\t\tif (!_.isNumber(threshold)) {\n\t\t\t\tthreshold = FILTER_REFRESH_THRESHOLD;\n\t\t\t}\n\t\t\tif (threshold < Math.abs(this._imageDataTC - this._imageSource.currentTime)) {\n\t\t\t\tthis._isImageDataInvalid = true;\n\t\t\t\tthis.requestRender(CanvasView.SIZE_INVALID);\n\t\t\t}\n\t\t},\n\n\t\t_imageData: null,\n\t\t_updateImageData: function() {\n\t\t\tif (this._imageSource === null) {\n\t\t\t\tthis._imageData = null;\n\t\t\t\tthis._imageDataTC = null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// source scale, source rect, dest scale, dest rect, current timecode\n\t\t\tvar s, sr, d, dr, tc;\n\n\t\t\t// Get source/dest offsets, intrinsic scale and timecode\n\t\t\t// ---------------------------------\n\t\t\tsr = this._imageSource.getBoundingClientRect();\n\t\t\tdr = this.el.getBoundingClientRect();\n\n\t\t\tif (this._imageSource instanceof HTMLVideoElement) {\n\t\t\t\ts = this._imageSource.videoWidth / sr.width;\n\t\t\t\ttc = this._imageSource.currentTime;\n\t\t\t} else {\n\t\t\t\ts = this._imageSource.naturalWidth / sr.width;\n\t\t\t\ttc = 0;\n\t\t\t}\n\t\t\td = s * FILTER_SCALE;\n\n\t\t\t// draw source canvas maintaining position\n\t\t\t// ---------------------------------\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tthis._ctx.drawImage(this._imageSource,\n\t\t\t\t(dr.left - sr.left) * s + (dr.width / 2) * s - (dr.width / 2) * d,\n\t\t\t\t(dr.top - sr.top) * s + (dr.height / 2) * s - (dr.height / 2) * d,\n\t\t\t\tdr.width * d, dr.height * d,\n\t\t\t\t0, 0, this.el.width, this.el.height\n\t\t\t);\n\t\t\t// if (d == s)\n\t\t\t// this._ctx.drawImage(this._imageSource,\n\t\t\t// \t(dr.left - sr.left) * s, (dr.top - sr.top) * s,\n\t\t\t// \tdr.width * s, dr.height * s,\n\t\t\t// \t0, 0, this.el.width, this.el.height\n\t\t\t// );\n\n\t\t\t// get ImageData\n\t\t\t// find luminosity threshold form average color\n\t\t\t// ---------------------------------\n\t\t\tvar imgdata, isDark;\n\n\t\t\timgdata = this._ctx.getImageData(0, 0, this.el.width, this.el.height);\n\t\t\t// isDark = !Color().rgb(getAverageRGB(imgdata)).dark();\n\n\t\t\t// this._ctx.globalCompositeOperation = \"luminosity\";\n\t\t\t// this._ctx.globalAlpha = 0.25;\n\t\t\t// this._ctx.fillStyle = (isDark ? \"black\" : \"white\");\n\t\t\t// this._ctx.fillRect(0, 0, this.el.width, this.el.height);\n\n\t\t\tthis._ctx.clearRect(0, 0, this.el.width, this.el.height);\n\t\t\tthis._ctx.restore();\n\n\t\t\t// Store appropiate color values\n\t\t\t// ---------------------------------\n\t\t\tthis._color = isDark ? \"white\" : \"black\";\n\t\t\t// this._color = isDark ? \"rgba(255,255,255,0.75)\" : \"rgba(0,0,0,0.75)\";\n\t\t\t// this._backgroundColor = isDark ? \"rgba(0,0,0,0.75)\" : \"rgba(255,255,255,0.74)\";\n\n\t\t\t// this.el.style.color =\n\t\t\t// \tthis._ctx.fillStyle =\n\t\t\t// \tthis._ctx.strokeStyle =\n\t\t\t// \tthis._color;\n\t\t\t// this.el.style.backgroundColor =\n\t\t\t// \tthis._ctx.shadowColor =\n\t\t\t// \tthis._backgroundColor;\n\n\t\t\t// this.el.classList.toggle(\"lod\", isDark);\n\t\t\t// this.el.classList.toggle(\"dol\", !isDark);\n\n\t\t\t// Apply filters and save results\n\t\t\t// ---------------------------------\n\t\t\t// imgdata = this._ctx.getImageData(0, 0, this.el.width, this.el.height);\n\t\t\t// imgdata = multiply(imgdata, (isDark ? 1 - FILTER_MULTIPLY : 1 + FILTER_MULTIPLY));\n\t\t\t// imgdata = desaturate(imgdata, 0.5);\n\n\t\t\timgdata = multiply(imgdata, 1 + FILTER_MULTIPLY);\n\t\t\timgdata = stackBlurRGB(imgdata, FILTER_RADIUS);\n\t\t\t// imgdata = null;\n\n\t\t\tthis._imageData = imgdata;\n\t\t\tthis._imageDataTC = tc;\n\t\t},\n\n\t\t/** @override */\n\t\tredraw: function(ctx, intrp, flags) {\n\t\t\tthis._clearCanvas();\n\n\t\t\tif (this._symbolName === 'waiting') {\n\t\t\t\tif (intrp.getTargetValue('_arc') === 0) {\n\t\t\t\t\tintrp.valueTo('_arc', 1, 0 * INTEP_MS, easeIn)\n\t\t\t\t\t\t.updateValue('_arc');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (intrp.getTargetValue('_arc') === 1) {\n\t\t\t\t\tintrp.valueTo('_arc', 0, 0 * INTEP_MS, easeOut)\n\t\t\t\t\t\t.updateValue('_arc');\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar a = intrp.getRenderedValue(\"_arc\");\n\t\t\t// while arc is > 0, loop indefinitely while spinning and restart\n\t\t\t// if at end. Otherwise let interp exhaust arc duration\n\t\t\tif (a > 0) {\n\t\t\t\tif (!intrp.paused && intrp.isAtTarget('_loop')) {\n\t\t\t\t\t// console.log(\"%s::redraw [loop]\", this.cid, this.parentView.cid);\n\t\t\t\t\tintrp\n\t\t\t\t\t\t.valueTo('_loop', 0, 0)\n\t\t\t\t\t\t.valueTo('_loop', 1, 2 * INTEP_MS)\n\t\t\t\t\t\t.updateValue('_loop');\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar l = intrp.getRenderedValue(\"_loop\");\n\n\t\t\t// if (this._isImageDataInvalid) {\n\t\t\t// \tthis._isImageDataInvalid = false;\n\t\t\t// \tthis._updateImageData();\n\t\t\t// }\n\t\t\t// if (this._imageData !== null) {\n\t\t\t// \tctx.putImageData(this._imageData, 0, 0);\n\t\t\t// }\n\n\t\t\t// always render while arc is > 0\n\t\t\tif (a > 0) {\n\t\t\t\t// arc span bounce\n\t\t\t\tvar b = (l < 0.5 ? (l % 0.5) : 0.5 - (l % 0.5)) * 2;\n\t\t\t\t// bounce + main arc span\n\t\t\t\tvar aa = (a * b * 0.25) + (a * 0.125) + .0001;\n\t\t\t\t// rotation loop\n\t\t\t\tvar ll = l + LOOP_OFFSET;\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(0, 0, this._radius, ((1 - aa) + ll) * PI2, (aa + ll) * PI2, false);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\n\t\t\tswitch (this._symbolName) {\n\t\t\t\tcase \"replay\":\n\t\t\t\tcase \"ended\":\n\t\t\t\tcase \"play\":\n\t\t\t\t\t// this.drawPlay(ctx, (1 - a) * s);\n\t\t\t\t\tthis.drawPlay(ctx, this._side);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"pause\":\n\t\t\t\t\t// this.drawPause(ctx, (1 - a) * s);\n\t\t\t\t\tthis.drawPause(ctx, this._side);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"waiting\":\n\t\t\t\t\tswitch (this._lastSymbolName) {\n\t\t\t\t\t\tcase \"replay\":\n\t\t\t\t\t\tcase \"ended\":\n\t\t\t\t\t\tcase \"play\":\n\t\t\t\t\t\t\tthis.drawPlay(ctx, (1 - a) * this._side);\n\t\t\t\t\t\t\tctx.fill();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"pause\":\n\t\t\t\t\t\t\tthis.drawPause(ctx, (1 - a) * this._side);\n\t\t\t\t\t\t\tctx.fill();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\tdrawPlay: function(ctx, r) {\n\t\t\tvar tx = (1 - Math.SQRT1_2) * r;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(tx + r, 0);\n\t\t\tctx.lineTo(tx - r, -r);\n\t\t\tctx.lineTo(tx - r, r);\n\t\t\tctx.closePath();\n\t\t},\n\n\t\tdrawPause: function(ctx, r) {\n\t\t\tvar w = r * 0.75;\n\t\t\tvar h = r * 2;\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(-r, -r, w, h);\n\t\t\tctx.rect(r - w, -r, w, h);\n\t\t\tctx.closePath();\n\t\t},\n\n\t\tdrawLabel: function(labelString) {\n\t\t\tvar labelWidth = this._ctx.measureText(labelString).width;\n\t\t\tthis._ctx.fillText(labelString,\n\t\t\t\tlabelWidth * -0.5,\n\t\t\t\t// 0, labelWidth);\n\t\t\t\tthis._baselineShift, labelWidth);\n\t\t},\n\t},\n\tPlayToggleSymbol);\n",
    "/**\n * @module app/view/component/SelectableListView\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/** @type {module:backbone.babysitter} */\nconst Container = require(\"backbone.babysitter\");\n/** @type {module:app/view/component/DefaultSelectableRenderer} */\nconst DefaultSelectableRenderer = require(\"app/view/render/DefaultSelectableRenderer\");\n/** @type {module:app/view/component/ClickableRenderer} */\nconst ClickableRenderer = require(\"app/view/render/ClickableRenderer\");\n\nvar SelectableListView = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"selectableList\",\n\n\t/** @override */\n\ttagName: \"ul\",\n\n\t/** @override */\n\tclassName: \"list selectable\",\n\n\t/** @type {module:app/view/component/DefaultSelectableRenderer} */\n\trenderer: DefaultSelectableRenderer,\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tthis._enabled = true;\n\t\tthis._childrenInvalid = true;\n\n\t\toptions.renderer && (this.renderer = options.renderer);\n\t\tthis.showEmpty = !!options.showEmpty;\n\t\tthis.itemViews = new Container();\n\n\t\tthis.listenTo(this.collection, \"add remove reset\", this._onCollectionChange);\n\t},\n\n\t/** @override */\n\tremove: function() {\n\t\tthis.removeChildren();\n\t\tView.prototype.remove.apply(this, arguments);\n\t\treturn this;\n\t},\n\n\t_onCollectionChange: function(ev) {\n\t\tthis._childrenInvalid = true;\n\t\tthis.render();\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tif (this._childrenInvalid) {\n\t\t\tthis._childrenInvalid = false;\n\t\t\tthis.createChildren();\n\t\t}\n\t\treturn this;\n\t},\n\n\t/** @override */\n\tsetEnabled: function(enabled) {\n\t\tif (this._enabled !== enabled) {\n\t\t\tthis._enabled = enabled;\n\t\t\tthis.el.classList.toggle(\"disabled\", !this._enabled);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Child views\n\t/* --------------------------- */\n\n\tcreateChildren: function() {\n\t\tvar eltBuffer, view;\n\n\t\tthis.removeChildren();\n\t\tthis.el.innerHTML = \"\";\n\n\t\tif (this.collection.length) {\n\t\t\teltBuffer = document.createDocumentFragment();\n\t\t\tif (this.showEmpty) {\n\t\t\t\tview = this.createEmptyView();\n\t\t\t\teltBuffer.appendChild(view.render().el);\n\t\t\t}\n\t\t\tthis.collection.each(function(model, index, arr) {\n\t\t\t\tview = this.createItemView(model, index);\n\t\t\t\teltBuffer.appendChild(view.render().el);\n\t\t\t}, this);\n\t\t\tthis.el.appendChild(eltBuffer);\n\t\t}\n\t},\n\n\tcreateItemView: function(model, index) {\n\t\tvar view = new(this.renderer)({\n\t\t\tmodel: model\n\t\t});\n\t\tthis.itemViews.add(view);\n\t\tthis.listenTo(view, \"renderer:click\", this.onItemViewClick);\n\t\treturn view;\n\t},\n\n\tremoveChildren: function() {\n\t\tthis.itemViews.each(this.removeItemView, this);\n\t},\n\n\tremoveItemView: function(view) {\n\t\tthis.stopListening(view);\n\t\tthis.itemViews.remove(view);\n\t\tview.remove();\n\t\treturn view;\n\t},\n\n\t/* --------------------------- *\n\t/* Child event handlers\n\t/* --------------------------- */\n\n\t/** @private */\n\tonItemViewClick: function(item) {\n\t\tif (this.collection.selected !== item && this._enabled) {\n\t\t\tthis.trigger(\"view:select:one\", item);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Empty view\n\t/* --------------------------- */\n\n\tcreateEmptyView: function() {\n\t\tvar view = new SelectableListView.EmptyRenderer({\n\t\t\tmodel: this.collection\n\t\t});\n\t\tthis.itemViews.add(view);\n\t\tthis.listenTo(view, \"renderer:click\", function() {\n\t\t\tthis._enabled && this.trigger(\"view:select:none\");\n\t\t});\n\t\treturn view;\n\t},\n}, {\n\tEmptyRenderer: ClickableRenderer.extend({\n\n\t\t/** @override */\n\t\ttagName: \"li\",\n\t\t/** @override */\n\t\tclassName: \"list-item empty-item\",\n\n\t\t/** @override */\n\t\tinitialize: function(options) {\n\t\t\tthis.listenTo(this.model, \"selected deselected\", this.renderClassList);\n\t\t\tthis.renderClassList();\n\t\t},\n\n\t\t/** @override */\n\t\trender: function() {\n\t\t\tthis.el.innerHTML = \"<a href=\\\"#clear\\\"><b> </b></a>\";\n\t\t\tthis.renderClassList();\n\t\t\treturn this;\n\t\t},\n\n\t\trenderClassList: function() {\n\t\t\tthis.el.classList.toggle(\"selected\", this.model.selectedIndex === -1);\n\t\t},\n\t})\n});\n\nmodule.exports = SelectableListView;\n",
    "/** @type {Function} */\nconst Color = require(\"color\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n\n// - - - - - - - - - - - - - - - -\n//  utils\n// - - - - - - - - - - - - - - - -\n\nfunction insertCSSRule(sheet, selector, style) {\n\tvar cssText = \"\";\n\tfor (var prop in style) {\n\t\tcssText += prop + \":\" + style[prop] + \";\";\n\t}\n\tsheet.insertRule(selector + \"{\" + cssText + \"}\", sheet.cssRules.length);\n}\n\nfunction selfAndDescendant(selfCls, cls) {\n\treturn selfCls + \" \" + cls + \", \" + selfCls + cls;\n}\n\n// - - - - - - - - - - - - - - - -\n//  root rules\n// - - - - - - - - - - - - - - - -\n\nvar rootStyles = [\n\t\"color\",\n\t\"background\",\n\t\"background-color\",\n\t// \"--link-color\"\n];\n\nfunction initRootStyles(sheet, rootSelector, attrs, fgColor, bgColor, lnColor, hasDarkBg) {\n\tvar s, revSelector, fgColorVal, bgColorVal;\n\t// var revFgColorVal, revBgColorVal;\n\n\ts = _.pick(attrs, rootStyles);\n\t// s[\"-webkit-font-smoothing\"] = (hasDarkBg ? \"antialiased\" : \"auto\");\n\t/* NOTE: In Firefox '-moz-osx-font-smoothing: grayscale;'\n\t/* works both in light over dark and dark over light, hardcoded in _base.scss */\n\t//s[\"-moz-osx-font-smoothing\"] = (hasDarkBg? \"grayscale\" : \"auto\");\n\tinsertCSSRule(sheet, rootSelector, s);\n\n\t// A element\n\t// - - - - - - - - - - - - - - - -\n\ts = {}\n\ts[\"color\"] = lnColor.rgb().string();\n\tinsertCSSRule(sheet, rootSelector + \" a\", s);\n\tinsertCSSRule(sheet, rootSelector + \" .color-ln\", s);\n\n\t// .color-fg05\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\ts[\"color\"] = Color(fgColor).mix(bgColor, 0.5).rgb().string();\n\ts[\"border-color\"] = Color(fgColor).mix(bgColor, 0.3).rgb().string();\n\tinsertCSSRule(sheet, rootSelector + \" .color-fg05\", s);\n\n\tfgColorVal = fgColor.rgb().string();\n\tbgColorVal = bgColor.rgb().string();\n\t// revFgColorVal = Color(bgColor).mix(fgColor, 0.9).rgb().string();\n\t// revBgColorVal = Color(fgColor).mix(bgColor, 0.6).rgb().string();\n\trevSelector = rootSelector + \" .color-reverse\";\n\n\t// .color-fg .color-bg\n\t// - - - - - - - - - - - - - - - -\n\ts = {\n\t\t\"color\": fgColorVal\n\t};\n\tinsertCSSRule(sheet, rootSelector + \" .color-fg\", s);\n\ts = {\n\t\t\"background-color\": bgColorVal\n\t};\n\tinsertCSSRule(sheet, rootSelector + \" .color-bg\", s);\n\t// html inverted text/background\n\ts = {\n\t\t\"color\": bgColorVal\n\t}; // s = { \"color\" : revFgColorVal };\n\t// s[\"-webkit-font-smoothing\"] = (hasDarkBg ? \"auto\" : \"antialiased\");\n\t// insertCSSRule(sheet, revSelector + \" .color-fg\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-fg\", s);\n\tinsertCSSRule(sheet, selfAndDescendant(revSelector, \".color-fg\"), s);\n\n\ts = {\n\t\t\"background-color\": fgColorVal\n\t};\n\t// s = { \"background-color\" : revBgColorVal };\n\t// insertCSSRule(sheet, revSelector + \" .color-bg\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-bg\", s);\n\tinsertCSSRule(sheet, selfAndDescendant(revSelector, \".color-bg\"), s);\n\n\t// .color-stroke .color-fill (SVG)\n\t// - - - - - - - - - - - - - - - -\n\ts = {\n\t\t\"stroke\": fgColorVal\n\t};\n\tinsertCSSRule(sheet, rootSelector + \" .color-stroke\", s);\n\ts = {\n\t\t\"fill\": bgColorVal\n\t};\n\tinsertCSSRule(sheet, rootSelector + \" .color-fill\", s);\n\t// svg inverted fill/stroke\n\ts = {\n\t\t\"stroke\": bgColorVal\n\t};\n\t// insertCSSRule(sheet, revSelector + \" .color-stroke\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-stroke\", s);\n\tinsertCSSRule(sheet, selfAndDescendant(revSelector, \".color-stroke\"), s);\n\ts = {\n\t\t\"fill\": fgColorVal\n\t};\n\t// insertCSSRule(sheet, revSelector + \" .color-fill\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-fill\", s);\n\tinsertCSSRule(sheet, selfAndDescendant(revSelector, \".color-fill\"), s);\n\n\t// .text-outline\n\t// - - - - - - - - - - - - - - - -\n\t// s = {\n\t// \t\"text-shadow\": \"-1px -1px 0 \" + bgColorVal +\n\t// \t\t\", 1px -1px 0 \" + bgColorVal +\n\t// \t\t\", -1px 1px 0 \" + bgColorVal +\n\t// \t\t\", 1px 1px 0 \" + bgColorVal\n\t// };\n\t// insertCSSRule(sheet, rootSelector + \" :not(..collapsed-changing) .text-outline-bg\", s);\n\n}\n\n// - - - - - - - - - - - - - - - -\n// carousel styles\n// - - - - - - - - - - - - - - - -\n\nvar carouselStyles = [\"box-shadow\", \"border\", \"border-radius\"];\n\nfunction initCarouselStyles(sheet, carouselSelector, attrs, fgColor, bgColor, lnColor, hasDarkBg) {\n\tvar s = _.pick(attrs, carouselStyles); //, \"background-color\"]);\n\tinsertCSSRule(sheet, carouselSelector + \" .media-item .content\", s);\n\n\t// .media-item .color-bg09\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\ts[\"background-color\"] = Color(bgColor).mix(fgColor, 0.05).rgb().string();\n\t// s[\"background-color\"] = Color(bgColor)[hasDarkBg ? \"darken\" : \"lighten\"](0.045).rgb().string();\n\t// s[\"background-color\"] = Color(bgColor)[hasDarkBg ? \"lighten\" : \"darken\"](0.03).rgb().string();\n\tinsertCSSRule(sheet, carouselSelector + \" .media-item .color-bg09\", s);\n\n\t// .media-item .placeholder\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\t// s[\"-webkit-font-smoothing\"] = (hasDarkBg ? \"auto\" : \"antialiased\");\n\t// text color luminosity is inverse from body, apply oposite rendering mode\n\ts[\"color\"] = bgColor.rgb().string();\n\t// s[\"color\"] = Color(bgColor)[hasDarkBg ? \"darken\" : \"lighten\"](0.045).rgb().string();\n\ts[\"background-color\"] = Color(bgColor).mix(fgColor, 0.05).rgb().string();\n\t// s[\"background-color\"] = Color(bgColor).mix(fgColor, 0.8).alpha(0.3).rgba().string();\n\t// s[\"background-color\"] = Color(bgColor)[hasDarkBg ? \"lighten\" : \"darken\"](0.03).rgb().string();\n\t(\"border-radius\" in attrs) && (s[\"border-radius\"] = attrs[\"border-radius\"]);\n\tinsertCSSRule(sheet, carouselSelector + \" .media-item .placeholder\", s);\n\n\t// .image-item img\n\t// .sequence-item .sequence-step\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\ts[\"background-color\"] = bgColor.rgb().string();\n\tinsertCSSRule(sheet, carouselSelector + \" .image-item img\", s);\n\tinsertCSSRule(sheet, carouselSelector + \" .sequence-item .sequence-step\", s);\n\n\t// .empty-item A\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\ts[\"text-decoration-color\"] = Color(fgColor).mix(bgColor, 0.7).rgb().string();\n\tinsertCSSRule(sheet, carouselSelector + \" .empty-item A\", s);\n\t// // .color-gradient\n\t// // - - - - - - - - - - - - - - - -\n\t// s = {};\n\t// s[\"background-color\"] = \"transparent\";\n\t// s[\"background\"] = \"linear-gradient(to bottom, \" +\n\t// \t\tColor(bgColor).alpha(0.00).rgba().string() + \" 0%, \" +\n\t// \t\tColor(bgColor).alpha(0.11).rgba().string() + \" 100%)\";\n\t// insertCSSRule(sheet, rootSelector + \" .color-gradient\", s);\n\t// s = {};\n\t// s[\"background-color\"] = \"transparent\";\n\t// s[\"background\"] = \"linear-gradient(to bottom, \" +\n\t// \t\tColor(fgColor).alpha(0.00).rgba().string() + \" 0%, \" +\n\t// \t\tColor(fgColor).alpha(0.11).rgba().string() + \" 100%)\";\n\t// insertCSSRule(sheet, revSelector + \" .color-gradient\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-gradient\", s);\n}\n\nmodule.exports = function() {\n\tvar attrs, fgColor, bgColor, lnColor, hasDarkBg;\n\n\tattrs = Globals.DEFAULT_COLORS;\n\tfgColor = new Color(Globals.DEFAULT_COLORS[\"color\"]);\n\tbgColor = new Color(Globals.DEFAULT_COLORS[\"background-color\"]);\n\tlnColor = new Color(Globals.DEFAULT_COLORS[\"link-color\"])\n\thasDarkBg = fgColor.luminosity() > bgColor.luminosity();\n\n\tvar colorStyles = document.createElement(\"style\");\n\tcolorStyles.id = \"colors\";\n\tcolorStyles.type = \"text/css\";\n\tdocument.head.appendChild(colorStyles);\n\t// var colorStyles = document.querySelector(\"link#folio\");\n\n\tinitRootStyles(colorStyles.sheet, \".app\",\n\t\tattrs, fgColor, bgColor, lnColor, hasDarkBg);\n\tinitCarouselStyles(colorStyles.sheet, \".carousel\",\n\t\tattrs, fgColor, bgColor, lnColor, hasDarkBg);\n\n\t// - - - - - - - - - - - - - - - -\n\t// per-bundle rules\n\t// - - - - - - - - - - - - - - - -\n\tbundles.each(function(bundle) {\n\t\tattrs = bundle.attrs(); //get(\"attrs\");\n\t\tfgColor = bundle.colors.fgColor;\n\t\tbgColor = bundle.colors.bgColor;\n\t\tlnColor = bundle.colors.lnColor;\n\t\thasDarkBg = bundle.colors.hasDarkBg;\n\n\t\tinitRootStyles(colorStyles.sheet,\n\t\t\t\".app.\" + bundle.get(\"domid\"),\n\t\t\tattrs, fgColor, bgColor, lnColor, hasDarkBg);\n\t\tinitCarouselStyles(colorStyles.sheet,\n\t\t\t\".carousel.\" + bundle.get(\"domid\"),\n\t\t\tattrs, fgColor, bgColor, lnColor, hasDarkBg);\n\t});\n};\n",
    "// /** @type {module:underscore.string/lpad} */\n// var classify = require(\"underscore.string/classify\");\n\n// var statusMsg = _.template(\"<%= status %> received from <%= url %> (<%= statusText %>)\");\n// var errMsg = _.template(\"'<%= errName %>' ocurred during request <%= url %>\");\n\nif (window.XMLHttpRequest && window.URL && window.Blob) {\n\tmodule.exports = function(url, progressFn) {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tvar request = new XMLHttpRequest();\n\t\t\trequest.open(\"GET\", url, true);\n\t\t\t// request.timeout = 10000; // in milliseconds\n\t\t\trequest.responseType = \"blob\";\n\n\t\t\tvar errorFromEvent = function(ev) {\n\t\t\t\tvar err = new Error((ev.target.status > 0 ?\n\t\t\t\t\t\"http_\" + request.statusText.replace(/\\s/g, \"_\") :\n\t\t\t\t\tev.type + \"_event\").toUpperCase());\n\t\t\t\terr.logMessage = \"_loadImageAsObjectURL::\" + ev.type + \" [reject]\";\n\t\t\t\terr.infoCode = ev.target.status;\n\t\t\t\terr.infoSrc = url;\n\t\t\t\terr.logEvent = ev;\n\t\t\t\treturn err;\n\t\t\t};\n\t\t\t// if progressFn is supplied\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\tif (progressFn) {\n\t\t\t\trequest.onprogress = function(ev) {\n\t\t\t\t\tprogressFn(ev.loaded / ev.total, request);\n\t\t\t\t};\n\t\t\t}\n\t\t\t// resolved/success\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\trequest.onload = function(ev) {\n\t\t\t\t// When the request loads, check whether it was successful\n\t\t\t\tif (request.status == 200) {\n\t\t\t\t\t// If successful, resolve the promise by passing back a reference url\n\t\t\t\t\tresolve(URL.createObjectURL(request.response));\n\t\t\t\t} else {\n\t\t\t\t\treject(errorFromEvent(ev));\n\t\t\t\t}\n\t\t\t};\n\t\t\t// normal abort\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\trequest.onabort = function(ev) {\n\t\t\t\tresolve(void 0);\n\t\t\t};\n\t\t\t// reject/failure\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\trequest.onerror = function(ev) {\n\t\t\t\treject(errorFromEvent(ev));\n\t\t\t};\n\t\t\trequest.ontimeout = request.onerror;\n\n\t\t\t// finally\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\trequest.onloadend = function(ev) {\n\t\t\t\t//console.log(\"_loadImageAsObjectURL::%s [cleanup] (%s)\", ev ? ev.type : \"no event\", url);\n\t\t\t\trequest.onabort = request.ontimeout = request.onerror = void 0;\n\t\t\t\trequest.onload = request.onloadend = void 0;\n\t\t\t\tif (progressFn) {\n\t\t\t\t\trequest.onprogress = void 0;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trequest.send();\n\t\t});\n\t};\n} else {\n\tmodule.exports = function(url, progressFn) {\n\t\treturn Promise.resolve(url);\n\t};\n}\n",
    "module.exports = function(image, resolveEmpty) {\n\treturn new Promise(function(resolve, reject) {\n\t\tif (!(image instanceof window.HTMLImageElement)) {\n\t\t\t//reject(new Error(\"not an HTMLImageElement\"));\n\t\t\treject(\"Error: not an HTMLImageElement\");\n\t\t} else if (image.complete && (image.src.length > 0 || resolveEmpty)) {\n\t\t\t// if (image.src === \"\") console.warn(\"_whenImageLoads resolved with empty src\");\n\t\t\t// else console.log(\"_whenImageLoads resolve-sync\", image.src);\n\t\t\tresolve(image);\n\t\t} else {\n\t\t\tvar handlers = {\n\t\t\t\tload: function(ev) {\n\t\t\t\t\t// console.log(\"_whenImageLoads_dom resolve-async\", ev.type, image.src);\n\t\t\t\t\tremoveEventListeners();\n\t\t\t\t\tresolve(image);\n\t\t\t\t},\n\t\t\t\terror: function(ev) {\n\t\t\t\t\tvar err = new Error(\"Loading failed (\" + ev.type + \" event)\");\n\t\t\t\t\terr.infoCode = -1;\n\t\t\t\t\terr.infoSrc = image.src;\n\t\t\t\t\terr.logEvent = ev;\n\t\t\t\t\terr.logMessage = \"_whenImageLoads::\" + ev.type + \" [reject]\";\n\t\t\t\t\tremoveEventListeners();\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t};\n\t\t\thandlers.abort = handlers.error;\n\t\t\tvar removeEventListeners = function() {\n\t\t\t\tfor (var event in handlers) {\n\t\t\t\t\tif (handlers.hasOwnProperty(event)) {\n\t\t\t\t\t\timage.removeEventListener(event, handlers[event], false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tfor (var event in handlers) {\n\t\t\t\tif (handlers.hasOwnProperty(event)) {\n\t\t\t\t\timage.addEventListener(event, handlers[event], false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n",
    "/** @type {module:app/view/promise/_whenImageLoads} */\nconst _whenImageLoads = require(\"app/view/promise/_whenImageLoads\");\n/** @type {module:app/view/promise/_loadImageAsObjectURL} */\nconst _loadImageAsObjectURL = require(\"app/view/promise/_loadImageAsObjectURL\");\n\n// var isBlobRE = /^blob\\:.*/;\n\n// var logMessage = \"%s::whenDefaultImageLoads [%s]: %s\";\n\nmodule.exports = function(view) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar source = view.model.get(\"source\");\n\t\tif (source.has(\"prefetched\")) {\n\t\t\tview.defaultImage.src = source.get(\"prefetched\");\n\t\t\t_whenImageLoads(view.defaultImage)\n\t\t\t\t.then(\n\t\t\t\t\tfunction(targetEl) {\n\t\t\t\t\t\tresolve(view);\n\t\t\t\t\t});\n\t\t} else {\n\t\t\tview.mediaState = \"pending\";\n\n\t\t\tvar sUrl = source.get(\"original\");\n\t\t\tvar progressFn = function(progress, ev) {\n\t\t\t\t// console.log(logMessage, view.cid, \"progress\", progress);\n\t\t\t\tview.updateMediaProgress(progress, sUrl);\n\t\t\t};\n\t\t\tprogressFn = _.throttle(progressFn, 100, {\n\t\t\t\tleading: true,\n\t\t\t\ttrailing: false\n\t\t\t});\n\t\t\t_loadImageAsObjectURL(sUrl, progressFn)\n\t\t\t\t.then(\n\t\t\t\t\tfunction(url) {\n\t\t\t\t\t\tif (/^blob\\:.*/.test(url)) {\n\t\t\t\t\t\t\tsource.set(\"prefetched\", url);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tview.defaultImage.src = url;\n\t\t\t\t\t\treturn view.defaultImage;\n\t\t\t\t\t})\n\t\t\t\t.then(_whenImageLoads)\n\t\t\t\t.then(\n\t\t\t\t\tfunction(targetEl) {\n\t\t\t\t\t\tview.on(\"view:removed\", function() {\n\t\t\t\t\t\t\tvar prefetched = source.get(\"prefetched\");\n\t\t\t\t\t\t\tif (prefetched && /^blob\\:/.test(prefetched)) {\n\t\t\t\t\t\t\t\tsource.unset(\"prefetched\", { silent: true });\n\t\t\t\t\t\t\t\tURL.revokeObjectURL(prefetched);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(view);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t});\n\t\t}\n\t});\n};\n",
    "/* global Promise */\n/** @type {module:app/view/base/ViewError} */\nconst ViewError = require(\"app/view/base/ViewError\");\n\n/** @type {module:app/view/base/ViewError} */\nconst whenViewIsAttached = require(\"app/view/promise/whenViewIsAttached\");\n\nfunction whenScrollingEnds(view) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar parent = view.parentView;\n\t\tif (parent === null) {\n\t\t\tconsole.error(\"%s::whenScrollingEnds [%s] (sync)\", view.cid, \"rejected\", view.attached);\n\t\t\treject(new ViewError(view, new Error(\"whenScrollingEnds: view has no parent\")));\n\t\t} else if (!parent.scrolling) {\n\t\t\t// console.log(\"%s::whenScrollingEnds [%s] (sync)\", view.cid, \"resolved\", view.attached);\n\t\t\tresolve(view);\n\t\t} else {\n\t\t\tvar cleanup = function() {\n\t\t\t\tparent.off(\"view:scrollend\", onScrollend);\n\t\t\t\tparent.off(\"view:remove\", onRemove);\n\t\t\t};\n\t\t\tvar onScrollend = function() {\n\t\t\t\t// console.log(\"%s::whenScrollingEnds [%s]\", view.cid, \"resolved\", view.attached);\n\t\t\t\tcleanup();\n\t\t\t\tresolve(view);\n\t\t\t};\n\t\t\tvar onRemove = function() {\n\t\t\t\t// console.log(\"%s::whenScrollingEnds [%s]\", view.cid, \"rejected\", view.attached);\n\t\t\t\tcleanup();\n\t\t\t\treject(new ViewError(view, new Error(\"whenScrollingEnds: view was removed\")));\n\t\t\t};\n\t\t\tparent.on(\"view:scrollend\", onScrollend);\n\t\t\tparent.on(\"view:remove\", onRemove);\n\t\t}\n\t});\n}\n\nmodule.exports = function(view) {\n\treturn Promise.resolve(view)\n\t\t.then(whenViewIsAttached)\n\t\t.then(whenScrollingEnds);\n};\n\n/*\nmodule.exports = function(view) {\n\treturn Promise.resolve(view)\n\t\t.then(function(view) {\n\t\t\tif (view.attached) {\n\t\t\t\treturn view;\n\t\t\t} else {\n\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tview.once(\"view:attached\", function(view) {\n\t\t\t\t\t\tresolve(view);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t\t.then(function(view) {\n\t\t\tif (!view.parentView.scrolling) {\n\t\t\t\treturn view;\n\t\t\t} else {\n\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tvar resolveOnScrollend = function() {\n\t\t\t\t\t\t// console.log(\"%s::whenScrollingEnds [%s]\", view.cid, \"resolved\");\n\t\t\t\t\t\tview.off(\"view:remove\", rejectOnRemove);\n\t\t\t\t\t\tresolve(view);\n\t\t\t\t\t};\n\t\t\t\t\tvar rejectOnRemove = function(view) {\n\t\t\t\t\t\t// console.log(\"%s::whenScrollingEnds [%s]\", view.cid, \"rejected\");\n\t\t\t\t\t\tview.parentView.off(\"view:scrollend\", resolveOnScrollend);\n\t\t\t\t\t\treject(new ViewError(view,\n\t\t\t\t\t\t\tnew Error(\"whenSelectScrollingEnds: view was removed (\"+ view.cid +\")\")));\n\t\t\t\t\t};\n\t\t\t\t\tview.parentView.once(\"view:scrollend\", resolveOnScrollend);\n\t\t\t\t\tview.once(\"view:remove\", rejectOnRemove);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n};\n*/\n",
    "/** @type {module:app/view/base/ViewError} */\nconst ViewError = require(\"app/view/base/ViewError\");\n\n// var logMessage = \"%s::whenSelectionDistanceIs [%s]: %s\";\n\n/**\n * @param {module:app/view/base/View}\n * @param {number} distance\n */\nmodule.exports = function(view, distance) {\n\treturn new Promise(function(resolve, reject) {\n\t\t// if (!(view.model && view.model.collection)) {\n\t\t// \treject(new ViewError(view, new Error(\"whenSelectionIsContiguous: model.collection is empty\")));\n\t\t// }\n\t\tvar model = view.model;\n\t\tvar collection = model.collection;\n\n\t\tvar check = function(n) { // Check indices for contiguity\n\t\t\treturn Math.abs(collection.indexOf(model) - collection.selectedIndex) <= distance;\n\t\t};\n\n\t\tif (check()) {\n\t\t\t// console.log(logMessage, view.cid, \"resolve\", \"sync\");\n\t\t\tresolve(view);\n\t\t} else {\n\t\t\tvar cleanupOnSettle = function() {\n\t\t\t\t// console.log(logMessage, view.cid, \"cleanup\", \"async\");\n\t\t\t\tcollection.off(\"select:one select:none\", resolveOnSelect);\n\t\t\t\tview.off(\"view:removed\", rejectOnRemove);\n\t\t\t};\n\t\t\tvar resolveOnSelect = function(model) {\n\t\t\t\tif (check()) {\n\t\t\t\t\t// console.log(logMessage, view.cid, \"resolve\", \"async\");\n\t\t\t\t\tcleanupOnSettle();\n\t\t\t\t\tresolve(view);\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar rejectOnRemove = function(view) {\n\t\t\t\tcleanupOnSettle();\n\t\t\t\treject(new ViewError(view, new Error(\"whenSelectionDistanceIs: view was removed\")));\n\t\t\t};\n\t\t\tcollection.on(\"select:one select:none\", resolveOnSelect);\n\t\t\tview.on(\"view:removed\", rejectOnRemove);\n\t\t}\n\t});\n};\n",
    "// /** @type {module:app/view/base/ViewError} */\n// var ViewError = require(\"app/view/base/ViewError\");\n\n/** @type {module:app/view/promise/whenSelectionDistanceIs} */\nconst whenSelectionDistanceIs = require(\"app/view/promise/whenSelectionDistanceIs\");\n\n/** @param {module:app/view/base/View} */\nmodule.exports = function(view) {\n\treturn whenSelectionDistanceIs(view, 1);\n};\n",
    "module.exports = function(view) {\n\treturn new Promise(function(resolve, reject) {\n\t\tif (view.attached) {\n\t\t\tresolve(view);\n\t\t} else {\n\t\t\tview.on(\"view:attached\", function(view) {\n\t\t\t\tresolve(view);\n\t\t\t});\n\t\t}\n\t});\n};\n",
    "module.exports = function(view) {\n\treturn new Promise(function(resolve, reject) {\n\t\tif (!view.invalidated) {\n\t\t\tresolve(view);\n\t\t} else {\n\t\t\tview.once(\"view:render:after\", function(view, flags) {\n\t\t\t\tresolve(view);\n\t\t\t});\n\t\t}\n\t});\n};\n",
    "/**\n * @module app/view/render/CarouselRenderer\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/** @type {module:underscore} */\nconst getBoxEdgeStyles = require(\"utils/css/getBoxEdgeStyles\");\n\n// FIXME: this fixup should not be done here\n// /** @type {module:utils/net/toAbsoluteURL} */\n// var toAbsoluteURL = require(\"utils/net/toAbsoluteURL\");\n// /** @type {string} */\n// var ABS_APP_ROOT = toAbsoluteURL(require(\"app/control/Globals\").APP_ROOT);\n\n/**\n * @constructor\n * @type {module:app/view/render/CarouselRenderer}\n */\nvar CarouselRenderer = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"carouselRenderer\",\n\t/** @override */\n\ttagName: \"div\",\n\t/** @override */\n\tclassName: \"carousel-item\",\n\t/** @override */\n\ttemplate: _.template(\"<div class=\\\"content sizing\\\"><%= name %></div>\"),\n\n\tproperties: {\n\t\tcontent: {\n\t\t\tget: function() {\n\t\t\t\treturn this._content || (this._content = this.el.querySelector(\".content\"));\n\t\t\t},\n\t\t},\n\t\tsizing: {\n\t\t\tget: function() {\n\t\t\t\treturn this._sizing || (this._sizing = this.el.querySelector(\".sizing\"));\n\t\t\t},\n\t\t}\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tif (this.model.attr(\"@classname\") !== void 0) {\n\t\t\tvar clsAttr = this.model.attr(\"@classname\").split(\" \");\n\t\t\tfor (var i = 0; i < clsAttr.length; i++) {\n\t\t\t\tthis.el.classList.add(clsAttr[i]);\n\t\t\t}\n\t\t}\n\t\toptions.parentView && (this.parentView = options.parentView);\n\t\tthis.metrics = {};\n\t\tthis.metrics.content = {};\n\t\tthis.createChildren();\n\t\t// this.enabled = !!options.enabled; // force bool\n\t\tthis.setEnabled(!!options.enabled);\n\t},\n\n\tcreateChildren: function() {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t\t// FIXME: this fixup should not be done here\n\t\t// FIXED: now done in xslt\n\t\t/*this.el.querySelectorAll(\"a[href]\").forEach(function(el) {\n\t\t\tvar url = toAbsoluteURL(el.getAttribute(\"href\"));\n\t\t\tif (url.indexOf(ABS_APP_ROOT) !== 0) {\n\t\t\t\tel.setAttribute(\"target\", \"_blank\");\n\t\t\t}\n\t\t});*/\n\t},\n\n\t/** @return {HTMLElement} */\n\tgetSizingEl: function() {\n\t\treturn this._sizing || (this._sizing = this.el.querySelector(\".sizing\"));\n\t},\n\n\t/** @return {HTMLElement} */\n\tgetContentEl: function() {\n\t\treturn this._content || (this._content = this.el.querySelector(\".content\"));\n\t},\n\n\t/** @return {this} */\n\tmeasure: function() {\n\t\tvar sizing = this.getSizingEl();\n\n\t\tthis.metrics = getBoxEdgeStyles(this.el, this.metrics);\n\t\tthis.metrics.content = getBoxEdgeStyles(this.getContentEl(), this.metrics.content);\n\n\t\tsizing.style.maxWidth = \"\";\n\t\tsizing.style.maxHeight = \"\";\n\n\t\tthis.metrics.content.x = sizing.offsetLeft + sizing.clientLeft;\n\t\tthis.metrics.content.y = sizing.offsetTop + sizing.clientTop;\n\t\tthis.metrics.content.width = sizing.clientWidth;\n\t\tthis.metrics.content.height = sizing.clientHeight;\n\n\t\treturn this;\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tthis.measure();\n\t\treturn this;\n\t},\n\n\tgetSelectionDistance: function() {\n\t\treturn Math.abs(this.model.collection.indexOf(this.model) - this.model.collection.selectedIndex);\n\t},\n});\n\nmodule.exports = CarouselRenderer;\n",
    "/**\n * @module app/view/render/ClickableRenderer\n */\n\n/** @type {module:app/view/render/LabelRenderer} */\nconst LabelRenderer = require(\"app/view/render/LabelRenderer\");\n\n/**\n * @constructor\n * @type {module:app/view/render/ClickableRenderer}\n */\nvar ClickableRenderer = LabelRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"clickableRenderer\",\n\n\t// defaults: {\n\t// \ttarget: \".label\"\n\t// },\n\n\t/** @override */\n\tevents: {\n\t\t\"click .label\": function(ev) {\n\t\t\tif (ev.defaultPrevented) return;\n\n\t\t\tev.preventDefault();\n\t\t\tthis.trigger(\"renderer:click\", this.model, ev);\n\t\t},\n\t\t\"click a\": function(ev) {\n\t\t\tev.defaultPrevented || ev.preventDefault();\n\t\t}\n\t},\n\n\t// initialize: function(options) {\n\t// \toptions || (options = {});\n\t// \t// if (options) {\n\t// \toptions = _.defaults({}, options, _.result(this, 'defaults'));\n\t// \t// } else {\n\t// \t// \t _.defaults({}, _.result(this, 'defaults'));\n\t// \t// }\n\t// \tthis.events[\"click \" + options.target] = this.clickHandler;\n\t// },\n\t//\n\t// clickHandler: function(ev) {\n\t// \tif (ev.defaultPrevented) return;\n\t//\n\t// \tev.preventDefault();\n\t// \tthis.trigger(\"renderer:click\", this.model, ev);\n\t// }\n});\n\nmodule.exports = ClickableRenderer;\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\";\n\n  return \"<a href=\\\"#\"\n    + container.escapeExpression(((helper = (helper = helpers.domid || (depth0 != null ? depth0.domid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"domid\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"><span class=\\\"label\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</span></a>\";\n},\"useData\":true});\n",
    "/**\n * @module app/view/render/DefaultSelectableRenderer\n */\n\n/** @type {module:app/view/component/ClickableRenderer} */\nconst ClickableRenderer = require(\"app/view/render/ClickableRenderer\");\n\n/**\n * @constructor\n * @type {module:app/view/render/DefaultSelectableRenderer}\n */\nvar DefaultSelectableRenderer = ClickableRenderer.extend({\n\n\t/** @override */\n\ttagName: \"li\",\n\t/** @override */\n\tclassName: \"list-item\",\n\t/** @override */\n\ttemplate: require(\"./DefaultSelectableRenderer.hbs\"),\n\n\tinitialize: function(options) {\n\t\tthis.listenTo(this.model, \"selected deselected\", this._renderClassList);\n\t\tthis._renderClassList();\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t\tthis._renderClassList();\n\t\treturn this;\n\t},\n\n\t_renderClassList: function() {\n\t\tthis.el.classList.toggle(\"selected\", this.model.selected);\n\t},\n});\n\nmodule.exports = DefaultSelectableRenderer;\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<span class=\\\"label\\\">\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span><a href=\\\"#\"\n    + alias4(((helper = (helper = helpers.domid || (depth0 != null ? depth0.domid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"domid\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"><b> </b></a>\";\n},\"useData\":true});\n",
    "/**\n * @module app/view/render/DotNavigationRenderer\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n// /** @type {module:app/view/component/ClickableRenderer} */\n// var ClickableRenderer = require(\"app/view/render/LabelRenderer\");\n/** @type {string} */\nconst viewTemplate = require(\"./DotNavigationRenderer.hbs\");\n\n/**\n * @constructor\n * @type {module:app/view/render/DotNavigationRenderer}\n */\nvar DotNavigationRenderer = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"dotRenderer\",\n\t/** @override */\n\ttagName: \"li\",\n\t/** @override */\n\tclassName: \"list-item\",\n\t/** @override */\n\ttemplate: viewTemplate,\n\n\t/** @override */\n\tevents: {\n\t\t\"click\": function(ev) {\n\t\t\tif (ev.defaultPrevented) return;\n\n\t\t\tev.preventDefault();\n\t\t\tthis.trigger(\"renderer:click\", this.model, ev);\n\t\t},\n\t\t\"click a\": function(ev) {\n\t\t\tev.defaultPrevented || ev.preventDefault();\n\t\t}\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tthis.listenTo(this.model, \"selected deselected\", this.renderClassList);\n\t\tthis.renderClassList();\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t\tthis.renderClassList();\n\t\treturn this;\n\t},\n\n\trenderClassList: function() {\n\t\tthis.el.classList.toggle(\"selected\", this.model.selected);\n\t},\n});\n\nmodule.exports = DotNavigationRenderer;\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"placeholder sizing\\\"></div>\\n<img class=\\\"content media-border default\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.text || (depth0 != null ? depth0.text : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"text\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" longdesc=\\\"#desc_m\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\n\";\n},\"useData\":true});\n",
    "/**\n * @module app/view/render/ImageRenderer\n */\n\n/** @type {module:app/view/MediaRenderer} */\nconst MediaRenderer = require(\"./MediaRenderer\");\n\n/** @type {Function} */\nconst viewTemplate = require(\"./ImageRenderer.hbs\");\n\n/**\n * @constructor\n * @type {module:app/view/render/ImageRenderer}\n */\nvar ImageRenderer = MediaRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"imageRenderer\",\n\t/** @type {string} */\n\tclassName: MediaRenderer.prototype.className + \" image-item\",\n\t/** @type {Function} */\n\ttemplate: viewTemplate,\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\tMediaRenderer.prototype.initialize.apply(this, arguments);\n\t\t// this.createChildren();\n\t\t// this.initializeAsync();\n\t},\n\n\t/* --------------------------- *\n\t/* children/layout\n\t/* --------------------------- */\n\n\t/** @override */\n\tcreateChildren: function() {\n\t\tMediaRenderer.prototype.createChildren.apply(this, arguments);\n\t\t// this.el.innerHTML = this.template(this.model.toJSON());\n\t\tthis.placeholder = this.el.querySelector(\".placeholder\");\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tMediaRenderer.prototype.render.apply(this, arguments);\n\n\t\t// this.measure();\n\n\t\tvar img = this.getDefaultImage();\n\t\tif (this.metrics.media.width) {\n\t\t\timg.setAttribute(\"width\", this.metrics.media.width);\n\t\t}\n\t\tif (this.metrics.media.height) {\n\t\t\timg.setAttribute(\"height\", this.metrics.media.height);\n\t\t}\n\n\t\tvar content = this.getContentEl();\n\t\tcontent.style.left = this.metrics.content.x + \"px\";\n\t\tcontent.style.top = this.metrics.content.y + \"px\";\n\n\t\t// var sizing = this.getSizingEl();\n\t\t// sizing.style.maxWidth = this.metrics.content.width + \"px\";\n\t\t// sizing.style.maxHeight = this.metrics.content.height + \"px\";\n\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t/* initializeAsync\n\t/* --------------------------- */\n\n\tinitializeAsync: function() {\n\t\treturn MediaRenderer.prototype.initializeAsync.apply(this, arguments)\n\t\t// return MediaRenderer.whenSelectionIsContiguous(this)\n\t\t// // return Promise.resolve(this)\n\t\t// // \t.then(MediaRenderer.whenSelectionIsContiguous)\n\t\t// \t.then(MediaRenderer.whenSelectTransitionEnds)\n\t\t// \t.then(MediaRenderer.whenDefaultImageLoads)\n\t\t// .then(\n\t\t// \tfunction(view) {\n\t\t// \t\tview.mediaState = \"ready\";\n\t\t// \t})\n\t\t// .catch(\n\t\t// \tfunction(err) {\n\t\t// \t\tif (err instanceof ViewError) {\n\t\t// \t\t\t// NOTE: ignore ViewError type\n\t\t// \t\t\t// console.log(err.view.cid, err.view.model.cid, \"ImageRenderer: \" + err.message);\n\t\t// \t\t} else {\n\t\t// \t\t\tconsole.error(this.cid, err.name, err);\n\t\t// \t\t\tthis.placeholder.innerHTML = \"<p class=\\\"color-fg\\\" style=\\\"position:absolute;bottom:0;padding:3rem;\\\"><strong>\" + err.name + \"</strong> \" + err.message + \"</p>\";\n\t\t// \t\t\tthis.mediaState = \"error\";\n\t\t// \t\t}\n\t\t// \t}.bind(this))\n\t\t;\n\t},\n});\n\nmodule.exports = ImageRenderer;\n",
    "/**\n * @module app/view/render/LabelRenderer\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/**\n * @constructor\n * @type {module:app/view/render/LabelRenderer}\n */\nvar LabelRenderer = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"labelRenderer\",\n\n\tproperties: {\n\t\tlabel: {\n\t\t\tget: function() {\n\t\t\t\treturn this._label || (this._label = this.el.querySelector(\".label\"));\n\t\t\t}\n\t\t}\n\t\t// measuredWidth: {\n\t\t// \tget: function() {\n\t\t// \t\treturn this._measuredWidth;\n\t\t// \t}\n\t\t// },\n\t\t// measuredHeight: {\n\t\t// \tget: function() {\n\t\t// \t\treturn this._measuredHeight;\n\t\t// \t}\n\t\t// },\n\t},\n\n\t/* -------------------------------\n\t/* measure\n\t/* ------------------------------- */\n\n\t// _measuredWidth: null,\n\t// _measuredHeight: null,\n\t// measure: function() {},\n});\n\nmodule.exports = LabelRenderer;\n",
    "/*global XMLHttpRequest, HTMLMediaElement, MediaError*/\n/**\n * @module app/view/render/MediaRenderer\n */\n\n// /** @type {module:underscore.strings/lpad} */\n// const lpad = require(\"underscore.string/lpad\");\n\n/** @type {module:app/model/item/MediaItem} */\nconst MediaItem = require(\"app/model/item/MediaItem\");\n/** @type {module:app/view/CarouselRenderer} */\nconst CarouselRenderer = require(\"app/view/render/CarouselRenderer\");\n\n// var errorTemplate = require(\"../template/ErrorBlock.hbs\");\n// /** @type {module:utils/css/getBoxEdgeStyles} */\n// var getBoxEdgeStyles = require(\"utils/css/getBoxEdgeStyles\");\n\nvar MediaRenderer = CarouselRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"mediaRenderer\",\n\t/** @type {string} */\n\tclassName: CarouselRenderer.prototype.className + \" media-item\",\n\t/** @type {module:app/model/MediaItem} */\n\tmodel: MediaItem,\n\n\tproperties: {\n\t\tdefaultImage: {\n\t\t\tget: function() {\n\t\t\t\treturn this._defaultImage || (this._defaultImage = this.el.querySelector(\"img.default\"));\n\t\t\t}\n\t\t},\n\t\tmediaState: {\n\t\t\tget: function() {\n\t\t\t\treturn this._mediaState;\n\t\t\t},\n\t\t\tset: function(state) {\n\t\t\t\tthis._setMediaState(state);\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\t// if (this.model.attrs().hasOwnProperty(\"@classname\")) {\n\t\t// \tthis.el.className += \" \" + this.model.attr(\"@classname\");\n\t\t// }\n\n\t\t// NOTE: @classname attr handling moved to CarouselRenderer\n\t\t// if (this.model.attr(\"@classname\") !== void 0) {\n\t\t// \tvar clsAttr = this.model.attr(\"@classname\").split(\" \");\n\t\t// \tfor (var i = 0; i < clsAttr.length; i++) {\n\t\t// \t\tthis.el.classList.add(clsAttr[i]);\n\t\t// \t}\n\t\t// }\n\t\tCarouselRenderer.prototype.initialize.apply(this, arguments);\n\n\t\tthis.metrics.media = {};\n\t\tthis.mediaState = \"idle\";\n\n\t\tthis.initializeAsync()\n\t\t\t.then(this.whenInitialized)\n\t\t\t.catch(this.whenInitializeError.bind(this));\n\t},\n\n\tinitializeAsync: function() {\n\t\t// var MediaRenderer = Object.getPrototypeOf(this).constructor;\n\t\treturn Promise.resolve(this)\n\t\t\t.then(MediaRenderer.whenSelectionIsContiguous)\n\t\t\t.then(MediaRenderer.whenScrollingEnds)\n\t\t\t.then(MediaRenderer.whenDefaultImageLoads);\n\t},\n\n\twhenInitialized: function(view) {\n\t\t// console.log(\"%s::whenInitialized [%s]\", view.cid, \"resolved\");\n\t\tview.mediaState = \"ready\";\n\t\tview.placeholder.removeAttribute(\"data-progress\");\n\t\treturn view;\n\t},\n\n\twhenInitializeError: function(err) {\n\t\tif (err instanceof CarouselRenderer.ViewError) {\n\t\t\t// NOTE: ignore ViewError type\n\t\t\treturn;\n\t\t} else if (err instanceof Error) {\n\t\t\tconsole.error(err.stack);\n\t\t}\n\t\tthis.placeholder.removeAttribute(\"data-progress\");\n\t\tthis.mediaState = \"error\";\n\t},\n\n\tupdateMediaProgress: function(progress, id) {\n\t\tif (_.isNumber(progress)) {\n\t\t\tthis.placeholder.setAttribute(\"data-progress\",\n\t\t\t\tString(Math.floor(progress * 100)).padStart(2, '0'));\n\t\t}\n\t\t// else if (progress === \"complete\") {\n\t\t// \tthis.placeholder.removeAttribute(\"data-progress\");\n\t\t// }\n\t},\n\n\t// whenMediaIsReady: function(view) {\n\t// \treturn MediaRenderer.whenDefaultImageLoads(this, this.updateMediaProgress.bind(this));\n\t// },\n\n\t/* --------------------------- *\n\t/* child getters\n\t/* --------------------------- */\n\n\t/** @return {HTMLElement} */\n\tgetDefaultImage: function() {\n\t\treturn this.defaultImage;\n\t},\n\n\t/* --------------------------- *\n\t/* children/layout\n\t/* --------------------------- */\n\n\tcreateChildren: function() {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t},\n\n\t/** @override */\n\tmeasure: function() {\n\t\tCarouselRenderer.prototype.measure.apply(this, arguments);\n\n\t\tvar sw, sh; // source dimensions\n\t\tvar pcw, pch; // measured values\n\t\tvar cx, cy, cw, ch, cs; // computed values\n\t\tvar ew, eh; // content edge totals\n\t\tvar cm; // content metrics\n\n\t\tcm = this.metrics.content;\n\t\tcx = cm.x;\n\t\tcy = cm.y;\n\t\tpcw = cm.width;\n\t\tpch = cm.height;\n\n\t\tew = (cm.paddingLeft + cm.paddingRight + cm.borderLeftWidth + cm.borderRightWidth);\n\t\teh = (cm.paddingTop + cm.paddingBottom + cm.borderTopWidth + cm.borderBottomWidth);\n\t\tpcw -= ew;\n\t\tpch -= eh;\n\n\t\tsw = this.model.get(\"source\").get(\"w\");\n\t\t// || this.defaultImage.naturalWidth || pcw;\n\t\tsh = this.model.get(\"source\").get(\"h\");\n\t\t// || this.defaultImage.naturalHeight || pch;\n\n\t\t// if (!(sw && sh)) {\n\t\t// \tsw = pcw;\n\t\t// \tsh = pch;\n\t\t// }\n\n\t\t// Unless both client dimensions are larger than the source's\n\t\t// choose constraint direction by aspect ratio\n\t\tif (sw < pcw && sh < pch) {\n\t\t\tcs = 1;\n\t\t\tcw = sw;\n\t\t\tch = sh;\n\t\t\tthis.metrics.fitDirection = \"both\";\n\t\t} else if ((pcw / pch) < (sw / sh)) {\n\t\t\t// fit width\n\t\t\tcw = pcw;\n\t\t\tcs = cw / sw;\n\t\t\t// ch = cs * sh;\n\t\t\tch = Math.round(cs * sh);\n\t\t\tthis.metrics.fitDirection = \"width\";\n\t\t} else {\n\t\t\t// fit height\n\t\t\tch = pch;\n\t\t\tcs = ch / sh;\n\t\t\t// cw = cs * sw;\n\t\t\tcw = Math.round(cs * sw);\n\t\t\tthis.metrics.fitDirection = \"height\";\n\t\t}\n\n\t\tthis.metrics.content.x = cx;\n\t\tthis.metrics.content.y = cy;\n\t\tthis.metrics.content.width = cw + ew;\n\t\tthis.metrics.content.height = ch + eh;\n\n\t\tthis.metrics.media.x = cx + cm.paddingLeft + cm.borderLeftWidth;\n\t\tthis.metrics.media.y = cy + cm.paddingTop + cm.borderTopWidth;\n\t\tthis.metrics.media.width = cw;\n\t\tthis.metrics.media.height = ch;\n\t\tthis.metrics.media.scale = cs;\n\n\t\t// console.log(\"%s::measure mw:%s mh:%s fit: %s metrics: %o\", this.cid, pcw, pch, this.metrics.fitDirection, this.metrics);\n\t\t// var sizing = this.getSizingEl();\n\t\t// sizing.style.maxWidth = (cw + ew) + \"px\";\n\t\t// sizing.style.maxHeight = (ch + eh) + \"px\";\n\n\t\treturn this;\n\t},\n\n\trender: function() {\n\t\t// NOTE: not calling super.render, calling measure ourselves\n\t\tthis.measure();\n\n\t\tvar sizing = this.getSizingEl();\n\t\tsizing.style.maxWidth = this.metrics.content.width + \"px\";\n\t\tsizing.style.maxHeight = this.metrics.content.height + \"px\";\n\n\t\tthis.el.setAttribute(\"data-fit-dir\", this.metrics.fitDirection);\n\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t/* mediaState\n\t/* --------------------------- */\n\n\t_mediaStateEnum: [\"idle\", \"pending\", \"ready\", \"error\"],\n\n\t_setMediaState: function(key) {\n\t\tif (this._mediaStateEnum.indexOf(key) === -1) {\n\t\t\tthrow new Error(\"Argument \" + key + \" invalid. Must be one of: \" + this._mediaStateEnum.join(\", \"));\n\t\t}\n\t\tif (this._mediaState !== key) {\n\t\t\tif (this._mediaState) {\n\t\t\t\tthis.el.classList.remove(this._mediaState);\n\t\t\t}\n\t\t\tthis.el.classList.add(key);\n\t\t\tthis._mediaState = key;\n\t\t\tthis.trigger(\"media:\" + key);\n\t\t}\n\t},\n}, {\n\tLOG_TO_SCREEN: true,\n\t/** @type {module:app/view/promise/whenSelectionDistanceIs} */\n\twhenSelectionDistanceIs: require(\"app/view/promise/whenSelectionDistanceIs\"),\n\n\t/** @type {module:app/view/promise/whenSelectionIsContiguous} */\n\twhenSelectionIsContiguous: require(\"app/view/promise/whenSelectionIsContiguous\"),\n\n\t// /** @type {module:app/view/promise/whenSelectTransitionEnds} */\n\t// whenSelectTransitionEnds: require(\"app/view/promise/whenSelectTransitionEnds\"),\n\n\t/** @type {module:app/view/promise/whenScrollingEnds} */\n\twhenScrollingEnds: require(\"app/view/promise/whenScrollingEnds\"),\n\n\t/** @type {module:app/view/promise/whenDefaultImageLoads} */\n\twhenDefaultImageLoads: require(\"app/view/promise/whenDefaultImageLoads\"),\n});\n\n/* ---------------------------\n/* log to screen\n/* --------------------------- */\nif (DEBUG) {\n\n\tMediaRenderer = (function(MediaRenderer) {\n\t\tif (!MediaRenderer.LOG_TO_SCREEN) return MediaRenderer;\n\n\t\t/** @type {Function} */\n\t\tvar Color = require(\"color\");\n\n\t\treturn MediaRenderer.extend({\n\n\t\t\t/** @override */\n\t\t\tinitialize: function() {\n\n\t\t\t\tvar fgColor = new Color(this.model.attr(\"color\"));\n\t\t\t\tvar bgColor = new Color(this.model.attr(\"background-color\"));\n\t\t\t\tthis.__logColors = {\n\t\t\t\t\tnormal: Color(fgColor).mix(bgColor, 0.75).hsl().string(),\n\t\t\t\t\tignored: Color(fgColor).mix(bgColor, 0.25).hsl().string(),\n\t\t\t\t\terror: \"brown\",\n\t\t\t\t\tabort: \"orange\"\n\t\t\t\t};\n\t\t\t\tthis.__logFrameStyle = \"1px dashed \" + Color(fgColor).mix(bgColor, 0.5).hsl().string();\n\t\t\t\tthis.__logStartTime = Date.now();\n\t\t\t\tthis.__rafId = -1;\n\t\t\t\tthis.__onFrame = this.__onFrame.bind(this);\n\t\t\t\tMediaRenderer.prototype.initialize.apply(this, arguments);\n\t\t\t},\n\n\t\t\tinitializeAsync: function() {\n\t\t\t\treturn MediaRenderer.prototype.initializeAsync.apply(this, arguments).catch(function(err) {\n\t\t\t\t\tif (!(err instanceof MediaRenderer.ViewError)) {\n\t\t\t\t\t\tthis.__logMessage(err.message, err.name, this.__logColors[\"error\"]);\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t}.bind(this));\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\tcreateChildren: function() {\n\t\t\t\tvar ret = MediaRenderer.prototype.createChildren.apply(this, arguments);\n\n\t\t\t\tthis.__logElement = document.createElement(\"div\");\n\t\t\t\tthis.__logElement.className = \"debug-log\";\n\t\t\t\t// this.__logElement.style.touchAction = \"pan-y\";\n\t\t\t\tthis.__logHeaderEl = document.createElement(\"pre\");\n\t\t\t\tthis.__logHeaderEl.className = \"log-header color-bg\";\n\t\t\t\t// Color(this.model.colors.fgColor).mix(fgColor, 0.9).rgb().string()\n\t\t\t\t// Color(this.model.colors.fgColor).alpha\n\t\t\t\tthis.__logHeaderEl.textContent = this.__getHeaderText();\n\t\t\t\tthis.__logElement.appendChild(this.__logHeaderEl);\n\t\t\t\tthis.el.insertBefore(this.__logElement, this.el.firstElementChild);\n\t\t\t\treturn ret;\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\trender: function() {\n\t\t\t\tvar ret = MediaRenderer.prototype.render.apply(this, arguments);\n\n\t\t\t\tthis.__logElement.style.top = (this.metrics.content.height + this.metrics.content.y) + \"px\";\n\t\t\t\tthis.__logElement.style.left = this.metrics.content.x + \"px\";\n\t\t\t\tthis.__logElement.style.width = this.metrics.content.width + \"px\";\n\t\t\t\tthis.__logElement.scrollTop = this.__logElement.scrollHeight;\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\t\t\twhenInitializeError: function(err) {\n\t\t\t\t// NOTE: not calling super\n\t\t\t\t// MediaRenderer.prototype.whenInitializeError.apply(this, arguments);\n\t\t\t\tif (err instanceof CarouselRenderer.ViewError) {\n\t\t\t\t\t// NOTE: ignore ViewError type\n\t\t\t\t\t// console.warn(\"%s::whenInitializeError \", err.view.cid, err.message);\n\t\t\t\t\treturn;\n\t\t\t\t} else if (err instanceof Error) {\n\t\t\t\t\tconsole.warn(err.stack);\n\t\t\t\t}\n\t\t\t\t// this.placeholder.innerHTML = err ? errorTemplate(err) : \"\";\n\t\t\t\tthis.placeholder.removeAttribute(\"data-progress\");\n\t\t\t\tthis.mediaState = \"error\";\n\n\t\t\t\t// console.error(\"%s::initializeAsync [%s (caught)]: %s\", this.cid, err.name, (err.info && err.info.logMessage) || err.message);\n\t\t\t\t// err.logEvent && console.log(err.logEvent);\n\t\t\t},\n\n\t\t\t/* --------------------------- *\n\t\t\t/* log methods\n\t\t\t/* --------------------------- */\n\n\t\t\t__logMessage: function(msg, logtype, color) {\n\t\t\t\tvar logEntryEl = document.createElement(\"pre\");\n\n\t\t\t\tlogtype || (logtype = \"-\")\n\t\t\t\tlogEntryEl.textContent = this.__getTStamp() + \" \" + msg;\n\t\t\t\tlogEntryEl.setAttribute(\"data-logtype\", logtype);\n\t\t\t\tlogEntryEl.style.color = color || this.__logColors[logtype] || this.__logColors.normal;\n\n\t\t\t\tthis.__logElement.appendChild(logEntryEl);\n\t\t\t\tthis.__logElement.scrollTop = this.__logElement.scrollHeight;\n\n\t\t\t\tif (this.__rafId == -1) {\n\t\t\t\t\tthis.__rafId = this.requestAnimationFrame(this.__onFrame);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t__onFrame: function(tstamp) {\n\t\t\t\tthis.__rafId = -1;\n\t\t\t\tthis.__logElement.lastElementChild.style.borderBottom = this.__logFrameStyle;\n\t\t\t\tthis.__logElement.lastElementChild.style.paddingBottom = \"2px\";\n\t\t\t\tthis.__logElement.lastElementChild.style.marginBottom = \"2px\";\n\t\t\t},\n\n\t\t\t__getTStamp: function() {\n\t\t\t\t// return new Date(Date.now() - this.__logStartTime).toISOString().substr(11, 12);\n\t\t\t\treturn String(((Date.now() - this.__logStartTime) / 1000).toFixed(3)).padStart(8, \"0\");\n\t\t\t},\n\n\t\t\t__getHeaderText: function() {\n\t\t\t\treturn '';\n\t\t\t},\n\t\t});\n\t})(MediaRenderer);\n\n} // end debug\n\n/**\n * @constructor\n * @type {module:app/view/render/MediaRenderer}\n */\nmodule.exports = MediaRenderer;\n",
    "/**\n * @module app/view/render/PlayableRenderer\n */\n\n/** @type {module:app/view/MediaRenderer} */\nconst MediaRenderer = require(\"app/view/render/MediaRenderer\");\n// /** @type {module:app/view/component/CanvasProgressMeter} */\n// var ProgressMeter = require(\"app/view/component/CanvasProgressMeter\");\n\n/** @type {Function} */\nconst prefixedProperty = require(\"utils/prefixedProperty\");\n/** @type {Function} */\nconst prefixedEvent = require(\"utils/prefixedEvent\");\n\n// var visibilityHiddenProp = prefixedProperty(\"hidden\", document);\n/** @type {String} */\nvar visibilityStateProp = prefixedProperty(\"visibilityState\", document);\n/** @type {String} */\nvar visibilityChangeEvent = prefixedEvent(\"visibilitychange\", document, \"hidden\");\n\n// /** @type {Function} */\n// var Color = require(\"color\");\n//\n// /** @type {Function} */\n// // var duotone = require(\"utils/canvas/bitmap/duotone\");\n// // var stackBlurMono = require(\"utils/canvas/bitmap/stackBlurMono\");\n// var stackBlurRGB = require(\"utils/canvas/bitmap/stackBlurRGB\");\n// // var getAverageRGBA = require(\"utils/canvas/bitmap/getAverageRGBA\");\n// var getAverageRGB = require(\"utils/canvas/bitmap/getAverageRGB\");\n// // var inflateRect = require(\"utils/geom/inflateRect\");\n//\n\n// var WAIT_DEBOUNCE_MS = require(\"app/control/Globals\").TRANSITION_DURATION;\n\n// /** @type {HTMLCanvasElement} */\n// var _sharedCanvas = null;\n// /** @return {HTMLCanvasElement} */\n// var getSharedCanvas = function() {\n// \tif (_sharedCanvas === null) {\n// \t\t_sharedCanvas = document.createElement(\"canvas\");\n// \t}\n// \treturn _sharedCanvas;\n// };\n\n// var SVG_NS = \"http://www.w3.org/2000/svg\";\n// var XLINK_NS = \"http://www.w3.org/1999/xlink\";\n//\n// var useIdSeed = 0\n// var createSVGUseElement = function() {\n// \tvar svgEl = document.createElementNS(SVG_NS, \"use\");\n// \tsvgEl.setAttributeNS(null, \"id\", name + (useIdSeed++));\n// \tsvgEl.setAttributeNS(null, \"class\", [name, \"symbol\"].join(\" \"));\n// \tsvgEl.setAttributeNS(XLINK_NS, \"xlink:href\", \"#\" + name);\n// \treturn svgEl;\n// };\n\n// function logAttachInfo(view, name, level) {\n// \tif ([\"log\", \"info\", \"warn\", \"error\"].indexOf(level) != -1) {\n// \t\tlevel = \"log\";\n// \t}\n// \tconsole[level].call(console, \"%s::%s [parent:%s %s %s depth:%s]\", view.cid, name, view.parentView && view.parentView.cid, view.attached ? \"attached\" : \"detached\", view._viewPhase, view.viewDepth);\n// }\n\n/**\n * @constructor\n * @type {module:app/view/render/PlayableRenderer}\n */\nvar PlayableRenderer = MediaRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"playableRenderer\",\n\n\t/** @type {string|Function} */\n\tclassName: MediaRenderer.prototype.className + \" playable-item\",\n\n\tproperties: {\n\t\tmediaPaused: {\n\t\t\t/** @return {Boolean} */\n\t\t\tget: function() {\n\t\t\t\treturn this._isMediaPaused();\n\t\t\t}\n\t\t},\n\t\tmediaWaiting: {\n\t\t\t/** @return {Boolean} */\n\t\t\tget: function() {\n\t\t\t\treturn this._isMediaWaiting();\n\t\t\t}\n\t\t},\n\t\tplaybackRequested: {\n\t\t\t/** @return {Boolean} */\n\t\t\tget: function() {\n\t\t\t\treturn this._playbackRequested;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tthis._setPlaybackRequested(value);\n\t\t\t}\n\t\t},\n\t\toverlay: {\n\t\t\t/** @return {HTMLElement} */\n\t\t\tget: function() {\n\t\t\t\treturn this._overlay || (this._overlay = this.el.querySelector(\".overlay\"));\n\t\t\t}\n\t\t},\n\t\t// playToggle: {\n\t\t// \t/** @return {HTMLElement} */\n\t\t// \tget: function() {\n\t\t// \t\treturn this._playToggle || (this._playToggle = this.el.querySelector(\".play-toggle\"));\n\t\t// \t}\n\t\t// },\n\t\t// playToggleSymbol: {\n\t\t// \t/** @return {HTMLElement} */\n\t\t// \tget: function() {\n\t\t// \t\treturn this._playToggleSymbol || (this._playToggleSymbol = this.el.querySelector(\".play-toggle-symbol\"));\n\t\t// \t}\n\t\t// },\n\t\tplayToggleHitarea: {\n\t\t\t/** @return {HTMLElement} */\n\t\t\tget: function() {\n\t\t\t\treturn this._playToggleHitarea || (this._playToggleHitarea = this.el.querySelector(\".play-toggle-hitarea\"));\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\tthis._playToggleSymbol = {};\n\t\t// this._toggleWaiting = _.debounce(this._toggleWaiting, 500);\n\t\t// this._toggleWaiting = _.throttle(this._toggleWaiting, WAIT_DEBOUNCE_MS, { leading: true, trailing: true });\n\n\t\t_.bindAll(this,\n\t\t\t\"_onPlaybackToggle\",\n\t\t\t\"_onVisibilityChange\"\n\t\t);\n\t\tMediaRenderer.prototype.initialize.apply(this, arguments);\n\t\tthis._setPlaybackRequested(this._playbackRequested);\n\n\t\t// this.listenTo(this, \"view:parentChange\", function(childView, newParent, oldParent) {\n\t\t// \t// logAttachInfo(this, \"[view:parentChange]\", \"info\");\n\t\t// \tconsole.info(\"%s::[view:parentChange] '%s' to '%s'\", this.cid, oldParent && oldParent.cid, newParent && newParent.cid);\n\t\t// });\n\t},\n\n\t// /** @override */\n\t// initializeAsync: function() {\n\t// \treturn MediaRenderer.prototype.initialize.initializeAsync.apply(this, arguments);\n\t// },\n\n\t// /** @override */\n\t// remove: function() {\n\t// \tMediaRenderer.prototype.remove.apply(this, arguments);\n\t// \treturn this;\n\t// },\n\n\t/* --------------------------- *\n\t/* children/layout\n\t/* --------------------------- */\n\n\t// createChildren: function() {\n\t// },\n\n\t/* --------------------------- *\n\t/* setEnabled\n\t/* --------------------------- */\n\n\t/** @override */\n\tsetEnabled: function(enabled) {\n\t\tMediaRenderer.prototype.setEnabled.apply(this, arguments);\n\t\t// this._validatePlayback(enabled);\n\t\t// if (enabled) {\n\t\tthis._validatePlayback();\n\t\t// } else {\n\t\t// \t// if selected, pause media\n\t\t// \tthis.model.selected && this._togglePlayback(false);\n\t\t// \t// this._togglePlayback(false);\n\t\t// }\n\t\t// console.log(\"%s::setEnabled\", this.cid, this.enabled);\n\t\t// this._playToggleSymbol.paused = (this.enabled && this.model.selected);\n\t\t//}\n\t},\n\n\t/* ---------------------------\n\t/* selection handlers\n\t/* --------------------------- */\n\n\tlistenToSelection: function() {\n\t\tif (this._viewPhase != \"initialized\")\n\t\t\tthrow new Error(this.cid + \"::listenToSelection called while \" + this._viewPhase);\n\n\t\t// logAttachInfo(this, \"listenToSelection\", \"log\");\n\t\t// this.listenTo(this, \"view:removed\", this.removeSelectionListeners);\n\t\tthis.listenTo(this.model, \"selected\", this._onModelSelected);\n\t\tthis.listenTo(this.model, \"deselected\", this._onModelDeselected);\n\t\tif (this.model.selected) {\n\t\t\tthis._onModelSelected();\n\t\t}\n\t},\n\n\t/* model selected handlers:\n\t/* model selection toggles playback\n\t/* --------------------------- */\n\n\t_onModelSelected: function() {\n\t\tconsole.log(\"%s::_onModelSelected _playbackRequested: %s, event: %s\", this.cid, this._playbackRequested, this._toggleEvent);\n\t\tthis.listenTo(this, \"view:parentChange\", this._onParentChange);\n\t\tif (this.parentView) this._onParentChange(this, this.parentView, null);\n\n\t\t// this.enabled = true;\n\t\tthis._playToggleSymbol.paused = !this.enabled;\n\n\t\tthis._listenWhileSelected();\n\t\tthis._validatePlayback();\n\t},\n\n\t_onModelDeselected: function() {\n\t\tconsole.log(\"%s::_onModelDeselected _playbackRequested: %s, event: %s\", this.cid, this._playbackRequested, this._toggleEvent);\n\t\tthis.stopListening(this, \"view:parentChange\", this._onParentChange);\n\t\tif (this.parentView) this._onParentChange(this, null, this.parentView);\n\n\t\tthis._playToggleSymbol.paused = true;\n\n\t\tthis._stopListeningWhileSelected();\n\t\tthis._validatePlayback(false);\n\t\t// this._togglePlayback(false);\n\t},\n\n\t/* view:parentChange handlers 3\n\t/* --------------------------- */\n\t_onParentChange: function(childView, newParent, oldParent) {\n\t\t// console.log(\"[scroll] %s::_onParentChange '%s' to '%s'\", this.cid, oldParent && oldParent.cid, newParent && newParent.cid);\n\t\tif (oldParent) this.stopListening(oldParent, \"view:scrollstart view:scrollend\", this._onScrollChange);\n\t\tif (newParent) this.listenTo(newParent, \"view:scrollstart view:scrollend\", this._onScrollChange);\n\t},\n\n\t_onScrollChange: function() {\n\t\tif (this.parentView === null) {\n\t\t\tthrow new Error(this.cid + \"::_onScrollChange parentView is null\");\n\t\t}\n\t\tthis._validatePlayback();\n\t},\n\n\t/* visibility dom event\n\t/* --------------------------- */\n\t_onVisibilityChange: function(ev) {\n\t\tthis._validatePlayback();\n\t},\n\n\t/* listen to DOM events\n\t * --------------------------- */\n\n\t_listenWhileSelected: function() {\n\t\tthis.listenTo(this, \"view:removed\", this._stopListeningWhileSelected);\n\t\tdocument.addEventListener(visibilityChangeEvent, this._onVisibilityChange, false);\n\t\tthis.playToggleHitarea.addEventListener(this._toggleEvent, this._onPlaybackToggle, false);\n\t},\n\n\t_stopListeningWhileSelected: function() {\n\t\tthis.stopListening(this, \"view:removed\", this._stopListeningWhileSelected);\n\t\tdocument.removeEventListener(visibilityChangeEvent, this._onVisibilityChange, false);\n\t\tthis.playToggleHitarea.removeEventListener(this._toggleEvent, this._onPlaybackToggle, false);\n\t},\n\n\t/* --------------------------- *\n\t/* play-toggle\n\t/* --------------------------- */\n\n\t/** @type {String} */\n\t_toggleEvent: MediaRenderer.CLICK_EVENT, //window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\",\n\n\t_onPlaybackToggle: function(ev) {\n\t\t//console.log(\"%s[%sabled]::_onPlaybackToggle[%s] defaultPrevented: %s\", this.cid, this.enabled ? \"en\" : \"dis\", ev.type, ev.defaultPrevented);\n\t\t// NOTE: Perform action if MouseEvent.button is 0 or undefined (0: left-button)\n\t\tif (this.enabled && !ev.defaultPrevented && !ev.button) {\n\t\t\tev.preventDefault();\n\t\t\tthis.playbackRequested = !this.playbackRequested;\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* playbackRequested\n\t/* --------------------------- */\n\n\t_playbackCount: 0,\n\n\t/** @type {Boolean?} */\n\t_playbackRequested: null,\n\n\t_setPlaybackRequested: function(value) {\n\t\tthis._playbackRequested = value;\n\n\t\tvar classList = this.content.classList;\n\t\tclassList.toggle(\"playing\", value === true);\n\t\tclassList.toggle(\"paused\", value === false);\n\t\tclassList.toggle(\"requested\", value === true || value === false);\n\n\t\tthis._renderPlaybackState();\n\n\t\t// this._validatePlayback(this.playbackRequested);\n\t\t// if (this.playbackRequested) {\n\t\tthis._validatePlayback();\n\t\t// } else {\n\t\t// \tthis._togglePlayback(false);\n\t\t// }\n\t},\n\n\t/* --------------------------- *\n\t/* _togglePlayback\n\t/* --------------------------- */\n\n\t/** @param {Boolean} */\n\t_togglePlayback: function(newPlayState) {\n\t\tif (DEBUG) this.__logMessage([\n\t\t\t\t\"args:\", Array.prototype.join.apply(arguments),\n\t\t\t\t\"paused:\", (this._isMediaPaused() ? \"pause\" : \"play\"),\n\t\t\t\t\"media-state:\", this.mediaState,\n\t\t\t\t].join(\" \"),\n\t\t\t\"toggle-playback\");\n\n\t\tif (_.isBoolean(newPlayState) && newPlayState !== this._isMediaPaused()) {\n\t\t\treturn; // requested state is current, do nothing\n\t\t} else {\n\t\t\tnewPlayState = this._isMediaPaused();\n\t\t}\n\t\tif (newPlayState) { // changing to what?\n\t\t\t// this._playbackCount++;\n\t\t\tthis._playMedia();\n\t\t} else {\n\t\t\tthis._pauseMedia();\n\t\t}\n\t\t/* NOTE: called from _setPlaybackRequested */\n\t\t// this._renderPlaybackState();\n\t},\n\n\t_canResumePlayback: function() {\n\t\treturn !!(\n\t\t\tthis.enabled &&\n\t\t\tthis.model.selected &&\n\t\t\tthis.playbackRequested &&\n\t\t\t(this.mediaState === \"ready\") &&\n\t\t\tthis.attached &&\n\t\t\t(this.parentView !== null) &&\n\t\t\t(!this.parentView.scrolling) &&\n\t\t\t(document[visibilityStateProp] != \"hidden\")\n\t\t);\n\t},\n\n\t_validatePlayback: function(shortcircuit) {\n\t\t// a 'shortcircuit' boolean argument can be passed, and if false,\n\t\t// skip _canResumePlayback and pause playback right away\n\t\tif (arguments.length !== 0 && !shortcircuit) {\n\t\t\tthis._togglePlayback(false);\n\t\t} else {\n\t\t\tthis._togglePlayback(this._canResumePlayback());\n\t\t}\n\t\tthis._playToggleSymbol.paused = !(this.attached && this.enabled && this.model.selected);\n\t},\n\n\t/* ---------------------------\n\t/* _setPlayToggleSymbol\n\t/* --------------------------- */\n\n\t_renderPlaybackState: function() {\n\t\tif (!this.attached) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.progressMeter) {\n\t\t\tthis.progressMeter.stalled = this._isMediaWaiting();\n\t\t}\n\t\t// this._setPlayToggleSymbol(\"waiting\");\n\t\t// this.content.classList.toggle(\"waiting\", true);\n\n\t\t// if (!this.content.classList.contains(\"started\")) {\n\t\t// \tthis._setPlayToggleSymbol(\"play\");\n\t\t// } else\n\t\tvar waiting = !this.parentView.scrolling && this._isMediaWaiting();\n\n\t\tif (this.playbackRequested) {\n\t\t\tif (waiting) {\n\t\t\t\tthis._setPlayToggleSymbol(\"waiting\");\n\t\t\t} else {\n\t\t\t\tthis._setPlayToggleSymbol(\"play\");\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.content.classList.contains(\"started\")) {\n\t\t\t\tthis._setPlayToggleSymbol(\"pause\");\n\t\t\t} else {\n\t\t\t\tthis._setPlayToggleSymbol(\"play\");\n\t\t\t}\n\t\t}\n\t\tvar cls = this.content.classList;\n\t\tcls.toggle(\"playing\", this.playbackRequested);\n\t\tcls.toggle(\"paused\", !this.playbackRequested);\n\t\tcls.toggle(\"waiting\", waiting);\n\n\t\t//console.log(\"%s::_renderPlaybackState [play: %s] [wait: %s] [symbol: %s]\", this.cid, this.playbackRequested, this._isMediaWaiting(), this._playToggleSymbol.symbolName);\n\t},\n\n\t_setPlayToggleSymbol: function(symbolName) {\n\t\t//console.log(\"%s::_setPlayToggleSymbol [enabled: %s] [selected: %s] [symbol: %s]\", this.cid, this.enabled, !!(this.model.selected), symbolName);\n\n\t\t// this._playToggleSymbol.paused = !(this.attached && this.enabled && !!(this.model.selected));\n\t\tthis._playToggleSymbol.symbolName = symbolName;\n\t\tif (this.mediaState === \"ready\") { //this._playToggleSymbol.renderFlags) {\n\t\t\tthis._playToggleSymbol.renderNow();\n\t\t}\n\t},\n\n\t// _playToggleSymbolSvg: null,\n\t// _playToggleSymbolName: null,\n\t// _setPlayToggleSymbol_svg: function(symbolName) {\n\t// \tif (this._playToggleSymbolName !== symbolName) {\n\t// \t\tvar svgDoc = this.el.querySelector(\"svg.play-toggle-symbol\");\n\t// \t\tif (this._playToggleSymbolSvg) {\n\t// \t\t\tsvgDoc.removeChild(this._playToggleSymbolSvg);\n\t// \t\t}\n\t// \t\tvar svgSym = document.createElementNS(\"http://www.w3.org/2000/svg\", \"use\");\n\t// \t\tsvgSym.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", \"#\" + symbolName);\n\t// \t\tsvgDoc.appendChild(svgSym);\n\t// \t\tsvgDoc.setAttributeNS(null, \"class\", symbolName + \"-symbol play-toggle-symbol\");\n\t//\n\t// \t\tthis._playToggleSymbolSvg = svgSym;\n\t// \t\tthis._playToggleSymbolName = symbolName;\n\t// \t}\n\t// },\n\n\t/* --------------------------- *\n\t/* waiting\n\t/* --------------------------- */\n\n\t_isWaiting: false,\n\n\t_isMediaWaiting: function() {\n\t\treturn this._isWaiting;\n\t},\n\n\t_toggleWaiting: function(waiting) {\n\t\tif (arguments.length === 0) {\n\t\t\twaiting = !this._isWaiting;\n\t\t}\n\t\t// if (this._isMediaPaused()) {\n\t\t// \twaiting = false;\n\t\t// }\n\t\tif (this._isWaiting !== waiting) {\n\t\t\tthis._isWaiting = waiting;\n\t\t\tthis._renderPlaybackState();\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* abstract\n\t/* --------------------------- */\n\n\t_isMediaPaused: function() {\n\t\tconsole.warn(\"%s::_isMediaPaused Not implemented\", this.cid);\n\t\treturn true;\n\t},\n\n\t_playMedia: function() {\n\t\tconsole.warn(\"%s::_playMedia Not implemented\", this.cid);\n\t},\n\n\t_pauseMedia: function() {\n\t\tconsole.warn(\"%s::_pauseMedia Not implemented\", this.cid);\n\t},\n\n\t/* --------------------------- *\n\t/* util\n\t/* --------------------------- */\n\n\tupdateOverlay: function(mediaEl, targetEl, rectEl) {\n\t\t// this method is not critical, just catch and log all errors\n\t\t// try {\n\t\t// \tthis._updateOverlay(mediaEl, targetEl, rectEl)\n\t\t// } catch (err) {\n\t\t// \tconsole.error(\"%s::updateOverlay\", this.cid, err);\n\t\t// }\n\t},\n\n\t/**\\/\n\t_drawMediaElement: function(ctx, mediaEl, dest) {\n\t\t// destination rect\n\t\t// NOTE: mediaEl is expected to have the same dimensions in this.metrics.media\n\t\tmediaEl || (mediaEl = this.defaultImage);\n\t\tdest || (dest = {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: this.metrics.media.width,\n\t\t\theight: this.metrics.media.height\n\t\t});\n\n\t\t// native/display scale\n\t\tvar sW = this.model.get(\"source\").get(\"w\"),\n\t\t\tsH = this.model.get(\"source\").get(\"h\"),\n\t\t\trsX = sW / this.metrics.media.width,\n\t\t\trsY = sH / this.metrics.media.height;\n\n\t\t// dest, scaled to native\n\t\tvar src = {\n\t\t\tx: Math.max(0, dest.x * rsX),\n\t\t\ty: Math.max(0, dest.y * rsY),\n\t\t\twidth: Math.min(sW, dest.width * rsX),\n\t\t\theight: Math.min(sH, dest.height * rsY)\n\t\t};\n\n\t\t// resize canvas\n\t\t// var canvas = ctx.canvas;\n\t\t// if (canvas.width !== dest.width || canvas.height !== dest.height) {\n\t\t// \tcanvas.width = dest.width;\n\t\t// \tcanvas.height = dest.height;\n\t\t// }\n\t\tctx.canvas.width = dest.width;\n\t\tctx.canvas.height = dest.height;\n\n\t\t// copy image to canvas\n\t\tctx.clearRect(0, 0, dest.width, dest.height);\n\t\tctx.drawImage(mediaEl,\n\t\t\tsrc.x, src.y, src.width, src.height,\n\t\t\t0, 0, dest.width, dest.height // destination rect\n\t\t);\n\n\t\treturn ctx;\n\t},\n\n\t_getImageData: function(mediaEl, targetEl, rectEl) {\n\t\t// src/dest rects\n\t\t// ------------------------------\n\t\trectEl || (rectEl = targetEl);\n\n\t\t// NOTE: does not work with svg element\n\t\t// var tRect = rectEl.getBoundingClientRect();\n\t\t// var cRect = mediaEl.getBoundingClientRect();\n\t\t// var tX = tRect.x - cRect.x,\n\t\t// \ttY = tRect.y - cRect.y,\n\t\t// \ttW = tRect.width,\n\t\t// \ttH = tRect.height;\n\n\t\t// target bounds\n\t\tvar tX = rectEl.offsetLeft,\n\t\t\ttY = rectEl.offsetTop,\n\t\t\ttW = rectEl.offsetWidth,\n\t\t\ttH = rectEl.offsetHeight;\n\n\t\tif (tX === void 0 || tY === void 0 || tW === void 0 || tH === void 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// destination rect\n\t\tvar RECT_GROW = 0;\n\t\tvar dest = {\n\t\t\tx: tX - RECT_GROW,\n\t\t\ty: tY - RECT_GROW,\n\t\t\twidth: tW + RECT_GROW * 2,\n\t\t\theight: tH + RECT_GROW * 2\n\t\t};\n\n\t\t// native/display scale\n\t\tvar sW = this.model.get(\"source\").get(\"w\"),\n\t\t\tsH = this.model.get(\"source\").get(\"h\"),\n\t\t\trsX = sW / this.metrics.media.width,\n\t\t\trsY = sH / this.metrics.media.height;\n\n\t\t// dest, scaled to native\n\t\tvar src = {\n\t\t\tx: Math.max(0, dest.x * rsX),\n\t\t\ty: Math.max(0, dest.y * rsY),\n\t\t\twidth: Math.min(sW, dest.width * rsX),\n\t\t\theight: Math.min(sH, dest.height * rsY)\n\t\t};\n\n\t\t// Copy image to canvas\n\t\t// ------------------------------\n\t\t// canvas = document.createElement(\"canvas\");\n\t\t// canvas.style.width  = dest.width + \"px\";\n\t\t// canvas.style.height = dest.height + \"px\";\n\n\t\tvar canvas = getSharedCanvas();\n\t\tif (canvas.width !== dest.width || canvas.height !== dest.height) {\n\t\t\tcanvas.width = dest.width;\n\t\t\tcanvas.height = dest.height;\n\t\t}\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.clearRect(0, 0, dest.width, dest.height);\n\t\tctx.drawImage(mediaEl,\n\t\t\tsrc.x, src.y, src.width, src.height,\n\t\t\t0, 0, dest.width, dest.height // destination rect\n\t\t);\n\t\treturn ctx.getImageData(0, 0, dest.width, dest.height);\n\t},\n\n\t_updateOverlay: function(mediaEl, targetEl, rectEl) {\n\t\tvar canvas, ctx;\n\t\tvar imageData = this._getImageData(mediaEl, targetEl, rectEl);\n\t\tvar avgColor = Color().rgb(getAverageRGB(imageData));\n\n\t\t// var avgHex = avgColor.hex().string(), els = this.el.querySelectorAll(\"img, video\");\n\t\t// for (var i = 0; i < els.length; i++) {\n\t\t// \tels.item(i).style.backgroundColor = avgHex;\n\t\t// }\n\n\t\ttargetEl.classList.toggle(\"over-dark\", avgColor.dark());\n\n\t\t// console.log(\"%s::updateOverlay() avgColor:%s (%s)\", this.cid, avgColor.rgb().string(), avgColor.dark()?\"dark\":\"light\", targetEl);\n\n\t\t// Color, filter opts\n\t\t// ------------------------------\n\n\t\tthis.fgColor || (this.fgColor = new Color(this.model.attr(\"color\")));\n\t\tthis.bgColor || (this.bgColor = new Color(this.model.attr(\"background-color\")));\n\n\t\tvar opts = { radius: 20 };\n\t\tvar isFgDark = this.fgColor.luminosity() < this.bgColor.luminosity();\n\t\topts.x00 = isFgDark ? Color(this.fgColor).lighten(0.5) : Color(this.bgColor).darken(0.5);\n\t\topts.xFF = isFgDark ? Color(this.bgColor).lighten(0.5) : Color(this.fgColor).darken(0.5);\n\n\t\tstackBlurRGB(imageData, { radius: 40 });\n\t\t// stackBlurMono(imageData, opts);\n\t\t// duotone(imageData, opts);\n\n\t\tctx = getSharedCanvas();\n\t\tif (canvas.width !== imageData.width || canvas.height !== imageData.height) {\n\t\t\tcanvas.width = imageData.width;\n\t\t\tcanvas.height = imageData.height;\n\t\t}\n\t\tctx = canvas.getContext(\"2d\");\n\t\tctx.putImageData(imageData, 0, 0);\n\t\ttargetEl.style.backgroundOrigin = \"border-box\";\n\t\ttargetEl.style.backgroundClip = \"content-box\";\n\t\ttargetEl.style.backgroundSize = \"100%\";\n\t\t// targetEl.style.padding = \"0 0 5rem 0\";\n\t\ttargetEl.style.backgroundImage = \"url(\" + canvas.toDataURL() + \")\";\n\t} /**/\n});\n\n/* ---------------------------\n/* Google Analytics\n/* --------------------------- */\n// if (window.GTAG_ENABLED && window.ga) {\nif (window.ga) {\n\tPlayableRenderer = (function(PlayableRenderer) {\n\n\t\t// /** @type {module:underscore.strings/dasherize} */\n\t\t// var dasherize = require(\"underscore.string/dasherize\");\n\n\t\tvar dasherize = function(s) {\n\t\t\tString(s).trim().replace(/([A-Z])/g, '-$1').replace(/[-_\\s]+/g, '-').toLowerCase()\n\t\t};\n\n\t\t// var readyEvents = [\"playing\", \"waiting\", \"ended\"];\n\t\t// var userEvents = [\"play\", \"pause\"];\n\n\t\treturn PlayableRenderer.extend({\n\n\t\t\t/** @override */\n\t\t\tinitialize: function() {\n\t\t\t\tvar retval = PlayableRenderer.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis._gaEventSuffix = this.playbackRequested ? \"-autoplay\" : \"\";\n\t\t\t\treturn retval;\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\t_onPlaybackToggle: function(ev) {\n\t\t\t\tvar retval = PlayableRenderer.prototype._onPlaybackToggle.apply(this, arguments);\n\t\t\t\tif (window.ga) {\n\t\t\t\t\twindow.ga(\"send\", {\n\t\t\t\t\t\thitType: \"event\",\n\t\t\t\t\t\teventCategory: dasherize(this.cidPrefix),\n\t\t\t\t\t\teventAction: (this.playbackRequested ? \"play\" : \"pause\") + this._gaEventSuffix,\n\t\t\t\t\t\teventLabel: this.model.get(\"text\"),\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"%s::_onPlaybackToggle window.ga is %s\", this.cid, window.ga);\n\t\t\t\t}\n\t\t\t\treturn retval;\n\t\t\t},\n\n\t\t\t// /** @override */\n\t\t\t// _togglePlayback: function(newPlayState) {\n\t\t\t// \tvar retval = PlayableRenderer.prototype._togglePlayback.apply(this, arguments);\n\t\t\t// \twindow.ga(\"send\", {\n\t\t\t// \t\thitType: \"event\",\n\t\t\t// \t\teventCategory: \"Playable\",\n\t\t\t// \t\teventAction: this.playbackRequested ? \"play\" : \"pause\",\n\t\t\t// \t\teventLabel: this.model.get(\"text\"),\n\t\t\t// \t});\n\t\t\t// \treturn retval;\n\t\t\t// },\n\t\t});\n\t})(PlayableRenderer);\n}\n\n// if (DEBUG) {\n// \tPlayableRenderer.prototype._logFlags = \"\";\n//\n// \tPlayableRenderer = (function(PlayableRenderer) {\n// \t\tif (!PlayableRenderer.LOG_TO_SCREEN) return PlayableRenderer;\n//\n// \t\t/** @type {module:underscore.strings/lpad} */\n// \t\tvar lpad = require(\"underscore.string/lpad\");\n//\n// \t\treturn PlayableRenderer.extend({\n// \t\t\t_canResumePlayback: function() {\n// \t\t\t\tvar retval = PlayableRenderer.prototype._canResumePlayback.apply(this.arguments);\n// \t\t\t\tconsole.log(\"[scroll] %s::_canResumePlayback():%s\", this.cid, retval, {\n// \t\t\t\t\t\"enabled\": this.enabled,\n// \t\t\t\t\t\"selected\": (!!this.model.selected),\n// \t\t\t\t\t\"playbackRequested\": this.playbackRequested,\n// \t\t\t\t\t\"attached\": this.attached,\n// \t\t\t\t\t\"parentView\": (this.parentView && this.parentView.cid),\n// \t\t\t\t\t\"!scrolling\": (this.parentView && !this.parentView.scrolling),\n// \t\t\t\t\t\"mediaState\": this.mediaState,\n// \t\t\t\t\t// \"!document.hidden\": !document[visibilityHiddenProp],\n// \t\t\t\t\t\"visibilityState\": document[visibilityStateProp]\n// \t\t\t\t});\n// \t\t\t\treturn retval;\n// \t\t\t},\n// \t\t});\n// \t})(PlayableRenderer);\n// }\n\nmodule.exports = PlayableRenderer;\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"placeholder sizing\\\"></div>\\n<div class=\\\"content\\\">\\n\t<div class=\\\"media-border content-size\\\"></div>\\n\t<div class=\\\"controls content-size\\\">\\n\t\t<canvas class=\\\"progress-meter\\\"></canvas>\\n\t</div>\\n\t<div class=\\\"sequence media-size\\\">\\n\t\t<img class=\\\"sequence-step current default\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.text || (depth0 != null ? depth0.text : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"text\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" longdesc=\\\"#desc_m\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\n\t</div>\\n\t<div class=\\\"overlay media-size play-toggle-hitarea\\\">\\n\t\t<canvas class=\\\"play-toggle\\\"/>\\n\t</div>\\n</div>\\n\";\n},\"useData\":true});\n",
    "/**\n * @module app/view/render/SequenceRenderer\n */\n\n/* --------------------------- *\n * Imports\n * --------------------------- */\n\n/** @type {module:backbone.babysitter} */\nconst Container = require(\"backbone.babysitter\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/render/PlayableRenderer} */\nconst PlayableRenderer = require(\"app/view/render/PlayableRenderer\");\n// /** @type {module:app/model/SelectableCollection} */\n// var SelectableCollection = require(\"app/model/SelectableCollection\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n\n/** @type {module:app/view/component/CanvasProgressMeter} */\nconst ProgressMeter = require(\"app/view/component/CanvasProgressMeter\");\n/** @type {module:app/view/component/PlayToggleSymbol} */\nconst PlayToggleSymbol = require(\"app/view/component/PlayToggleSymbol\");\n\n/** @type {module:utils/Timer} */\nconst Timer = require(\"utils/Timer\");\n// /** @type {Function} */\n// var transitionEnd = require(\"utils/event/transitionEnd\");\n// /** @type {module:utils/prefixedProperty} */\n// var prefixed = require(\"utils/prefixedProperty\");\n\n/** @type {Function} */\nconst _whenImageLoads = require(\"app/view/promise/_whenImageLoads\");\n/** @type {module:app/view/promise/_loadImageAsObjectURL} */\nconst _loadImageAsObjectURL = require(\"app/view/promise/_loadImageAsObjectURL\");\n// /** @type {Function} */\n// var whenSelectionDistanceIs = require(\"app/view/promise/whenSelectionDistanceIs\");\n// var whenSelectTransitionEnds = require(\"app/view/promise/whenSelectTransitionEnds\");\n// var whenDefaultImageLoads = require(\"app/view/promise/whenDefaultImageLoads\");\n\n// /** @type {Function} */\n// var Color = require(\"color\");\n// var duotone = require(\"utils/canvas/bitmap/duotone\");\n// var stackBlurRGB = require(\"utils/canvas/bitmap/stackBlurRGB\");\n// var stackBlurMono = require(\"utils/canvas/bitmap/stackBlurMono\");\n// var getAverageRGBA = require(\"utils/canvas/bitmap/getAverageRGBA\");\n\nconst errorTemplate = require(\"../template/ErrorBlock.hbs\");\n\nvar MIN_STEP_INTERVAL = 2 * Globals.TRANSITION_DURATION + Globals.TRANSITION_DELAY_INTERVAL;\nvar DEFAULT_STEP_INTERVAL = 6 * Globals.TRANSITION_DURATION + Globals.TRANSITION_DELAY_INTERVAL;\n\n\n/* --------------------------- *\n * Private classes\n * --------------------------- */\n\n/**\n * @constructor\n * @type {module:app/view/render/SequenceRenderer.PrefetechedSourceRenderer}\n */\nvar PrefetechedSourceRenderer = View.extend({\n\n\tcidPrefix: \"sequenceStepRenderer\",\n\t/** @type {string} */\n\tclassName: \"sequence-step\",\n\t/** @type {string} */\n\ttagName: \"img\",\n\n\tproperties: {\n\t\tready: {\n\t\t\tget: function() {\n\t\t\t\treturn this._ready;\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\t!this.el.hasAttribute(\"alt\") && this.el.setAttribute(\"alt\", this.model.get(\"src\"));\n\t\t// this.el.setAttribute(\"longdesc\", this.model.get(\"original\"));\n\n\t\tif (this.model.has(\"prefetched\")) {\n\t\t\tthis._renderPrefetched();\n\t\t} else {\n\t\t\tthis.listenTo(this.model, \"change:prefetched\", this._renderPrefetched);\n\t\t}\n\t\tthis.listenTo(this.model, \"selected deselected\", this._renderSelection);\n\t\tthis._renderSelection();\n\t},\n\n\t_renderSelection: function() {\n\t\tthis.el.classList.toggle(\"current\", !!this.model.selected);\n\t},\n\n\t_renderPrefetched: function() {\n\t\tvar prefetched = this.model.get(\"prefetched\");\n\t\tif (prefetched !== this.el.src) {\n\t\t\tthis.el.src = prefetched;\n\t\t}\n\t\t_whenImageLoads(this.el).then(\n\t\t\tfunction(el) {\n\t\t\t\tthis.requestAnimationFrame(function(tstamp) {\n\t\t\t\t\tthis._setReady(true);\n\t\t\t\t});\n\t\t\t}.bind(this),\n\t\t\tfunction(err) {\n\t\t\t\t// this._setReady(false);\n\t\t\t\t(err instanceof Error) || (err = new Error(\"cannot load prefetched url\"));\n\t\t\t\tthrow err;\n\t\t\t}.bind(this)\n\t\t);\n\t},\n\n\t/** @type {boolean} */\n\t_ready: false,\n\n\t_setReady: function(ready) {\n\t\tif (this._ready !== ready) {\n\t\t\tthis._ready = !!(ready); // make bool\n\t\t\tthis.trigger(\"renderer:ready\", this);\n\t\t}\n\t},\n\n\trender: function() {\n\t\t// if (this.model.has(\"prefetched\")) {\n\t\t// \tthis._renderPrefetched();\n\t\t// }\n\t\t// this.el.classList.toggle(\"current\", !!this.model.selected);\n\t\tconsole.log(\"%s::render\", this.cid);\n\t\treturn this;\n\t},\n});\n\n/**\n * @constructor\n * @type {module:app/view/render/SequenceRenderer.SimpleSourceRenderer}\n */\n// var SimpleSourceRenderer = View.extend({\n//\n// \tcidPrefix: \"sequenceStepRenderer\",\n// \t/** @type {string} */\n// \tclassName: \"sequence-step\",\n// \t/** @type {string} */\n// \ttagName: \"img\",\n//\n// \t/** @override */\n// \tinitialize: function (options) {\n// \t\t// this.el.classList.toggle(\"current\", this.model.hasOwnProperty(\"selected\"));\n// \t\tthis.el.classList.toggle(\"current\", !!this.model.selected);\n// \t\tthis.listenTo(this.model, {\n// \t\t\t\"selected\": function () {\n// \t\t\t\tthis.el.classList.add(\"current\");\n// \t\t\t},\n// \t\t\t\"deselected\": function () {\n// \t\t\t\tthis.el.classList.remove(\"current\");\n// \t\t\t}\n// \t\t});\n// \t\tif (this.el.src === \"\") {\n// \t\t\tthis.el.src = Globals.MEDIA_DIR + \"/\" + this.model.get(\"src\");\n// \t\t}\n//\n// \t\tif (this.model.has(\"error\")) {\n// \t\t\tthis._onModelError();\n// \t\t} else {\n// \t\t\tthis.listenToOnce(this.model, \"change:error\", this._onModelError);\n// \t\t\t// this.listenToOnce(this.model, {\n// \t\t\t// \t\"change:source\": this._onModelSource,\n// \t\t\t// \t\"change:error\": this._onModelError,\n// \t\t\t// });\n// \t\t}\n// \t},\n//\n// \t// _onModelSource: function() {\n// \t// \tthis.el.src = Globals.MEDIA_DIR + \"/\" + this.model.get(\"src\");\n// \t// \t// console.log(\"%s::change:src\", this.cid, this.model.get(\"src\"));\n// \t// },\n//\n// \t_onModelError: function() {\n// \t\tvar err = this.model.get(\"error\");\n// \t\tvar errEl = document.createElement(\"div\");\n// \t\terrEl.className = \"error color-bg\" + (this.model.selected? \" current\" : \"\");\n// \t\terrEl.innerHTML = errorTemplate(err);\n// \t\tthis.setElement(errEl, true);\n// \t\tconsole.log(\"%s::change:error\", this.cid, err.message, err.infoSrc);\n// \t},\n// });\n\nvar SourceErrorRenderer = View.extend({\n\n\t/** @type {string} */\n\tclassName: \"sequence-step error\",\n\t/** @override */\n\tcidPrefix: \"sourceErrorRenderer\",\n\t/** @override */\n\ttemplate: errorTemplate,\n\t/** @type {boolean} */\n\tready: true,\n\n\tinitialize: function(opts) {\n\t\t// var handleSelectionChange = function onSelectionChange () {\n\t\t// \tthis.el.classList.toggle(\"current\", !!this.model.selected);\n\t\t// };\n\t\t// this.listenTo(this.model, \"selected deselected\", handleSelectionChange);\n\t\t// // this.el.classList.toggle(\"current\", !!this.model.selected);\n\t\t// handleSelectionChange.call(this);\n\t\tthis.listenTo(this.model, \"selected deselected\", function() {\n\t\t\tthis.el.classList.toggle(\"current\", !!this.model.selected);\n\t\t});\n\t},\n\n\trender: function() {\n\t\tthis.el.classList.toggle(\"current\", !!this.model.selected);\n\t\tthis.el.innerHTML = this.template(this.model.get(\"error\"));\n\t\treturn this;\n\t},\n});\n\nvar SequenceStepRenderer = PrefetechedSourceRenderer;\n// var SequenceStepRenderer = SimpleSourceRenderer;\n\n/**\n * @constructor\n * @type {module:app/view/render/SequenceRenderer}\n */\nvar SequenceRenderer = PlayableRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"sequenceRenderer\",\n\t/** @type {string} */\n\tclassName: PlayableRenderer.prototype.className + \" sequence-item\",\n\t/** @type {Function} */\n\ttemplate: require(\"./SequenceRenderer.hbs\"),\n\n\t/* --------------------------- *\n\t/* initialize\n\t/* --------------------------- */\n\n\tinitialize: function(opts) {\n\t\tthis.sources = this.model.get(\"sources\");\n\t\tPlayableRenderer.prototype.initialize.apply(this, arguments);\n\t},\n\n\t/* --------------------------- *\n\t * children\n\t * --------------------------- */\n\n\t/** @override */\n\tcreateChildren: function() {\n\t\tPlayableRenderer.prototype.createChildren.apply(this, arguments);\n\n\t\tthis.placeholder = this.el.querySelector(\".placeholder\");\n\t\tthis.sequence = this.content.querySelector(\".sequence\");\n\n\t\t// styles\n\t\t// ---------------------------------\n\t\tvar s, attrs = this.model.attrs();\n\t\t// var s, attrs = this.model.get(\"attrs\");\n\t\ts = _.pick(attrs, \"box-shadow\", \"border\", \"border-radius\");\n\t\t_.extend(this.content.querySelector(\".media-border\").style, s);\n\t\ts = _.pick(attrs, \"border-radius\");\n\t\t_.extend(this.sequence.style, s);\n\t\t_.extend(this.placeholder.style, s);\n\n\t\t// model\n\t\t// ---------------------------------\n\t\tthis.sources.select(this.model.get(\"source\"));\n\n\t\t// itemViews\n\t\t// ---------------------------------\n\t\tthis.itemViews = new Container();\n\t\t// add default image as renderer (already in DOM)\n\t\tthis.itemViews.add(new SequenceStepRenderer({\n\t\t\tel: this.getDefaultImage(),\n\t\t\tmodel: this.model.get(\"source\")\n\t\t}));\n\t},\n\n\t/* --------------------------- *\n\t * layout/render\n\t * --------------------------- */\n\n\t/** @override */\n\trender: function() {\n\t\tPlayableRenderer.prototype.render.apply(this, arguments);\n\n\t\tvar els, el, i, cssW, cssH;\n\t\tvar content = this.content;\n\n\t\t// media-size\n\t\t// ---------------------------------\n\t\tcssW = this.metrics.media.width + \"px\";\n\t\tcssH = this.metrics.media.height + \"px\";\n\n\t\tels = this.el.querySelectorAll(\".media-size\");\n\t\tfor (i = 0; i < els.length; i++) {\n\t\t\tel = els.item(i);\n\t\t\tel.style.width = cssW;\n\t\t\tel.style.height = cssH;\n\t\t}\n\t\tcontent.style.width = cssW;\n\t\tcontent.style.height = cssH;\n\n\t\t// content-position\n\t\t// ---------------------------------\n\t\tvar cssX, cssY;\n\t\tcssX = this.metrics.content.x + \"px\";\n\t\tcssY = this.metrics.content.y + \"px\";\n\t\tcontent.style.left = cssX;\n\t\tcontent.style.top = cssY;\n\n\t\tel = this.el.querySelector(\".controls\");\n\t\t// el.style.left = cssX;\n\t\t// el.style.top = cssY;\n\t\tel.style.width = this.metrics.content.width + \"px\";\n\t\tel.style.height = this.metrics.content.height + \"px\";\n\n\t\t// // content-size\n\t\t// // ---------------------------------\n\t\t// cssW = this.metrics.content.width + \"px\";\n\t\t// cssH = this.metrics.content.height + \"px\";\n\t\t//\n\t\t// els = this.el.querySelectorAll(\".content-size\");\n\t\t// for (i = 0; i < els.length; i++) {\n\t\t// \tel = els.item(i);\n\t\t// \tel.style.width = cssW;\n\t\t// \tel.style.height = cssH;\n\t\t// }\n\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t * initializeAsync\n\t * --------------------------- */\n\n\tinitializePlayable: function() {\n\t\t// model\n\t\t// ---------------------------------\n\t\t// this.sources.select(this.model.get(\"source\"));\n\t\tthis.content.classList.add(\"started\");\n\n\t\t// Sequence model\n\t\t// ---------------------------------\n\t\tPlayableRenderer.whenSelectionDistanceIs(this, 0)\n\t\t\t// .then(function(view) {\n\t\t\t// \t/* defaultImage is loaded, add `started` rightaway */\n\t\t\t// \tview.content.classList.add(\"started\");\n\t\t\t// \treturn view;\n\t\t\t// })\n\t\t\t.then(this._preloadAllItems, function(err) {\n\t\t\t\treturn (err instanceof View.ViewError) ? (void 0) : err; // Ignore ViewError\n\t\t\t});\n\n\t\tthis._sequenceInterval = Math.max(parseInt(this.model.attr(\"@sequence-interval\")), MIN_STEP_INTERVAL) || DEFAULT_STEP_INTERVAL;\n\n\t\t// timer\n\t\t// ---------------------------------\n\t\t/* timer will be started when _validatePlayback is called from _onModelSelected */\n\t\tthis.timer = new Timer();\n\t\tthis.listenTo(this, \"view:removed\", function() {\n\t\t\tthis.timer.stop();\n\t\t\tthis.stopListening(this.timer);\n\t\t});\n\n\t\tthis.listenTo(this.timer, {\n\t\t\t\"start\": this._onTimerStart,\n\t\t\t\"resume\": this._onTimerResume,\n\t\t\t\"pause\": this._onTimerPause,\n\t\t\t\"end\": this._onTimerEnd,\n\t\t\t// \"stop\": function () {}, // stop is only called on view remove\n\t\t});\n\n\t\t// play-toggle-symbol\n\t\t// ---------------------------------\n\t\tthis._playToggleSymbol = new PlayToggleSymbol(_.extend({\n\t\t\tel: this.el.querySelector(\".play-toggle\")\n\t\t}, this._playToggleSymbol || {}));\n\n\t\t// progress-meter model\n\t\t// ---------------------------------\n\t\tthis._sourceProgressByIdx = this.sources.map(function() {\n\t\t\treturn 0;\n\t\t});\n\t\tthis._sourceProgressByIdx[0] = 1; // first item is already loaded\n\n\t\t// progress-meter\n\t\t// ---------------------------------\n\t\tthis.progressMeter = new ProgressMeter({\n\t\t\tel: this.el.querySelector(\".progress-meter\"),\n\t\t\tcolor: this.model.attr(\"color\"),\n\t\t\t// backgroundColor: this.model.attr(\"background-color\"),\n\t\t\tvalues: {\n\t\t\t\tavailable: this._sourceProgressByIdx.concat(),\n\t\t\t},\n\t\t\tmaxValues: {\n\t\t\t\tamount: this.sources.length,\n\t\t\t\tavailable: this.sources.length,\n\t\t\t},\n\t\t\tlabelFn: (function() {\n\t\t\t\tif (this.playbackRequested === false) return Globals.PAUSE_CHAR;\n\t\t\t\treturn (this.sources.selectedIndex + 1) + \"/\" + this.sources.length;\n\t\t\t}).bind(this)\n\t\t});\n\t\t// this.el.querySelector(\".top-bar\")\n\t\t//\t\t.appendChild(this.progressMeter.render().el);\n\t},\n\n\tinitializeAsync: function() {\n\t\treturn PlayableRenderer.prototype.initializeAsync.apply(this, arguments)\n\t\t\t.then(\n\t\t\t\tfunction(view) {\n\t\t\t\t\treturn view.whenAttached();\n\t\t\t\t})\n\t\t\t.then(function(view) {\n\t\t\t\tview.initializePlayable();\n\t\t\t\t// view.updateOverlay(view.defaultImage, view.playToggle); //view.overlay);\n\t\t\t\tview.listenToSelection();\n\t\t\t\treturn view;\n\t\t\t});\n\t},\n\n\twhenInitialized: function(view) {\n\t\tvar retval = PlayableRenderer.prototype.whenInitialized.apply(this, arguments);\n\t\tview._validatePlayback();\n\t\treturn retval;\n\t},\n\n\t/* --------------------------- *\n\t * _preloadAllItems\n\t * --------------------------- */\n\n\t_preloadAllItems: function(view) {\n\t\tview.once(\"view:remove\", function() {\n\t\t\tvar silent = { silent: true };\n\t\t\tview.sources.forEach(function(item, index, sources) {\n\t\t\t\t// view.stopListening(item, \"change:progress\");\n\t\t\t\tvar prefetched = item.get(\"prefetched\");\n\t\t\t\tif (prefetched) {\n\t\t\t\t\titem.set(\"progress\", 0, silent);\n\t\t\t\t\titem.unset(\"prefetched\", silent);\n\t\t\t\t\tif (/^blob\\:/.test(prefetched)) {\n\t\t\t\t\t\tURL.revokeObjectURL(prefetched);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn view.sources.reduce(function(lastPromise, item, index, sources) {\n\t\t\treturn lastPromise.then(function(view) {\n\t\t\t\tif (view._viewPhase === \"disposed\") {\n\t\t\t\t\t/** do nothing */\n\t\t\t\t\treturn view;\n\t\t\t\t} else\n\t\t\t\tif (item.has(\"prefetched\")) {\n\t\t\t\t\tview._updateItemProgress(1, index);\n\t\t\t\t\treturn view;\n\t\t\t\t} else {\n\t\t\t\t\tvar onItemProgress = function(item, progress) {\n\t\t\t\t\t\tview._updateItemProgress(progress, index);\n\t\t\t\t\t};\n\t\t\t\t\tview.listenTo(item, \"change:progress\", onItemProgress);\n\t\t\t\t\tview.once(\"view:remove\", function(view) {\n\t\t\t\t\t\tview.stopListening(item, \"change:progress\", onItemProgress);\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(\"%s:_preloadAllItems\", view.cid, item.get(\"original\"), item.get(\"mime\"));\n\t\t\t\t\treturn _loadImageAsObjectURL(item.get(\"original\"),\n\t\t\t\t\t\t\tfunction(progress, request) {\n\t\t\t\t\t\t\t\t/* NOTE: Since we are calling URL.revokeObjectURL when view is removed, also abort incomplete requests. Otherwise, clear the callback reference from XMLHttpRequest.onprogress  */\n\t\t\t\t\t\t\t\tif (view._viewPhase === \"disposed\") {\n\t\t\t\t\t\t\t\t\t//console.warn(\"%s::_preloadAllItems aborting XHR [%s %s] (%s)\", view.cid, request.status, request.readyState, item.get(\"original\"), request);\n\t\t\t\t\t\t\t\t\trequest.abort();\n\t\t\t\t\t\t\t\t\t// request.onprogress = void 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\titem.set(\"progress\", progress);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tfunction(pUrl) {\n\t\t\t\t\t\t\t\titem.set({\n\t\t\t\t\t\t\t\t\t\"progress\": pUrl ? 1 : 0,\n\t\t\t\t\t\t\t\t\t\"prefetched\": pUrl\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn view;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\t\t\titem.set({\n\t\t\t\t\t\t\t\t\t\"progress\": 0,\n\t\t\t\t\t\t\t\t\t\"error\": err\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn view;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}, Promise.resolve(view));\n\t},\n\n\t// _preloadAllItems2: function(view) {\n\t// \treturn view.sources.reduce(function(lastPromise, item, index, sources) {\n\t// \t\treturn lastPromise.then(function(view) {\n\t// \t\t\tvar itemView = view._getItemView(item);\n\t// \t\t\treturn _whenImageLoads(itemView.el).then(function(url){\n\t// \t\t\t\tview._updateItemProgress(1, index);\n\t// \t\t\t\treturn view;\n\t// \t\t\t}, function(err) {\n\t// \t\t\t\tview._updateItemProgress(0, index);\n\t// \t\t\t\titem.set(\"error\", err);\n\t// \t\t\t\treturn view;\n\t// \t\t\t});\n\t// \t\t});\n\t// \t}, Promise.resolve(view));\n\t// },\n\n\t_updateItemProgress: function(progress, index) {\n\t\tthis._sourceProgressByIdx[index] = progress;\n\t\tif (this.progressMeter) {\n\t\t\tthis.progressMeter.valueTo(\"available\", this._sourceProgressByIdx, 300);\n\t\t}\n\t},\n\n\t/* ---------------------------\n\t * PlayableRenderer implementation\n\t * --------------------------- */\n\n\t/** @override initial value */\n\t_playbackRequested: true,\n\n\t/** @type {Boolean} internal store */\n\t_paused: true,\n\n\t/** @override */\n\t_isMediaPaused: function() {\n\t\treturn this._paused;\n\t},\n\n\t/** @override */\n\t_playMedia: function() {\n\t\tif (!this._paused) return;\n\t\tthis._paused = false;\n\n\t\tif (!this._isMediaWaiting()) {\n\t\t\tif (this.timer.status === Timer.PAUSED) {\n\t\t\t\tthis.timer.start(); // resume, actually\n\t\t\t} else {\n\t\t\t\tthis.timer.start(this._sequenceInterval);\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\t_pauseMedia: function() {\n\t\tif (this._paused) return;\n\t\tthis._paused = true;\n\t\tif (this.timer.status === Timer.STARTED) {\n\t\t\tthis.timer.pause();\n\t\t}\n\t},\n\n\t// /** @override */\n\t// _renderPlaybackState: function() {\n\t// \t// if (!this.content.classList.contains(\"started\")) {\n\t// \t// \tthis.content.classList.add(\"started\");\n\t// \t// }\n\t// \tPlayableRenderer.prototype._renderPlaybackState.apply(this, arguments);\n\t// },\n\n\t/* --------------------------- *\n\t/* sequence private\n\t/* --------------------------- */\n\n\t_onTimerStart: function(duration) {\n\t\tvar item;\n\t\tif (this.sources.selectedIndex === -1) {\n\t\t\titem = this.model.get(\"source\");\n\t\t} else {\n\t\t\titem = this.sources.followingOrFirst();\n\t\t}\n\t\tthis.sources.select(item);\n\t\tthis.progressMeter.valueTo(\"amount\", this.sources.selectedIndex + 1, duration);\n\t\tthis.content.classList.toggle(\"playback-error\", item.has(\"error\"));\n\n\t\t// var currView = this.itemViews.findByModel(item);\n\t\t// if (!item.has(\"error\") && currView !== null) {\n\t\t// \tthis._playToggleSymbol.setImageSource(currView.el);\n\t\t// \t// this.updateOverlay(currView.el, this.playToggle);\n\t\t// } else {\n\t\t// \tthis._playToggleSymbol.setImageSource(null);\n\t\t// }\n\n\t\t// // init next renderer now to have smoother transitions\n\t\t// this._getItemView(this.sources.followingOrFirst());\n\t},\n\n\t_onTimerResume: function(duration) {\n\t\tthis.progressMeter.valueTo(\"amount\", this.sources.selectedIndex + 1, duration);\n\t},\n\n\t_onTimerPause: function(duration) {\n\t\tthis.progressMeter.valueTo(\"amount\", this.progressMeter.getRenderedValue(\"amount\"), 0);\n\t},\n\n\t/* last completely played sequence index */\n\t// _lastPlayedIndex: -1,\n\n\t_onTimerEnd: function() {\n\t\tvar nextItem, nextView;\n\n\t\tvar showNextView = function(result) {\n\t\t\t// console.log(\"%s::showNextView %sms %s\", context.cid, context._sequenceInterval, nextItem.cid)\n\t\t\tthis.setImmediate(function() {\n\t\t\t\tif (!this.mediaPaused) {\n\t\t\t\t\tthis.timer.start(this._sequenceInterval);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}.bind(this);\n\n\t\t// get next item init next renderer\n\t\tnextItem = this.sources.followingOrFirst();\n\t\tnextView = this._getItemView(nextItem);\n\n\t\tif (nextItem.has(\"error\")) {\n\t\t\tshowNextView();\n\t\t} else if (nextItem.has(\"prefetched\")) {\n\t\t\t_whenImageLoads(nextView.el).then(showNextView, showNextView);\n\t\t} else {\n\t\t\t/* TODO: add ga event 'media-waiting' */\n\t\t\t// window.ga(\"send\", \"event\", \"sequence-item\", \"waiting\", this.model.get(\"text\"));\n\t\t\t// console.log(\"%s:[waiting] %sms %s\", context.cid, nextItem.cid);\n\t\t\tthis._toggleWaiting(true);\n\t\t\tthis.listenToOnce(nextItem, \"change:prefetched change:error\", function(model) {\n\t\t\t\t// console.log(\"%s:[playing] %sms %s\", context.cid, nextItem.cid);\n\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t_whenImageLoads(nextView.el).then(showNextView, showNextView);\n\t\t\t});\n\t\t}\n\t},\n\n\t_getItemView: function(item) {\n\t\tvar view = this.itemViews.findByModel(item);\n\t\tif (!view) {\n\t\t\tview = new(item.has(\"error\") ? SourceErrorRenderer : SequenceStepRenderer)({\n\t\t\t\tmodel: item\n\t\t\t});\n\t\t\tthis.itemViews.add(view);\n\t\t\tthis.sequence.appendChild(view.render().el);\n\t\t}\n\t\treturn view;\n\t},\n\n\t/* --------------------------- *\n\t/* progress meter\n\t/* --------------------------- */\n\n\t// _createDefaultItemData: function() {\n\t// \tvar canvas = document.createElement(\"canvas\");\n\t// \tvar context = canvas.getContext(\"2d\");\n\t// \tvar imageData = this._drawMediaElement(context).getImageData(0, 0, canvas.width, canvas.height);\n\t//\n\t// \tvar opts = { radius: 20 };\n\t// \tvar fgColor = new Color(this.model.attr(\"color\"));\n\t// \tvar bgColor = new Color(this.model.attr(\"background-color\"));\n\t// \tvar isFgDark = fgColor.luminosity() < bgColor.luminosity();\n\t// \topts.x00 = isFgDark? Color(fgColor).lighten(0.33) : Color(bgColor).darken(0.33);\n\t// \topts.xFF = isFgDark? Color(bgColor).lighten(0.33) : Color(fgColor).darken(0.33);\n\t//\n\t// \tstackBlurMono(imageData, opts);\n\t// \tduotone(imageData, opts);\n\t// \t// stackBlurRGB(imageData, opts);\n\t//\n\t// \tcontext.putImageData(imageData, 0, 0);\n\t// \treturn canvas.toDataURL();\n\t// },\n});\n\nif (DEBUG) {\n\tSequenceRenderer = (function(SequenceRenderer) {\n\t\tif (!SequenceRenderer.LOG_TO_SCREEN) return SequenceRenderer;\n\n\t\t// /** @type {module:underscore.strings/lpad} */\n\t\t// var rpad = require(\"underscore.string/rpad\");\n\t\t// /** @type {module:underscore.strings/lpad} */\n\t\t// var lpad = require(\"underscore.string/lpad\");\n\t\t// /** @type {module:underscore.strings/capitalize} */\n\t\t// var caps = require(\"underscore.string/capitalize\");\n\n\t\treturn SequenceRenderer.extend({\n\t\t\t/** @override */\n\t\t\tinitialize: function() {\n\t\t\t\tSequenceRenderer.prototype.initialize.apply(this, arguments);\n\n\t\t\t\tthis.__logColors = _.extend({\n\t\t\t\t\t\"media:play\": \"darkred\",\n\t\t\t\t\t\"media:pause\": \"darkred\",\n\n\t\t\t\t\t\"timer:start\": \"darkgreen\",\n\t\t\t\t\t\"timer:end\": \"darkgreen\",\n\t\t\t\t\t\"timer:resume\": \"green\",\n\t\t\t\t\t\"timer:pause\": \"green\",\n\n\t\t\t\t\t\"load:progress\": \"blue\",\n\t\t\t\t\t\"load:complete\": \"darkblue\"\n\t\t\t\t}, this.__logColors);\n\t\t\t},\n\n\t\t\t// __getHeaderText: function() {\n\t\t\t// \tvar fmt1 = function(s) {\n\t\t\t// \t\treturn lpad(caps(s), 8).substr(0, 8).toUpperCase();\n\t\t\t// \t};\n\t\t\t// \tvar fmt2 = function(s) {\n\t\t\t// \t\treturn lpad(caps(s), 8).substr(0, 8).toUpperCase();\n\t\t\t// \t};\n\t\t\t// \tvar o = {\n\t\t\t// \t\t\"tstamp\": fmt1,\n\t\t\t// \t\t\"index\": fmt2,\n\t\t\t// \t\t\"duration\": fmt1,\n\t\t\t// \t\t\"playback\": fmt1,\n\t\t\t// \t\t\"media\": fmt1,\n\t\t\t// \t\t\"timer\": fmt1,\n\t\t\t// \t\t\"next\": fmt1,\n\t\t\t// \t};\n\t\t\t// \treturn Object.keys(o).map(function(s, i, a) {\n\t\t\t// \t\treturn o[s](s);\n\t\t\t// \t}).join(\" \");\n\t\t\t// \t// Object.keys(o).reduce(function(ss, s, i, a) {\n\t\t\t// \t// \treturn ss + \" \" + lpad(caps(s), 8).substr(0, 8).toUpperCase();\n\t\t\t// \t// }, \"\");\n\t\t\t// },\n\n\t\t\t__getHeaderText: function() {\n\t\t\t\treturn [\n\t\t\t\t\t\"tstamp\",\n\t\t\t\t\t\"index\",\n\t\t\t\t\t\"duration\",\n\t\t\t\t\t\"playback\",\n\t\t\t\t\t\"media\",\n\t\t\t\t\t\"timer\",\n\t\t\t\t\t\"next\",\n\t\t\t\t].map(function(s, i, a) {\n\t\t\t\t\treturn s.padStart(8).substr(0, 8).toUpperCase();\n\t\t\t\t}).join(\" \");\n\t\t\t},\n\n\t\t\t__logTimerEvent: function(evname, msg) {\n\t\t\t\tvar logMsg = [\n\t\t\t\t\tthis.sources.selectedIndex,\n\t\t\t\t\t(this.timer.getDuration() * .001).toFixed(3),\n\t\t\t\t\tthis.playbackRequested ? \">>\" : \"::\",\n\t\t\t\t\tthis.mediaPaused ? \"paused\" :\n\t\t\t\t\t(this.mediaWaiting ? \"waiting\" : \"playing\"),\n\t\t\t\t\tthis.timer.getStatus(),\n\t\t\t\t\tthis.sources.followingOrFirst().has(\"prefetched\") ? \"ready\" : \"pending\"\n\t\t\t\t].map(function(s, i, a) {\n\t\t\t\t\treturn String(s).padStart(8).substr(0, 8).toUpperCase();\n\t\t\t\t});\n\t\t\t\tmsg && logMsg.push(msg);\n\t\t\t\tlogMsg = logMsg.join(\" \");\n\n\t\t\t\tthis.__logMessage(logMsg, evname);\n\t\t\t\t// console.log(\"%s::[%s] %s\", this.cid, evname, logMsg);\n\t\t\t},\n\t\t\t_playMedia: function() {\n\t\t\t\tthis.__logTimerEvent(\"media:play\");\n\t\t\t\tSequenceRenderer.prototype._playMedia.apply(this, arguments);\n\t\t\t\t// this.__logTimerEvent(\"< media:play\");\n\t\t\t\t// console.log(\"%s::_playMedia()\", this.cid);\n\t\t\t},\n\t\t\t_pauseMedia: function() {\n\t\t\t\tthis.__logTimerEvent(\"media:pause\");\n\t\t\t\tSequenceRenderer.prototype._pauseMedia.apply(this, arguments);\n\t\t\t\t// this.__logTimerEvent(\"< media:pause\");\n\t\t\t\t// console.log(\"%s::_pauseMedia()\", this.cid);\n\t\t\t},\n\n\t\t\t_onTimerStart: function() {\n\t\t\t\tthis.__logTimerEvent(\"timer:start\");\n\t\t\t\tSequenceRenderer.prototype._onTimerStart.apply(this, arguments);\n\t\t\t},\n\t\t\t_onTimerResume: function() {\n\t\t\t\tthis.__logTimerEvent(\"timer:resume\");\n\t\t\t\tSequenceRenderer.prototype._onTimerResume.apply(this, arguments);\n\t\t\t},\n\t\t\t_onTimerPause: function() {\n\t\t\t\tthis.__logTimerEvent(\"timer:pause\");\n\t\t\t\tSequenceRenderer.prototype._onTimerPause.apply(this, arguments);\n\t\t\t},\n\t\t\t_onTimerEnd: function() {\n\t\t\t\tthis.__logTimerEvent(\"timer:end\");\n\t\t\t\tSequenceRenderer.prototype._onTimerEnd.apply(this, arguments);\n\t\t\t},\n\n\t\t\t_updateItemProgress: function(progress, srcIdx) {\n\t\t\t\tif (progress == 1) {\n\t\t\t\t\tthis.__logTimerEvent(\"load:complete\", \"item \" + srcIdx + \": complete\");\n\t\t\t\t} else\n\t\t\t\tif (srcIdx === this.sources.selectedIndex) {\n\t\t\t\t\tthis.__logTimerEvent(\"load:progress\", \"item \" + srcIdx + \": \" + progress);\n\t\t\t\t}\n\t\t\t\tSequenceRenderer.prototype._updateItemProgress.apply(this, arguments);\n\t\t\t},\n\n\t\t\t_preloadAllItems: function(view) {\n\t\t\t\tview.__logMessage(view.cid + \"::_preloadAllItems\", \"load:start\");\n\t\t\t\tSequenceRenderer.prototype._preloadAllItems.apply(view, arguments);\n\t\t\t},\n\t\t});\n\t})(SequenceRenderer);\n}\n\nmodule.exports = SequenceRenderer;\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nvar partial$0 = require('../template/svg/FullscreenSymbol.hbs');\nHandlebarsCompiler.registerPartial('../template/svg/FullscreenSymbol.hbs', partial$0);\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"placeholder sizing\\\"></div>\\n<div class=\\\"content media-border\\\">\\n\t<div class=\\\"controls content-size\\\">\\n\t\t<canvas class=\\\"progress-meter\\\"></canvas>\\n\t</div>\\n\t<div class=\\\"crop-box media-size\\\">\\n\t\t<video width=\\\"240\\\" height=\\\"180\\\" muted playsinline></video>\\n\t\t<img class=\\\"poster default\\\" alt=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.text || (depth0 != null ? depth0.text : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"text\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" width=\\\"240\\\" height=\\\"180\\\" />\\n\t</div>\\n\t<div class=\\\"overlay media-size play-toggle-hitarea\\\">\\n\t\t\t<canvas class=\\\"play-toggle\\\"></canvas>\\n\t\t<a class=\\\"fullscreen-toggle\\\" href=\\\"javascript:(void 0)\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"../template/svg/FullscreenSymbol.hbs\"],depth0,{\"name\":\"../template/svg/FullscreenSymbol.hbs\",\"data\":data,\"indent\":\"\\t\\t\\t\",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"\t\t</a>\\n\t</div>\\n</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n",
    "/*global HTMLMediaElement, MediaError*/\n/**\n * @module app/view/render/VideoRenderer\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement\n * @see https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events\n * @see https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML5_audio_and_video\n */\n\n/* --------------------------- *\n * Imports\n * --------------------------- */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/view/render/PlayableRenderer} */\nconst PlayableRenderer = require(\"app/view/render/PlayableRenderer\");\n/** @type {module:app/view/component/CanvasProgressMeter} */\nconst ProgressMeter = require(\"app/view/component/CanvasProgressMeter\");\n// /** @type {module:app/view/component/PlayToggleSymbol} */\nconst PlayToggleSymbol = require(\"app/view/component/PlayToggleSymbol\");\n\n// var stackBlurMono = require(\"utils/canvas/bitmap/stackBlurMono\");\n// var stackBlurRGB = require(\"utils/canvas/bitmap/stackBlurRGB\");\n\n// /** @type {module:utils/prefixedStyleName} */\n// var prefixedStyleName = require(\"utils/prefixedStyleName\");\n/** @type {module:utils/prefixedEvent} */\nconst prefixedEvent = require(\"utils/prefixedEvent\");\n\n// var whenViewIsAttached = require(\"app/view/promise/whenViewIsAttached\");\n// /** @type {Function} */\n// var whenSelectionDistanceIs = require(\"app/view/promise/whenSelectionDistanceIs\");\n\n/* --------------------------- *\n * private static\n * --------------------------- */\n\nvar fullscreenChangeEvent = prefixedEvent(\"fullscreenchange\", document);\n// var fullscreenErrorEvent = prefixedEvent(\"fullscreenerror\", document);\n\nvar formatTimecode = function(value) {\n\tif (isNaN(value)) return \"\"; //value = 0;\n\tif (value >= 3600) return ((value / 3600) | 0) + \"H\";\n\tif (value >= 60) return ((value / 60) | 0) + \"M\";\n\t// if (value >= 10) return \"0\" + (value | 0) + \"S\";\n\treturn (value | 0) + \"S\";\n};\n\nvar VIDEO_CROP_PX = Globals.VIDEO_CROP_PX;\nvar SYNC_TIMEOUT_MS = 1200;\nvar SYNC_THRESHOLD_MS = 100;\n\n/**\n * @constructor\n * @type {module:app/view/render/VideoRenderer}\n */\nvar VideoRenderer = PlayableRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"videoRenderer\",\n\t/** @type {string} */\n\tclassName: PlayableRenderer.prototype.className + \" video-item\",\n\t/** @type {Function} */\n\ttemplate: require(\"./VideoRenderer.hbs\"),\n\n\t// events: (function() {\n\t// \tvar ret = {};\n\t// \tret[PlayableRenderer.CLICK_EVENT + \" .fullscreen-toggle\"] = \"_onFullscreenToggle\";\n\t// \treturn ret;\n\t// }()),\n\n\t// events: function() {\n\t// \tvar events = {};\n\t// \tevents[PlayableRenderer.CLICK_EVENT + \" .fullscreen-toggle\"] = \"_onFullscreenToggle\";\n\t// \treturn _.extend(events, _.result(this, PlayableRenderer.prototype.events));\n\t// },\n\t// events: {\n\t// \t\"click .fullscreen-toggle\": \"_onFullscreenToggle\",\n\t// },\n\n\tproperties: {\n\t\tfullscreenToggle: {\n\t\t\t/** @return {HTMLElement} */\n\t\t\tget: function() {\n\t\t\t\treturn this._fullscreenToggle || (this._fullscreenToggle = this.el.querySelector(\".fullscreen-toggle\"));\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\tPlayableRenderer.prototype.initialize.apply(this, arguments);\n\t\t_.bindAll(this,\n\t\t\t\"_updatePlaybackState\",\n\t\t\t\"_updateCurrTimeValue\",\n\t\t\t\"_updateBufferedValue\",\n\t\t\t\"_onMediaError\",\n\t\t\t\"_onMediaEnded\",\n\t\t\t// \"_onMediaPlayingOnce\",\n\t\t\t\"_onFullscreenChange\",\n\t\t\t\"_onFullscreenToggle\"\n\t\t);\n\t\t_.bindAll(this,\n\t\t\t\"_playbackTimeoutFn_playing\",\n\t\t\t\"_playbackTimeoutFn_waiting\"\n\t\t);\n\t\t// var onPeerSelect = function() {\n\t\t// \tthis.content.style.display = (this.getSelectionDistance() > 1)? \"none\": \"\";\n\t\t// };\n\t\t// this.listenTo(this.model.collection, \"select:one select:none\", onPeerSelect);\n\t\t// onPeerSelect();\n\t},\n\n\t/* --------------------------- *\n\t * children\n\t * --------------------------- */\n\n\t/** @override */\n\tcreateChildren: function() {\n\t\tPlayableRenderer.prototype.createChildren.apply(this, arguments);\n\n\t\tthis.placeholder = this.el.querySelector(\".placeholder\");\n\t\t// this.overlay = this.content.querySelector(\".overlay\");\n\t\tthis.video = this.content.querySelector(\"video\");\n\t\t// this.video.loop = this.model.attrs().hasOwnProperty(\"@video-loop\");\n\n\t\t// this.video.setAttribute(\"muted\", \"muted\");\n\t\t// this.video.setAttribute(\"playsinline\", \"playsinline\");\n\t\t// if (this.model.attr(\"@video-loop\") !== void 0) {\n\t\t// \tthis.video.setAttribute(\"loop\", \"loop\");\n\t\t// }\n\t\tthis.video.setAttribute(\"preload\", \"none\");\n\t\tif (this.video.controlList) this.video.controlList.add(\"nodownload\");\n\n\t\t// this.video.muted = true;\n\t\t// this.video.playsinline = true;\n\t\t// this.video.preload = \"auto\";\n\t\tthis.video.loop = this.model.attr(\"@video-loop\") !== void 0;\n\t\tthis.video.src = this.findPlayableSource(this.video);\n\t},\n\n\t/* --------------------------- *\n\t * layout/render\n\t * --------------------------- */\n\n\tmeasure: function() {\n\t\tPlayableRenderer.prototype.measure.apply(this, arguments);\n\n\t\t// NOTE: Vertical 1px video crop\n\t\t// - Cropped in CSS: video, .poster { margin-top: -1px; margin-bottom: -1px;}\n\t\t// - Cropped height is adjusted in metrics obj\n\t\t// - Crop amount added back to actual video on render()\n\t\tthis.metrics.media.height += VIDEO_CROP_PX * 2;\n\t\tthis.metrics.content.height += VIDEO_CROP_PX * 2;\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tPlayableRenderer.prototype.render.apply(this, arguments);\n\n\t\tvar els, el, i, cssW, cssH;\n\t\tvar img = this.defaultImage;\n\t\tvar content = this.content;\n\n\t\t// media-size\n\t\t// ---------------------------------\n\t\tcssW = this.metrics.media.width + \"px\";\n\t\tcssH = this.metrics.media.height + \"px\";\n\n\t\tels = this.el.querySelectorAll(\".media-size\");\n\t\tfor (i = 0; i < els.length; i++) {\n\t\t\tel = els.item(i);\n\t\t\tel.style.width = cssW;\n\t\t\tel.style.height = cssH;\n\t\t}\n\n\t\tcontent.style.width = cssW;\n\t\tcontent.style.height = (this.metrics.media.height + VIDEO_CROP_PX) + \"px\";\n\n\t\t// content-position\n\t\t// ---------------------------------\n\t\tvar cssX, cssY;\n\t\tcssX = this.metrics.content.x + \"px\";\n\t\tcssY = this.metrics.content.y + \"px\";\n\t\tcontent.style.left = cssX;\n\t\tcontent.style.top = cssY;\n\n\t\tel = this.el.querySelector(\".controls\");\n\t\t// el.style.left = cssX;\n\t\t// controls.style.top = cssY;\n\t\tel.style.width = this.metrics.content.width + \"px\";\n\t\tel.style.height = this.metrics.content.height + \"px\";\n\n\t\t// // content-size\n\t\t// // ---------------------------------\n\t\t// cssW = this.metrics.content.width + \"px\";\n\t\t// cssH = this.metrics.content.height + \"px\";\n\t\t//\n\t\t// els = this.el.querySelectorAll(\".content-size\");\n\t\t// for (i = 0; i < els.length; i++) {\n\t\t// \tel = els.item(i);\n\t\t// \tel.style.width = cssW;\n\t\t// \tel.style.height = cssH;\n\t\t// }\n\n\t\t// NOTE: elements below must use video's UNCROPPED height, so +2px\n\t\tthis.video.setAttribute(\"width\", this.metrics.media.width);\n\t\tthis.video.setAttribute(\"height\", this.metrics.media.height - VIDEO_CROP_PX * 2);\n\t\timg.setAttribute(\"width\", this.metrics.media.width);\n\t\timg.setAttribute(\"height\", this.metrics.media.height - VIDEO_CROP_PX * 2);\n\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t * initializeAsync\n\t * --------------------------- */\n\n\tinitializeAsync: function() {\n\t\treturn Promise.resolve(this)\n\t\t\t.then(PlayableRenderer.whenSelectionIsContiguous)\n\t\t\t.then(PlayableRenderer.whenScrollingEnds)\n\t\t\t.then(PlayableRenderer.whenViewIsAttached)\n\t\t\t.then(\n\t\t\t\tfunction(view) {\n\t\t\t\t\t// console.log(\"%s::initializeAsync [attached, scrollend, selected > %o, preload:%s] ('%o')\", view.cid, view.model.getDistanceToSelected(), view.video.preload, view.model.get(\"name\"));\n\t\t\t\t\treturn Promise.all([\n\t\t\t\t\t\tPlayableRenderer.whenDefaultImageLoads(view),\n\t\t\t\t\t\tview.whenVideoHasMetadata(view),\n\t\t\t\t\t]).then(function() {\n\t\t\t\t\t\treturn view;\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t.then(\n\t\t\t\tfunction(view) {\n\t\t\t\t\t// console.log(\"%s::initializeAsync [defaultImage, preload:%s] ('%o')\", view.cid, view.video.preload, view.model.get(\"name\"));\n\t\t\t\t\tview.initializePlayable();\n\t\t\t\t\t// view.updateOverlay(view.defaultImage, view.playToggle); //view.overlay);\n\t\t\t\t\tview.listenToSelection();\n\t\t\t\t\treturn view;\n\t\t\t\t});\n\n\t\t// videoEl.setAttribute(\"preload\", \"metadata\");\n\t},\n\n\tinitializePlayable: function() {\n\t\t// When selected for the first time\n\t\t// ---------------------------------\n\t\tPlayableRenderer.whenSelectionDistanceIs(this, 0)\n\t\t\t.then(function(view) {\n\t\t\t\tview.video.setAttribute(\"preload\", \"auto\");\n\t\t\t\tview.video.preload = \"auto\";\n\t\t\t\t// console.log(\"%s::initializeAsync [selected, preload:%s] ('%o')\", view.cid, view.video.preload, view.model.get(\"name\"));\n\t\t\t\treturn view;\n\t\t\t})\n\t\t\t.catch(function(reason) {\n\t\t\t\tif (reason instanceof PlayableRenderer.ViewError) {\n\t\t\t\t\tconsole.log(\"%s::%s\", reason.view.cid, reason.message);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(reason);\n\t\t\t\t\t// return Promise.reject(reason);\n\t\t\t\t}\n\t\t\t});\n\t\t// play-toggle-symbol\n\t\t// ---------------------------------\n\t\tthis._playToggleSymbol = new PlayToggleSymbol(_.extend({\n\t\t\tel: this.el.querySelector(\".play-toggle\")\n\t\t}, this._playToggleSymbol || {}));\n\n\t\t// this._playToggleSymbol.setImageSource(this.defaultImage, 0, 0);\n\t\t// this.listenToElementOnce(this.video, \"timeupdate\", function(ev) {\n\t\t// \tthis._playToggleSymbol.setImageSource(this.video);\n\t\t// });\n\n\t\t// progress-meter\n\t\t// ---------------------------------\n\t\tthis.progressMeter = new ProgressMeter({\n\t\t\tel: this.el.querySelector(\".progress-meter\"),\n\t\t\tcolor: this.model.attr(\"color\"),\n\t\t\t// backgroundColor: this.model.attr(\"background-color\"),\n\t\t\tmaxValues: {\n\t\t\t\tamount: this.video.duration,\n\t\t\t\tavailable: this.video.duration,\n\t\t\t},\n\t\t\tlabelFn: (function(value, total) {\n\t\t\t\tif (!this._started || this.video.ended || isNaN(value)) {\n\t\t\t\t\treturn formatTimecode(total);\n\t\t\t\t} else if (!this.playbackRequested) {\n\t\t\t\t\treturn Globals.PAUSE_CHAR;\n\t\t\t\t} else {\n\t\t\t\t\treturn formatTimecode(total - value);\n\t\t\t\t}\n\t\t\t}).bind(this)\n\t\t});\n\t\t// this.el.querySelector(\".controls\").appendChild(this.progressMeter.el);\n\t\t// var el = this.el.querySelector(\".progress-meter\");\n\t\t// el.parentNode.replaceChild(this.progressMeter.el, el);\n\t\t// var parentEl = this.el.querySelector(\".controls\");\n\t\t// parentEl.insertBefore(this.progressMeter.el, parentEl.firstChild);\n\n\t\t// this._setPlayToggleSymbol(\"play-symbol\");\n\t\tthis._renderPlaybackState();\n\n\t\t// listen to video events\n\t\t// ---------------------------------\n\t\t// this.video.poster = this.model.get(\"source\").get(\"original\");\n\t\tthis.addMediaListeners();\n\t},\n\n\t/* --------------------------- *\n\t * whenVideoHasMetadata promise\n\t * --------------------------- */\n\n\twhenVideoHasMetadata: function(view) {\n\t\t// NOTE: not pretty !!!\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tvar videoEl = view.video;\n\t\t\tvar eventHandlers = {\n\t\t\t\tloadedmetadata: function(ev) {\n\t\t\t\t\tif (ev) removeEventListeners();\n\t\t\t\t\t// console.log(\"%s::whenVideoHasMetadata [%s] %s\", view.cid, \"resolved\", ev ? ev.type : \"sync\");\n\t\t\t\t\tresolve(view);\n\t\t\t\t},\n\t\t\t\tabort: function(ev) {\n\t\t\t\t\tif (ev) removeEventListeners();\n\t\t\t\t\treject(new PlayableRenderer.ViewError(view, new Error(\"whenVideoHasMetadata: view was removed\")));\n\t\t\t\t},\n\t\t\t\terror: function(ev) {\n\t\t\t\t\tif (ev) removeEventListeners();\n\t\t\t\t\tvar err;\n\t\t\t\t\tif (videoEl.error) {\n\t\t\t\t\t\terr = new Error(_.invert(MediaError)[videoEl.error.code]);\n\t\t\t\t\t\terr.infoCode = videoEl.error.code;\n\t\t\t\t\t} else {\n\t\t\t\t\t\terr = new Error(\"Unspecified error\");\n\t\t\t\t\t}\n\t\t\t\t\terr.infoSrc = videoEl.src;\n\t\t\t\t\terr.logMessage = \"whenVideoHasMetadata: \" + err.name + \" \" + err.infoSrc;\n\t\t\t\t\terr.logEvent = ev;\n\t\t\t\t\treject(err);\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t//  (videoEl.preload == \"auto\" && videoEl.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA)\n\t\t\t// \t(videoEl.preload == \"metadata\" && videoEl.readyState >= HTMLMediaElement.HAVE_METADATA)\n\n\t\t\tif (videoEl.error) {\n\t\t\t\teventHandlers.error();\n\t\t\t} else if (videoEl.readyState >= HTMLMediaElement.HAVE_METADATA) {\n\t\t\t\teventHandlers.loadedmetadata();\n\t\t\t} else {\n\t\t\t\tvar sources = videoEl.querySelectorAll(\"source\");\n\t\t\t\tvar errTarget = sources.length > 0 ? sources.item(sources.length - 1) : videoEl;\n\t\t\t\tvar errCapture = errTarget === videoEl; // use capture with HTMLMediaElement\n\n\t\t\t\tvar removeEventListeners = function() {\n\t\t\t\t\terrTarget.removeEventListener(\"error\", eventHandlers.error, errCapture);\n\t\t\t\t\tfor (var ev in eventHandlers) {\n\t\t\t\t\t\tif (ev !== \"error\" && eventHandlers.hasOwnProperty(ev)) {\n\t\t\t\t\t\t\tvideoEl.removeEventListener(ev, eventHandlers[ev], false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\terrTarget.addEventListener(\"error\", eventHandlers.error, errCapture);\n\t\t\t\tfor (var ev in eventHandlers) {\n\t\t\t\t\tif (ev !== \"error\" && eventHandlers.hasOwnProperty(ev)) {\n\t\t\t\t\t\tvideoEl.addEventListener(ev, eventHandlers[ev], false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t/* NOTE: MS Edge ignores js property, using setAttribute */\n\t\t\t\tvideoEl.setAttribute(\"preload\", \"metadata\");\n\t\t\t\tvideoEl.preload = \"metadata\";\n\n\t\t\t\t// videoEl.setAttribute(\"poster\", view.get(\"source\").get(\"original\"));\n\t\t\t\t// videoEl.setAttribute(\"preload\", \"metadata\");\n\t\t\t\t// videoEl.poster = view.model.get(\"source\").get(\"original\");\n\t\t\t\t// videoEl.loop = view.model.attr(\"@video-loop\") !== void 0;\n\t\t\t\t// videoEl.src = view.findPlayableSource(videoEl);\n\t\t\t\t// videoEl.load();\n\n\t\t\t\t// console.log(\"%s::whenVideoHasMetadata [preload:%s]\", view.cid, videoEl.preload);\n\t\t\t}\n\t\t});\n\t},\n\n\tfindPlayableSource: function(video) {\n\t\tvar playable = this.model.get(\"sources\").find(function(source) {\n\t\t\treturn /^video\\//.test(source.get(\"mime\")) && video.canPlayType(source.get(\"mime\")) != \"\";\n\t\t});\n\t\treturn playable ? playable.get(\"original\") : \"\";\n\t},\n\n\t/* ---------------------------\n\t * PlayableRenderer implementation\n\t * --------------------------- */\n\n\t// /** @override */\n\t// _canResumePlayback: function() {\n\t// \treturn PlayableRenderer.prototype._canResumePlayback.apply(this, arguments) && this.video.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA;\n\t// },\n\n\t/** @override initial value */\n\t_playbackRequested: false,\n\n\t/** @override */\n\t_isMediaPaused: function() {\n\t\treturn this.video.paused;\n\t},\n\n\t/** @override */\n\t_playMedia: function() {\n\t\tif (this.video.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA && this.video.seekable.length == 0) {\n\t\t\tconsole.warn(this.cid, \"WTF! got video data, but cannot seek, calling load()\");\n\t\t\t// this._logMessage(\"call:load\", \"got video data, but cannot seek, calling load()\", \"orange\");\n\t\t\tif (_.isFunction(this.video.load)) {\n\t\t\t\tthis.video.load();\n\t\t\t}\n\t\t}\n\t\t/* NOTE: loop is false, restart from end on request */\n\t\telse if (this.video.ended) {\n\t\t\tthis.video.currentTime = this.video.seekable.start(0);\n\t\t}\n\n\t\t/* if not enough data */\n\t\tif (this.video.readyState < HTMLMediaElement.HAVE_ENOUGH_DATA) {\n\t\t\tif (this.video.networkState == HTMLMediaElement.NETWORK_IDLE) {\n\t\t\t\tthis.video.load();\n\t\t\t} //else {\n\t\t\t// var _playStamp = this._playbackCount;\n\t\t\t// console.log(\"%s::_playMedia %s waiting [#%s]\", this.cid, this._isMediaWaiting() ? \"continue\" : \"begin\", _playStamp);\n\t\t\t//\n\t\t\t// this.listenToElementOnce(this.video, \"canplaythrough\", function(ev) {\n\t\t\t// \tconsole.log(\"%s::_playMedia end waiting [#%s]\", this.cid, _playStamp);\n\t\t\t//\n\t\t\t// \tthis._toggleWaiting(false);\n\t\t\t// \t// this.playbackRequested && this.video.play();\n\t\t\t// \tthis._validatePlayback();\n\t\t\t// });\n\t\t\t//}\n\t\t\t/* NOTE: on \"canplaythrough\" _playMedia() will be called again if still required */\n\t\t\tthis._toggleWaiting(true);\n\t\t}\n\t\t/* play */\n\t\telse {\n\t\t\t/* NOTE: current browsers return a promise */\n\t\t\tthis.video.play();\n\t\t}\n\t},\n\n\t/** @override */\n\t_pauseMedia: function() {\n\t\t// this._setPlayToggleSymbol(\"play-symbol\");\n\t\tthis.video.pause();\n\t\t// this._renderPlaybackState();\n\t},\n\n\t/* ---------------------------\n\t/* DOM events\n\t/* --------------------------- */\n\n\t_listenWhileSelected: function() {\n\t\tPlayableRenderer.prototype._listenWhileSelected.apply(this, arguments);\n\t\tthis.fullscreenToggle.addEventListener(\n\t\t\tthis._toggleEvent, this._onFullscreenToggle, false);\n\t},\n\n\t_stopListeningWhileSelected: function() {\n\t\tPlayableRenderer.prototype._stopListeningWhileSelected.apply(this, arguments);\n\t\tthis.fullscreenToggle.removeEventListener(\n\t\t\tthis._toggleEvent, this._onFullscreenToggle, false);\n\t},\n\n\t/* ---------------------------\n\t/* media events\n\t/* --------------------------- */\n\n\taddMediaListeners: function() {\n\t\t// if (!this._started) {\n\t\t// \tthis.addListeners(this.video, this.playingOnceEvents, this._onMediaPlayingOnce);\n\t\t// }\n\t\tthis.addListeners(this.video, this.updatePlaybackEvents, this._updatePlaybackState);\n\t\tthis.addListeners(this.video, this.updateBufferedEvents, this._updateBufferedValue);\n\t\tthis.addListeners(this.video, this.updateCurrTimeEvents, this._updateCurrTimeValue);\n\t\tthis.video.addEventListener(\"ended\", this._onMediaEnded, false);\n\t\tthis.video.addEventListener(\"error\", this._onMediaError, true);\n\n\t\tthis.on(\"view:removed\", this.removeMediaListeners, this);\n\t},\n\n\tremoveMediaListeners: function() {\n\t\tthis.off(\"view:removed\", this.removeMediaListeners, this);\n\n\t\t// if (!this._started) {\n\t\t// \tthis.removeListeners(this.video, this.playingOnceEvents, this._onMediaPlayingOnce);\n\t\t// }\n\t\tthis.removeListeners(this.video, this.updatePlaybackEvents, this._updatePlaybackState);\n\t\tthis.removeListeners(this.video, this.updateBufferedEvents, this._updateBufferedValue);\n\t\tthis.removeListeners(this.video, this.updateCurrTimeEvents, this._updateCurrTimeValue);\n\t\tthis.video.removeEventListener(\"ended\", this._onMediaEnded, false);\n\t\tthis.video.removeEventListener(\"error\", this._onMediaError, true);\n\t},\n\n\t/* ---------------------------\n\t/* media event handlers\n\t/* --------------------------- */\n\n\t_onMediaError: function(ev) {\n\t\tthis.removeMediaListeners();\n\t\tthis.removeSelectionListeners();\n\n\t\tthis._started = false;\n\t\tthis.content.classList.remove(\"started\");\n\n\t\tthis.mediaState = \"error\";\n\t\tthis.playbackRequested = false;\n\t\t// this.content.classList.remove(\"ended\");\n\t\t// this.content.classList.remove(\"waiting\");\n\t\tthis._exitFullscreen();\n\t},\n\n\t_onMediaEnded: function(ev) {\n\t\tthis.playbackRequested = false;\n\t\tthis._exitFullscreen();\n\t},\n\n\t_exitFullscreen: function() {\n\t\t/* NOTE: polyfill should handle this on iOS? */\n\t\tif (this.video.webkitDisplayingFullscreen) {\n\t\t\tthis.video.webkitExitFullscreen();\n\t\t}\n\t\tif (document.fullscreenElement === this.video) {\n\t\t\tthis.video.exitFullscreen();\n\t\t}\n\t},\n\n\t/* ---------------------------\n\t/* _onMediaPlayingOnce\n\t/* --------------------------- */\n\n\t// playingOnceEvents: \"playing waiting\",\n\t//\n\t// _onMediaPlayingOnce: function(ev) {\n\t// \tthis.removeListeners(this.video, this.playingOnceEvents, this._onMediaPlayingOnce);\n\t// \tif (!this._started) {\n\t// \t\tthis._started = true;\n\t// \t\tthis.content.classList.add(\"started\");\n\t// \t}\n\t// },\n\n\t/* ---------------------------\n\t/* _updateCurrTimeValue\n\t/* --------------------------- */\n\n\tupdateCurrTimeEvents: \"playing waiting pause timeupdate seeked\", //.split(\" \"),\n\n\t_updateCurrTimeValue: function(ev) {\n\t\tif (this.video.played.length) {\n\t\t\tthis.content.classList.add(\"started\");\n\t\t}\n\t\tif (this.progressMeter) {\n\t\t\tthis.progressMeter.valueTo(\"amount\", this.video.currentTime, 0);\n\t\t}\n\t},\n\n\t/* ---------------------------\n\t/* _updatePlaybackState\n\t/* --------------------------- */\n\n\t// updatePlaybackEvents: \"playing play waiting pause seeking seeked ended\",\n\tupdatePlaybackEvents: \"timeupdate playing pause waiting canplaythrough seeked\",\n\n\t_isPlaybackWaiting: false,\n\t_playbackStartTS: -1,\n\t_playbackStartTC: -1,\n\n\t_updatePlaybackState: function(ev) {\n\t\t// var isWaiting = false;\n\t\t// var symbolName = \"play-symbol\";\n\n\t\t// NOTE: clearTimeout will cancel both setTimeout and setInterval IDs\n\t\twindow.clearTimeout(this._playbackTimeoutID);\n\t\tthis._playbackTimeoutID = -1;\n\n\t\tif (this.playbackRequested) {\n\t\t\tif (ev.type !== \"timeupdate\") {\n\t\t\t\tthis._playbackStartTS = ev.timeStamp;\n\t\t\t\tthis._playbackStartTC = this.video.currentTime;\n\t\t\t}\n\t\t\tswitch (ev.type) {\n\t\t\t\tcase \"timeupdate\":\n\t\t\t\t\tif (SYNC_THRESHOLD_MS < Math.abs((ev.timeStamp - this._playbackStartTS) -\n\t\t\t\t\t\t\t((this.video.currentTime - this._playbackStartTC) * 1000))) {\n\t\t\t\t\t\tthis._playbackStartTS = ev.timeStamp;\n\t\t\t\t\t\tthis._playbackStartTC = this.video.currentTime;\n\t\t\t\t\t\tthis._playbackTimeoutID =\n\t\t\t\t\t\t\twindow.setTimeout(this._playbackTimeoutFn_waiting, SYNC_TIMEOUT_MS);\n\t\t\t\t\t\tthis._toggleWaiting(true);\n\t\t\t\t\t\t// break;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._playbackTimeoutID =\n\t\t\t\t\t\t\twindow.setTimeout(this._playbackTimeoutFn_playing, SYNC_TIMEOUT_MS);\n\t\t\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"playing\":\n\t\t\t\t\tthis._playbackStartTS = ev.timeStamp;\n\t\t\t\t\tthis._playbackStartTC = this.video.currentTime;\n\t\t\t\t\tthis._playbackTimeoutID = window.setTimeout(this._playbackTimeoutFn_playing, SYNC_TIMEOUT_MS);\n\t\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"pause\":\n\t\t\t\t\t/* NOTE: this.playbackRequested is true, the pause wasn't triggered\n\t\t\t\t\t * from UI, but by the waiting handler below, so we treat it as\n\t\t\t\t\t * waiting */\n\t\t\t\t\t// if (!this.playbackRequested) {\n\t\t\t\t\t// \tthis._toggleWaiting(false);\n\t\t\t\t\t// }\n\t\t\t\t\tthis._toggleWaiting(this.playbackRequested);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"canplaythrough\":\n\t\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t\tthis._validatePlayback();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"waiting\":\n\t\t\t\t\t/* NOTE: if the video is seeking, give it a chance to resume, so do\n\t\t\t\t\t * nothing, and handle things on seeked/playing */\n\t\t\t\t\tif (!this.video.seeking) {\n\t\t\t\t\t\t/* if not enough data */\n\t\t\t\t\t\tif (this.video.readyState < HTMLMediaElement.HAVE_ENOUGH_DATA) {\n\t\t\t\t\t\t\tthis.video.pause();\n\n\t\t\t\t\t\t\t// this.listenToElementOnce(this.video, \"canplaythrough\", function() {\n\t\t\t\t\t\t\t// \tthis._toggleWaiting(false);\n\t\t\t\t\t\t\t// \tthis._validatePlayback();\n\t\t\t\t\t\t\t// this.playbackRequested && this.video.play();\n\t\t\t\t\t\t\t// });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._toggleWaiting(true);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tthis._toggleWaiting(false);\n\t\t}\n\t},\n\n\t_playbackTimeoutID: -1,\n\t_playbackTimeoutFn_playing: function() {\n\t\tthis._playbackTimeoutID = -1;\n\n\t\tthis._toggleWaiting(true);\n\t\t// this._renderPlaybackState();\n\n\t\t// this._setPlayToggleSymbol(\"waiting-symbol\");\n\t\t// this.content.classList.add(\"waiting\");\n\t\t// this.progressMeter.stalled = true;\n\t\t// this._isPlaybackWaiting = true;\n\t},\n\n\t_playbackTimeoutFn_waiting: function() {\n\t\tif (SYNC_THRESHOLD_MS < (this.video.currentTime - this._playbackStartTC) * 1000) {\n\t\t\tthis._playbackTimeoutID =\n\t\t\t\twindow.setTimeout(this._playbackTimeoutFn_waiting, SYNC_TIMEOUT_MS);\n\t\t} else {\n\t\t\t// since there is no event.timeStamp\n\t\t\t// var delta = this.video.currentTime - this._playbackStartTC;\n\t\t\t// this._playbackStartTS += delta * 1000;\n\t\t\t// this._playbackStartTS = window.performance.now();\n\t\t\tthis._playbackStartTS += SYNC_TIMEOUT_MS;\n\t\t\tthis._playbackStartTC = this.video.currentTime;\n\t\t\tthis._playbackTimeoutID =\n\t\t\t\twindow.setTimeout(this._playbackTimeoutFn_playing, SYNC_TIMEOUT_MS);\n\n\t\t\tthis._toggleWaiting(false);\n\t\t\t// this._renderPlaybackState();\n\n\t\t\t// this._setPlayToggleSymbol(\"pause-symbol\");\n\t\t\t// this.content.classList.remove(\"waiting\");\n\t\t\t// this.progressMeter.stalled = false;\n\t\t\t// this._isPlaybackWaiting = false;\n\t\t}\n\t},\n\n\t/** @override */\n\t_renderPlaybackState: function() {\n\t\t// if (DEBUG) {\n\t\t// \tthis.__logMessage([\n\t\t// \t\"mediaState:\", this.mediaState,\n\t\t// \t\"played:\", this.video.played.length,\n\t\t// \t\"ended:\", this.video.ended,\n\t\t// \t\"toggle.paused:\", this._playToggleSymbol.paused\n\t\t// ].join(\" \"), \"_renderPlaybackState\");\n\t\t// }\n\t\t// console.log(\"%s::_renderPlaybackState mediaState:%s played:%o ended:%o\",\n\t\t// \tthis.cid, this.mediaState, this.video.played.length, this.video.ended);\n\t\t//\n\t\t// if (this.mediaState === \"ready\") {\n\t\t// \tthis.updateOverlay(this.video, this.playToggle);\n\t\t// }\n\n\t\tvar cls = this.content.classList;\n\t\t// if (!this._started && this.playbackRequested &&\n\t\t// \t\tthis.video.readyState === HTMLMediaElement.HAVE_ENOUGH_DATA) {\n\t\t// \tthis._started = true;\n\t\t// \tcls.add(\"started\");\n\t\t// }\n\t\t// cls.toggle(\"started\", (this.video.played.length > 0));\n\t\tcls.toggle(\"ended\", this.video.ended);\n\n\t\tPlayableRenderer.prototype._renderPlaybackState.apply(this, arguments);\n\t},\n\n\t_setPlayToggleSymbol: function(symbolName) {\n\t\t// if (this.video.ended) {\n\t\t// \tconsole.log(\"%s::_setPlayToggleSymbol %s -> ended\", this.cid, symbolName);\n\t\t// }\n\t\t// if (this.mediaState === \"ready\") {\n\t\t// \tif (this.playbackRequested && !this._isMediaWaiting()) {\n\t\t// \t\tthis._playToggleSymbol.setImageSource(null);\n\t\t// \t} else {\n\t\t// \t\tthis._playToggleSymbol.setImageSource(this.video);\n\t\t// \t}\n\t\t// \tthis._playToggleSymbol.refreshImageSource();\n\t\t// }\n\t\treturn PlayableRenderer.prototype._setPlayToggleSymbol.call(this, this.video.ended ? \"ended\" : symbolName);\n\t},\n\n\t/* ---------------------------\n\t/* _updateBufferedValue\n\t/* --------------------------- */\n\n\t// updateBufferedEvents: \"progress canplay canplaythrough playing timeupdate\",//loadeddata\n\tupdateBufferedEvents: \"progress canplay canplaythrough play playing\",\n\n\t_updateBufferedValue: function(ev) {\n\t\t// if (!this._started) return;\n\t\tvar bRanges = this.video.buffered;\n\t\tif (bRanges.length > 0) {\n\t\t\tthis._bufferedValue = bRanges.end(bRanges.length - 1);\n\t\t\tif (this.progressMeter && ((this.video.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA) /*|| (this.video.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA && this.video.networkState == HTMLMediaElement.NETWORK_LOADING)*/ )) {\n\t\t\t\tthis.progressMeter.valueTo(\"available\", this._bufferedValue, 300);\n\t\t\t\t// this.progressMeter.valueTo(\"available\", this._bufferedValue, Math.max(0, 1000 * (this._bufferedValue - (this.progressMeter.getTargetValue(\"available\") | 0))));\n\t\t\t}\n\t\t}\n\t},\n\n\t/* ---------------------------\n\t/* fullscreen api\n\t/* --------------------------- */\n\n\t_onFullscreenToggle: function(ev) {\n\t\t// NOTE: Ignore if MouseEvent.button is 0 or undefined (0: left-button)\n\t\tif (!ev.defaultPrevented && !ev.button && this.model.selected) {\n\t\t\tev.preventDefault();\n\t\t\ttry {\n\t\t\t\tif (document.hasOwnProperty(\"fullscreenElement\") &&\n\t\t\t\t\tdocument.fullscreenElement !== this.video) {\n\t\t\t\t\tdocument.addEventListener(fullscreenChangeEvent, this._onFullscreenChange, false);\n\t\t\t\t\tthis.video.requestFullscreen();\n\t\t\t\t} else\n\t\t\t\tif (this.video.webkitSupportsFullscreen && !this.video.webkitDisplayingFullscreen) {\n\t\t\t\t\tthis.video.addEventListener(\"webkitbeginfullscreen\", this._onFullscreenChange, false);\n\t\t\t\t\tthis.video.webkitEnterFullScreen();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tthis.video.controls = false;\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t}\n\t},\n\n\t_onFullscreenChange: function(ev) {\n\t\tswitch (ev.type) {\n\t\t\tcase fullscreenChangeEvent:\n\t\t\t\t// var isOwnFullscreen = Modernizr.prefixed(\"fullscreenElement\", document) === this.video;\n\t\t\t\tvar isOwnFullscreen = document.fullscreenElement === this.video;\n\t\t\t\tthis.video.controls = isOwnFullscreen;\n\t\t\t\tif (!isOwnFullscreen) {\n\t\t\t\t\tdocument.removeEventListener(fullscreenChangeEvent, this._onFullscreenChange, false);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"webkitbeginfullscreen\":\n\t\t\t\tthis.video.controls = true;\n\t\t\t\tthis.video.removeEventListener(\"webkitbeginfullscreen\", this._onFullscreenChange, false);\n\t\t\t\tthis.video.addEventListener(\"webkitendfullscreen\", this._onFullscreenChange, false);\n\t\t\t\tbreak;\n\t\t\tcase \"webkitendfullscreen\":\n\t\t\t\tthis.video.removeEventListener(\"webkitendfullscreen\", this._onFullscreenChange, false);\n\t\t\t\tthis.video.controls = false;\n\t\t\t\tbreak;\n\t\t}\n\t},\n});\nmodule.exports = VideoRenderer;\n\n/* ---------------------------\n/* log to screen\n/* --------------------------- */\nif (DEBUG) {\n\tmodule.exports = (function(VideoRenderer) {\n\t\tif (!VideoRenderer.LOG_TO_SCREEN) return VideoRenderer;\n\n\t\t/** @type {Function} */\n\t\tvar Color = require(\"color\");\n\t\t// /** @type {module:underscore.strings/lpad} */\n\t\t// var lpad = require(\"underscore.string/lpad\");\n\t\t// /** @type {module:underscore.strings/rpad} */\n\t\t// var rpad = require(\"underscore.string/rpad\");\n\n\t\t// var fullscreenEvents = [\n\t\t// \tfullscreenChangeEvent, fullscreenErrorEvent,\n\t\t// \t\"webkitbeginfullscreen\", \"webkitendfullscreen\",\n\t\t// ];\n\n\t\tvar mediaEvents = require(\"utils/event/mediaEventsEnum\");\n\t\tvar logPlaybackStateEvents, logBufferedEvents, logPlayedEvents;\n\n\t\t// logPlaybackStateEvents = [\"playing\", \"waiting\", \"ended\", \"pause\", \"seeking\", \"seeked\"];\n\t\t// logBufferedEvents = [\"progress\", \"durationchange\", \"canplay\", \"play\"];\n\t\t// logPlayedEvents = [\"playing\", \"timeupdate\"];\n\n\t\tlogPlaybackStateEvents = [\n\t\t\t\"loadstart\",\n\t\t\t\"progress\",\n\t\t\t\"suspend\",\n\t\t\t\"abort\",\n\t\t\t\"error\",\n\t\t\t\"emptied\",\n\t\t\t\"stalled\",\n\t\t];\n\t\tlogBufferedEvents = [\n\t\t\t\"loadedmetadata\",\n\t\t\t\"loadeddata\",\n\t\t\t\"canplay\",\n\t\t\t\"canplaythrough\",\n\t\t\t\"playing\",\n\t\t\t\"waiting\",\n\t\t\t\"seeking\", // seeking changed to true\n\t\t\t\"seeked\", // seeking changed to false\n\t\t\t\"ended\", // ended is true\n\t\t];\n\t\tlogPlayedEvents = [\n\t\t\t\"play\",\n\t\t\t\"pause\"\n\t\t];\n\n\t\t// Exclude some events from log\n\t\tmediaEvents = _.without(mediaEvents, \"resize\", \"error\");\n\t\t// Make sure event subsets exist in the main set\n\t\tlogPlaybackStateEvents = _.intersection(mediaEvents, logPlaybackStateEvents);\n\t\tlogBufferedEvents = _.intersection(mediaEvents, logBufferedEvents);\n\t\tlogPlayedEvents = _.intersection(mediaEvents, logPlayedEvents);\n\n\t\tvar readyStateSymbols = _.invert(_.pick(HTMLMediaElement,\n\t\t\tfunction(val, key, obj) {\n\t\t\t\treturn /^HAVE_/.test(key);\n\t\t\t}));\n\t\tvar readyStateToString = function(el) {\n\t\t\treturn readyStateSymbols[el.readyState] + \"(\" + el.readyState + \")\";\n\t\t};\n\n\t\tvar networkStateSymbols = _.invert(_.pick(HTMLMediaElement,\n\t\t\tfunction(val, key, obj) {\n\t\t\t\treturn /^NETWORK_/.test(key);\n\t\t\t}));\n\t\tvar networkStateToString = function(el) {\n\t\t\treturn networkStateSymbols[el.networkState] + \"(\" + el.networkState + \")\";\n\t\t};\n\n\t\tvar mediaErrorSymbols = _.invert(MediaError);\n\t\tvar mediaErrorToString = function(el) {\n\t\t\treturn el.error ? mediaErrorSymbols[el.error.code] + \"(\" + el.error.code + \")\" : \"[MediaError null]\";\n\t\t};\n\n\t\tvar findRangeIndex = function(range, currTime) {\n\t\t\tfor (var i = 0, ii = range.length; i < ii; i++) {\n\t\t\t\tif (range.start(i) <= currTime && currTime <= range.end(i)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\n\t\tvar formatVideoError = function(video) {\n\t\t\treturn [\n\t\t\t\tmediaErrorToString(video),\n\t\t\t\tnetworkStateToString(video),\n\t\t\t\treadyStateToString(video),\n\t\t\t].join(\" \");\n\t\t};\n\n\t\tvar getVideoStatsCols = function() {\n\t\t\treturn \"0000.000 [Curr/Total] [Seekable]  [Buffered]  networkState readyState      Playback\";\n\t\t\t// return \"0000.620 [t:  0.0  27.4] [s: 27.4 0/1] [b:  0.5 0/1] LOADING(2)   FUTURE_DATA(3)  :: (::)\";\n\t\t}\n\n\t\tvar formatVideoStats = function(video) {\n\t\t\tvar currTime = video.currentTime,\n\t\t\t\tdurTime = video.duration,\n\t\t\t\tbRanges = video.buffered,\n\t\t\t\tbRangeIdx,\n\t\t\t\tsRanges = video.seekable,\n\t\t\t\tsRangeIdx;\n\n\t\t\tbRangeIdx = findRangeIndex(bRanges, currTime);\n\t\t\tsRangeIdx = findRangeIndex(sRanges, currTime);\n\t\t\treturn [\n\t\t\t\t\"[\" + String(currTime.toFixed(1)).padStart(5) +\n\t\t\t\t\t\" \" + String(!isNaN(durTime) ? durTime.toFixed(1) : \"-\").padStart(4) + \"]\",\n\t\t\t\t\"[\" + String(sRangeIdx >= 0 ? sRanges.end(sRangeIdx).toFixed(1) : \"-\").padStart(5) +\n\t\t\t\t\t\" \" + (sRangeIdx >= 0 ? sRangeIdx : \"-\") + \"/\" + sRanges.length + \"]\",\n\t\t\t\t\"[\" + String(bRangeIdx >= 0 ? bRanges.end(bRangeIdx).toFixed(1) : \"-\").padStart(5) +\n\t\t\t\t\t\" \" + (bRangeIdx >= 0 ? bRangeIdx : \"-\") + \"/\" + bRanges.length + \"]\",\n\t\t\t\tnetworkStateToString(video).substr(8).padEnd(12),\n\t\t\t\treadyStateToString(video).substr(5).padEnd(15),\n\t\t\t\t(video.ended ? \">:\" : (video.paused ? \"::\" : \">>\"))\n\t\t\t\t// video.playbackRate.toFixed(2) + \" (\" + video.defaultPlaybackRate.toFixed(2) + \")\"\n\t\t\t]; //.join(\" \");\n\t\t};\n\n\t\treturn VideoRenderer.extend({\n\n\t\t\t/** @override */\n\t\t\tinitialize: function() {\n\t\t\t\tVideoRenderer.prototype.initialize.apply(this, arguments);\n\n\t\t\t\t_.bindAll(this, \"__handleMediaEvent\");\n\n\t\t\t\tvar fgColor = this.model.attr(\"color\"),\n\t\t\t\t\tred = new Color(\"red\"),\n\t\t\t\t\tblue = new Color(\"blue\"),\n\t\t\t\t\tgreen = new Color(\"green\");\n\n\t\t\t\tfor (var i = 0; i < mediaEvents.length; i++) {\n\t\t\t\t\tvar ev = mediaEvents[i];\n\t\t\t\t\tthis.video.addEventListener(ev, this.__handleMediaEvent, false);\n\n\t\t\t\t\tvar c = new Color(fgColor),\n\t\t\t\t\t\tcc = 1;\n\t\t\t\t\tif (logBufferedEvents.indexOf(ev) != -1) c.mix(green, (cc /= 2));\n\t\t\t\t\tif (logPlayedEvents.indexOf(ev) != -1) c.mix(red, (cc /= 2));\n\t\t\t\t\tif (logPlaybackStateEvents.indexOf(ev) != -1) c.mix(blue, (cc /= 2));\n\t\t\t\t\tthis.__logColors[ev] = c.rgb().string();\n\t\t\t\t}\n\t\t\t\tthis.video.addEventListener(\"error\", this.__handleMediaEvent, true);\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\tremove: function() {\n\t\t\t\tVideoRenderer.prototype.remove.apply(this, arguments);\n\t\t\t\tfor (var i = 0; i < mediaEvents.length; i++) {\n\t\t\t\t\tif (mediaEvents[i] == \"error\") continue;\n\t\t\t\t\tthis.video.removeEventListener(mediaEvents[i], this.__handleMediaEvent, false);\n\t\t\t\t}\n\t\t\t\tthis.video.removeEventListener(\"error\", this.__handleMediaEvent, true);\n\t\t\t},\n\n\t\t\t// /** @override */\n\t\t\t// _onVisibilityChange: function(ev) {\n\t\t\t// \tVideoRenderer.prototype._onVisibilityChange.apply(this, arguments);\n\t\t\t// \tvar stateVal = Modernizr.prefixed(\"visibilityState\", document);\n\t\t\t// \tthis.__logEvent(\"visibilityState:\" + stateVal, ev.type + \":\" + stateVal);\n\t\t\t// },\n\t\t\t//\n\t\t\t// /** @override */\n\t\t\t// _onFullscreenChange: function(ev) {\n\t\t\t// \tVideoRenderer.prototype._onFullscreenChange.apply(this, arguments);\n\t\t\t// \tvar logtype = (document.fullscreenElement === this.video ? \"enter:\" : \"exit:\") + ev.type;\n\t\t\t// \tthis.__logEvent(\"document.fullscreenElement: \" + this.cid, logtype);\n\t\t\t// },\n\n\t\t\t/** @override */\n\t\t\t_onFullscreenToggle: function(ev) {\n\t\t\t\tif (!ev.defaultPrevented && this.model.selected) {\n\t\t\t\t\tthis.__logEvent(\"fullscreen-toggle\", ev.type);\n\t\t\t\t}\n\t\t\t\tVideoRenderer.prototype._onFullscreenToggle.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\t_playbackTimeoutFn_playing: function() {\n\t\t\t\tVideoRenderer.prototype._playbackTimeoutFn_playing.apply(this, arguments);\n\t\t\t\t// this.__logEvent(formatVideoStats(this.video).join(\" \"), \"timeout-play\");\n\t\t\t\tthis.__handleMediaEvent({\n\t\t\t\t\ttype: \"timeout-play\",\n\t\t\t\t\ttimeStamp: null,\n\t\t\t\t\tisTimeout: true\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\t_playbackTimeoutFn_waiting: function() {\n\t\t\t\tVideoRenderer.prototype._playbackTimeoutFn_waiting.apply(this, arguments);\n\t\t\t\t// this.__logEvent(formatVideoStats(this.video).join(\" \"), \"timeout-wait\");\n\t\t\t\tthis.__handleMediaEvent({\n\t\t\t\t\ttype: \"timeout-wait\",\n\t\t\t\t\ttimeStamp: null,\n\t\t\t\t\tisTimeout: true\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t__handleMediaEvent: function(ev) {\n\t\t\t\tvar evmsg = formatVideoStats(this.video);\n\n\t\t\t\tif (this.playbackRequested === true) {\n\t\t\t\t\tevmsg.push(\"(>>)\");\n\t\t\t\t} else if (this.playbackRequested === false) {\n\t\t\t\t\tevmsg.push(\"(::)\");\n\t\t\t\t} else {\n\t\t\t\t\tevmsg.push(\"(--)\");\n\t\t\t\t}\n\n\t\t\t\tif (this.playbackRequested) {\n\t\t\t\t\tevmsg.push(this._playbackTimeoutID !== -1 ? \"W\" : \"-\");\n\t\t\t\t} else {\n\t\t\t\t\tevmsg.push(this._playbackTimeoutID !== -1 ? \"?\" : \"!\");\n\t\t\t\t}\n\t\t\t\t// evmsg.push(this._playToggleSymbol.symbolName);\n\n\t\t\t\tvar ts, tc;\n\t\t\t\tif ((this.updatePlaybackEvents.indexOf(ev.type) > -1) || ev.isTimeout) {\n\t\t\t\t\t// evmsg.push(this._playbackStartTS.toFixed(2));\n\t\t\t\t\tts = ev.timeStamp - this._playbackStartTS;\n\t\t\t\t\ttc = this.video.currentTime - this._playbackStartTC;\n\t\t\t\t\tts *= .001; // s to ms\n\t\t\t\t\tevmsg.push(Math.abs(tc - ts).toFixed(3));\n\t\t\t\t}\n\t\t\t\t// else {\n\t\t\t\t// \tts = this._playbackStartTS;\n\t\t\t\t// \ttc = this._playbackStartTC;\n\t\t\t\t// }\n\t\t\t\t// ts *= .001; // s to ms\n\t\t\t\t// evmsg.push(Math.abs(tc - ts).toFixed(3));\n\t\t\t\t// evmsg.push(\"TC:\" + tc.toFixed(3));\n\t\t\t\t// evmsg.push(\"TS:\" + ts.toFixed(3));\n\n\t\t\t\tthis.__logEvent(evmsg.join(\" \"), ev.type);\n\t\t\t\tif (ev.type === \"error\" || ev.type === \"abort\") {\n\t\t\t\t\tthis.__logMessage(formatVideoError(this.video), ev.type);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t__logEvent: function(msg, logtype, color) {\n\t\t\t\tvar logEntryEl = this.__logElement.lastElementChild;\n\t\t\t\tif ((logEntryEl && logEntryEl.getAttribute(\"data-logtype\") == logtype) &&\n\t\t\t\t\t((logtype === \"timeupdate\") || (logtype === \"progress\"))) {\n\t\t\t\t\tvar logRepeatVal = parseInt(logEntryEl.getAttribute(\"data-logrepeat\"));\n\t\t\t\t\tlogEntryEl.textContent = this.__getTStamp() + \" \" + msg;\n\t\t\t\t\tlogEntryEl.setAttribute(\"data-logrepeat\", isNaN(logRepeatVal) ? 2 : ++logRepeatVal);\n\t\t\t\t} else {\n\t\t\t\t\tthis.__logMessage(msg, logtype, color);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t__getHeaderText: function() {\n\t\t\t\treturn getVideoStatsCols();\n\t\t\t},\n\t\t});\n\t})(module.exports);\n}\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\";\n\n  return \"<div id=\\\"desc_b\"\n    + container.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" class=\\\"content sizing mdown\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.desc || (depth0 != null ? depth0.desc : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"desc\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\";\n\n  return \"<div id=\\\"desc_m\"\n    + container.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" class=\\\"content sizing\\\"><p>\"\n    + ((stack1 = ((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</p>\"\n    + ((stack1 = ((helper = (helper = helpers.sub || (depth0 != null ? depth0.sub : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"sub\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t<p><code>\"\n    + container.escapeExpression(((helper = (helper = helpers.infoSrc || (depth0 != null ? depth0.infoSrc : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"infoSrc\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</code></p>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"error-title color-fg color-reverse\\\">\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n<div class=\\\"error-message color-fg\\\">\\n\t<p><strong>\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</strong> <code>\"\n    + alias4(((helper = (helper = helpers.message || (depth0 != null ? depth0.message : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"message\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</code></p>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.infoSrc : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n",
    "// var Handlebars = require(\"handlebars\")[\"default\"];\nconst Handlebars = require(\"hbsfy/runtime\");\n/** @type {Function} */\nconst Color = require(\"color\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n\n// (function() {\nvar helpers = {\n\t/*\n\t/* Arithmetic helpers\n\t/*/\n\tadd: function(value, addition) {\n\t\treturn value + addition;\n\t},\n\tsubtract: function(value, substraction) {\n\t\treturn value - substraction;\n\t},\n\tdivide: function(value, divisor) {\n\t\treturn value / divisor;\n\t},\n\tmultiply: function(value, multiplier) {\n\t\treturn value * multiplier;\n\t},\n\tfloor: function(value) {\n\t\treturn Math.floor(value);\n\t},\n\tceil: function(value) {\n\t\treturn Math.ceil(value);\n\t},\n\tround: function(value) {\n\t\treturn Math.round(value);\n\t},\n\tglobal: function(value) {\n\t\treturn Globals[value];\n\t},\n\n\t/*\n\t/* Flow control helpers\n\t/*/\n\tis: function(a, b, opts) {\n\t\treturn (a === b) ? opts.fn(this) : opts.inverse(this);\n\t},\n\tisnot: function(a, b, opts) {\n\t\treturn (a !== b) ? opts.fn(this) : opts.inverse(this);\n\t},\n\tisany: function(value) {\n\t\tvar i = 0,\n\t\t\tii = arguments.length - 2,\n\t\t\topts = arguments[ii + 1];\n\t\tdo\n\t\t\tif (value === arguments[++i]) {\n\t\t\t\treturn opts.fn(this);\n\t\t\t}\n\t\twhile (i < ii);\n\t\treturn opts.inverse(this);\n\t},\n\tcontains: function(a, b, opts) {\n\t\treturn (a.indexOf(b) !== -1) ? opts.fn(this) : opts.inverse(this);\n\t},\n\tignore: function() {\n\t\treturn \"\";\n\t},\n\n\t/*\n\t/* Color helpers\n\t/*/\n\tmix: function(colora, colorb, amount) {\n\t\treturn new Color(colora).mix(new Color(colorb), amount).rgb().string();\n\t},\n\tlighten: function(color, amount) {\n\t\treturn new Color(color).lighten(amount).rgb().string();\n\t},\n\tdarken: function(color, amount) {\n\t\treturn new Color(color).darken(amount).rgb().string();\n\t},\n\t// colorFormat: function(color, fmt) {\n\t// \tswitch (fmt) {\n\t// \t\tcase \"rgb\":\n\t// \t\t\treturn new Color(color).rgb().string();\n\t// \t\tcase \"hsl\":\n\t// \t\t\treturn new Color(color).hsl().string();\n\t// \t\tcase \"hex\": default:\n\t// \t\t\treturn new Color(color).hex().string();\n\t// \t}\n\t// },\n};\nfor (var helper in helpers) {\n\tif (helpers.hasOwnProperty(helper)) {\n\t\tHandlebars.registerHelper(helper, helpers[helper]);\n\t}\n}\n// })();\n\n// module.exports = Handlebars;\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"cog-symbol icon\\\" viewBox=\\\"-100 -100 200 200\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" preserveAspectRatio=\\\"xMidYMid meet\\\">\\n\t<path d=\\\"M11.754,-99.307c-7.809,-0.924 -15.699,-0.924 -23.508,0l-3.73,20.82c-6.254,1.234 -12.338,3.21 -18.123,5.888l-15.255,-14.651c-6.861,3.842 -13.244,8.48 -19.018,13.818l9.22,19.036c-4.335,4.674 -8.095,9.849 -11.201,15.416l-20.953,-2.886c-3.292,7.141 -5.731,14.645 -7.265,22.357l18.648,9.981c-0.759,6.329 -0.759,12.727 0,19.056l-18.648,9.981c1.534,7.712 3.973,15.216 7.265,22.357l20.953,-2.886c3.106,5.567 6.866,10.742 11.201,15.416l-9.22,19.036c5.774,5.338 12.157,9.976 19.018,13.818l15.255,-14.651c5.785,2.678 11.869,4.654 18.123,5.888l3.73,20.82c7.809,0.924 15.699,0.924 23.508,0l3.73,-20.82c6.254,-1.234 12.338,-3.21 18.123,-5.888l15.255,14.651c6.861,-3.842 13.244,-8.48 19.018,-13.818l-9.22,-19.036c4.335,-4.674 8.095,-9.849 11.201,-15.416l20.953,2.886c3.292,-7.141 5.731,-14.645 7.265,-22.357l-18.648,-9.981c0.759,-6.329 0.759,-12.727 0,-19.056l18.648,-9.981c-1.534,-7.712 -3.973,-15.216 -7.265,-22.357l-20.953,2.886c-3.106,-5.567 -6.866,-10.742 -11.201,-15.416l9.22,-19.036c-5.774,-5.338 -12.157,-9.976 -19.018,-13.818l-15.255,14.651c-5.785,-2.678 -11.869,-4.654 -18.123,-5.888l-3.73,-20.82ZM0,-33c18.213,0 33,14.787 33,33c0,18.213 -14.787,33 -33,33c-18.213,0 -33,-14.787 -33,-33c0,-18.213 14.787,-33 33,-33Z\\\" style=\\\"fill:currentColor;fill-rule:evenodd;\\\"/>\\n</svg>\\n\";\n},\"useData\":true});\n",
    "// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"fullscreen-symbol\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" preserveAspectRatio=\\\"xMidYMid meet\\\" viewBox=\\\"-21 -21 42 42\\\">\\n\t<path id=\\\"fullscreen-shadow\\\" d=\\\"M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7\\\" class=\\\"bg-color-stroke\\\" style=\\\"fill:none\\\" vector-effect=\\\"non-scaling-stroke\\\" transform=\\\"translate(2 2)\\\"/>\\n\t<path id=\\\"fullscreen-path\\\" d=\\\"M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7\\\" class=\\\"color-stroke\\\" style=\\\"fill:none\\\" vector-effect=\\\"non-scaling-stroke\\\" />\\n</svg>\\n\";\n},\"useData\":true});\n",
    "/** @type {module:backbone} */\nconst Events = require(\"backbone\").Events;\n\n\n// var defaultOptions = {\n// \ttick: 1,\n// \tonstart: null,\n// \tontick: null,\n// \tonpause: null,\n// \tonstop: null,\n// \tonend: null\n// }\nvar idSeed = 0;\n\nvar Timer = function(options) {\n\t// if (!(this instanceof Timer)) {\n\t// \treturn new Timer(options);\n\t// }\n\tthis._id = idSeed++;\n\t// this._options = {};\n\tthis._duration = 0;\n\tthis._status = \"initialized\";\n\tthis._start = 0;\n\t// this._measures = [];\n\n\t// for (var prop in defaultOptions) {\n\t// \tthis._options[prop] = defaultOptions[prop];\n\t// }\n\t// this.options(options);\n};\n\n_.extend(Timer.prototype, Events, {\n\n\tstart: function(duration) {\n\t\tif (!_.isNumber(duration) && !this._duration) {\n\t\t\treturn this;\n\t\t}\n\t\t// duration && (duration *= 1000)\n\t\tif (this._timeout && this._status === \"started\") {\n\t\t\treturn this;\n\t\t}\n\t\tvar evName = (this._status === \"stopped\") ? \"start\" : \"resume\";\n\t\tthis._duration = duration || this._duration;\n\t\tthis._timeout = window.setTimeout(end.bind(this), this._duration);\n\t\t// if (typeof this._options.ontick === \"function\") {\n\t\t// \tthis._interval = setInterval(function() {\n\t\t// \t\tthis.trigger(\"tick\", this.getDuration())\n\t\t// \t}.bind(this), +this._options.tick * 1000)\n\t\t// }\n\t\tthis._start = _now();\n\t\tthis._status = \"started\";\n\t\tthis.trigger(evName, this.getDuration());\n\t\treturn this;\n\t},\n\n\tpause: function() {\n\t\tif (this._status !== \"started\") {\n\t\t\treturn this;\n\t\t}\n\t\tthis._duration -= (_now() - this._start);\n\t\tclear.call(this, false);\n\t\tthis._status = \"paused\";\n\t\tthis.trigger(\"pause\", this.getDuration());\n\t\treturn this;\n\t},\n\n\tstop: function() {\n\t\tif (!/started|paused/.test(this._status)) {\n\t\t\treturn this;\n\t\t}\n\t\tclear.call(this, true);\n\t\tthis._status = \"stopped\";\n\t\tthis.trigger(\"stop\");\n\t\treturn this;\n\t},\n\n\tgetDuration: function() {\n\t\tif (this._status === \"started\") {\n\t\t\treturn this._duration - (_now() - this._start);\n\t\t}\n\t\tif (this._status === \"paused\") {\n\t\t\treturn this._duration;\n\t\t}\n\t\treturn 0;\n\t},\n\n\tgetStatus: function() {\n\t\treturn this._status;\n\t},\n});\n\nvar _now = window.performance ?\n\twindow.performance.now.bind(window.performance) :\n\tDate.now.bind(Date);\n\nfunction end() {\n\tclear.call(this);\n\tthis._status = \"stopped\";\n\tthis.trigger(\"end\");\n}\n\nfunction clear(clearDuration) {\n\twindow.clearTimeout(this._timeout);\n\t// window.clearInterval(this._interval);\n\tif (clearDuration === true) {\n\t\tthis._duration = 0;\n\t}\n}\n\nObject.defineProperties(Timer.prototype, {\n\tduration: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.getDuration();\n\t\t}\n\t},\n\tstatus: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.getStatus();\n\t\t}\n\t}\n});\n\nObject.defineProperties(Timer, {\n\tSTOPPED: {\n\t\tenumerable: true,\n\t\tvalue: \"stopped\"\n\t},\n\tSTARTED: {\n\t\tenumerable: true,\n\t\tvalue: \"started\"\n\t},\n\tPAUSED: {\n\t\tenumerable: true,\n\t\tvalue: \"paused\"\n\t},\n});\n\nmodule.exports = Timer;\n",
    "/* -------------------------------\n/* Imports\n/* ------------------------------- */\n/** @type {module:utils/TransformItem} */\nconst TransformItem = require(\"./TransformItem\");\n\nvar idSeed = 0;\nvar cidSeed = 100;\nvar slice = Array.prototype.slice;\n\n/**\n * @constructor\n * @type {module:app/helper/TransformHelper}\n */\nfunction TransformHelper() {\n\tthis.id = idSeed++;\n\tthis._items = [];\n\tthis._itemsById = {};\n}\n\nTransformHelper.prototype = Object.create({\n\n\t/* -------------------------------\n\t/* Private\n\t/* ------------------------------- */\n\n\t_get: function(el) {\n\t\tif (this.has(el)) {\n\t\t\treturn this._itemsById[el.eid];\n\t\t} else {\n\t\t\treturn this._add(el);\n\t\t}\n\t},\n\n\t_add: function(el) {\n\t\tvar item, id;\n\t\t// id = el.eid || el.cid || el.id;\n\t\t// if (!id || (this._itemsById[id] && (this._itemsById[id].el !== el))) {\n\t\t// \tid = \"elt\" + cidSeed++;\n\t\t// }\n\t\t// if (!el.eid) {\n\t\t// \tid = el.eid || el.cid || (\"elt\" + cidSeed++);\n\t\t// }\n\t\tid = el.eid || el.cid || (\"elt\" + cidSeed++);\n\t\titem = new TransformItem(el, id);\n\t\tthis._itemsById[id] = item;\n\t\tthis._items.push(item);\n\t\treturn item;\n\t},\n\n\t_remove: function(el) {\n\t\tif (this.has(el)) {\n\t\t\tvar o = this._itemsById[el.eid];\n\t\t\tthis._items.splice(this._items.indexOf(o), 1);\n\t\t\to.destroy();\n\t\t\tdelete this._itemsById[el.eid];\n\t\t}\n\t},\n\n\t_invoke: function(funcName, args, startIndex) {\n\t\tvar i, ii, j, jj, el, o, rr;\n\t\tvar funcArgs = null;\n\t\tif (startIndex !== void 0) {\n\t\t\tfuncArgs = slice.call(args, 0, startIndex);\n\t\t} else {\n\t\t\tstartIndex = 0;\n\t\t}\n\t\tfor (i = startIndex, ii = args.length, rr = []; i < ii; ++i) {\n\t\t\tel = args[i];\n\t\t\t// iterate on NodeList, Arguments, Array...\n\t\t\tif (el.length) {\n\t\t\t\tfor (j = 0, jj = el.length; j < jj; ++j) {\n\t\t\t\t\to = this._get(el[j]);\n\t\t\t\t\trr.push(o[funcName].apply(o, funcArgs));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\to = this._get(el);\n\t\t\t\trr.push(o[funcName].apply(o, funcArgs));\n\t\t\t}\n\t\t}\n\t\treturn rr;\n\t},\n\n\t/* -------------------------------\n\t/* Public\n\t/* ------------------------------- */\n\n\thas: function(el) {\n\t\treturn el.eid && this._itemsById[el.eid] !== void 0;\n\t},\n\n\tgetItems: function() {\n\t\tvar i, j, el, ret = [];\n\t\tfor (i = 0; i < arguments.length; ++i) {\n\t\t\tel = arguments[i];\n\t\t\tif (el.length) {\n\t\t\t\tfor (j = 0; j < el.length; ++j) {\n\t\t\t\t\tret.push(this._get(el[j]));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tret.push(this._get(el));\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t},\n\n\tget: function(el) {\n\t\treturn this._get(el);\n\t},\n\n\tadd: function() {\n\t\tvar i, j, el;\n\t\tfor (i = 0; i < arguments.length; ++i) {\n\t\t\tel = arguments[i];\n\t\t\tif (el.length) {\n\t\t\t\tfor (j = 0; j < el.length; ++j) {\n\t\t\t\t\tthis._get(el[j]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._get(el);\n\t\t\t}\n\t\t}\n\t},\n\n\tremove: function() {\n\t\tvar i, j, el;\n\t\tfor (i = 0; i < arguments.length; ++i) {\n\t\t\tel = arguments[i];\n\t\t\tif (el.length) {\n\t\t\t\tfor (j = 0; j < el.length; ++j) {\n\t\t\t\t\tthis._remove(el[j]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._remove(el);\n\t\t\t}\n\t\t}\n\t},\n\n\t/* --------------------------------\n\t/* public\n\t/* -------------------------------- */\n\n\t/* public: single arg\n\t/* - - - - - - - - - - - - - - - - */\n\n\thasOffset: function(el) {\n\t\treturn this.has(el) ? this._itemsById[el.eid].hasOffset : (void 0);\n\t},\n\n\t/* public: capture\n\t/* - - - - - - - - - - - - - - - - */\n\n\tcapture: function() {\n\t\tthis._invoke(\"capture\", arguments);\n\t},\n\tcaptureAll: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].capture();\n\t\t}\n\t},\n\n\tclearCapture: function() {\n\t\tthis._invoke(\"clearCapture\", arguments);\n\t},\n\tclearAllCaptures: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].clearCapture();\n\t\t}\n\t},\n\n\t/* public: offset\n\t/* - - - - - - - - - - - - - - - - */\n\toffset: function(x, y) {\n\t\tthis._invoke(\"offset\", arguments, 2);\n\t},\n\toffsetAll: function(x, y) {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].offset(x, y);\n\t\t}\n\t},\n\n\tclearOffset: function() {\n\t\tthis._invoke(\"clearOffset\", arguments);\n\t},\n\tclearAllOffsets: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].clearOffset();\n\t\t}\n\t},\n\n\t/* public: transitions\n\t/* - - - - - - - - - - - - - - - - */\n\n\trunTransition: function(transition) {\n\t\tthis._invoke(\"runTransition\", arguments, 1);\n\t},\n\trunAllTransitions: function(transition) {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].runTransition(transition);\n\t\t}\n\t},\n\n\tclearTransition: function() {\n\t\tthis._invoke(\"clearTransition\", arguments);\n\t},\n\tclearAllTransitions: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].clearTransition();\n\t\t}\n\t},\n\n\tstopTransition: function() {\n\t\tthis._invoke(\"stopTransition\", arguments);\n\t},\n\tstopAllTransitions: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].stopTransition();\n\t\t}\n\t},\n\n\twhenTransitionEnds: function() {\n\t\tvar res = this._invoke(\"whenTransitionEnds\", arguments);\n\t\treturn res.length != 0 ?\n\t\t\tPromise.all(res) :\n\t\t\tPromise.resolve(null);\n\t},\n\twhenAllTransitionsEnd: function() {\n\t\treturn (this._items.length != 0) ? Promise.all(this._items.map(function(o) {\n\t\t\treturn o.whenTransitionEnds();\n\t\t})) : Promise.resolve(null);\n\t},\n\n\tpromise: function() {\n\t\treturn arguments.length == 0 ?\n\t\t\tthis.whenAllTransitionsEnd() :\n\t\t\tthis.whenTransitionEnds.call(this, arguments);\n\t},\n\n\t/* -------------------------------\n\t/* validation\n\t/* ------------------------------- */\n\n\tvalidate: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].validate();\n\t\t}\n\t},\n}, {\n\titems: {\n\t\tget: function() {\n\t\t\treturn this._items;\n\t\t}\n\t}\n});\n\nmodule.exports = TransformHelper;\n",
    "/* -------------------------------\n * Imports\n * ------------------------------- */\n/** @type {module:utils/prefixedProperty} */\nconst prefixedProperty = require(\"utils/prefixedProperty\");\n/** @type {module:utils/prefixedStyleName} */\nconst prefixedStyleName = require(\"utils/prefixedStyleName\");\n/** @type {module:utils/prefixedEvent} */\nconst prefixedEvent = require(\"utils/prefixedEvent\");\n/** @type {String} */\nvar transitionEnd = prefixedEvent(\"transitionend\");\n//var transitionEnd = require(\"utils/event/transitionEnd\");\n// /** @type {Function} */\n// var slice = Array.prototype.slice;\n\n// /** @type {module:utils/debug/traceElement} */\n// var traceElt = require(\"./debug/traceElement\");\n// var traceEltCache = {};\n// var log = function() {\n// \tvar logFn = \"log\";\n// \tvar args = slice.apply(arguments);\n// \tswitch(args[0]) {\n// \t\tcase \"error\":\n// \t\tcase \"warn\":\n// \t\tcase \"info\":\n// \t\t\tlogFn = args.shift();\n// \t\t\tbreak;\n// \t\tdefault:\n// \t\t\t// break;\n// \t\t\treturn;\n// \t}\n// \tvar el, txId;\n// \tif ((el = args[0]) && (txId = el.eid)) {\n// \t\targs[0] = traceEltCache[txId] || (traceEltCache[txId] = el);\n// \t}\n// \targs[0] = \"\\t\" + args[0];\n// \tconsole[logFn].apply(console, args);\n// };\n\n/* jshint -W079 */\n// var console = (function(target) {\n// \treturn Object.getOwnPropertyNames(target).reduce(function(proxy, prop) {\n// \t\tif ((typeof target[prop]) == \"function\") {\n// \t\t\tswitch (prop) {\n// \t\t\t\tcase \"error\":\n// \t\t\t\tcase \"warn\":\n// \t\t\t\tcase \"info\":\n// \t\t\t\t\tproxy[prop] = function () {\n// \t\t\t\t\t\tvar args = slice.apply(arguments);\n// \t\t\t\t\t\tif (typeof args[0] == \"string\") {\n// \t\t\t\t\t\t\targs[0] = prop + \"::\" + args[0];\n// \t\t\t\t\t\t}\n// \t\t\t\t\t\treturn target[prop].apply(target, args);\n// \t\t\t\t\t};\n// \t\t\t\t\tbreak;\n// \t\t\t\tcase \"log\":\n// \t\t\t\t\tproxy[prop] = function() {};\n// \t\t\t\t\tbreak;\n// \t\t\t\tdefault:\n// \t\t\t\t\tproxy[prop] = target[prop].bind(target);\n// \t\t\t\t\tbreak;\n// \t\t\t}\n// \t\t} else {\n// \t\t\tObject.defineProperty(proxy, prop, {\n// \t\t\t\tget: function() { return target[prop]; },\n// \t\t\t\tset: function(val) { target[prop] = val; }\n// \t\t\t});\n// \t\t}\n// \t\treturn proxy;\n// \t}, {});\n// })(window.console);\n/* jshint +W079 */\n\n/* -------------------------------\n/* Private static\n/* ------------------------------- */\n\nvar NO_TRANSITION_VALUE = \"none 0s step-start 0s\";\n// var NO_TRANSITION_VALUE = \"all 0.001s step-start 0.001s\";\n\nvar UNSET_TRANSITION = {\n\tname: \"unset\",\n\tclassName: \"tx-unset\",\n\tproperty: \"none\",\n\teasing: \"ease\",\n\tdelay: 0,\n\tduration: 0,\n\tcssText: \"unset\",\n};\n\n// var translateTemplate = _.template(\"translate(<%= _renderedX %>px, <%= _renderedY %>px)\";\n// var translate3dTemplate = _.template(\"translate3d(<%= _renderedX %>px, <%= _renderedY %>px, 0px)\";\n// var transitionTemplate = _.template(\"<%= property %> <% duration/1000 %>s <%= easing %> <% delay/1000 %>s\");\n\nvar translateTemplate = (function(fn) {\n\treturn function(o) {\n\t\treturn fn(o._renderedX, o._renderedY);\n\t};\n}(require(\"app/control/Globals\").TRANSLATE_TEMPLATE));\n\nvar transitionTemplate = function(o) {\n\treturn o.property + \" \" +\n\t\to.duration / 1000 + \"s \" +\n\t\to.easing + \" \" +\n\t\to.delay / 1000 + \"s\";\n};\n\nvar propDefaults = {\n\t\"opacity\": \"1\",\n\t\"visibility\": \"visible\",\n\t\"transform\": \"matrix(1, 0, 0, 1, 0, 0)\",\n\t\"transformStyle\": \"\",\n\t\"transition\": \"\",\n\t// \"willChange\": \"\",\n\t// \"transitionDuration\": \"0s\",\n\t// \"transitionDelay\": \"0s\",\n\t// \"transitionProperty\": \"none\",\n\t// \"transitionTimingFunction\": \"ease\"\n};\nvar propKeys = Object.keys(propDefaults);\nvar propNames = propKeys.reduce(function(obj, propName) {\n\tobj[propName] = prefixedProperty(propName);\n\treturn obj;\n}, {});\n\nvar styleNames = (function(camelToDashed) {\n\treturn propKeys\n\t\t.map(camelToDashed)\n\t\t.reduce(function(obj, propName) {\n\t\t\tobj[propName] = prefixedStyleName(propName);\n\t\t\treturn obj;\n\t\t}, {});\n})(require(\"utils/strings/camelToDashed\"));\n\nvar resolveAll = function(pp, result) {\n\tif (pp.length != 0) {\n\t\tpp.forEach(function(p, i, a) {\n\t\t\tp.resolve(result);\n\t\t\ta[i] = null;\n\t\t});\n\t\tpp.length = 0;\n\t}\n\treturn pp;\n};\n\nvar rejectAll = function(pp, reason) {\n\tif (pp.length != 0) {\n\t\tpp.forEach(function(p, i, a) {\n\t\t\tp.reject(reason);//\n\t\t\ta[i] = null;\n\t\t});\n\t\tpp.length = 0;//\n\t}\n\treturn pp;\n};\n\n/* -------------------------------\n * TransformItem\n * ------------------------------- */\n\n/**\n * @constructor\n */\nvar TransformItem = function(el, id) {\n\tthis.el = el;\n\tthis.id = id;\n\tthis.el.eid = id;\n\n\tthis._onTransitionEnd = this._onTransitionEnd.bind(this);\n\tthis.el.addEventListener(transitionEnd, this._onTransitionEnd, false);\n\n\tthis._captureInvalid = false;\n\tthis._capturedChanged = false;\n\tthis._capturedX = null;\n\tthis._capturedY = null;\n\tthis._currCapture = {};\n\tthis._lastCapture = {};\n\n\tthis._hasOffset = false;\n\tthis._offsetInvalid = false;\n\tthis._offsetX = null;\n\tthis._offsetY = null;\n\n\tthis._renderedX = null;\n\tthis._renderedY = null;\n\n\tthis._hasTransition = false;\n\tthis._transitionInvalid = false;\n\tthis._transitionRunning = false;\n\tthis._transition = _.extend({}, UNSET_TRANSITION); //{};\n\n\tthis._promises = [];\n\tthis._pendingPromises = [];\n}\n\nTransformItem.prototype = Object.create({\n\n\t/* -------------------------------\n\t/* Public\n\t/* ------------------------------- */\n\n\t/* destroy\n\t/* - - - - - - - - - - - - - - - - */\n\tdestroy: function() {\n\t\t// NOTE: style property may have been modified; clearOffset(element) should\n\t\t// be called explicitly if clean up is required.\n\t\tthis.el.removeEventListener(transitionEnd, this._onTransitionEnd, false);\n\t\tresolveAll(this._pendingPromises, this);\n\t\tresolveAll(this._promises, this);\n\t\t// delete this.el.eid;\n\t},\n\n\t/* capture\n\t/* - - - - - - - - - - - - - - - - */\n\tcapture: function(force) {\n\t\t// console.log(\"tx[%s]::capture\", this.id);\n\t\tif (force) {\n\t\t\tthis.clearCapture();\n\t\t}\n\t\tthis._validateCapture();\n\t\treturn this;\n\t},\n\n\tclearCapture: function() {\n\t\t// console.log(\"tx[%s]::clearCapture\", this.id);\n\t\t// this._hasOffset = false;\n\t\tthis._captureInvalid = true;\n\t\treturn this;\n\t},\n\n\t/* offset/clear\n\t/* - - - - - - - - - - - - - - - - */\n\toffset: function(x, y) {\n\t\t// console.log(\"tx[%s]::offset\", this.id);\n\t\tthis._hasOffset = true;\n\t\tthis._offsetInvalid = true;\n\t\tthis._offsetX = x || 0;\n\t\tthis._offsetY = y || 0;\n\t\t// if (this.immediate) this._validateOffset();\n\t\treturn this;\n\t},\n\n\tclearOffset: function() {\n\t\tif (this._hasOffset) {\n\t\t\t// console.log(\"tx[%s]::clearOffset\", this.id);\n\t\t\tthis._hasOffset = false;\n\t\t\tthis._offsetInvalid = true;\n\t\t\tthis._offsetX = null;\n\t\t\tthis._offsetY = null;\n\t\t\t// if (this.immediate) this._validateOffset();\n\t\t}\n\t\t// else {\n\t\t// \tconsole.log(\"tx[%s]::clearOffset no offset to clear\", this.id);\n\t\t// }\n\t\treturn this;\n\t},\n\n\t/* transitions\n\t/* - - - - - - - - - - - - - - - - */\n\trunTransition: function(transition) {\n\t\tif (!transition) { // || (transition.duration + transition.delay) == 0) {\n\t\t\treturn this.clearTransition();\n\t\t}\n\t\tvar lastValue = this._transitionValue;\n\t\tvar lastName = this._transition.name;\n\t\tthis._transition.property = styleNames[\"transform\"];\n\t\tthis._transition = _.extend(this._transition, transition);\n\t\tthis._transitionValue = transitionTemplate(this._transition);\n\n\t\tif (this._transitionInvalid) {\n\t\t\tconsole.warn(\"tx[%s]::runTransition set over (%s:'%s' => %s:'%s')\", this.id,\n\t\t\t\tlastName, lastValue, this._transition.name, this._transitionValue);\n\t\t}\n\n\t\tthis._hasTransition = true;\n\t\tthis._transitionInvalid = true;\n\t\t// if (this.immediate) this._validateTransition();\n\t\treturn this;\n\t},\n\n\tclearTransition: function() {\n\t\tthis._transition = _.extend(this._transition, UNSET_TRANSITION);\n\t\tthis._transitionValue = NO_TRANSITION_VALUE;\n\n\t\tthis._hasTransition = false;\n\t\tthis._transitionInvalid = true;\n\t\t// if (this.immediate) this._validateTransition();\n\t\treturn this;\n\t},\n\n\tstopTransition: function() {\n\t\t// this._transition.name = \"[none]\";\n\t\t// this._transition.property = \"none\";\n\t\tthis._transition = _.extend(this._transition, UNSET_TRANSITION);\n\t\tthis._transitionValue = NO_TRANSITION_VALUE;\n\n\t\tthis._hasTransition = false;\n\t\tthis._transitionInvalid = true;\n\t\t// if (this.immediate) this._validateTransition();\n\t\treturn this;\n\t},\n\n\twhenTransitionEnds: function() {\n\t\tvar d, p, pp;\n\t\tif (this._transitionInvalid || this._transitionRunning) {\n\t\t\td = {};\n\t\t\tp = new Promise(function(resolve, reject) {\n\t\t\t\td.resolve = resolve;\n\t\t\t\td.reject = reject;\n\t\t\t});\n\t\t\tpp = this._transitionInvalid ? this._pendingPromises : this._promises;\n\t\t\tpp.push(d);\n\t\t} else {\n\t\t\tp = Promise.resolve(this);\n\t\t}\n\t\treturn p;\n\t},\n\n\t/* validation\n\t/* - - - - - - - - - - - - - - - - */\n\tvalidate: function() {\n\t\t// this.el.removeEventListener(transitionEnd, this._onTransitionEnd, false);\n\t\tthis._ignoreEvent = true;\n\n\t\tif (this._captureInvalid) {\n\t\t\tvar lastX = (this._renderedX !== null ? this._renderedX : this._capturedX),\n\t\t\t\tlastY = (this._renderedY !== null ? this._renderedY : this._capturedY);\n\n\t\t\t// this._validateTransition();\n\t\t\tthis._validateCapture();\n\t\t\tthis._validateOffset();\n\n\t\t\tvar currX = (this._renderedX !== null ? this._renderedX : this._capturedX),\n\t\t\t\tcurrY = (this._renderedY !== null ? this._renderedY : this._capturedY);\n\n\t\t\tif (lastX === currX && lastY === currY) {\n\t\t\t\tthis._hasTransition && console.warn(\"tx[%s]::validate unchanged: last:[%i,%i] curr:[%i,%i]\", this.el.id || this.id, lastX, lastY, currX, currY);\n\t\t\t\t// console.info(\"tx[%s]::validate unchanged: last:[%f,%f] curr:[%f,%f] render:[%f,%f] captured[%f,%f]\", this.el.id || this.id, lastX, lastY, currX, currY, this._renderedX, this._renderedY, this._capturedX, this._capturedY);\n\t\t\t\tthis.clearTransition();\n\t\t\t\t// this._validateTransition();\n\t\t\t}\n\t\t\tthis._validateTransition();\n\t\t} else {\n\t\t\t// this._validateCapture();\n\t\t\tthis._validateTransition();\n\t\t\tthis._validateOffset();\n\t\t}\n\n\t\t// this.el.addEventListener(transitionEnd, this._onTransitionEnd, false);\n\t\tthis._ignoreEvent = false;\n\n\t\t// if (this._capturedChanged) {\n\t\t// \tconsole.error(\"tx[%s]::validate capture changed: [%f,%f]\", this.id, this._capturedX, this._capturedY);\n\t\t// }\n\t\tthis._capturedChanged = false;\n\t\treturn this;\n\t},\n\n\t/* -------------------------------\n\t/* Private\n\t/* ------------------------------- */\n\n\t_validateCapture: function() {\n\t\tif (!this._captureInvalid) {\n\t\t\treturn;\n\t\t}\n\t\t// var computed, capturedValues;\n\t\tvar transformValue = null;\n\n\t\tif (this._hasOffset && !this._offsetInvalid) {\n\t\t\t// this is an explicit call to capture() instead of a subcall from _validateOffset()\n\t\t\ttransformValue = this._getCSSProp(\"transform\");\n\t\t\tif (transformValue === \"\") {\n\t\t\t\tconsole.error(\"tx[%s]::_capture valid offset (%i,$i) but transformValue=\\\"\\\"\", this.id, this._offsetX, this._offsetY);\n\t\t\t}\n\t\t\tthis._removeCSSProp(\"transform\");\n\t\t}\n\n\t\t// NOTE: reusing object, all props will be overwritten\n\t\tthis._lastCapture = this._currCapture;\n\t\tthis._currCapture = this._getComputedCSSProps();\n\n\t\tif (this._currCapture.transform !== this._lastCapture.transform) {\n\t\t\tvar m, mm; //, ret = {};\n\t\t\tmm = this._currCapture.transform.match(/(matrix|matrix3d)\\(([^\\)]+)\\)/);\n\t\t\tif (mm) {\n\t\t\t\tm = mm[2].split(\",\");\n\t\t\t\tif (mm[1] === \"matrix\") {\n\t\t\t\t\tthis._capturedX = parseFloat(m[4]);\n\t\t\t\t\tthis._capturedY = parseFloat(m[5]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._capturedX = parseFloat(m[12]);\n\t\t\t\t\tthis._capturedY = parseFloat(m[13]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._capturedX = 0;\n\t\t\t\tthis._capturedY = 0;\n\t\t\t}\n\t\t\tthis._capturedChanged = true;\n\t\t}\n\t\tif (transformValue !== null) {\n\t\t\tconsole.log(\"tx[%s]::_capture reapplying '%s'\", this.id, transformValue);\n\t\t\tthis._setCSSProp(\"transform\", transformValue);\n\t\t}\n\t\tthis._captureInvalid = false;\n\t},\n\n\t_validateOffset: function() {\n\t\tif (this._offsetInvalid) {\n\t\t\t// this._validateCapture();\n\t\t\tthis._offsetInvalid = false;\n\t\t\tif (this._hasOffset) {\n\t\t\t\tvar tx = this._offsetX + this._capturedX;\n\t\t\t\tvar ty = this._offsetY + this._capturedY;\n\t\t\t\tif (tx !== this._renderedX || ty !== this._renderedY) {\n\t\t\t\t\tthis._renderedX = tx;\n\t\t\t\t\tthis._renderedY = ty;\n\t\t\t\t\tthis._setCSSProp(\"transform\", translateTemplate(this));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._renderedX = null;\n\t\t\t\tthis._renderedY = null;\n\t\t\t\tthis._removeCSSProp(\"transform\");\n\t\t\t}\n\t\t}\n\t},\n\n\t_validateTransition: function() {\n\t\tif (this._transitionInvalid) {\n\t\t\t// this._validateCapture();\n\t\t\tthis._transitionInvalid = false;\n\n\t\t\t// save promises made while invalid\n\t\t\tvar pp = this._promises;\n\t\t\t// prepare _promises and push in new ones\n\t\t\tthis._promises = this._pendingPromises;\n\t\t\t// whatever still here is to be rejected. reuse array\n\t\t\tthis._pendingPromises = resolveAll(pp, this);\n\n\t\t\t// Set running flag, if there's a transition to run\n\t\t\tthis._transitionRunning = this._hasTransition;\n\t\t\t// Set the css value (which will be empty string if there's no transition)\n\t\t\tthis._setCSSProp(\"transition\", this._transitionValue);\n\t\t\tif (DEBUG) {\n\t\t\t\tif (this._hasTransition) {\n\t\t\t\t\tthis.el.setAttribute(\"data-tx\", this._transition.name);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this._hasTransition) {\n\t\t\t\t// if there is no transition, resolve promises now\n\t\t\t\tresolveAll(this._promises, this);\n\t\t\t}\n\t\t}\n\t},\n\n\t_onTransitionEnd: function(ev) {\n\t\tif (this._ignoreEvent) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._transitionRunning && (this.el === ev.target) &&\n\t\t\t(this._transition.property == ev.propertyName)) {\n\t\t\tthis._hasTransition = false;\n\t\t\tthis._transitionRunning = false;\n\t\t\tthis._removeCSSProp(\"transition\");\n\t\t\tresolveAll(this._promises, this);\n\n\t\t\tif (DEBUG) {\n\t\t\t\tif (this.el.hasAttribute(\"data-tx\")) {\n\t\t\t\t\t// this.el.setAttribute(\"data-tx-last\", this.el.getAttribute(\"data-tx\"));\n\t\t\t\t\tthis.el.removeAttribute(\"data-tx\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* CSS\n\t/* ------------------------------- */\n\n\t_getCSSProp: function(prop) {\n\t\treturn this.el.style[propNames[prop]];\n\t\t// return this.el.style[prefixedProperty(prop)];\n\t\t// return this.el.style.getPropertyValue(styleNames[prop]);\n\t},\n\n\t_setCSSProp: function(prop, value) {\n\t\tif (prop === \"transition\" && value == NO_TRANSITION_VALUE) {\n\t\t\tvalue = \"\";\n\t\t}\n\t\tif (value === null || value === void 0 || value === \"\") {\n\t\t\tthis._removeCSSProp(prop);\n\t\t} else {\n\t\t\tthis.el.style[propNames[prop]] = value;\n\t\t\t// this.el.style.setProperty(styleNames[prop], value);\n\t\t}\n\t},\n\n\t_removeCSSProp: function(prop) {\n\t\tthis.el.style[propNames[prop]] = \"\";\n\t\t// this.el.style.removeProperty(styleNames[prop]);\n\t},\n\n\t_getComputedCSSProps: function() {\n\t\tvar values = {};\n\t\tvar computed = window.getComputedStyle(this.el);\n\t\tfor (var p in propNames) {\n\t\t\tvalues[p] = computed[propNames[p]];\n\t\t}\n\t\treturn values;\n\t},\n}, {\n\ttransition: {\n\t\tget: function() {\n\t\t\treturn this._transition;\n\t\t}\n\t},\n\thasTransition: {\n\t\tget: function() {\n\t\t\treturn this._hasTransition;\n\t\t}\n\t},\n\tcapturedChanged: {\n\t\tget: function() {\n\t\t\treturn this._capturedChanged;\n\t\t}\n\t},\n\tcapturedX: {\n\t\tget: function() {\n\t\t\treturn this._capturedX;\n\t\t}\n\t},\n\tcapturedY: {\n\t\tget: function() {\n\t\t\treturn this._capturedY;\n\t\t}\n\t},\n\n\thasOffset: {\n\t\tget: function() {\n\t\t\treturn this._hasOffset;\n\t\t}\n\t},\n\toffsetX: {\n\t\tget: function() {\n\t\t\treturn this._offsetX;\n\t\t}\n\t},\n\toffsetY: {\n\t\tget: function() {\n\t\t\treturn this._offsetY;\n\t\t}\n\t},\n});\n\nmodule.exports = TransformItem;\n",
    "module.exports = function(a1, a2, dest) {\n\treturn a1.reduce(function(res, o, i, a) {\n\t\tif (a2.indexOf(o) == -1) res.push(o);\n\t\treturn res;\n\t}, (dest !== void 0) ? dest : []);\n};\n",
    "var PI2 = Math.PI * 2;\n\nvar splice = Array.prototype.splice;\n// var concat = Array.prototype.concat;\n\n/*\n *\tUsing javascript to convert radians to degrees with positive and\n *\tnegative values [https://stackoverflow.com/questions/29588404/]\n *\t`(((r * (180/Math.PI)) % 360) + 360) % 360;`\n *\t`function mod(n, m) {\n *\t\treturn ((n % m) + m) % m;\n *\t}`\n */\nvar _mod = function(n, m) {\n\treturn ((n % m) + m) % m;\n};\n\nvar setStyle = function(ctx, s) {\n\tif (typeof s != \"object\") return;\n\tfor (var p in s) {\n\t\tswitch (typeof ctx[p]) {\n\t\t\tcase \"undefined\":\n\t\t\t\tbreak;\n\t\t\tcase \"function\":\n\t\t\t\tif (Array.isArray(s[p])) {\n\t\t\t\t\tctx[p].apply(ctx, s[p]);\n\t\t\t\t} else {\n\t\t\t\t\tctx[p].call(ctx, s[p]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tctx[p] = s[p];\n\t\t}\n\t}\n};\n\nvar _drawShape = function(fn, s, ctx) {\n\tctx.save();\n\tif (s) {\n\t\tsetStyle(ctx, s);\n\t}\n\tfn.apply(null, splice.call(arguments, 2));\n\tif ('strokeStyle' in s) { /* ctx.lineWidth > 0 */\n\t\tctx.stroke();\n\t}\n\tif ('fillStyle' in s) { /* ctx.fillStyle !== \"transparent\" */\n\t\tctx.fill();\n\t}\n\tctx.restore();\n};\n\nmodule.exports = {\n\tsetStyle: setStyle,\n\n\tvGuide: function(ctx, x) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(x, 0);\n\t\tctx.lineTo(x, ctx.canvas.height);\n\t},\n\tdrawVGuide: function(ctx, s, x) {\n\t\t_drawShape(this.vGuide, s, ctx, x);\n\t},\n\n\thGuide: function(ctx, y) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, y);\n\t\tctx.lineTo(ctx.canvas.width, y);\n\t},\n\tdrawHGuide: function(ctx, s, y) {\n\t\t_drawShape(this.hGuide, s, ctx, y);\n\t},\n\n\tcrosshair: function(ctx, x, y, r) {\n\t\tctx.save();\n\t\tctx.translate(x, y);\n\t\tctx.rotate(Math.PI / 4);\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, -r);\n\t\tctx.lineTo(0, r);\n\t\tctx.moveTo(-r, 0);\n\t\tctx.lineTo(r, 0);\n\t\tctx.restore();\n\t},\n\tdrawCrosshair: function(ctx, s, x, y, r) {\n\t\t_drawShape(this.crosshair, s, ctx, x, y, r);\n\t},\n\n\tcircle: function(ctx, x, y, r) {\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, r, 0, PI2);\n\t},\n\tdrawCircle: function(ctx, s, x, y, r) {\n\t\t_drawShape(this.circle, s, ctx, x, y, r);\n\t},\n\n\tsquare: function(ctx, x, y, r) {\n\t\tr = Math.floor(r / 2) * 2;\n\t\tctx.beginPath();\n\t\tctx.rect(x - r, y - r, r * 2, r * 2);\n\t},\n\tdrawSquare: function(ctx, s, x, y, r) {\n\t\t_drawShape(this.square, s, ctx, x, y, r);\n\t},\n\n\tarrowhead: function(ctx, x, y, r, t) {\n\t\tctx.save();\n\t\tctx.translate(x, y);\n\t\tctx.rotate(_mod(t, PI2));\n\t\tctx.translate(r * 0.5, 0);\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, 0);\n\t\t// ctx.lineTo(-r, r * Math.SQRT1_2);\n\t\t// ctx.lineTo(-r, -r * Math.SQRT1_2);\n\t\tctx.lineTo(-r * Math.SQRT2, r * Math.SQRT1_2);\n\t\tctx.arcTo(0, 0, -r * Math.SQRT2, -r * Math.SQRT1_2, r);\n\t\t// ctx.quadraticCurveTo(0, 0, -r * Math.SQRT2, -r * Math.SQRT1_2);\n\t\tctx.lineTo(0, 0);\n\t\tctx.closePath();\n\t\tctx.restore();\n\t},\n\tdrawArrowhead: function(ctx, s, x, y, r, t) {\n\t\t_drawShape(this.arrowhead, s, ctx, x, y, r, t);\n\t},\n\n\tarrowhead2: function(ctx, x, y, r, t) {\n\t\tctx.save();\n\t\tctx.translate(x, y);\n\t\tctx.rotate(_mod(t, PI2));\n\t\tctx.beginPath();\n\t\tctx.moveTo(-r, r * Math.SQRT1_2);\n\t\tctx.lineTo(0, 0);\n\t\tctx.lineTo(-r, -r * Math.SQRT1_2);\n\t\tctx.restore();\n\t},\n\tdrawArrowhead2: function(ctx, s, x, y, r, t) {\n\t\t_drawShape(this.arrowhead, s, ctx, x, y, r, t);\n\t},\n\n\trect: function(ctx, a1, a2, a3, a4) {\n\t\tif (typeof a1 === \"object\") {\n\t\t\ta4 = a1.height;\n\t\t\ta3 = a1.width;\n\t\t\ta2 = a1.top;\n\t\t\ta1 = a1.left;\n\t\t}\n\t\tctx.beginPath();\n\t\tctx.rect(a1, a2, a3, a4);\n\t},\n\tdrawRect: function(ctx, s, a1, a2, a3, a4) {\n\t\t_drawShape(this.rect, s, ctx, a1, a2, a3, a4);\n\t},\n\n\troundRect: function(ctx, x, y, w, h, r) {\n\t\tif (w < 2 * r) r = w / 2;\n\t\tif (h < 2 * r) r = h / 2;\n\t\tctx.beginPath();\n\t\tctx.moveTo(x + r, y);\n\t\tctx.arcTo(x + w, y, x + w, y + h, r);\n\t\tctx.arcTo(x + w, y + h, x, y + h, r);\n\t\tctx.arcTo(x, y + h, x, y, r);\n\t\tctx.arcTo(x, y, x + w, y, r);\n\t\tctx.closePath();\n\t},\n\tdrawRoundRect: function(ctx, s, x, y, w, h, r) {\n\t\t_drawShape(this.roundRect, s, ctx, x, y, h, r);\n\t},\n\n\tquadRoundRect: function(ctx, x, y, w, h, r) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(x, y + r);\n\t\tctx.quadraticCurveTo(x, y, x + r, y);\n\t\tctx.lineTo(x + w - r, y);\n\t\tctx.quadraticCurveTo(x + w, y, x + w, y + r);\n\t\tctx.lineTo(x + w, y + h - r);\n\t\tctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n\t\tctx.lineTo(x + r, y + h);\n\t\tctx.quadraticCurveTo(x, y + h, x, y + h - r);\n\t\tctx.closePath();\n\t},\n\tdrawQuadRoundRect: function(ctx, s, x, y, w, h, r) {\n\t\t_drawShape(this.quadRoundRect, s, ctx, x, y, h, r);\n\t},\n};\n",
    "/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:  0.5\nAuthor: Mario Klingemann\nContact:  mario@quasimondo.com\nWebsite: http://www.quasimondo.com/StackBlurForCanvas\nTwitter: @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr: \nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nmodule.exports = function() {\n\tthis.r = 0;\n\tthis.g = 0;\n\tthis.b = 0;\n\tthis.a = 0;\n\tthis.next = null;\n};\n",
    "module.exports = function(imageData, adj) {\n\tvar pixels = imageData.data;\n\tvar r, g, b, s;\n\tvar i, ii;\n\n\tif (arguments.length === 1) {\n\t\tfor (i = 0, ii = pixels.length; i < ii; i += 4) {\n\t\t\tpixels[i] = (pixels[i] * 299 + pixels[i + 1] * 587 + pixels[i + 2] * 144) / 1000;\n\t\t}\n\t} else\n\tif (arguments.length === 2) {\n\t\tif (0 >= adj > 1) {\n\t\t\tconsole.warn(\"argument out of range (1-0)\", adj);\n\t\t\treturn imageData;\n\t\t}\n\t\tfor (i = 0, ii = pixels.length; i < ii; i += 4) {\n\t\t\tr = pixels[i];\n\t\t\tg = pixels[i + 1];\n\t\t\tb = pixels[i + 2];\n\t\t\t// s = ((r * 299 + g * 587 + b * 144) / 1000) * (1 - adj);\n\t\t\t// pixels[i] = r * adj + s;\n\t\t\t// pixels[i + 1] = g * adj + s;\n\t\t\t// pixels[i + 2] = b * adj + s;\n\t\t\ts = Math.max(r, g, b);\n\t\t\tif (s === 0) {\n\t\t\t\tpixels[i] = Math.round(255 * adj);\n\t\t\t\tpixels[i + 1] = Math.round(255 * adj);\n\t\t\t\tpixels[i + 2] = Math.round(255 * adj);\n\t\t\t} else {\n\t\t\t\ts = 255 * adj / s;\n\t\t\t\tpixels[i] = Math.round(r * s);\n\t\t\t\tpixels[i + 1] = Math.round(g * s);\n\t\t\t\tpixels[i + 2] = Math.round(b * s);\n\t\t\t}\n\t\t}\n\t}\n\treturn imageData;\n};\n\n// function saturation(r,g,b, s) {\n//     var min = rgb.indexOf(Math.min.apply(null, rgb)), // index of min\n//         max = rgb.indexOf(Math.max.apply(null, rgb)), // index of max\n//         mid = [0, 1, 2].filter(function (i) {return i !== min && i !== max;})[0],\n//         a = rgb[max] - rgb[min],\n//         b = rgb[mid] - rgb[min],\n//         x = rgb[max],\n//         arr = [x, x, x];\n//     if (min === max) {\n//         min = 2; // both max = min = 0, => mid = 1, so set min = 2\n//         a = 1;   // also means a = b = 0, don't want division by 0 in `b / a`\n//     }\n//\n//     arr[max] = x;\n//     arr[min] = Math.round(x * (1 - s));\n//     arr[mid] = Math.round(x * ((1 - s) + s * b / a));\n//\n//     return arr;\n// }\n\n\n// function nvalue(rgb, v) {\n//     var x = Math.max.apply(null, rgb);\n//     if (x === 0)\n//         return [\n//             Math.round(255 * v),\n//             Math.round(255 * v),\n//             Math.round(255 * v)\n//         ];\n//     x = 255 * v / x;\n//     return [\n//         Math.round(rgb[0] * x),\n//         Math.round(rgb[1] * x),\n//         Math.round(rgb[2] * x)\n//     ];\n// }\n",
    "module.exports = function(imageData, opts) {\n\tvar pixels = imageData.data;\n\tvar pixelsNum = pixels.length;\n\tvar rgbAvg = [0, 0, 0];\n\tvar i;\n\n\tfor (i = 0; i < pixelsNum; i += 4) {\n\t\trgbAvg[0] += pixels[i];\n\t\trgbAvg[1] += pixels[i + 1];\n\t\trgbAvg[2] += pixels[i + 2];\n\t}\n\tfor (i = 0; i < 3; i++) {\n\t\trgbAvg[i] = (rgbAvg[i] / (pixelsNum / 4)) | 0;\n\t}\n\treturn rgbAvg;\n};\n",
    "/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:  0.5\nAuthor: Mario Klingemann\nContact:  mario@quasimondo.com\nWebsite: http://www.quasimondo.com/StackBlurForCanvas\nTwitter: @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr: \nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nmodule.exports = [\n\t\t512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512,\n\t\t454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512,\n\t\t482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456,\n\t\t437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512,\n\t\t497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328,\n\t\t320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456,\n\t\t446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335,\n\t\t329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512,\n\t\t505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405,\n\t\t399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328,\n\t\t324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271,\n\t\t268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456,\n\t\t451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388,\n\t\t385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335,\n\t\t332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292,\n\t\t289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\n",
    "module.exports = function(pixels, adjustment) {\n\tvar d = pixels.data;\n\tfor (var i = 0; i < d.length; i += 4) {\n\t\td[i] *= adjustment;\n\t\td[i + 1] *= adjustment;\n\t\td[i + 2] *= adjustment;\n\t}\n\treturn pixels;\n};\n",
    "/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:  0.5\nAuthor: Mario Klingemann\nContact:  mario@quasimondo.com\nWebsite: http://www.quasimondo.com/StackBlurForCanvas\nTwitter: @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr: \nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nmodule.exports = [\n\t\t9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17,\n\t\t17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19,\n\t\t19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\n\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n",
    "/* jshint ignore:start */\n/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:  0.5\nAuthor: Mario Klingemann\nContact:  mario@quasimondo.com\nWebsite: http://www.quasimondo.com/StackBlurForCanvas\nTwitter: @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nconst mul_table = require(\"./mul_table\");\nconst shg_table = require(\"./shg_table\");\nconst BlurStack = require(\"./BlurStack\");\n\nmodule.exports = function(imageData, opts) {\n\tif ((typeof opts === \"object\") && opts.hasOwnProperty(\"radius\")) {\n\t\topts = opts.radius;\n\t}\n\tif ((typeof opts !== \"number\") || isNaN(opts) || (1 > opts)) {\n\t\t// no valid argument value do nothing\n\t\treturn imageData;\n\t}\n\tvar radius = opts | 0;\n\tvar pixels = imageData.data,\n\t\twidth = imageData.width,\n\t\theight = imageData.height;\n\n\tvar x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum,\n\t\tr_out_sum, g_out_sum, b_out_sum,\n\t\tr_in_sum, g_in_sum, b_in_sum,\n\t\tpr, pg, pb, rbs;\n\n\tvar div = radius + radius + 1;\n\tvar w4 = width << 2;\n\tvar widthMinus1 = width - 1;\n\tvar heightMinus1 = height - 1;\n\tvar radiusPlus1 = radius + 1;\n\tvar sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n\n\tvar stackStart = new BlurStack();\n\tvar stack = stackStart;\n\tfor (i = 1; i < div; i++) {\n\t\tstack = stack.next = new BlurStack();\n\t\tif (i == radiusPlus1) var stackEnd = stack;\n\t}\n\tstack.next = stackStart;\n\tvar stackIn = null;\n\tvar stackOut = null;\n\n\tyw = yi = 0;\n\n\tvar mul_sum = mul_table[radius];\n\tvar shg_sum = shg_table[radius];\n\n\tfor (y = 0; y < height; y++) {\n\t\tr_in_sum = g_in_sum = b_in_sum = r_sum = g_sum = b_sum = 0;\n\n\t\tr_out_sum = radiusPlus1 * (pr = pixels[yi]);\n\t\tg_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n\t\tb_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\n\t\tstack = stackStart;\n\n\t\tfor (i = 0; i < radiusPlus1; i++) {\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\tfor (i = 1; i < radiusPlus1; i++) {\n\t\t\tp = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n\t\t\tr_sum += (stack.r = (pr = pixels[p])) * (rbs = radiusPlus1 - i);\n\t\t\tg_sum += (stack.g = (pg = pixels[p + 1])) * rbs;\n\t\t\tb_sum += (stack.b = (pb = pixels[p + 2])) * rbs;\n\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor (x = 0; x < width; x++) {\n\t\t\tpixels[yi] = (r_sum * mul_sum) >> shg_sum;\n\t\t\tpixels[yi + 1] = (g_sum * mul_sum) >> shg_sum;\n\t\t\tpixels[yi + 2] = (b_sum * mul_sum) >> shg_sum;\n\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\n\t\t\tp = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n\n\t\t\tr_in_sum += (stackIn.r = pixels[p]);\n\t\t\tg_in_sum += (stackIn.g = pixels[p + 1]);\n\t\t\tb_in_sum += (stackIn.b = pixels[p + 2]);\n\n\t\t\tr_sum += r_in_sum;\n\t\t\tg_sum += g_in_sum;\n\t\t\tb_sum += b_in_sum;\n\n\t\t\tstackIn = stackIn.next;\n\n\t\t\tr_out_sum += (pr = stackOut.r);\n\t\t\tg_out_sum += (pg = stackOut.g);\n\t\t\tb_out_sum += (pb = stackOut.b);\n\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += 4;\n\t\t}\n\t\tyw += width;\n\t}\n\n\tfor (x = 0; x < width; x++) {\n\t\tg_in_sum = b_in_sum = r_in_sum = g_sum = b_sum = r_sum = 0;\n\n\t\tyi = x << 2;\n\t\tr_out_sum = radiusPlus1 * (pr = pixels[yi]);\n\t\tg_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n\t\tb_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\n\t\tstack = stackStart;\n\n\t\tfor (i = 0; i < radiusPlus1; i++) {\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\typ = width;\n\n\t\tfor (i = 1; i <= radius; i++) {\n\t\t\tyi = (yp + x) << 2;\n\n\t\t\tr_sum += (stack.r = (pr = pixels[yi])) * (rbs = radiusPlus1 - i);\n\t\t\tg_sum += (stack.g = (pg = pixels[yi + 1])) * rbs;\n\t\t\tb_sum += (stack.b = (pb = pixels[yi + 2])) * rbs;\n\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\n\t\t\tstack = stack.next;\n\n\t\t\tif (i < heightMinus1) {\n\t\t\t\typ += width;\n\t\t\t}\n\t\t}\n\n\t\tyi = x;\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor (y = 0; y < height; y++) {\n\t\t\tp = yi << 2;\n\t\t\tpixels[p] = (r_sum * mul_sum) >> shg_sum;\n\t\t\tpixels[p + 1] = (g_sum * mul_sum) >> shg_sum;\n\t\t\tpixels[p + 2] = (b_sum * mul_sum) >> shg_sum;\n\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\n\t\t\tp = (x + (((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width)) << 2;\n\n\t\t\tr_sum += (r_in_sum += (stackIn.r = pixels[p]));\n\t\t\tg_sum += (g_in_sum += (stackIn.g = pixels[p + 1]));\n\t\t\tb_sum += (b_in_sum += (stackIn.b = pixels[p + 2]));\n\n\t\t\tstackIn = stackIn.next;\n\n\t\t\tr_out_sum += (pr = stackOut.r);\n\t\t\tg_out_sum += (pg = stackOut.g);\n\t\t\tb_out_sum += (pb = stackOut.b);\n\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += width;\n\t\t}\n\t}\n\treturn imageData;\n};\n\n/* jshint ignore:end */\n",
    "/**\n * @module utils/canvas/calcArcHConnector\n */\n\nmodule.exports = function(x1, y1, r1, x2, y2, r2, ro) {\n\tvar qx = x2 > x1 ? 1 : -1;\n\tvar qy = y2 > y1 ? 1 : -1;\n\tvar dy = Math.abs(y2 - y1);\n\tvar dx = Math.abs(x2 - x1);\n\tvar rr = r1 + r2;\n\tvar tx1, tx2, c, tx, ty;\n\n\tif (dy < 1) {\n\t\t// points are aligned horizontally, no arcs needed\n\t\ttx1 = 0;\n\t\ttx2 = dx\n\t\t// return [x1, x2];\n\t}\n\n\tif (dy >= rr && dx >= rr) {\n\t\t// arcs fit horizontally:\n\t\t// second circle center is r1+r2, tangent intersect at x=r1\n\t\tc = rr;\n\t\ttx1 = r1;\n\t\ttx2 = r1;\n\t} else {\n\t\t// arcs overlap horizontally:\n\t\t// find second circle center\n\t\tc = Math.sqrt(dy * r2 * 2 + dy * r1 * 2 - dy * dy);\n\n\t\t// circles tangent point\n\t\ttx = (c * r1) / rr;\n\t\tty = (dy * r1) / rr;\n\n\t\tif (r1 < ty || c > dx) {\n\t\t\treturn;\n\t\t}\n\n\t\t// tangent perpendicular slope\n\t\tvar slope = (rr - dy) / c;\n\t\t// tangent intersections\n\t\ttx1 = tx - (ty * slope);\n\t\ttx2 = (dy * slope) + tx1;\n\n\t\t/*\n\t\t// circle centers\n\t\tvar ccx1, ccy1, ccx2, ccy2;\n\t\tccx1 = 0;\n\t\tccy1 = r1;\n\t\tccx2 = c;\n\t\tccy2 = dy - r2;\n\t\t// tangent perpendicular slope\n\t\tvar slope = (ccy1 - ccy2) / (ccx2 - ccx1);\n\t\tvar xSec = tx - (ty * slope);\n\t\t// tangent intersections\n\t\ttx1 = xSec;\n\t\ttx2 = (dy * slope) + xSec;\n\t\t*/\n\t}\n\n\t// offset arcTo's in x-axis\n\tif (ro > 0) {\n\t\tif (ro > 1) {\n\t\t\tro = Math.min(dx - rr, ro);\n\t\t} else {\n\t\t\tro *= dx - rr;\n\t\t}\n\t\ttx1 += ro;\n\t\ttx2 += ro;\n\t}\n\n\treturn [tx1 * qx + x1, tx2 * qx + x1, tx1, tx2];\n};\n\n/*\nvar drawArcConnector = function(ctx, x1, y1, x2, y2, r) {\n\tvar dx, dy, hx, hy, gx, gy;\n\n\thx = 0;\n\thy = 0;\n\tgx = (x1 + x2) / 2;\n\tgy = (y1 + y2) / 2;\n\tdx = Math.abs(x1 - gx);\n\tdy = Math.abs(y1 - gy);\n\n\tif (dx < r && dy < r) {\n\t\tr = Math.min(dx * Math.SQRT1_2, dy * Math.SQRT1_2);\n\t} else {\n\t\tif (dx < r) {\n\t\t\thy = Math.acos(dx / r) * r * 0.5;\n\t\t\tif (y1 > y2) hy *= -1;\n\t\t}\n\t\tif (dy < r) {\n\t\t\thx = Math.acos(dy / r) * r * 0.5;\n\t\t\tif (x1 > x2) hx *= -1;\n\t\t}\n\t}\n\tctx.arcTo(gx - hx, y1, gx + hx, y2, r);\n\tctx.arcTo(gx + hx, y2, x2, y2, r);\n};\n\nvar drawArcConnector2 = function(ctx, x1, y1, x2, y2, r) {\n\tvar dx, dy, hx, hy, cx1, cx2;\n\n\thx = 0;\n\thy = 0;\n\tdx = Math.abs(x2 - x1) / 2;\n\tdy = Math.abs(y1 - y2) / 2;\n\n\tif (dx < r && dy < r) {\n\t\tr = Math.min(dx * Math.SQRT1_2, dy * Math.SQRT1_2);\n\t} else {\n\t\tif (dx < r) {\n\t\t\thy = Math.acos(dx / r) * r;\n\t\t}\n\t\tif (dy < r) {\n\t\t\thx = Math.acos(dy / r) * r;\n\t\t}\n\t}\n\tcx1 = x1 + dx;\n\tcx2 = x2 - (dx - hx / 2);\n\tctx.arcTo(cx1, y1, cx2, y2, r);\n\tctx.arcTo(cx2, y2, x2, y2, r);\n};\n\nvar drawArcConnector1 = function(ctx, x1, y1, x2, y2, r) {\n\tvar dx, dy, cx;\n\n\tdx = Math.abs(x2 - x1) / 2;\n\tdy = Math.abs(y1 - y2) / 2;\n\tr = Math.min(r, dy * Math.SQRT1_2);\n\tif (x1 < x2) {\n\t\tcx = x1 + dx + r;\n\t} else {\n\t\tcx = x2 - dx - r;\n\t}\n\t// cx = (x2 + x1) / 2;\n\t// cx += x1 < x2 ? r : -r;\n\n\tctx.arcTo(cx, y1, cx, y2, r);\n\tctx.arcTo(cx, y2, x2, y2, r);\n};\n*/\n",
    "/* global HTMLElement, CSSStyleDeclaration */\n\n// var parseSize = require(\"./parseSize\");\n\nvar CSS_BOX_PROPS = [\n\t\"boxSizing\", \"position\", \"objectFit\"\n];\nvar CSS_EDGE_PROPS = [\n\t\"marginTop\", \"marginBottom\", \"marginLeft\", \"marginRight\",\n\t\"borderTopWidth\", \"borderBottomWidth\", \"borderLeftWidth\", \"borderRightWidth\",\n\t\"paddingTop\", \"paddingBottom\", \"paddingLeft\", \"paddingRight\",\n];\nvar CSS_POS_PROPS = [\"top\", \"bottom\", \"left\", \"right\"];\nvar CSS_SIZE_PROPS = [\"width\", \"height\", \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"];\nvar CSS_ALL_PROPS = CSS_EDGE_PROPS.concat(CSS_SIZE_PROPS, CSS_POS_PROPS);\n\n// var COMPUTED_PROPS = [\n// \t\"clientLeft\", \"clientTop\", \"clientWidth\", \"clientHeight\",\n// \t\"offsetLeft\", \"offsetTop\", \"offsetWidth\", \"offsetHeight\"\n// ];\n// var o = _.pick(element, function(val) {\n// \treturn /^(offset|client)(Left|Top|Width|Height)/.test(val);\n// });\n\nvar cssDimensionRE = /^(-?[\\d\\.]+)(px|em|rem)$/;\n// var cssDimRe = /^([-\\.0-9]+)([rem]+)$/;\n\nmodule.exports = function(s, m, includeSizePos) {\n\tif (s instanceof HTMLElement) {\n\t\ts = getComputedStyle(s);\n\t}\n\tif (DEBUG) {\n\t\tif (!(s instanceof CSSStyleDeclaration)) {\n\t\t\tthrow new Error(\"Not a CSSStyleDeclaration nor HTMLElement\");\n\t\t}\n\t}\n\tvar v, p, i, ii, emPx, remPx;\n\tm || (m = {});\n\n\temPx = m.fontSize = parseFloat(s.fontSize);\n\n\tfor (i = 0, ii = CSS_BOX_PROPS.length; i < ii; i++) {\n\t\tp = CSS_BOX_PROPS[i];\n\t\tif (p in s) {\n\t\t\tm[p] = s[p];\n\t\t}\n\t}\n\tvar cssProps = includeSizePos ? CSS_EDGE_PROPS : CSS_ALL_PROPS;\n\tfor (i = 0, ii = cssProps.length; i < ii; i++) {\n\t\tp = cssProps[i];\n\t\tm[\"_\" + p] = s[p];\n\t\tif (s[p] && (v = cssDimensionRE.exec(s[p]))) {\n\t\t\tif (v[2] === \"px\") {\n\t\t\t\tm[p] = parseFloat(v[1]);\n\t\t\t} else if (v[2] === \"em\") {\n\t\t\t\tm[p] = parseFloat(v[1]) * emPx;\n\t\t\t} else if (v[2] === \"rem\") {\n\t\t\t\tremPx || (remPx = parseFloat(getComputedStyle(document.documentElement).fontSize));\n\t\t\t\tm[p] = parseFloat(v[1]) * remPx;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Ignoring value\", p, v[1], v[2]);\n\t\t\t\tm[p] = null;\n\t\t\t}\n\t\t} // else {\n\t\t//\tconsole.warn(\"Ignoring unitless value\", p, v);\n\t\t//}\n\t}\n\treturn m;\n};\n",
    "/* easeInQuad */\nmodule.exports = function(x, t, b, c, d) {\n\treturn c * (t /= d) * t + b;\n};\n",
    "/* easeOutQuad */\nmodule.exports = function(t, b, c, d) {\n\treturn -c * (t /= d) * (t - 2) + b;\n};\n",
    "/**\n * @param {number} i current iteration\n * @param {number} s start value\n * @param {number} d change in value\n * @param {number} t total iterations\n * @return {number}\n */\nvar linear = function(i, s, d, t) {\n\treturn d * i / t + s;\n};\n\nmodule.exports = linear;\n",
    "/* https://html.spec.whatwg.org/multipage/media.html#event-media-canplay\n */\nmodule.exports = [\n\t// networkState\n\t\"loadstart\",\n\t\"progress\",\n\t\"suspend\",\n\t\"abort\",\n\t\"error\",\n\t\"emptied\",\n\t\"stalled\",\n\t// readyState\n\t\"loadedmetadata\",\n\t\"loadeddata\",\n\t\"canplay\",\n\t\"canplaythrough\",\n\t\"playing\",\n\t\"waiting\",\n\t//\n\t\"seeking\", // seeking changed to true\n\t\"seeked\", // seeking changed to false\n\t\"ended\", // ended is true\n\t//\n\t\"durationchange\", // duration updated\n\t\"timeupdate\", // currentTime updated\n\t\"play\", // paused is false\n\t\"pause\", // paused is false\n\t\"paused\", // ??\n\t\"ratechange\",\n\t//\n\t\"resize\",\n\t\"volumechange\",\n];\n",
    "/**\n * @module app/view/component/GraphView\n */module.exports = function(rect, dx, dy) {\n\tif (arguments.length == 2) {\n\t\tdy = dx;\n\t}\n\tvar r = {\n\t\twidth: rect.width + dx * 2,\n\t\theight: rect.height + dy * 2\n\t};\n\tif (r.width >= 0) {\n\t\tr.left = rect.left - dx;\n\t\tr.right = r.left + r.width;\n\t\tr.x = r.left;\n\t} else {\n\t\tr.right = rect.right + dx;\n\t\tr.left = rect.right - r.width;\n\t\tr.y = r.right;\n\t}\n\tif (r.height >= 0) {\n\t\tr.top = rect.top - dy;\n\t\tr.bottom = r.top + r.height;\n\t\tr.y = r.top;\n\t} else {\n\t\tr.bottom = rect.bottom + dy;\n\t\tr.top = rect.bottom - r.height;\n\t\tr.y = r.bottom;\n\t}\n\n\treturn r;\n};\n",
    "/** @type {Array} lowercase prefixes */\nvar lcPrefixes = [\"\"].concat(require(\"./prefixes\"));\n\n/** @type {Array} capitalized prefixes */\nvar ucPrefixes = lcPrefixes.map(function(s) {\n\treturn (s === \"\") ? s : s.charAt(0).toUpperCase() + s.substr(1);\n});\n\n/** @type {Object} specific event solvers */\nvar _solvers = {};\n\n/** @type {Object} cached values */\nvar _cache = {};\n\n/**\n * @param {String} name Unprefixed event name\n * @param {?Object} obj Prefix test target\n * @param {?String} testProp Proxy property to test prefixes\n * @return {String|null}\n */\nvar _prefixedEvent = function(name, obj, testProp) {\n\tvar prefixes = /^[A-Z]/.test(name) ? ucPrefixes : lcPrefixes;\n\tobj || (obj = document);\n\tfor (var i = 0; i < prefixes.length; i++) {\n\t\tif (testProp) {\n\t\t\tif ((prefixes[i] + testProp) in obj) {\n\t\t\t\treturn prefixes[i] + name;\n\t\t\t}\n\t\t}\n\t\tif ((\"on\" + prefixes[i] + name) in obj) {\n\t\t\treturn prefixes[i] + name;\n\t\t}\n\t}\n\treturn null;\n};\n\n// transitionend\n_solvers[\"transitionend\"] = function() {\n\tvar prop, style = document.body.style,\n\t\tmap = {\n\t\t\t\"transition\": \"transitionend\",\n\t\t\t\"WebkitTransition\": \"webkitTransitionEnd\",\n\t\t\t\"MozTransition\": \"transitionend\",\n\t\t\t// \"msTransition\" : \"MSTransitionEnd\",\n\t\t\t\"OTransition\": \"oTransitionEnd\"\n\t\t};\n\tfor (prop in map) {\n\t\tif (prop in style) {\n\t\t\treturn map[prop];\n\t\t}\n\t}\n\treturn null;\n};\n\n/**\n * get the prefixed property\n * @param {String} property name\n * @param {Object} look-up object\n * @returns {String|null} prefixed\n */\nmodule.exports = function(evName) {\n\tif (!_cache.hasOwnProperty(evName)) {\n\t\t_cache[evName] = _solvers.hasOwnProperty(evName) ? _solvers[evName]() : _prefixedEvent.apply(null, arguments);\n\t\tif (_cache[evName] === null) {\n\t\t\tconsole.warn(\"Event '%s' not found\", evName);\n\t\t} else {\n\t\t\tconsole.log(\"Event '%s' found as '%s'\", evName, _cache[evName]);\n\t\t}\n\t}\n\treturn _cache[evName];\n\t// return _cache[evName] || (_cache[evName] = _solvers[evName]? _solvers[evName].call() : _prefixedProperty.apply(null, arguments));\n};\n\n/*\nvar defaultTest = function(name, obj) {\n\tvar prefixes = /^[A-Z]/.test(name)? ucPrefixes : lcPrefixes;\n\tfor (var i = 0; i < prefixes.length; i++) {\n\t\tif ((\"on\" + prefixes[i] + name) in obj) {\n\t\t\tconsole.log(\"Event '%s' found as '%s'\", name, prefixes[i] + name);\n\t\t\treturn prefixes[i] + name;\n\t\t}\n\t}\n\treturn null;\n};\n\nvar proxyTest = function(name, obj, testProp) {\n\tvar prefixes = /^[A-Z]/.test(name)? ucPrefixes : lcPrefixes;\n\tfor (var i = 0; i < prefixes.length; i++) {\n\t\tif ((prefixes[i] + testProp) in obj) {\n\t\t\tconsole.log(\"Event %s inferred as '%s' from property '%s'\", name, prefixes[i] + name, testProp);\n\t\t\treturn prefixes[i] + name;\n\t\t}\n\t}\n\treturn null;\n};\n*/\n",
    "/**\n/* @module utils/prefixedProperty\n/*/\n\n/** @type {module:utils/prefixes} */\nconst prefixes = require(\"./prefixes\");\n/** @type {Number} prefix count */\nvar _prefixNum = prefixes.length;\n/** @type {Array} cached values */\nvar _cache = {};\n\nvar _prefixedProperty = function(prop, obj) {\n\tvar prefixedProp, camelProp;\n\n\tif (prop in obj) {\n\t\tconsole.log(\"Property '%s' found unprefixed\", prop);\n\t\treturn prop;\n\t}\n\tcamelProp = prop[0].toUpperCase() + prop.slice(1);\n\tfor (var i = 0; i < _prefixNum; i++) {\n\t\tprefixedProp = prefixes[i] + camelProp;\n\t\tif (prefixedProp in obj) {\n\t\t\tconsole.log(\"Property '%s' found as '%s'\", prop, prefixedProp);\n\t\t\treturn prefixedProp;\n\t\t}\n\t}\n\tconsole.error(\"Property '%s' not found\", prop);\n\treturn null;\n};\n\n/**\n * get the prefixed property\n * @param {String} property name\n * @param {Object} look-up object\n * @returns {String|null} prefixed\n */\nmodule.exports = function(prop, obj) {\n\treturn _cache[prop] || (_cache[prop] = _prefixedProperty(prop, obj || document.body.style));\n};\n",
    "/**\n/* @module utils/prefixedStyleName\n/*/\n\n/** @type {module:utils/prefixes} */\nconst prefixes = require(\"./prefixes\"); //.map(function(prefix) { return \"-\" + prefix + \"-\"; });\n/** @type {Number} prefix count */\nvar _prefixNum = prefixes.length;\n/** @type {Array} cached values */\nvar _cache = {};\n\nvar _prefixedStyleName = function(style, styleObj) {\n\tvar prefixedStyle;\n\n\tif (style in styleObj) {\n\t\tconsole.log(\"CSS style '%s' found unprefixed\", style);\n\t\treturn style;\n\t}\n\tfor (var i = 0; i < _prefixNum; i++) {\n\t\tprefixedStyle = \"-\" + prefixes[i] + \"-\" + style;\n\t\t// prefixedStyle = prefixes[i] + style;\n\t\tif (prefixedStyle in styleObj) {\n\t\t\tconsole.log(\"CSS style '%s' found as '%s'\", style, prefixedStyle);\n\t\t\treturn prefixedStyle;\n\t\t}\n\t}\n\tconsole.warn(\"CSS style '%s' not found\", style);\n\treturn null;\n};\n\n/**\n * get the prefixed style name\n * @param {String} style name\n * @param {Object} look-up style object\n * @returns {String|Undefined} prefixed\n */\nmodule.exports = function(style, styleObj) {\n\t// return _cache[style] || (_cache[style] = _prefixedStyleName_reverse(style, styleObj || document.body.style));\n\treturn _cache[style] || (_cache[style] = _prefixedStyleName(style, styleObj || document.body.style));\n};\n\n// /** @type {module:utils/strings/camelToDashed} */\n// var camelToDashed = require(\"./strings/camelToDashed\");\n// /** @type {module:utils/prefixedProperty} */\n// var prefixedProperty = require(\"./prefixedProperty\");\n// /** @type {module:utils/strings/dashedToCamel} */\n// var dashedToCamel = require(\"./strings/dashedToCamel\");\n//\n// var _prefixedStyleName_reverse = function (style, styleObj) {\n// \tvar camelProp, prefixedProp;\n// \tcamelProp = dashedToCamel(style);\n// \tprefixedProp = prefixedProperty(camelProp, styleObj);\n// \treturn prefixedProp? (camelProp === prefixedProp? \"\" : \"-\") + camelToDashed(prefixedProp) : null;\n// };\n",
    "module.exports = [\"webkit\", \"moz\", \"ms\", \"o\"];\n",
    "module.exports = function(pp, reason) {\n\tif (pp.length > 0) {\n\t\tpp.forEach(function(p, i, a) {\n\t\t\tp.reject(reason);\n\t\t\ta[i] = null;\n\t\t});\n\t\tpp.length = 0;\n\t}\n\treturn pp;\n};\n",
    "module.exports = function(pp, result) {\n\tif (pp.length != 0) {\n\t\tpp.forEach(function(p, i, a) {\n\t\t\tp.resolve(result);\n\t\t\ta[i] = null;\n\t\t});\n\t\tpp.length = 0;\n\t}\n\treturn pp;\n};\n",
    "module.exports = function(str) {\n\treturn str.replace(/[A-Z]/g, function($0) {\n\t\treturn \"-\" + $0.toLowerCase();\n\t});\n};\n",
    "module.exports = function(s) {\n\treturn s.replace(/<[^>]+>/g, \"\");\n};\n",
    "/** @type {module:hammerjs} */\nconst Hammer = require(\"hammerjs\");\n\n// /**\n//  * get a usable string, used as event postfix\n//  * @param {Const} state\n//  * @returns {String} state\n//  */\n// function stateStr(state) {\n// \tif (state & Hammer.STATE_CANCELLED) {\n// \t\treturn \"cancel\";\n// \t} else if (state & Hammer.STATE_ENDED) {\n// \t\treturn \"end\";\n// \t} else if (state & Hammer.STATE_CHANGED) {\n// \t\treturn \"move\";\n// \t} else if (state & Hammer.STATE_BEGAN) {\n// \t\treturn \"start\";\n// \t}\n// \treturn \"\";\n// }\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction dirStr(direction) {\n\tif (direction == Hammer.DIRECTION_DOWN) {\n\t\treturn \"down\";\n\t} else if (direction == Hammer.DIRECTION_UP) {\n\t\treturn \"up\";\n\t} else if (direction == Hammer.DIRECTION_LEFT) {\n\t\treturn \"left\";\n\t} else if (direction == Hammer.DIRECTION_RIGHT) {\n\t\treturn \"right\";\n\t}\n\treturn \"\";\n}\n\n///**\n// * Pan\n// * Recognized when the pointer is down and moved in the allowed direction.\n// * @constructor\n// * @extends AttrRecognizer\n// */\n//function PanRecognizer() {\n//\tHammer.AttrRecognizer.apply(this, arguments);\n//\n//\tthis.pX = null;\n//\tthis.pY = null;\n//}\n//\n//inherit(PanRecognizer, Hammer.AttrRecognizer, {\n//\t/**\n//\t/* @namespace\n//\t/* @memberof PanRecognizer\n//\t/*/\n//\tdefaults: {\n//\t\tevent: \"pan\",\n//\t\tthreshold: 10,\n//\t\tpointers: 1,\n//\t\tdirection: DIRECTION_ALL\n//\t},\n//\n//\tgetTouchAction: function() {\n//\t\tvar direction = this.options.direction;\n//\t\tvar actions = [];\n//\t\tif (direction & DIRECTION_HORIZONTAL) {\n//\t\t\tactions.push(TOUCH_ACTION_PAN_Y);\n//\t\t}\n//\t\tif (direction & DIRECTION_VERTICAL) {\n//\t\t\tactions.push(TOUCH_ACTION_PAN_X);\n//\t\t}\n//\t\treturn actions;\n//\t},\n//\n//\tdirectionTest: function(input) {\n//\t\tvar options = this.options;\n//\t\tvar hasMoved = true;\n//\t\tvar distance = input.distance;\n//\t\tvar direction = input.direction;\n//\t\tvar x = input.deltaX;\n//\t\tvar y = input.deltaY;\n//\n//\t\t// lock to axis?\n//\t\tif (!(direction & options.direction)) {\n//\t\t\tif (options.direction & DIRECTION_HORIZONTAL) {\n//\t\t\t\tdirection = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n//\t\t\t\thasMoved = x != this.pX;\n//\t\t\t\tdistance = Math.abs(input.deltaX);\n//\t\t\t} else {\n//\t\t\t\tdirection = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n//\t\t\t\thasMoved = y != this.pY;\n//\t\t\t\tdistance = Math.abs(input.deltaY);\n//\t\t\t}\n//\t\t}\n//\t\tinput.direction = direction;\n//\t\treturn hasMoved && distance > options.threshold && direction & options.direction;\n//\t},\n//\n//\tattrTest: function(input) {\n//\t\treturn AttrRecognizer.prototype.attrTest.call(this, input) &&\n//\t\t\t(this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n//\t},\n//\n//\temit: function(input) {\n//\t\tthis.pX = input.deltaX;\n//\t\tthis.pY = input.deltaY;\n//\n//\t\tvar direction = dirStr(input.direction);\n//\t\tif (direction) {\n//\t\t\tthis.manager.emit(this.options.event + direction, input);\n//\t\t}\n//\n//\t\tthis._super.emit.call(this, input);\n//\t}\n//});\n\n/**\n * SmoothPan\n * @constructor\n * @extends Hammer.Pan\n */\nfunction SmoothPan() {\n\tvar ret = Hammer.Pan.apply(this, arguments);\n\tthis.thresholdOffsetX = null;\n\tthis.thresholdOffsetY = null;\n\tthis.thresholdOffset = null;\n\treturn ret;\n}\n\nHammer.inherit(SmoothPan, Hammer.Pan, {\n\temit: function(input) {\n\t\t// Inheritance breaks, so this code is taken from PanRecognizer.emit\n\t\t//\tthis._super.emit.call(this, input); // Triggers infinite recursion\n\t\t//\tHammer.Pan.prototype.emit.apply(this, arguments); // This breaks too\n\n\t\tvar threshold = this.options.threshold;\n\t\tvar direction = input.direction;\n\n\t\tif (this.state == Hammer.STATE_BEGAN) {\n\t\t\tthis.thresholdOffsetX = (direction & Hammer.DIRECTION_HORIZONTAL) ? ((direction & Hammer.DIRECTION_LEFT) ? threshold : -threshold) : 0;\n\t\t\tthis.thresholdOffsetY = (direction & Hammer.DIRECTION_VERTICAL) ? ((direction & Hammer.DIRECTION_UP) ? threshold : -threshold) : 0;\n\t\t\t// this.thresholdOffset = (direction & Hammer.DIRECTION_HORIZONTAL)? input.thresholdOffsetX : input.thresholdOffsetY;\n\t\t\t// console.log(\"RECOGNIZER STATE\", dirStr(direction), stateStr(this.state), this.thresholdOffsetX);\n\t\t}\n\t\tinput.thresholdOffsetX = this.thresholdOffsetX;\n\t\tinput.thresholdOffsetY = this.thresholdOffsetY;\n\t\tinput.thresholdDeltaX = input.deltaX + this.thresholdOffsetX;\n\t\tinput.thresholdDeltaY = input.deltaY + this.thresholdOffsetY;\n\n\t\tthis.pX = input.deltaX;\n\t\tthis.pY = input.deltaY;\n\n\t\tdirection = dirStr(direction);\n\t\tif (direction) {\n\t\t\tthis.manager.emit(this.options.event + direction, input);\n\t\t}\n\t\treturn Hammer.Recognizer.prototype.emit.apply(this, arguments);\n\t}\n});\n\nmodule.exports = SmoothPan;\n",
    "module.exports={\n\t\"video_crop_px\": \"0\",\n\t\"transform_type\": \"3d\",\n\t\"transitions\": {\n\t\t\"ease\": \"ease-in-out\",\n\t\t\"duration_ms\": \"350\",\n\t\t\"delay_interval_ms\": \"34\",\n\t\t\"min_delay_ms\": \"34\"\n\t},\n\t\"breakpoints\": {\n\t\t\"landscape\": \"'(orientation: landscape)'\",\n\t\t\"portrait\": \"'(orientation: portrait)'\",\n\t\t\"xsmall-stretch\": \"'not screen and (min-width: 460px), not screen and (min-height: 420px)'\",\n\t\t\"small-stretch\": \"'not screen and (min-width: 704px), not screen and (min-height: 420px)'\",\n\t\t\"default\":\"'only screen and (min-width: 704px) and (min-height: 420px)'\",\n\t\t\"medium-wide\": \"'only screen and (min-width: 1024px) and (max-width: 1223px) and (min-height: 420px)'\",\n\t\t\"medium-wide-stretch\": \"'only screen and (min-width: 1224px) and (min-height: 420px)'\"\n\t},\n\t\"default_colors\": {\n\t\t\"color\": \"hsl(47, 5%, 15%)\",\n\t\t\"background-color\": \"hsl(47, 5%, 95%)\",\n\t\t\"link-color\": \"hsl(10, 80%, 50%)\"\n\t},\n\t\"temp\": {\n\t\t\"collapse_offset\": \"360\"\n\t},\n\t\"_ignore\": {\n\t\t\"transitions\": {\n\t\t\t\"ease\": \"cubic-bezier(0.42, 0.0, 0.58, 1.0)\",\n\t\t\t\"duration_ms\": \"400\",\n\t\t\t\"delay_interval_ms\": \"134\",\n\t\t\t\"min_delay_ms\": \"34\"\n\t\t},\n\t\t\"default_colors\": {\n\t\t\t\"--link-color\": \"hsl(10, 80%, 50%)\",\n\t\t\t\"--alt-background-color\": \"unset\"\n\t\t},\n\t\t\"units\": {\n\t\t\t\"hu_px\": \"20\",\n\t\t\t\"vu_px\": \"12\"\n\t\t},\n\t\t\"breakpoints\": {\n\t\t\t\"medium-wide-stretch\": \"'only screen and (min-width: 1024px) and (min-height: 420px)'\",\n\t\t\t\"large-wide\": \"'only screen and (min-width: 1824px) and (min-height: 1024px)'\",\n\t\t\t\"mobile\": \"'not screen and (min-width: 704px), not screen and (min-height: 540px)'\",\n\t\t\t\"unsupported\": \"'not screen and (min-width: 704px)'\",\n\t\t\t\"unquoted\": \"only screen and (min-width: 1824px)\",\n\t\t\t\"unquoted_neg\": \"not screen and (min-width: 704px)\",\n\t\t\t\"quoted_combined\": \"'not screen and (min-width: 704px), not screen and (min-height: 540px)'\",\n\t\t\t\"array\": [\n\t\t\t\t\"only screen and (min-width: 704px)\",\n\t\t\t\t\"not screen and (min-width: 704px)\",\n\t\t\t\t\"not screen and (min-height: 540px)\"\n\t\t\t]\n\t\t}\n\t}\n}\n"
  ]
}